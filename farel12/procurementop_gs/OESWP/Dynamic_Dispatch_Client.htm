<html lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">

<meta name="DC.Type" content="topic">
<meta name="description" content="To dynamically invoke web services, you can create a Dispatch client and configure:"><meta content="all" name="robots">
<meta content="yes" name="mos_crawl">
<meta content="SOAP Web Services for Oracle Procurement Cloud " name="dcterms.title">
<meta content="SOAP Web Services for Oracle Procurement Cloud " name="doctitle">
<meta content="E74440-01" name="dcterms.identifier">
<meta content="E67967-01" name="partno">
<meta content="OESWP" name="dcterms.isVersionOf">
<meta content="Fusion Publishing Server, UAE Print Staging" name="generator">
<meta content="Fri Dec 09 12:40:19 MST 2016" name="dcterms.created">
<meta name="relnum" content="Release 12">
<meta name="rel_num" content="Release 12"><link type="text/html" title="Previous" href="Static_JAX_WS_Proxy_Client.htm" rel="Prev">
<link type="text/html" title="Next" href="Database.htm" rel="Next">
<link type="text/html" title="Home" href="../../index.html" rel="Start">
<link type="text/html" title="Copyright" href="../dcommon/html/cpyr.htm" rel="Copyright">
<script src="../dcommon/js/headfoot.js" type="application/javascript"></script>
<script src="../nav/js/doccd.js" type="application/javascript"></script>
<link type="text/html" title="Contents" href="toc.htm" rel="Contents">
<link rel="schema.dcterms" href="http://purl.org/dc/terms/">
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1" name="viewport">
<link type="text/css" href="../dcommon/css/header.css" rel="stylesheet">
<link type="text/css" href="../dcommon/css/footer.css" rel="stylesheet">
<link type="text/css" href="../dcommon/css/fonts.css" rel="stylesheet">
<link type="text/css" href="../dcommon/css/foundation.css" rel="stylesheet">
<link type="text/css" href="../dcommon/css/codemirror.css" rel="stylesheet">
<link type="text/css" href="../nav/css/html5.css" rel="stylesheet">
<link type="text/css" href="../dcommon/css/respond-480-tablet.css" rel="stylesheet">
<link type="text/css" href="../dcommon/css/respond-768-laptop.css" rel="stylesheet">
<link type="text/css" href="../dcommon/css/respond-1140-deskop.css" rel="stylesheet">
<script src="../dcommon/js/modernizr.js" type="application/javascript"></script>
<script src="../dcommon/js/codemirror.js" type="application/javascript"></script>
<script src="../dcommon/js/jquery.js" type="application/javascript"></script>
<script src="../dcommon/js/foundation.min.js" type="application/javascript"></script>
<script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-53addf516e0e58a5" type="application/javascript"></script>
<script src="../dcommon/js/jqfns.js" type="application/javascript"></script>
<script src="../dcommon/js/ohc-inline-videos.js" type="application/javascript"></script>
<meta class="foundation-mq-topbar">
<link type="text/css" href="../dcommon/css/Fusionapps_022016.css" rel="stylesheet">
<link type="text/css" href="../dcommon/css/oer.css" rel="stylesheet">
DynamicDispatchClient-62DC4BAB<meta name="DC.Language" content="en">
<title>Dynamic Dispatch Client</title>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body><a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header></header><div class="row" id="CONTENT"><div class="IND large-9 medium-8 columns"><div id="EXTRATOC"></div><span id="PAGE" style="display:none;">45/166</span><a name="BEGIN" id="BEGIN"></a><div class="fusiondoc" id="DynamicDispatchClient-62DC4BAB">

   <h1 class="title topictitle1" id="DynamicDispatchClient-62DC4BAB__topic-192-62DC554A">Dynamic Dispatch Client</h1>

   
   
   <div class="body" id="topic-204-62DC554B"><p class="shortdesc">To dynamically invoke web services,
you can create a Dispatch client and configure:</p>

      <ul class="ul" id="topic-100-05186D8D">
         <li class="li" id="topic-102-05186D8E"><p>Security properties depending on the security
policy to be used</p></li>

         <li class="li" id="topic-104-05186D8E"><p>Keystore requirements</p></li>

      </ul>

      <p class="p" id="topic-206-62DC554E">The following is an example code:</p>

      <pre class="pre codeblock" id="topic-160-017BEA37">System.setProperty("oracle.security.jps.config", "path_to_jps-config.xml");
    QName qname = new QName(svcns, svcname);
    Service service = Service.create(new URL(endpointURL + WSDL_URL_SUFFIX), qname);
    QName portname = new QName(svcns, portname);
    SecurityPolicyFeature[] features =
      new SecurityPolicyFeature[] { new SecurityPolicyFeature("policy:" + policy) };
    Dispatch&lt;SOAPMessage&gt; dispatcher =
      service.createDispatch(portname, SOAPMessage.class, Service.Mode.MESSAGE,  features);
	  
    Map&lt;String, Object&gt; rc = dispatcher.getRequestContext();
    if (!policy.contains("saml"))
      rc.put(SecurityConstants.ClientConstants.WSS_CSF_KEY, "csf-key");
    else
      rc.put(BindingProvider.USERNAME_PROPERTY, username);
    //only these two don't need keystore
    if ("oracle/wss_http_token_over_ssl_client_policy".equals(policy) ||
        "oracle/wss_username_token_over_ssl_client_policy".equals(policy)) {
    } else {
        //location of the keystore file
        rc.put(ClientConstants.WSSEC_KEYSTORE_LOCATION, jksFPath);
      }

      if (policy.contains("saml")) {
        //client side private key, keystore sign alias; without this, invoking service at client side fails
        rc.put(ClientConstants.WSSEC_SIG_KEY_ALIAS, signKey); 

        //client side private key; without this, the user cannot be authenticated

        rc.put(ClientConstants.WSSEC_ENC_KEY_ALIAS, encKey);
      }
    }

    // Obtain a preconfigured SAAJ MessageFactory
    MessageFactory factory = ((SOAPBinding)dispatcher.getBinding()).getMessageFactory();
 
    // Create SOAPMessage Request
    SOAPMessage req = factory.createMessage();
    // Request Body
    SOAPBody body = req.getSOAPBody();
    // Construct request
    DocumentBuilder docBuilder = getDocumentBuilder();
    ByteArrayInputStream is = new ByteArrayInputStream(requestStr.getBytes());
    try {
        Document doc = docBuilder.parse(is);
        body.addDocument(doc);
    } catch (Exception e) {
        throw new RuntimeException("Cannot parse " + requestStr, e);
    }

    //invoke the service
    SOAPMessage res = dispatcher.invoke(req);
    //get response
    if (res != null) {
      ByteArrayOutputStream os = new ByteArrayOutputStream();
      res.writeTo(os);
    }
</pre>

   </div>

   <nav role="navigation" class="related-links">
<div class="linklist linklist"><h5 class="relatedlinks">Related Topics</h5>
<ul>
<li><p><a class="link" href="HTTP_Client.htm">HTTP
Client</a></p></li>
<li><p><a class="link" href="Static_JAX_WS_Proxy_Client.htm">Static JAX-WS Proxy Client</a></p></li>
<li><p><a class="link" href="Java_Client.htm">Java
Client</a></p></li>
<li><p><a class="link" href="Invoking_SOAP_Web_Services.htm">Invoking SOAP Web Services</a></p></li></ul></div>
</nav>
</div></div></div><footer></footer><noscript><p>Scripting on this page enhances content navigation, but does not change the content in any way.</p></noscript>
<!-- Start SiteCatalyst code -->
<script type="application/javascript" src="//www.oracleimg.com/us/assets/metrics/ora_docs.js"></script>
<!-- End SiteCatalyst code -->
</body>
</html>