<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Upgrade to Oracle Fusion Applications Release 12</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="This section describes the steps that must be performed to upgrade to Oracle Fusion Applications Release 12 (11.12.x.0.0). The following topics are discussed:" />
<meta name="dcterms.created" content="2018-03-22T11:25:04Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Applications Upgrade Guide" />
<meta name="dcterms.identifier" content="E70415-09" />
<meta name="dcterms.isVersionOf" content="OAPUP" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2011, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="GUID-3DDF50C7-783C-4091-B1BF-20A5A5465BA1.htm" title="Previous" type="text/html" />
<link rel="Next" href="GUID-3B21D3BE-4AFB-4246-908D-00F3D73AC53A.htm" title="Next" type="text/html" />
<link rel="alternate" href="OAPUP.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC"></a> <span id="PAGE" style="display:none;">10/17</span> <!-- End Header -->
<a id="OAPUP1579"></a><a id="OAPUP1578"></a>
<h1 id="OAPUP-GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC" class="sect1"><span class="enumeration_chapter">6</span> Upgrade to Oracle Fusion Applications Release 12</h1>
<div>
<div><span>This section describes the steps that must be performed to upgrade to <span id="FA">Oracle Fusion Applications</span> Release 12 (11.12.x.0.0). The following topics are discussed:</span></div>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-9890B228-A81D-4541-B01A-135D88E3164B">Perform Pre-Upgrade Steps During Downtime</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-144BF64B-97C5-43E5-9CA7-7986800A102C" title="Before running RUP Installer, the following pre-upgrade steps must be performed:The Database Credential Store (DBCS) Wallet Retrofit Utility runs on the Fusion Applications (FA) middle tier. As part of the DBCS Wallet Retrofit process, you must extract the credentials for all common users, the TDE wallet password (if any), and the Credential Store Framework (CSF) on the FA middle tier to a temporary wallet file. Then, run CCU on one of the database (DB) hosts in a special mode, which merges the contents of the temporary wallet into the DBCS wallet, creating the DBCS wallet in case it does not already exist. Finally, copy the updated DBCS wallet file to the other DB host.To run the Credential Store Framework (CSF) cache utility manually, perform the following steps:Orchestration pauses after first RUP installer is completed. No manual step is&nbsp;required.Update the task status to success on all hosts by performing the following steps:After running RUP Installer, the following post-upgrade step must be performed to clean up the middle tier credential store:The Credential Store Framework (CSF) Cleanup Utility runs on the Fusion Applications (FA) middle tier and removes all common users from CSF. To run the CSF Cleanup Utility manually, perform the following steps:">Upgrade to Release 12</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-AC31712A-6D9E-4EB0-946A-A80052DFFEB4">Pause Point Steps</a></p>
</li>
</ul>
</div>
<div class="sect2"><a id="GUID-9890B228-A81D-4541-B01A-135D88E3164B"></a>
<h2 id="OAPUP-GUID-9890B228-A81D-4541-B01A-135D88E3164B" class="sect2"><span class="enumeration_section">6.1</span> Perform Pre-Upgrade Steps During Downtime</h2>
<div>
<p>The following steps must be performed before starting the upgrade during downtime:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-C215AD7D-459D-4FF1-9FA3-9D4E642FF8A4">Run the LCM Schema Seed Utility to Add LCM Schemas</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-28AF2226-1334-4661-AC73-6F48BDE08BC2">Prepare to Register Database Schema Information</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-68D8B97E-C786-40FA-8FBB-0F32970D2A48">Prepare to Register System User Information</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-5A007F1D-84EE-4793-B275-712C7FDB0050">Direct Upgrade JAZN</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-95909798-2F28-4059-BDEC-FE7F817E99AC">Run OPSS Dup Tool</a></p>
</li>
</ul>
</div>
<div class="sect3"><a id="GUID-C215AD7D-459D-4FF1-9FA3-9D4E642FF8A4"></a>
<h3 id="OAPUP-GUID-C215AD7D-459D-4FF1-9FA3-9D4E642FF8A4" class="sect3"><span class="enumeration_section">6.1.1</span> Run the LCM Schema Seed Utility to Add LCM Schemas</h3>
<div>
<p>Perform the steps in this section only if the upgrade to Release 12 is from Release 8 or Release 9. Skip this step if your starting point is Release 10. Starting in Release 10, all LifeCycle Management (LCM) operations use LCM schemas instead of SYS schemas. The LCM Schema Seed utility updates the environment so that Release 12 upgrade tasks use LCM users instead of the SYS user.</p>
<p>Before running this utility, check if the environment has Database Vault enabled. If it is enabled, then DVOWNER credentials must be available in the Credential Store Framework (CSF).</p>
<p>To run the utility, perform the following steps :</p>
<ol>
<li>
<p>Create a work directory with read and write permissions, referred to as <span class="italic"><code class="codeph">WORK_DIR</code></span>.</p>
</li>
<li>
<p>Download and unzip patch 21167623 in <span class="italic"><code class="codeph">WORK_DIR</code></span>, which creates the following directories:</p>
<ul style="list-style-type: disc;">
<li>
<p>bin</p>
</li>
<li>
<p>ext/jlib/ext_jlib_jars/fapatchset/techpatch.jar</p>
</li>
<li>
<p>pcu/pcubundle.zip</p>
</li>
<li>
<p>sql</p>
</li>
<li>
<p>config</p>
</li>
<li>
<p>patches (the required patches are located in the following subdirectory)</p>
<ul style="list-style-type: disc;">
<li>
<p>fusionapps/patch/</p>
</li>
</ul>
</li>
<li>
<p>rcu (this directory is used for the next step)</p>
</li>
</ul>
</li>
<li>
<p>Download <code class="codeph">appsrcu</code> from the <span class="italic"><code class="codeph">REPOSITORY_LOCATION</code></span> to the <code class="codeph">rcu</code> directory created in the previous step.</p>
<pre dir="ltr">
cp REPOSITORY_LOCATION/installers/apps_rcu/linux/rcuHome_fusionapps_linux.zip <span class="italic">WORK_DIR</span>/rcu
cd <span class="italic">WORK_DIR</span>/rcu
unzip rcuHome_fusionapps_linux.zip
</pre></li>
<li>
<p>Run the <code class="codeph">lcmSchemaSeedUtil.sh</code> utility from the bin directory created in Step 3 as follows:</p>
<p>This utility assumes that <code class="codeph">rcuHome_fusionapps_linux.zip</code> was unzipped in <span class="italic"><code class="codeph">WORK_DIR/</code></span><code class="codeph">rcu</code> unless a different location using the <code class="codeph">-rculoc</code> parameter is specified.</p>
<pre dir="ltr">
cd <span class="italic">WORK_DIR</span>/bin
lcmSchemaSeeding.sh -appbase APPLICATIONS_BASE [-rculoc <span class="italic">directory_name</span>]
</pre></li>
<li>
<p>Review the log files located in <span class="italic"><code class="codeph">APPLICATIONS_CONFIG/</code></span><code class="codeph">lcm/lss_logs</code>.</p>
</li>
</ol>
<div class="section">
<p class="subhead3">LCM Schema Seed Utility for Solaris</p>
<p>The LCM Schema Seed Utility performs the following activities, which are internally orchestrated using the Tech Patch Utility (TPU) framework:</p>
<ul style="list-style-type: disc;">
<li>
<p>Applies the required LCM patches using OPatch</p>
</li>
<li>
<p>Runs a Password Change Utility (PCU) to seed the credentials for the 6 new schemas in the CSF</p>
</li>
<li>
<p>Runs the Repository Creation Utility (RCU) to create the new schemas</p>
</li>
<li>
<p>Runs the various SQL grant scripts to configure the new schemas properly</p>
</li>
</ul>
<p>To make the LCM Seed Utility work for Solaris environments, run RCU separately by performing the following steps:</p>
<ol>
<li>
<p>Create a work directory with read and write permissions, referred to as <code class="codeph"><span class="codeinlineitalic">WORK_DIR</span></code>.</p>
</li>
<li>
<p>Download <code class="codeph">apps_rcu_11g</code> from the <code class="codeph"><span class="codeinlineitalic">REPOSITORY_LOCATION</span></code> to the <code class="codeph">rcu</code> directory created in Step 1 as shown in the following example:</p>
<pre dir="ltr">
cp <span class="italic">REPOSITORY_LOCATION</span>/installers/apps_rcu_11g/linux/rcuHome_fusionapps_linux.zip <span class="italic">WORK_DIR</span>/rcu 
cd <span class="italic">WORK_DIR</span>/rcu 
unzip rcuHome_fusionapps_linux.zip
</pre></li>
<li>
<p>Set <code class="codeph">JAVA_HOME</code> and <code class="codeph">PATH</code> on the Solaris Machine.</p>
</li>
<li>
<p>Download and unzip patch 21189887 into a <code class="codeph"><span class="codeinlineitalic">WORK_DIR</span></code> on the Solaris machine and run the <code class="codeph"><span class="codeinlineitalic">WORK_DIR</span>/bin/lcmSchemaSeeding.sh</code> in <code class="codeph">preRCU</code> mode. The Schema Seed Utility will apply the patches, run PCU, and then pause/exit. For example:</p>
<pre dir="ltr">
./lcmSchemaSeeding.sh -appbase &lt;APPTOP&gt; -rculoc &lt;RCU location&gt; -mode preRCU
</pre></li>
<li>
<p>Ensure that the <code class="codeph">JAVA_HOME</code> environment variable is set properly on the Linux machine.</p>
</li>
<li>
<div class="p">Extract <code class="codeph">rcu</code> to the Linux Machine as follows:
<pre dir="ltr">
cp <span class="italic">REPOSITORY_LOCATION</span>/installers/apps_rcu_11g/linux/rcuHome_fusionapps_linux.zip <span class="italic">WORK_DIR</span>/rcu 
cd <span class="italic">WORK_DIR</span>/rcu 
unzip rcuHome_fusionapps_linux.zip
</pre></div>
</li>
<li>
<p>Unzip patch 21189887 into a <code class="codeph"><span class="codeinlineitalic">WORK_DIR</span></code> on the Linux machine and run the <code class="codeph"><span class="codeinlineitalic">WORK_DIR</span>/bin/rcuWrapper_solaris.sh</code> script as follows:</p>
<pre dir="ltr">
./rcuWrapper_solaris.sh -rculoc &lt;RCU location&gt; -jdbcstring &lt;JDBC connect string of database&gt; -instancedir &lt;Complete network path of instance dir&gt; 
</pre></li>
<li>
<div class="p">Provide the credentials for the SYS schema and for the following 6 new schemas. These credentials must be retrieved from the CSF:
<pre dir="ltr">
LCM_SUPER_ADMIN
LCM_USER_ADMIN
LCM_EXP_ADMIN
LCM_OBJECT_ADMIN
DVACCTMGR
DVOWNER
</pre></div>
</li>
<li>
<p>After creating the schemas, run the <code class="codeph">lcmSchemaSeeding.sh</code> script in <code class="codeph">postRCU</code> mode from the Solaris machine as follows:</p>
<pre dir="ltr">
./lcmSchemaSeeding.sh -appbase &lt;APPTOP&gt; -rculoc &lt;RCU location&gt; -mode postRCU
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<div class="sect3"><a id="GUID-28AF2226-1334-4661-AC73-6F48BDE08BC2"></a>
<h3 id="OAPUP-GUID-28AF2226-1334-4661-AC73-6F48BDE08BC2" class="sect3"><span class="enumeration_section">6.1.2</span> Prepare to Register Database Schema Information</h3>
<div>
<p>To ensure that all database schemas are registered in the credential store, perform the following steps on the primordial host, only once:</p>
<ol>
<li id="GUID-28AF2226-1334-4661-AC73-6F48BDE08BC2__CREATETHEPCU_LOCATIONFUSIONAPPSAPPL-91DE33EB">
<div class="p">Create the <span class="italic"><code class="codeph">PCU_LOCATION/</code></span><code class="codeph">fusionapps/applications</code> directory. <span class="italic"><code class="codeph">PCU_LOCATION</code></span> is a folder specified as a property in <code class="codeph">PRIMORDIAL.properties</code>. This location must be within <span class="italic"><code class="codeph">APPLICATIONS_CONFIG</code></span>. For example:
<pre dir="ltr">
<span class="italic">APPLICATIONS_CONFIG/</span>lcm/tmp/pcu
</pre></div>
</li>
<li id="GUID-28AF2226-1334-4661-AC73-6F48BDE08BC2__UNZIPSHARED_LOCATION11.12.X.0.0REPO-ADC8A4A8">
<p>Unzip <span class="italic"><code class="codeph">SHARED_LOCATION/</code></span><code class="codeph">11.12.x.0.0/Repository/installers/pre_install/pcubundle.zip</code> into <span class="italic"><code class="codeph">PCU_LOCATION/</code></span><code class="codeph">fusionapps/applications</code>.</p>
</li>
<li id="GUID-28AF2226-1334-4661-AC73-6F48BDE08BC2__GOTOTHEPCUBINDIRECTORYASFOLLOWSCDPC-ADC8A6FC">
<div class="p">Go to the PCU bin directory as follows:
<pre dir="ltr">
cd <span class="italic">PCU_LOCATION/</span>fusionapps/applications/lcm/util/bin
</pre></div>
</li>
<li id="GUID-28AF2226-1334-4661-AC73-6F48BDE08BC2__SETTHEJAVA_HOMEENVIRONMENTVARIABLEB-91DE38EB">
<div class="p">Set the <code class="codeph">JAVA_HOME</code> environment variable before running any commands in this section as follows:
<pre dir="ltr">
setenv JAVA_HOME=<span class="italic">java_home_location</span>
</pre></div>
<p>All commands in this section must be run from <span class="italic"><code class="codeph">PCU_LOCATION</code></span><code class="codeph">/fusionapps/applications/lcm/util/bin</code>.</p>
</li>
<li>
<p>Run the <code class="codeph">templateGen</code> utility to create the <code class="codeph">csf_template.ini</code> template file as follows:</p>
<pre dir="ltr">
(UNIX)
./templateGen.sh -appbase <span class="italic">APPLICATIONS_BASE</span> -codebase <span class="italic">PCU_LOCATION</span>
</pre>
<p>For the <code class="codeph">-appbase</code> argument, specify the complete directory path to the <code class="codeph">APPLICATIONS_BASE</code> directory.</p>
<p>Refer to the following example commands:</p>
<pre dir="ltr">
(UNIX)
./templateGen.sh -appbase A<span class="italic">PPLICATIONS_BASE</span> -codebase <span class="italic">PCU_LOCATION</span> 
</pre>
<p>The <code class="codeph">templateGen</code> utility generates the following template files in the <span class="italic"><code class="codeph">PCU_LOCATION/</code></span><code class="codeph">fusionapps/applications/lcm/util/config</code> directory when the <code class="codeph">-codebase</code> option is used:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">standard_template.ini</code></p>
</li>
<li>
<p><code class="codeph">csf_template.ini</code></p>
</li>
<li>
<p><code class="codeph">validation_template.ini</code></p>
</li>
<li>
<p><code class="codeph">system_user_template.ini</code></p>
</li>
<li>
<p><code class="codeph">standard_template.properties</code></p>
</li>
<li>
<p><code class="codeph">csf_template.properties</code></p>
</li>
</ul>
<p>The command also generates the <code class="codeph">pcu_output.xml</code> file in the same directory.</p>
</li>
<li>
<p>Make a copy of <code class="codeph">csf_template.ini</code> from the <span class="italic"><code class="codeph">PCU_LOCATION</code></span><code class="codeph">/fusionapps/applications/lcm/util/config</code> directory. In this example, the copy is named <code class="codeph">csf_plain.ini</code>.</p>
</li>
<li>
<p>Manually edit <code class="codeph">csf_plain.ini</code> as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>Set the <code class="codeph">master_password</code> property to the Master Orchestration Password you previously selected.</p>
</li>
<li>
<p>For each line that contains <code class="codeph">#text#</code> or <code class="codeph">#password#</code>, replace <code class="codeph">#text#</code> or <code class="codeph">#password#</code> with the correct value for the environment. Note that this password must be a minimum of 8 characters long and it must contain at least one alphabetic character and at least one numeric or special character.</p>
</li>
<li>
<p>Do not replace <code class="codeph">#text&lt;WLS.USER&gt;#,#password&lt;WLS.PASSWORD&gt;#</code> as they are used internally by PCU preseeding tools.</p>
</li>
</ul>
<p>To prevent incorrect results, do not alter <code class="codeph">csf_plain.ini</code> beyond these changes.</p>
</li>
<li>
<p>Create an encrypted version of <code class="codeph">csf_plain.ini</code> and delete the clear-text input file. This step requires an encryption tool, such as the <code class="codeph">lcmcrypt</code> tool or the Linux <code class="codeph">gpg</code> tool, which takes an encrypted file and a passphrase and writes the decrypted contents to the standard output. In the following example, using <code class="codeph">lcmcrypt</code>, the command reads the passphrase from the standard input and produces an encrypted output file, <code class="codeph">csf_plain.ini.enc</code>:</p>
<pre dir="ltr">
(UNIX) 
echo <span class="italic">master_password</span> | ./lcmcrypt.sh -nonInteractive -encrypt -inputfile <span class="italic">complete_directory_path/</span>csf_plain.ini 
</pre></li>
<li>
<p>Run <code class="codeph">iniGen.sh</code> in non-interactive mode, which also requires a decryption tool, to take an encrypted file and a passphrase and write the decrypted contents to the standard output. The following example uses <code class="codeph">lcmcrypt</code>:</p>
<pre dir="ltr">
(UNIX)
echo <span class="italic">master_password</span> | ./lcmcrypt.sh -nonInteractive -decrypt -inputfile complete_directory_path/csf_plain.ini.enc | ./iniGen.sh -nonInteractive -templatefile <span class="italic">PCU_LOCATION</span>/fusionapps/applications/lcm/util/config/csf_template.ini -outputfile <span class="italic">PCU_LOCATION</span>/fusionapps/applications/lcm/util/config/csf_encrypted.ini -appbase <span class="italic">APPLICATIONS_BASE</span> -codebase <span class="italic">PCU_LOCATION</span>

</pre>
<p>The call to <code class="codeph">lcmcrypt</code> reads the passphrase from the standard input and writes the clear text version of <code class="codeph">csf_plain.ini.enc</code> to the standard output, which is then piped to the standard input of <code class="codeph">iniGen.sh</code>. <code class="codeph">iniGen.sh</code> uses the value of the <code class="codeph">master_password</code> property to encrypt all other passwords in the generated input file. It also alters the value of the <code class="codeph">master_password</code> property back to <code class="codeph">master_password=ignore_me</code> in the generated input file.</p>
</li>
<li>
<p>Update the <code class="codeph">CSF_ENCRYPTED_FILE</code> property in <span class="italic"><code class="codeph">ORCH_LOCATION/</code></span><code class="codeph">config/</code><span class="italic"><code class="codeph">POD_NAME/</code></span><code class="codeph">PRIMORDIAL.properties</code> with the full directory path and file name for <span class="italic"><code class="codeph">PCU_LOCATION</code></span>/<code class="codeph">fusionapps/applications/lcm/util</code><code class="codeph">/config/csf_encrypted.ini</code>. For more information, see <a href="GUID-3157F2F3-4AB5-48B5-80C3-0839F9FF52B8.htm#GUID-9E942A7E-BA7B-4BB3-8F4A-F7D59F8B8AFF__CHDHHGAA" title="Primordial host properties">Table 11-2</a>.</p>
</li>
</ol>
<p>Do not use special characters, such as @, _, $, or #, when seeding passwords. The native Repository Creation Utilities (RCUs) for Enterprise Data Quality (EDQ) and Business Intelligence Cloud (BI_CLOUD) do not support creating the schema with special characters. If special characters are used, the password must be enclosed in quotes. However, the native RCUs for EDQ and BI_CLOUD do not support such characters.</p>
<p>On the clean up, the log files are copied from <code class="codeph">&lt;staging directory&gt;/fusionapps/applications/lcm/util/logs</code> to <code class="codeph">&lt;normal_mode_log_directory&gt;/preupg_&lt;timestamp&gt;</code> and the configuration files are copied from <code class="codeph">&lt;staging directory&gt;/fusionapps/applications/lcm/util/config</code> to <code class="codeph">&lt;normal_mode_template_directory&gt;/preupg_&lt;timestamp&gt;</code>. These include the wallets that were also generated in wallet directory <code class="codeph">&lt;staging directory&gt;/fusionapps/applications/lcm/util/config</code>.</p>
<p>For more information about the utilities used in this process, see <a class="olink OASAD5591" target="_blank" href="../OASAD/GUID-59E310E0-149E-4C4B-8F29-53900D4A64E4.htm#OASAD5591">Password and Certificate Management</a> in the <span class="italic"><span id="GUID-28AF2226-1334-4661-AC73-6F48BDE08BC2__OASAD"><cite>Oracle Fusion Applications Administrator's Guide</cite></span></span>.</p>
</div>
</div>
<div class="sect3"><a id="GUID-68D8B97E-C786-40FA-8FBB-0F32970D2A48"></a>
<h3 id="OAPUP-GUID-68D8B97E-C786-40FA-8FBB-0F32970D2A48" class="sect3"><span class="enumeration_section">6.1.3</span> Prepare to Register System User Information</h3>
<div>
<p>Perform this procedure only if the upgrade to Fusion Applications Release 12 is from Release 8 or Release 9. Skip this step if the starting point is Release 10.</p>
<p>To prepare passwords for system users, perform the following steps:</p>
<ol>
<li>
<p>Make a copy of <code class="codeph">system_user_template.ini</code> from the <span class="italic"><code class="codeph">PCU_LOCATION/</code></span><code class="codeph">fusionapps/applications/lcm/util/config</code> directory. In this example, the copy is named <code class="codeph">system_user_plain.ini</code>.</p>
</li>
<li>
<p>Manually edit <code class="codeph">system_user_plain.ini</code> as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>Set the <code class="codeph">master_password</code> property to the Master Orchestration Password previously selected.</p>
</li>
<li>
<p>For each line that contains #text# or #password#, replace #text# or #password# with the correct value for the environment. Note that this password must be a minimum of 8 characters long and it must contain at least one alphabetic character and at least one numeric or special character.</p>
</li>
<li>
<p>Do not replace <code class="codeph">#text&lt;WLS.USER&gt;#</code>, and <code class="codeph">#password&lt;WLS.PASSWORD&gt;#</code>. They are used internally by the <code class="codeph">SchemaPasswordChangeTool</code>.</p>
</li>
</ul>
<p><span class="bold">MANDATORY</span>: To prevent incorrect results, do not alter <code class="codeph">system_user_plain.ini</code> beyond these changes.</p>
</li>
<li>
<p>Create an encrypted version of <code class="codeph">system_user_plain.ini</code> and delete the clear-text input file. This step requires an encryption tool, such as the <code class="codeph">lcmcrypt</code> tool or the Linux <code class="codeph">gpg</code> tool, which takes an encrypted file and a passphrase and writes the decrypted contents to the standard output. In the following example, using <code class="codeph">lcmcrypt</code>, the command reads the passphrase from the standard input and produces an encrypted output file, <code class="codeph">system_user_plain.ini.enc</code>:</p>
<pre dir="ltr">
(UNIX)
echo <span class="italic">password</span> | ./lcmcrypt.sh -nonInteractive -encrypt -inputfile complete_directory_path/system_user_plain.ini

</pre></li>
<li>
<p>Run <code class="codeph">iniGen.sh</code> in non-interactive mode. Running this script also requires a decryption tool to take an encrypted file and a passphrase, and write the decrypted contents into the standard output. The following example uses <code class="codeph">lcmcrypt</code>:</p>
<pre dir="ltr">
(UNIX)
echo <span class="italic">password</span> | ./lcmcrypt.sh -nonInteractive -decrypt -inputfile <span class="italic">complete_directory_path/</span>system_user_plain.ini.enc | ./iniGen.sh -nonInteractive -templatefile <span class="italic">PCU_LOCATION/</span>fusionapps/applications/lcm/util/config/system_user_template.ini -outputfile <span class="italic">PCU_LOCATION/</span>fusionapps/applications/lcm/util/config/system_user_encrypted.ini -appbase <span class="italic">APPLICATIONS_BASE</span> -codebase <span class="italic">PCU_LOCATION</span>

</pre>
<p>The call to <code class="codeph">lcmcrypt</code> reads the passphrase from the standard input and writes the clear text version of <code class="codeph">system_user_plain.ini.enc</code> to the standard output, which is then piped to the standard input of <code class="codeph">iniGen.sh</code>.</p>
<p><code class="codeph">iniGen.sh</code> uses the value of the <code class="codeph">master_password</code> property to encrypt all other passwords in the generated input file. It also alters the value of the <code class="codeph">master_password</code> property back to <code class="codeph">master_password=ignore_me</code> in the generated input file.</p>
</li>
</ol>
</div>
</div>
<div class="sect3"><a id="GUID-5A007F1D-84EE-4793-B275-712C7FDB0050"></a>
<h3 id="OAPUP-GUID-5A007F1D-84EE-4793-B275-712C7FDB0050" class="sect3"><span class="enumeration_section">6.1.4</span> Direct Upgrade JAZN</h3>
<div>
<div class="section">Before upgrading the Fusion Applications environment from Release 8 to Release 12 or from Release 9 to Release 12 for Jazn patching, perform the following steps during upgrade downtime:</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Back up the Java Authorization (JAZN) files listed in the following table from <code class="codeph">fusionapps</code> Release 8 or Release 9 instance:</span>
<div>
<div class="tblformal" id="GUID-5A007F1D-84EE-4793-B275-712C7FDB0050__GUID-77136479-800F-428B-A4F6-9D1FDCE31443">
<p class="titleintable">Table 6-1 Jazn Patches</p>
<table class="cellalignment190" title="Jazn Patches" summary="This table shows the Jazn patches paths and number per product family.">
<thead>
<tr class="cellalignment142">
<th class="cellalignment173" id="d22286e911">Product</th>
<th class="cellalignment173" id="d22286e913">JAZN Path Relative to <code class="codeph">APPLICATIONS_BASE/fusionapps</code></th>
<th class="cellalignment173" id="d22286e917">Patch Number</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment142">
<td class="cellalignment176" id="d22286e921" headers="d22286e911">
<p>HCM</p>
</td>
<td class="cellalignment176" headers="d22286e921 d22286e913">
<p><code class="codeph">./applications/hcm/security/policies/system-jazn-data.xml</code></p>
</td>
<td class="cellalignment176" headers="d22286e921 d22286e917">
<p>23100321</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment176" id="d22286e932" headers="d22286e911">
<p>CRM</p>
</td>
<td class="cellalignment176" headers="d22286e932 d22286e913">
<p><code class="codeph">./applications/crm/security/policies/system-jazn-data.xml</code></p>
</td>
<td class="cellalignment176" headers="d22286e932 d22286e917">
<p>23345997</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment176" id="d22286e943" headers="d22286e911">
<p>FSCM</p>
</td>
<td class="cellalignment176" headers="d22286e943 d22286e913">
<p><code class="codeph">./applications/fscm/security/policies/system-jazn-data.xml</code></p>
</td>
<td class="cellalignment176" headers="d22286e943 d22286e917">
<p>23100488</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment176" id="d22286e954" headers="d22286e911">
<p>FA-BI</p>
</td>
<td class="cellalignment176" headers="d22286e954 d22286e913">
<p><code class="codeph">./applications/com/acr/security/jazn/bip_jazn-data.xml</code></p>
</td>
<td class="cellalignment176" headers="d22286e954 d22286e917">
<p>23307572</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment176" id="d22286e965" headers="d22286e911">
<p>Applcore</p>
</td>
<td class="cellalignment176" headers="d22286e965 d22286e913">
<p><code class="codeph">./atgpf/atgpf/modules/oracle.applcp.centralui_11.1.1/exploded/EssUiApp.ear/META-INF/jazn-data.xml</code></p>
<p><code class="codeph">./atgpf/atgpf/applications/exploded/FndSetup.ear/META-INF/jazn-data.xml</code></p>
</td>
<td class="cellalignment176" headers="d22286e965 d22286e917">
<p>23307676</p>
<ul style="list-style-type: disc;">
<li>
<p>ATG 11.1.1.7.2 (Release 8)</p>
</li>
<li>
<p>ATG 11.1.1.7.3 (Release 9)</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment176" id="d22286e986" headers="d22286e911">
<p>FSM</p>
</td>
<td class="cellalignment176" headers="d22286e986 d22286e913">
<p><code class="codeph">./atgpf/setupEss/jazn-data.xml</code></p>
<p><code class="codeph">./atgpf/setup/jazn-data.xml</code></p>
</td>
<td class="cellalignment176" headers="d22286e986 d22286e917">
<p>23322216</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</li>
<li class="stepexpand" id="GUID-5A007F1D-84EE-4793-B275-712C7FDB0050__FROMMYORACLESUPPORTMOSDOWNLOADTHEAU-559B1F42"><span>Download the patches mentioned in <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-5A007F1D-84EE-4793-B275-712C7FDB0050__GUID-77136479-800F-428B-A4F6-9D1FDCE31443" title="This table shows the Jazn patches paths and number per product family.">Table 6-1</a> from My Oracle Support (MOS) as follows:</span>
<ol>
<li class="substepexpand"><span>Go to <a href="https://support.oracle.com" target="_blank">My Oracle Support</a>.</span></li>
<li class="substepexpand"><span>Click <span class="bold">Sign In</span> and log in using your My Oracle Support login name and password.</span></li>
<li class="substepexpand"><span>Click the&nbsp;<span class="bold">Patches and Updates</span>&nbsp;tab.</span></li>
<li class="substepexpand"><span>In the&nbsp;<span class="bold">Patch Search</span>&nbsp;section, select the <span class="bold">Search</span> tab, and click <span class="bold">Number/Name or Bug Number (Simple)</span>.</span></li>
<li class="substepexpand"><span>Select the <span class="bold">Patch Name or Number</span> field and enter the following patch numbers: <code class="codeph">23100321</code>, <code class="codeph">23345997</code>, <code class="codeph">23100488</code>, <code class="codeph">23307572</code>, <code class="codeph">23307676</code>, <code class="codeph">23322216</code>.</span></li>
<li class="substepexpand"><span>Click <span class="bold">Search</span>.</span>
<div>The&nbsp;Patch Search Results&nbsp;are displayed.</div>
</li>
<li class="substepexpand"><span>Click the patch number and then click <span class="bold">Download</span>. Patches are released for both Release 8 and Release 9, check the version when downloading.</span></li>
<li class="substepexpand"><span>Unzip all the zip files for the Release being upgraded from. There are six zip files for each release. The following example is for Release 8:</span>
<div>
<ol>
<li>
<p>Create a folder called <span class="bold">Patch</span> and download all the patches:</p>
<pre dir="ltr">
Patch
|-- p23100321_111800_Fusion_GENERIC.zip
|-- p23100488_111800_Fusion_GENERIC.zip
|-- p23307572_111800_Fusion_GENERIC.zip
|-- p23307676_111172_Generic.zip
|-- p23322216_111800_Fusion_GENERIC.zip
`-- p23345997_111800_Fusion_GENERIC.zip
</pre></li>
<li>
<p>Unzip all zip files using <code class="codeph">&lsquo;*.zip&rsquo;</code>:</p>
<pre dir="ltr">
Patch/
|-- 23100321
|-- 23100488
|-- 23307572
|-- 23307676
|-- 23322216
|-- 23345997
|-- p23100321_111800_Fusion_GENERIC.zip
|-- p23100488_111800_Fusion_GENERIC.zip
|-- p23307572_111800_Fusion_GENERIC.zip
|-- p23307676_111172_Generic.zip
|-- p23322216_111800_Fusion_GENERIC.zip
`-- p23345997_111800_Fusion_GENERIC.zip
</pre></li>
</ol>
</div>
</li>
</ol>
</li>
<li class="stepexpand"><span>Run the following LDAP queries to identify the version for the HCM, CRM, and FSCM stripes:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p>HCM: <code class="codeph">ldapsearch -X -h &lt;hostname&gt; -p 3060 -D &lt;admin username&gt; -w &lt;password&gt; -b "cn=hcm,cn=FusionDomain,cn=JPSContext,cn=FAPolicies" -s base "objectclass=*" orclversion</code></p>
</li>
<li>
<p>CRM: <code class="codeph">ldapsearch -X -h &lt;hostname&gt; -p 3060 -D &lt;admin username&gt; -w &lt;password&gt; -b "cn=crm,cn=FusionDomain,cn=JPSContext,cn=FAPolicies" -s base "objectclass=*" orclversion</code></p>
</li>
<li>
<p>FSCM: <code class="codeph">ldapsearch -X -h &lt;hostname&gt; -p 3060 -D &lt;admin username&gt; -w &lt;password&gt; -b "cn=fscm,cn=FusionDomain,cn=JPSContext,cn=FAPolicies" -s base "objectclass=*" orclversion</code></p>
</li>
</ul>
<p>Where</p>
<p><code class="codeph">&lt;hostname&gt;</code>: Policy store LDAP</p>
<p><code class="codeph">&lt;admin username&gt;</code>: Admin username. For example: <code class="codeph">cn=orcladmin</code></p>
<p><code class="codeph">&lt;password&gt;</code>: Admin password</p>
<p>For each query, there is an output. The following example shows an HCM output:</p>
<pre dir="ltr">
# LDAPv3
# base&lt;cn=hcm,cn=FusionDomain,cn=JPSContext,cn=FAPolicies&gt; with scope baseObject
# filter: objectclass=*
# requesting: orclversion
#

# hcm, FusionDomain, JPSContext, FAPolicies
dn: cn=hcm,cn=FusionDomain,cn=JPSContext,cn=FAPolicies
orclversion: 11.1.8.0.0
</pre></div>
</li>
<li class="stepexpand"><span>Replace the version field in the jazn xml with the version obtained from the LDAP query for these three patches 23100321 (HCM), 23345997 (CRM), and 23100488 (FSCM) as follows:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p>HCM: <code class="codeph">vi ./23100321/23100321_MW/files/hcm/security/policies/system-jazn-data.xml</code></p>
</li>
<li>
<p>CRM: <code class="codeph">vi ./23345997/crm/security/policies/system-jazn-data.xml</code></p>
</li>
<li>
<p>FSCM: <code class="codeph">vi ./23100488/fscm/security/policies/system-jazn-data.xml</code></p>
</li>
</ul>
</div>
<div>
<p>The following example shows how to replace the version field in the JAZN patch for HCM:</p>
<pre dir="ltr">
&lt;policy-store&gt;
 &lt;applications&gt;
  &lt;application locale="en_US" version="fusionapps/hcm/deploy/system-jazn-data.xml:20160513010336_23256548.0"&gt;
  &lt;name&gt;hcm&lt;/name&gt;
  &lt;app-roles&gt;
</pre>
<p>Change it as follows:</p>
<pre dir="ltr">
&lt;policy-store&gt;
 &lt;applications&gt;
  &lt;application locale="en_US" version="11.1.8.0.0"&gt;
  &lt;name&gt;hcm&lt;/name&gt;
  &lt;app-roles&gt;
</pre></div>
</li>
<li class="stepexpand"><span>Copy the JAZN files from the patch folder to the <code class="codeph">fusionapps</code> instance. The following is an example for Release 8 mentioned in Step <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-5A007F1D-84EE-4793-B275-712C7FDB0050__FROMMYORACLESUPPORTMOSDOWNLOADTHEAU-559B1F42">2</a>:</span>
<div>
<pre dir="ltr">
cp  ./23322216/setup/jazn-data.xml APPLICATIONS_BASE/fusionapps/atgpf/setup/jazn-data.xml
cp  ./23322216/setupEss/jazn-data.xml APPLICATIONS_BASE/fusionapps/atgpf/setupEss/jazn-data.xml
cp  ./23100321/23100321_MW/files/hcm/security/policies/system-jazn-data.xml APPLICATIONS_BASE/fusionapps/applications/hcm/security/policies/system-jazn-data.xml
cp  ./23100488/fscm/security/policies/system-jazn-data.xml APPLICATIONS_BASE/fusionapps/applications/fscm/security/policies/system-jazn-data.xml
cp  ./23307676/files/atgpf/modules/oracle.applcp.centralui_11.1.1/exploded/EssUiApp.ear/META-INF/jazn-data.xml APPLICATIONS_BASE/fusionapps/atgpf/modules/oracle.applcp.centralui_11.1.1/exploded/EssUiApp.ear/META-INF/jazn-data.xml
cp  ./23307676/files/atgpf/applications/exploded/FndSetup.ear/META-INF/jazn-data.xml APPLICATIONS_BASE/fusionapps/atgpf/applications/exploded/FndSetup.ear/META-INF/jazn-data.xml
cp  ./23345997/crm/security/policies/system-jazn-data.xml APPLICATIONS_BASE/fusionapps/applications/crm/security/policies/system-jazn-data.xml
cp  ./23307572/com/acr/security/jazn/bip_jazn-data.xml APPLICATIONS_BASE/fusionapps/applications/com/acr/security/jazn/bip_jazn-data.xml
</pre></div>
</li>
</ol>
</div>
</div>
<div class="sect3"><a id="GUID-95909798-2F28-4059-BDEC-FE7F817E99AC"></a>
<h3 id="OAPUP-GUID-95909798-2F28-4059-BDEC-FE7F817E99AC" class="sect3"><span class="enumeration_section">6.1.5</span> Run OPSS Dup Tool</h3>
<div>
<p>Run the OPSS dup tool by following the steps listed in <span class="italic">OPSS: How to Delete Duplicate Permission Entries in Fusion Apps Environment (Doc ID 2223825.1)</span> available on My Oracle Support. To view this document, perform the following steps:</p>
<div class="p">
<ol>
<li>
<p>Go to <a href="https://support.oracle.com/" target="_blank">My Oracle Support</a>.</p>
</li>
<li>
<p>Click&nbsp;<span class="bold">Sign In</span>&nbsp;and log in using your My Oracle Support login name and password.</p>
</li>
<li>
<p>Click the <span class="bold">Knowledge</span> tab.</p>
</li>
<li>
<p>In the <span class="bold">Enter search terms</span> field, enter &ldquo;Doc ID 2223825.1&rdquo;</p>
<p>The Knowledge Base Search Results are displayed.</p>
</li>
<li>
<p>Click the document's hyperlink to view it.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<a id="OAPUP2351"></a>
<div class="sect2"><a id="GUID-144BF64B-97C5-43E5-9CA7-7986800A102C"></a>
<h2 id="OAPUP-GUID-144BF64B-97C5-43E5-9CA7-7986800A102C" class="sect2"><span class="enumeration_section">6.2</span> Upgrade to Release 12</h2>
<div>
<p>Perform the following steps to upgrade to Oracle Fusion Applications Release 12 (11.12.x.0.0):</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-CE1F4CE1-91DE-4DD3-B399-619213277F60" title="Before running RUP Installer, the following pre-upgrade steps must be performed:">Update the Database and Middle Tier Credential Stores</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-3FBB01B1-047B-4699-A166-66B9951C2966">Run Upgrade Orchestrator During Downtime</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-BB5E2FAC-6CA0-40EF-8EF7-E7C37F2C4B0D">Pause Point 1 - Run RUP Lite for OVM in Pre-Root Mode (Oracle VM Only)</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-9E8B7CD2-0E44-4A36-8505-47779B1EA62B">Update Status to Success (Oracle VM Only)</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-134063FB-70D2-43A1-968D-5BD2BAF3E0B3">Resume Upgrade Orchestrator (Oracle VM Only)</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-6BC76A09-C87E-43C0-9343-805B8F24D6F9">Pause Point 2- Upgrade Oracle Identity Management to Release 12</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-1EEED638-D208-4B18-BEB3-CF9A3A74C522" title="Orchestration pauses after first RUP installer is completed. No manual step is&nbsp;required.">Pause Point 3 - Reload Orchestration</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-CEDD71C1-E171-4DD3-B06A-977290FB8383" title="Update the task status to success on all hosts by performing the following steps:">Update Status to Success&nbsp;(Reload Orchestration)</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-53C04013-37E2-45C1-9CA9-66982E53699D">Resume Upgrade Orchestrator (Reload Orchestration)</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-8F198C4E-C677-4DAC-B296-43BF72F99B94">Pause Point 4- Run RUP Lite for OVM in Post-Root Mode (Oracle VM Only)</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-17A41000-E5E3-4028-838A-D6B1570C6040">Update Status to Success (Oracle VM Only)</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-8BF826F4-455A-44EE-9AF2-7D74944D6DA7">Resume Upgrade Orchestrator (Oracle VM Only)</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-643AFEA8-28E5-4D6C-B63B-805CFF32C8EE">Pause Point 5 - Create the Incremental Provisioning Response File</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-EB56EA5B-C87A-43C0-B515-61549436BAC8">Update Status to Success (Incremental Provisioning Response File)</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-4BC8FBF6-0C8D-4E89-84F1-3F3C06F008C5">Resume Upgrade Orchestrator (Incremental Provisioning Response File)</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-9A8B6981-0A77-473D-893E-BC1000A03292">Pause Point 6 - Perform Incremental Provisioning</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-4A95138C-0300-4ED1-8D57-5A7A524C1F42">Update Status to Success (Incremental Provisioning)</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-E3DBAA37-DE71-474A-B4CB-2EB6A23A15FC">Resume Upgrade Orchestrator</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-8ACAF982-B202-459C-BF02-74F8C797E74F">Upgrade Orchestrator Completes Successfully</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-E9C9825C-73F7-429E-BDC6-526ED2F6C32C" title="After running RUP Installer, the following post-upgrade step must be performed to clean up the middle tier credential store:">Clean Up the Middle Tier Credential Store</a></p>
</li>
</ul>
</div>
<div class="sect3"><a id="GUID-CE1F4CE1-91DE-4DD3-B399-619213277F60"></a>
<h3 id="OAPUP-GUID-CE1F4CE1-91DE-4DD3-B399-619213277F60" class="sect3"><span class="enumeration_section">6.2.1</span> Update the Database and Middle Tier Credential Stores</h3>
<div>
<p>Before running RUP Installer, the following pre-upgrade steps must be performed:</p>
<div class="p">
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-083DA2B9-1422-4456-95D2-62913EA73FFD" title="The Database Credential Store (DBCS) Wallet Retrofit Utility runs on the Fusion Applications (FA) middle tier. As part of the DBCS Wallet Retrofit process, you must extract the credentials for all common users, the TDE wallet password (if any), and the Credential Store Framework (CSF) on the FA middle tier to a temporary wallet file. Then, run CCU on one of the database (DB) hosts in a special mode, which merges the contents of the temporary wallet into the DBCS wallet, creating the DBCS wallet in case it does not already exist. Finally, copy the updated DBCS wallet file to the other DB host.">Run Database Credential Store Retrofit Utility in Pods Where EM is Not Present</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-765975A2-1428-46D4-9937-51A373D26355" title="To run the Credential Store Framework (CSF) cache utility manually, perform the following steps:">Run the CSF Cache Utility Manually in Pods Where EM is Not Present</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4"><a id="GUID-083DA2B9-1422-4456-95D2-62913EA73FFD"></a>
<h4 id="OAPUP-GUID-083DA2B9-1422-4456-95D2-62913EA73FFD" class="sect4"><span class="enumeration_section">6.2.1.1</span> Run Database Credential Store Retrofit Utility in Pods Where EM is Not Present</h4>
<div>
<p>The Database Credential Store (DBCS) Wallet Retrofit Utility runs on the Fusion Applications (FA) middle tier. As part of the DBCS Wallet Retrofit process, you must extract the credentials for all common users, the TDE wallet password (if any), and the Credential Store Framework (CSF) on the FA middle tier to a temporary wallet file. Then, run CCU on one of the database (DB) hosts in a special mode, which merges the contents of the temporary wallet into the DBCS wallet, creating the DBCS wallet in case it does not already exist. Finally, copy the updated DBCS wallet file to the other DB host.</p>
<div class="section">Run the DBCS Wallet Retrofit Utility on the FA middle tier by performing the following steps:</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Create the <span class="italic"><code class="codeph">PCU_LOCATION/</code></span><code class="codeph">fusionapps/applications</code> directory. <span class="italic"><code class="codeph">PCU_LOCATION</code></span> is a folder specified as a property in <code class="codeph">PRIMORDIAL.properties</code>. This location must be within <span class="italic"><code class="codeph">APPLICATIONS_CONFIG</code></span>. For example:</span>
<div>
<pre dir="ltr">
<span class="italic">APPLICATIONS_CONFIG/</span>lcm/tmp/pcu
</pre></div>
</li>
<li class="stepexpand"><span>Unzip <span class="italic"><code class="codeph">SHARED_LOCATION/</code></span><code class="codeph">11.12.x.0.0/Repository/installers/pre_install/pcubundle.zip</code> into <span class="italic"><code class="codeph">PCU_LOCATION/</code></span><code class="codeph">fusionapps/applications</code>.</span></li>
<li class="stepexpand"><span>Go to the PCU bin directory as follows:</span>
<div>
<pre dir="ltr">
cd <span class="italic">PCU_LOCATION/</span>fusionapps/applications/lcm/util/bin
</pre></div>
</li>
<li class="stepexpand"><span>Set the <code class="codeph">JAVA_HOME</code> environment variable before running any commands in this section as follows:</span>
<div>
<pre dir="ltr">
setenv JAVA_HOME=<span class="italic">java_home_location</span>
</pre>
<p>All commands in this section must be run from <span class="italic"><code class="codeph">PCU_LOCATION</code></span><code class="codeph">/fusionapps/applications/lcm/util/bin</code>.</p>
</div>
</li>
<li class="stepexpand"><span>Create a wallet by looking up the common user credentials from CSF on the FA midtier. The following commands will produce a password-protected wallet at the output wallet location:</span>
<div>
<pre dir="ltr">
cd PCU_LOCATION/fusionapps/applications/lcm/util/bin
echo &lt;wallet-password&gt; | ./csfLookup.sh -appbase <span class="italic">APPLICATIONS_BASE</span> -codebase <span class="italic">PCU_LOCATION</span> -common -schemalist ALL -outputwallet &lt;ouput-wallet-location&gt; -ccumerge -loglevel finest
</pre>
<p>Back up the wallet in a location for future archival.</p>
</div>
</li>
<li class="stepexpand"><span>Move the wallet onto the DB host RAC node 1 to a certain location, which will be the input wallet location.</span></li>
<li class="stepexpand"><span>Download patch 24948508 and explode the patch zip in a stage directory on the DB host. After unzipping, <code class="codeph">pcubundle</code> zip will be located at the following location inside the stage directory:</span>
<div>
<pre dir="ltr">
24948508/files/sysman/metadata/swlib/pcu/11.12.0.0.0/upgradeemdp/components/pcubundle.zip
</pre></div>
</li>
<li class="stepexpand"><span>Set up PCU in <code class="codeph">codebase</code> mode on the DB host as follows:</span>
<div>
<pre dir="ltr">
export ZIP_LOC="&lt;stage-dir&gt;/24948508/files/sysman/metadata/swlib/pcu/11.12.0.0.0/upgradeemdp/components/"
......
export APP_BASE="&lt;stage-dir&gt;"
export CODE_BASE="$APP_BASE/instance/tmp/pcu"
mkdir -p $CODE_BASE/fusionapps/applications/lcm
cd $CODE_BASE/fusionapps/applications
echo "Zip location.. $ZIP_LOC/pcubundle.zip"
cp $ZIP_LOC/pcubundle.zip $CODE_BASE/fusionapps/applications
cd $CODE_BASE/fusionapps/applications/lcm
rm -rf util
rm -rf credstoreutil
cd ..
unzip pcubundle.zip
cd lcm/util/bin/
</pre>
<p>Replace the values accordingly.</p>
</div>
</li>
<li class="stepexpand"><span>Ensure that there are valid entries in the <code class="codeph">/etc/oratab</code> for the respective oracle <code class="codeph">uniquename</code> in the proper format. For example, if the oracle unique name is&nbsp;<code class="codeph">fadb</code>&nbsp;and the oracle home is&nbsp;<code class="codeph">/u01/app/oracle/product/11.2.0</code>, then the valid entry that should exist in <code class="codeph">/etc/oratab</code> is the following:</span>
<div>
<pre dir="ltr">
fadb : /u01/app/oracle/product/11.2.0 :
</pre></div>
</li>
<li class="stepexpand"><span>Run the following commands on the DB host:</span>
<div>
<pre dir="ltr">
touch &lt;codebase&gt;/fusionapps/applications/lcm/util/config/ORACLE_UNQNAME.pcu
echo "ORACLE_UNQNAME=&lt;oracle unique name&gt;"
echo "&lt;oracle unique name&gt;" &gt; &lt;codebase&gt;/fusionapps/applications/lcm/util/config/ORACLE_UNQNAME.pcu

export ORACLE_UNQNAME=&lt;oracle unique name&gt;
export PCU_BUNDLE_ZIP="&lt;patch-unzip-location&gt;/24948508/files/sysman/metadata/swlib/pcu/11.12.0.0.0/upgradeemdp/components/pcubundle.zip"

export CDB_JDBC_CONNECT_STRING="jdbc:oracle:thin:@(DESCRIPTION=(LOAD_BALANCE=on)(ADDRESS=(PROTOCOL=TCP)(HOST=&lt;ip-address&gt;)(PORT=&lt;port&gt;))(ADDRESS=(PROTOCOL=TCP)(HOST=&lt;ip-address&gt;)(PORT=&lt;port&gt;))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=&lt;oracle unique name&gt;)))"

cd &lt;codebase&gt;/fusionapps/applications/lcm/util/bin 
echo &lt;wallet-password&gt; | ./dbcsUpdate.sh -appbase <span class="italic">APPLICATIONS_BASE
</span> -codebase <span class="italic">PCU_LOCATION</span> -inputwallet &lt;input wallet location&gt; -jdbcconnectstring &lt;jdbc connect string&gt; -loglevel finest
</pre>
<p>Where:</p>
<p><code class="codeph">&lt;oracle unique name&gt;</code>: The DB unique name of that particular DB.</p>
</div>
<div>In the example value for <code class="codeph">CDB_JDBC_CONNECT_STRING</code> shown above, replace the following values:
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">&lt;ip-address&gt;</code> with the IP address of your Sql*Net listener process</p>
</li>
<li>
<p><code class="codeph">&lt;port&gt;</code> with the port number the Sql*Net listener is using</p>
</li>
<li>
<p><code class="codeph">&lt;oracle unique name&gt;</code> with the unique name for this database (it should match the <code class="codeph">db_unique_name</code> initialization parameter)</p>
</li>
</ul>
</div>
<div>Note that the sample value for <code class="codeph">CDB_JDBC_CONNECT_STRING</code> assumes a RAC database. If your database is not RAC, replace the text after "<code class="codeph">jdbc:oracle:thin:</code>" with the appropriate value.</div>
</li>
<li class="stepexpand"><span>The tool will delete the input wallet that is transferred. After the tool is complete, verify the creation of the DBCS wallet by running the following commands:</span>
<div>
<pre dir="ltr">
$ORACLE_HOME/bin/mkstore -wrl $ORACLE_HOME/dbs/dbcs/$ORACLE_UNQNAME/wallet -list 
$ORACLE_HOME/bin/mkstore -wrl $ORACLE_HOME/dbs/dbcs/$ORACLE_UNQNAME/wallet -viewEntry SYS
</pre>
<p>Where:</p>
<p><code class="codeph">$ORACLE_HOME/bin/mkstore&nbsp;-wrl $ORACLE_HOME/dbs/dbcs/$ORACLE_UNQNAME/wallet&nbsp;-list</code> should get more than or equals to 3 entries.</p>
</div>
</li>
<li class="stepexpand"><span>Copy the DBCS wallet in RAC node 1 from <code class="codeph">$ORACLE_HOME/dbs/dbcs/&lt;oracle unique name&gt;/wallet</code> to RAC node 2 at <code class="codeph">$ORACLE_HOME/dbs/dbcs/&lt;oracle unique name&gt;/wallet</code>.</span></li>
</ol>
<div class="example" id="GUID-083DA2B9-1422-4456-95D2-62913EA73FFD__GUID-2B1BA7FA-580E-4B05-98F6-1395CE268769">For more information about the DBCS Wallet Retrofit Utility, see <a class="olink OASAD-GUID-461E5096-D1EA-415E-B16E-B7F21523260F" target="_blank" href="../OASAD/GUID-59E310E0-149E-4C4B-8F29-53900D4A64E4.htm#OASAD-GUID-461E5096-D1EA-415E-B16E-B7F21523260F">Run Utilities</a> in the <cite><span id="GUID-083DA2B9-1422-4456-95D2-62913EA73FFD__OASAD"><cite>Oracle Fusion Applications Administrator's Guide</cite></span></cite>.</div>
<!-- class="example" --></div>
</div>
<div class="sect4"><a id="GUID-765975A2-1428-46D4-9937-51A373D26355"></a>
<h4 id="OAPUP-GUID-765975A2-1428-46D4-9937-51A373D26355" class="sect4"><span class="enumeration_section">6.2.1.2</span> Run the CSF Cache Utility Manually in Pods Where EM is Not Present</h4>
<div>
<p>To run the Credential Store Framework (CSF) cache utility manually, perform the following steps:</p>
<ol>
<li class="stepexpand"><span>On the DB host, create master password payload wallet in either one of the following steps:</span>
<div>
<pre dir="ltr">
echo &lt;master-password&gt;| ./ walletTool.sh -appbase <span class="italic">APPLICATIONS_BASE</span> -codebase <span class="italic">PCU_LOCATION</span> -write -schema MASTER_PASSWORD -outputwallet <span class="italic">PCU_LOCATION</span>/MP_WALLET
</pre>
<p>or</p>
<pre dir="ltr">
$ORACLE_HOME/bin/mkstore -wrl &lt;codebase&gt;/MP_WALLET/ -createALO
$ORACLE_HOME/bin/mkstore -wrl &lt;codebase&gt;/MP_WALLET/ -createEntry MASTER_PASSWORD 
</pre>
<p>Note that <code class="codeph">MASTER_PASSWORD</code> is not the master password value, but a literal text that should not be changed. The tool will prompt&nbsp;you for the&nbsp;password. Type&nbsp;in&nbsp;the master password twice.</p>
</div>
</li>
<li class="stepexpand"><span>On the DB host, generate password protected payload wallet from the DBCS wallet as follows:</span>
<div>
<pre dir="ltr">
echo &lt;master-password&gt;| ./dbcslookup.sh -appbase <span class="italic">APPLICATIONS_BASE</span> -codebase <span class="italic">PCU_LOCATION</span> -outputwallet <span class="italic">PCU_LOCATION</span>/WALLET -schemalist SYS -auto &ndash;loglevel finest
</pre></div>
</li>
<li class="stepexpand"><span>Move the wallet directories&nbsp;<code class="codeph">WALLET</code> and <code class="codeph">MP_WALLET</code> to the the admin host in a directory called <code class="codeph">wallets</code>. Call the wallets directory&nbsp;<code class="codeph">&lt;wallet-dir&gt;</code>. Note that wallets directory contains <code class="codeph">WALLET</code> and <code class="codeph">MP_WALLET</code> directories. In other words, <code class="codeph">WALLET</code> and <code class="codeph">MP_WALLET</code> are siblings and children to wallets directory as shown in the following example:</span>
<div>
<pre dir="ltr">
|
|-------WALLET
|
|-------MP_WALLET
</pre></div>
</li>
<li class="stepexpand"><span>On the admin host, run the following command to update the CSF entry for SYS:</span>
<div>
<pre dir="ltr">
./csfUpdate.sh -appbase <span class="italic">APPLICATIONS_BASE</span> -codebase <span class="italic">PCU_LOCATION</span>  -schemalist SYS -inputwallet /fsnadmin/11.12.x.0.0/crmad/wallet -loglevel finest
</pre></div>
</li>
</ol>
</div>
</div>
</div>
<a id="OAPUP2094"></a><a id="OAPUP2092"></a>
<div class="sect3"><a id="GUID-3FBB01B1-047B-4699-A166-66B9951C2966"></a>
<h3 id="OAPUP-GUID-3FBB01B1-047B-4699-A166-66B9951C2966" class="sect3"><span class="enumeration_section">6.2.2</span> Run Upgrade Orchestrator During Downtime</h3>
<div>
<div class="section">
<p>Review the following steps before starting Upgrade Orchestrator:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Ensure that the steps in <a href="GUID-5413A516-96B1-4B54-B7AA-E5A728B11A4F.htm#GUID-5413A516-96B1-4B54-B7AA-E5A728B11A4F" title="This section describes the preparation steps for upgrading to Oracle Fusion Applications Release 12 (11.12.x.0.0), all of which can be performed before the scheduled downtime. The following topics are discussed:">Prepare for the Release 12 Upgrade Before Downtime</a>, <a href="GUID-3443FB53-034A-4ADC-AE17-8C23751A01A1.htm#GUID-3443FB53-034A-4ADC-AE17-8C23751A01A1" title="This section describes how to update an Oracle Fusion Applications database and Oracle Identity Management database before an upgrade. The following topics are discussed:">Update the Oracle Fusion Applications and Oracle Identity Management Databases</a>, and <a href="GUID-3DDF50C7-783C-4091-B1BF-20A5A5465BA1.htm#GUID-3DDF50C7-783C-4091-B1BF-20A5A5465BA1" title="This section describes how to ensure system reliability by running pre-downtime checks. The following topics are discussed:">Run Pre-Downtime Checks</a> have been successfully completed.</p>
</li>
<li>
<p>Optionally, perform the mandatory backup of Oracle Fusion Applications at this time. If this is chosen, it is possible to immediately resume orchestration when reaching the pause point for this backup.</p>
</li>
<li>
<p>If running on a Solaris platform, set the environment variables that are described in <a href="GUID-3DDF50C7-783C-4091-B1BF-20A5A5465BA1.htm#GUID-F35B4600-C749-4F8F-B443-1FE37D8624FD">Environment Variables Required for Solaris</a>.</p>
</li>
</ul>
<p>Start Upgrade Orchestrator during downtime by running the following commands on all host types, including the respective scaled out hosts. See <a href="GUID-30562294-F253-4262-8867-30645D049237.htm#GUID-285FCAE2-2258-4F85-AFB2-259591BDFAD0">Options for the Orchestration Command When Starting Orchestration</a>. The value <span class="italic"><code class="codeph">POD_NAME</code></span>, for the <code class="codeph">-pod</code> argument, refers to the directory created in <a href="GUID-5413A516-96B1-4B54-B7AA-E5A728B11A4F.htm#GUID-6187477A-1338-43AB-A8A5-5C07BB46E336">Unzip Orchestration.zip</a>. The Master Orchestration Password, which was created in <a href="GUID-5413A516-96B1-4B54-B7AA-E5A728B11A4F.htm#GUID-51D88C7D-227E-4633-B072-2F870AE28695">Preliminary Steps</a>, is required.</p>
<p>If the DISPLAY variable is set, confirm it is accessible. If the DISPLAY variable is not set, run <code class="codeph">unset/unsetenv DISPLAY</code> before running orchestration.</p>
</div>
<!-- class="section" -->
<div class="section">To run Upgrade Orchestrator, perform the following steps:</div>
<!-- class="section" -->
<ol>
<li class="stepexpand" id="GUID-3FBB01B1-047B-4699-A166-66B9951C2966__BABIIBFE"><span>Run the following command to start orchestration on the Primordial host:</span>
<div>
<pre dir="ltr">
(Unix)
cd <span class="italic">ORCH_LOCATION</span>/bin
./orchestration.sh -pod <span class="italic">POD_NAME</span> -hosttype PRIMORDIAL [-DlogLevel=<span class="italic">log_level</span>]

</pre></div>
</li>
<li class="stepexpand" id="GUID-3FBB01B1-047B-4699-A166-66B9951C2966__BABFDCHF"><span>Run the following command to start orchestration on each Midtier host that is listed in the <code class="codeph">HOSTNAME_MIDTIER</code> property in the <code class="codeph"><a href="GUID-3157F2F3-4AB5-48B5-80C3-0839F9FF52B8.htm#GUID-38D5EDE0-ED59-4CE6-8711-B6CE0517E078">pod.properties</a></code> file:</span>
<div>
<pre dir="ltr">
(Unix)
cd <span class="italic">ORCH_LOCATION</span>/bin
./orchestration.sh -pod <span class="italic">POD_NAME</span> -hosttype MIDTIER [-DlogLevel=<span class="italic">log_level</span>]
</pre></div>
</li>
<li class="stepexpand" id="GUID-3FBB01B1-047B-4699-A166-66B9951C2966__BABFHGJC"><span>Run the following command to start orchestration on each OHS host that is listed in the <code class="codeph">HOSTNAME_OHS</code> property in the <code class="codeph"><a href="GUID-3157F2F3-4AB5-48B5-80C3-0839F9FF52B8.htm#GUID-38D5EDE0-ED59-4CE6-8711-B6CE0517E078">pod.properties</a></code> file:</span>
<div>
<pre dir="ltr">
(Unix)
cd <span class="italic">ORCH_LOCATION</span>/bin
./orchestration.sh -pod <span class="italic">POD_NAME</span> -hosttype OHS [-DlogLevel=<span class="italic">log_level</span>]

</pre></div>
</li>
<li class="stepexpand" id="GUID-3FBB01B1-047B-4699-A166-66B9951C2966__BABFEIJJ"><span>Run the following command to start orchestration on each IDM host associated with the following properties in the <code class="codeph"><a href="GUID-3157F2F3-4AB5-48B5-80C3-0839F9FF52B8.htm#GUID-38D5EDE0-ED59-4CE6-8711-B6CE0517E078">pod.properties</a></code> file:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">HOSTNAME_IDMOID</code></p>
</li>
<li>
<p><code class="codeph">HOSTNAME_IDMOIM</code></p>
</li>
<li>
<p><code class="codeph">HOSTNAME_IDMOHS</code></p>
</li>
</ul>
<pre dir="ltr">
(Unix)
cd <span class="italic">ORCH_LOCATION</span>/bin
./orchestration.sh -pod <span class="italic">POD_NAME</span> -hosttype IDM [-DlogLevel=<span class="italic">log_level</span>]

</pre></div>
</li>
</ol>
<div class="section">
<p>Upgrade Orchestrator runs the tasks listed in the following table:</p>
<div class="tblformal" id="GUID-3FBB01B1-047B-4699-A166-66B9951C2966__GUID-57DDF24E-2D99-474F-A120-2D7D6D418916">
<p class="titleintable">Table 6-2 Tasks Run During the PreDowntime and DowntimePreFA Phase</p>
<table class="cellalignment153" title="Tasks Run During the PreDowntime and DowntimePreFA Phase" summary="This table shows the task name, task ID, and Host types for DowntimePreFA phase">
<thead>
<tr class="cellalignment142">
<th class="cellalignment191" id="d22286e1923">Task Name</th>
<th class="cellalignment191" id="d22286e1926">Phase Name</th>
<th class="cellalignment191" id="d22286e1929">Task ID</th>
<th class="cellalignment192" id="d22286e1932">Host Types</th>
<th class="cellalignment192" id="d22286e1935">Notes</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e1940" headers="d22286e1923">
<p>Verify current environment setup</p>
</td>
<td class="cellalignment193" headers="d22286e1940 d22286e1926">
<p>PreDowntime</p>
</td>
<td class="cellalignment193" headers="d22286e1940 d22286e1929">
<p>VerifySetupPlugin</p>
</td>
<td class="cellalignment194" headers="d22286e1940 d22286e1932">
<p>Primordial</p>
</td>
<td class="cellalignment194" headers="d22286e1940 d22286e1935">
<p>NA</p>
</td>
<td class="cellalignment193" id="d22286e1955" headers="d22286e1923">&nbsp;</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e1957" headers="d22286e1923">
<p>Validate Mandatory Orchestration Properties</p>
</td>
<td class="cellalignment193" headers="d22286e1957 d22286e1926">
<p>PreDowntime</p>
</td>
<td class="cellalignment193" headers="d22286e1957 d22286e1929">
<p>PropertyValidationPlugin</p>
</td>
<td class="cellalignment194" headers="d22286e1957 d22286e1932">
<p>All</p>
</td>
<td class="cellalignment194" headers="d22286e1957 d22286e1935">
<p>NA</p>
</td>
<td class="cellalignment193" id="d22286e1972" headers="d22286e1923">&nbsp;</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e1974" headers="d22286e1923">
<p>Validate Host Type</p>
</td>
<td class="cellalignment193" headers="d22286e1974 d22286e1926">
<p>PreDowntime</p>
</td>
<td class="cellalignment193" headers="d22286e1974 d22286e1929">
<p>HostTypeValidatePlugin</p>
</td>
<td class="cellalignment194" headers="d22286e1974 d22286e1932">
<p>All</p>
</td>
<td class="cellalignment194" headers="d22286e1974 d22286e1935">
<p>NA</p>
</td>
<td class="cellalignment193" id="d22286e1989" headers="d22286e1923">&nbsp;</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e1991" headers="d22286e1923">
<p>Validate RUP Lite for OVM Properties</p>
</td>
<td class="cellalignment193" headers="d22286e1991 d22286e1926">
<p>PreDowntime</p>
</td>
<td class="cellalignment193" headers="d22286e1991 d22286e1929">
<p>RupLiteOvmValidatePlugin</p>
</td>
<td class="cellalignment194" headers="d22286e1991 d22286e1932">
<p>All</p>
</td>
<td class="cellalignment194" headers="d22286e1991 d22286e1935">
<p>NA</p>
</td>
<td class="cellalignment193" id="d22286e2006" headers="d22286e1923">&nbsp;</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e2008" headers="d22286e1923">
<p>Register Database Schema Information&nbsp;</p>
</td>
<td class="cellalignment193" headers="d22286e2008 d22286e1926">
<p>PreDowntime</p>
</td>
<td class="cellalignment193" headers="d22286e2008 d22286e1929">
<p>RegisterDBSchemaInfo</p>
</td>
<td class="cellalignment194" headers="d22286e2008 d22286e1932">
<p>Primordial</p>
</td>
<td class="cellalignment194" headers="d22286e2008 d22286e1935">
<p>NA</p>
</td>
<td class="cellalignment193" id="d22286e2023" headers="d22286e1923">&nbsp;</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e2025" headers="d22286e1923">
<p>Validate Oracle Identity Management Setup</p>
</td>
<td class="cellalignment193" headers="d22286e2025 d22286e1926">
<p>PreDowntime</p>
</td>
<td class="cellalignment193" headers="d22286e2025 d22286e1929">
<p>IDMPreValidate</p>
</td>
<td class="cellalignment194" headers="d22286e2025 d22286e1932">
<p>IDM and Configuration</p>
</td>
<td class="cellalignment194" headers="d22286e2025 d22286e1935">
<p>This task may fail. If it fails, ignore the error and proceed.</p>
</td>
<td class="cellalignment193" id="d22286e2040" headers="d22286e1923">&nbsp;</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e2042" headers="d22286e1923">
<p>Download Email Template from OIM</p>
</td>
<td class="cellalignment193" headers="d22286e2042 d22286e1926">
<p>PreDowntime</p>
</td>
<td class="cellalignment193" headers="d22286e2042 d22286e1929">
<p>DownloadEmailTemplate</p>
</td>
<td class="cellalignment194" headers="d22286e2042 d22286e1932">
<p>IDM</p>
</td>
<td class="cellalignment194" headers="d22286e2042 d22286e1935">
<p>This task may fail. If it fails, ignore the error and proceed.</p>
</td>
<td class="cellalignment193" id="d22286e2057" headers="d22286e1923">&nbsp;</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e2059" headers="d22286e1923">
<p>Run PreUpgrade Tasks</p>
</td>
<td class="cellalignment193" headers="d22286e2059 d22286e1926">
<p>DowntimePreFA</p>
</td>
<td class="cellalignment193" headers="d22286e2059 d22286e1929">
<p>PreUpgradeTasks</p>
</td>
<td class="cellalignment194" headers="d22286e2059 d22286e1932">
<p>Primordial</p>
</td>
<td class="cellalignment194" headers="d22286e2059 d22286e1935">
<p>NA</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e2075" headers="d22286e1923">
<p>Export OWSM Repository</p>
</td>
<td class="cellalignment193" headers="d22286e2075 d22286e1926">
<p>DowntimePreFA</p>
</td>
<td class="cellalignment193" headers="d22286e2075 d22286e1929">
<p>ExportOWSMRepository</p>
</td>
<td class="cellalignment194" headers="d22286e2075 d22286e1932">
<p>Primordial</p>
</td>
<td class="cellalignment194" headers="d22286e2075 d22286e1935">
<p>NA</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e2091" headers="d22286e1923">
<p>Back up files in Smart Clone Environment (Oracle VM only)</p>
</td>
<td class="cellalignment193" headers="d22286e2091 d22286e1926">
<p>DowntimePreFA</p>
</td>
<td class="cellalignment193" headers="d22286e2091 d22286e1929">
<p>BackupFilesForSmartClone</p>
</td>
<td class="cellalignment194" headers="d22286e2091 d22286e1932">
<p>Primordial</p>
</td>
<td class="cellalignment194" headers="d22286e2091 d22286e1935">
<p>NA</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e2107" headers="d22286e1923">
<p>Disable Index Optimization</p>
</td>
<td class="cellalignment193" headers="d22286e2107 d22286e1926">
<p>DowntimePreFA</p>
</td>
<td class="cellalignment193" headers="d22286e2107 d22286e1929">
<p>DisableIndexOptimization</p>
</td>
<td class="cellalignment194" headers="d22286e2107 d22286e1932">
<p>Primordial</p>
</td>
<td class="cellalignment194" headers="d22286e2107 d22286e1935">
<p>NA</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e2124" headers="d22286e1923">
<p>Back Up the OPSS Security Store</p>
</td>
<td class="cellalignment193" headers="d22286e2124 d22286e1926">
<p>DowntimePreFA</p>
</td>
<td class="cellalignment193" headers="d22286e2124 d22286e1929">
<p>Backup OPSS</p>
</td>
<td class="cellalignment194" headers="d22286e2124 d22286e1932">
<p>Primordial</p>
</td>
<td class="cellalignment194" headers="d22286e2124 d22286e1935">
<p>NA</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e2140" headers="d22286e1923">
<p>Stop All Servers</p>
</td>
<td class="cellalignment193" headers="d22286e2140 d22286e1926">
<p>DowntimePreFA</p>
</td>
<td class="cellalignment193" headers="d22286e2140 d22286e1929">
<p>StopAllServers</p>
</td>
<td class="cellalignment194" headers="d22286e2140 d22286e1932">
<p>Primordial, Midtier</p>
</td>
<td class="cellalignment194" headers="d22286e2140 d22286e1935">
<p>NA</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e2156" headers="d22286e1923">
<p>Set CrashRecoveryEnabled Property to False</p>
</td>
<td class="cellalignment193" headers="d22286e2156 d22286e1926">
<p>DowntimePreFA</p>
</td>
<td class="cellalignment193" headers="d22286e2156 d22286e1929">
<p>DisableCrashRecoveryEnabled</p>
</td>
<td class="cellalignment194" headers="d22286e2156 d22286e1932">
<p>Primordial</p>
</td>
<td class="cellalignment194" headers="d22286e2156 d22286e1935">
<p>NA</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e2172" headers="d22286e1923">
<p>Stop OPMN Control Processes</p>
</td>
<td class="cellalignment193" headers="d22286e2172 d22286e1926">
<p>DowntimePreFA</p>
</td>
<td class="cellalignment193" headers="d22286e2172 d22286e1929">
<p>StopOPMNProcesses</p>
</td>
<td class="cellalignment194" headers="d22286e2172 d22286e1932">
<p>Primordial, OHS, Midtier</p>
</td>
<td class="cellalignment194" headers="d22286e2172 d22286e1935">
<p>NA</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e2188" headers="d22286e1923">
<p>Stop Node Managers</p>
</td>
<td class="cellalignment193" headers="d22286e2188 d22286e1926">
<p>DowntimePreFA</p>
</td>
<td class="cellalignment193" headers="d22286e2188 d22286e1929">
<p>StopNodeManager</p>
</td>
<td class="cellalignment194" headers="d22286e2188 d22286e1932">
<p>Primordial, Midtier</p>
</td>
<td class="cellalignment194" headers="d22286e2188 d22286e1935">
<p>NA</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e2204" headers="d22286e1923">
<p>Stop IIR Server on Midtier host</p>
</td>
<td class="cellalignment193" headers="d22286e2204 d22286e1926">
<p>DowntimePreFA</p>
</td>
<td class="cellalignment193" headers="d22286e2204 d22286e1929">
<p>StopIIRPlugin</p>
</td>
<td class="cellalignment194" headers="d22286e2204 d22286e1932">
<p>Midtier</p>
</td>
<td class="cellalignment194" headers="d22286e2204 d22286e1935">
<p>NA</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e2220" headers="d22286e1923">
<p>Uninstall IIR Server (If IIR is configured on primordial or Midtier)</p>
</td>
<td class="cellalignment193" headers="d22286e2220 d22286e1926">
<p>DowntimePreFA</p>
</td>
<td class="cellalignment193" headers="d22286e2220 d22286e1929">
<p>UninstallIIRPlugin</p>
</td>
<td class="cellalignment194" headers="d22286e2220 d22286e1932">
<p>Primordial</p>
</td>
<td class="cellalignment194" headers="d22286e2220 d22286e1935">
<p>NA</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e2236" headers="d22286e1923">
<p>Stopping Oracle Identity Management - AUTHOHS</p>
</td>
<td class="cellalignment193" headers="d22286e2236 d22286e1926">
<p>DowntimePreFA</p>
</td>
<td class="cellalignment193" headers="d22286e2236 d22286e1929">
<p>StopOHS</p>
</td>
<td class="cellalignment194" headers="d22286e2236 d22286e1932">
<p>IDM</p>
</td>
<td class="cellalignment194" headers="d22286e2236 d22286e1935">
<p>This task may fail. If it fails, ignore the error and proceed.</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e2252" headers="d22286e1923">
<p>Stopping Oracle Identity Management - OIM</p>
</td>
<td class="cellalignment193" headers="d22286e2252 d22286e1926">
<p>DowntimePreFA</p>
</td>
<td class="cellalignment193" headers="d22286e2252 d22286e1929">
<p>StopOIM</p>
</td>
<td class="cellalignment194" headers="d22286e2252 d22286e1932">
<p>IDM</p>
</td>
<td class="cellalignment194" headers="d22286e2252 d22286e1935">
<p>This task may fail. If it fails, ignore the error and proceed.</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment193" id="d22286e2268" headers="d22286e1923">
<p>Stopping Oracle Identity Management -OID</p>
</td>
<td class="cellalignment193" headers="d22286e2268 d22286e1926">
<p>DowntimePreFA</p>
</td>
<td class="cellalignment193" headers="d22286e2268 d22286e1929">
<p>StopOID</p>
</td>
<td class="cellalignment194" headers="d22286e2268 d22286e1932">
<p>IDM</p>
</td>
<td class="cellalignment194" headers="d22286e2268 d22286e1935">
<p>This task may fail. If it fails, ignore the error and proceed.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>Upgrade Orchestrator can exit for either a failure, a pause point, or upon successful completion. When orchestrator exits on failure, review the log files and take the appropriate corrective action. Then resume Orchestrator using the commands specified in this section.</p>
<p>For information about monitoring the progress of the upgrade, see <a href="GUID-1FD56739-E0D8-49F5-BCA2-1530E6D9EDDF.htm#GUID-0D588FE7-9684-431E-BEA2-E6291ACC3FCD">Monitor Upgrade Orchestration Progress</a>.</p>
<p>For information about troubleshooting, see the <a href="GUID-1FD56739-E0D8-49F5-BCA2-1530E6D9EDDF.htm#GUID-1FD56739-E0D8-49F5-BCA2-1530E6D9EDDF" title="This section provides information to troubleshoot upgrade issues. The following topics are discussed:">Monitor and Troubleshoot the Upgrade</a>.</p>
<p>If the orchestration commands result in any hanging tasks on any host, do not use ctrl-C or ctrl-Z to exit. Update the status of the task that is hanging by using the commands in <a href="GUID-1FD56739-E0D8-49F5-BCA2-1530E6D9EDDF.htm#GUID-F815B364-6031-4D34-AEB3-338626B4C8BC">Upgrade Orchestrator Hangs</a>. After exiting and fixing the issue that caused the hanging, restart Upgrade Orchestrator, using the commands specified in this section, on the hosts that were forced to exit.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="OAPUP2800"></a>
<div class="sect3"><a id="GUID-BB5E2FAC-6CA0-40EF-8EF7-E7C37F2C4B0D"></a>
<h3 id="OAPUP-GUID-BB5E2FAC-6CA0-40EF-8EF7-E7C37F2C4B0D" class="sect3"><span class="enumeration_section">6.2.3</span> Pause Point 1 - Run RUP Lite for OVM in Pre-Root Mode (Oracle VM Only)</h3>
<div>
<div class="section">
<p>If Oracle Fusion Applications is <span class="italic">not</span> running on an Oracle VM environment, proceed to <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-6BC76A09-C87E-43C0-9343-805B8F24D6F9">Pause Point 2- Upgrade Oracle Identity Management to Release 12</a>.</p>
<p>If Oracle Fusion Applications is running on an Oracle VM environment, orchestration pauses RUP Lite for OVM can be run in pre-root mode as the root user on the primordial, OHS, Midtier, and IDM hosts. Perform the steps in <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-383D62FD-C490-4397-8FF7-4DAAD1C83CB4">Run RUP Lite for OVM in Pre-Root Mode (Oracle VM Only)</a>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="OAPUP2801"></a>
<div class="sect3"><a id="GUID-9E8B7CD2-0E44-4A36-8505-47779B1EA62B"></a>
<h3 id="OAPUP-GUID-9E8B7CD2-0E44-4A36-8505-47779B1EA62B" class="sect3"><span class="enumeration_section">6.2.4</span> Update Status to Success (Oracle VM Only)</h3>
<div>
<div class="section">
<p>After successful completion of running RUP Lite for OVM in pre-root mode, update the task status to <code class="codeph">success</code> by performing the following steps:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Update the task status on the primordial host as follows:</span>
<div>
<pre dir="ltr">
cd ORCH_LOCATION/bin
./orchestration.sh updateStatus -pod <span class="italic">POD_NAME</span> -hosttype PRIMORDIAL -hostname <span class="italic">host_name</span> -release 11.12.x.0.0 -phase DowntimePreFA -taskid RupLiteOvmPreRootPausePointPlugin -taskstatus success
</pre></div>
</li>
<li class="stepexpand"><span>Update the task status on the OHS host that is listed in the HOSTNAME_OHS property in the <a href="GUID-3157F2F3-4AB5-48B5-80C3-0839F9FF52B8.htm#GUID-38D5EDE0-ED59-4CE6-8711-B6CE0517E078">pod.properties</a> file as follows:</span>
<div>
<pre dir="ltr">
cd ORCH_LOCATION/bin
./orchestration.sh updateStatus -pod <span class="italic">POD_NAME</span> -hosttype OHS -hostname <span class="italic">host_name</span>  -release 11.12.x.0.0 -phase DowntimePreFA -taskid RupLiteOvmPreRootPausePointPlugin  -taskstatus success
</pre></div>
</li>
<li class="stepexpand"><span>Update the task status on each Midtier host that is listed in the HOSTNAME_MIDTIER property in the <a href="GUID-3157F2F3-4AB5-48B5-80C3-0839F9FF52B8.htm#GUID-38D5EDE0-ED59-4CE6-8711-B6CE0517E078">pod.properties</a> file as follows:</span>
<div>
<pre dir="ltr">
cd ORCH_LOCATION/bin
./orchestration.sh updateStatus -pod <span class="italic">POD_NAME</span> -hosttype MIDTIER -hostname <span class="italic">host_name</span> -release 11.12.x.0.0 -phase DowntimePreFA -taskid RupLiteOvmPreRootPausePointPlugin -taskstatus success
</pre></div>
</li>
<li class="stepexpand"><span>Update the task status on each IDM host that is listed in the following properties in the <a href="GUID-3157F2F3-4AB5-48B5-80C3-0839F9FF52B8.htm#GUID-38D5EDE0-ED59-4CE6-8711-B6CE0517E078">pod.properties</a> file:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">HOSTNAME_IDMOID</code></p>
</li>
<li>
<p><code class="codeph">HOSTNAME_IDMOIM</code></p>
</li>
<li>
<p><code class="codeph">HOSTNAME_IDMOHS</code></p>
</li>
</ul>
<pre dir="ltr">
cd ORCH_LOCATION/bin
./orchestration.sh updateStatus -pod <span class="italic">POD_NAME</span> -hosttype IDM -hostname <span class="italic">host_name</span>  -release 11.12.x.0.0 -phase DowntimePreFA -taskid RupLiteOvmPreRootPausePointPlugin -taskstatus success
</pre></div>
</li>
</ol>
</div>
</div>
<a id="OAPUP2802"></a>
<div class="sect3"><a id="GUID-134063FB-70D2-43A1-968D-5BD2BAF3E0B3"></a>
<h3 id="OAPUP-GUID-134063FB-70D2-43A1-968D-5BD2BAF3E0B3" class="sect3"><span class="enumeration_section">6.2.5</span> Resume Upgrade Orchestrator (Oracle VM Only)</h3>
<div>
<div class="section">
<p>Resume orchestration on all host types, including the respective scaled out hosts, using the commands in <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-3FBB01B1-047B-4699-A166-66B9951C2966">Run Upgrade Orchestrator During Downtime</a>, Steps 1 through 4.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="OAPUP2107"></a>
<div class="sect3"><a id="GUID-6BC76A09-C87E-43C0-9343-805B8F24D6F9"></a>
<h3 id="OAPUP-GUID-6BC76A09-C87E-43C0-9343-805B8F24D6F9" class="sect3"><span class="enumeration_section">6.2.6</span> Pause Point 2- Upgrade Oracle Identity Management to Release 12</h3>
<div>
<div class="section">
<p>For the steps to upgrade Oracle Identity Management (IDM) that are appropriate for your environment, see <a href="GUID-3B21D3BE-4AFB-4246-908D-00F3D73AC53A.htm#GUID-3B21D3BE-4AFB-4246-908D-00F3D73AC53A" title="Review the following flowchart and roadmap for an overview of the upgrade process for IDM for FA to Release 12.The upgrade steps will vary according to the type of IDM installation you have.Perform this steps only if your IDM for FA is integrated with Enterprise IDM. You must disconnect integrations by cloning your IDM environment. The cloning process involves the following high-level steps:This section describes how to upgrade type I IDM environments.Before the upgrade of your type I IDM environment, perform the following tasks:The following preValidateOnPremise.pl script must be executed serially on each IDM node, including the scaled out nodes:After running the preValidate script on your type I environment, manually download the OIM email template as follows:Stop all IDM services by running the following command on all IDM nodes:Upgrade the binary files used by IDM components by running the following command on all IDM nodes:&nbsp;Update the IDM configuration to Release 12 level by running the following config upgrade commands on all IDM nodes:During IDM upgrade on Solaris platforms, the OIM Config step displays the following message in the IDM upgrade console:To confirm that the upgrade was successful, run the following post-upgrade validation command on all IDM nodes:Before the upgrade of your type II IDM environment, perform the following tasks:The topology&nbsp;discovery tool&nbsp;introspects the existing IDM environment to discover information that will be needed for setting up a parallel true-up environment.&nbsp;Before running the discovery tool, perform the following steps. Note that if your environment has OIF and it is not up during discovery, then OIF will not be part of the upgrade process.If your set up has IDM nodes on different machines (including scaled out support), the discovery tool will have to be run serially on each IDM node. A true-up environment is an entirely new IDM environment, which behaves exactly like the current IDM installation. Your true-up environment will conform to the layout and structure of an environment that has been provisioned using the IDM provisioning scripts provided by Oracle.Before setting up your true-up environment, ensure you meet the following prerequisites:To set up the binary files, you need the True-up tars.This section describes how to migrate the configuration to the true-up environment. This section contains the following sections:Before running migration, ensure the following prerequisites are met:After running migration, you must perform the following task:After completing migration, you must manually register OID instances to enable the OID and OVD status to be shown in EM console. The following preValidateOnPremise.pl script must be executed serially on each IDM node, including the scaled out nodes:After running the preValidate script on your type II environment, manually download the OIM email template as follows:Stop all IDM services by running the following command on all IDM nodes:Upgrade the binary files used by IDM components by running the following command on all IDM nodes:&nbsp;Update the IDM configuration to Release 12 level by running the following config upgrade commands on all IDM nodes:To confirm that the upgrade was successful, run the following post-upgrade validation command on all IDM nodes:This section describes some properties files used in the IDM for FA Upgrade to Release 12 (11.12.x.0.0).The following table shows the location of the IDM Upgrade and migration log files:">Upgrade Oracle Identity Management to Release 12</a>.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="sect3"><a id="GUID-1EEED638-D208-4B18-BEB3-CF9A3A74C522"></a>
<h3 id="OAPUP-GUID-1EEED638-D208-4B18-BEB3-CF9A3A74C522" class="sect3"><span class="enumeration_section">6.2.7</span> Pause Point 3 - Reload Orchestration</h3>
<div>
<p>Orchestration pauses after first RUP installer is completed. No manual step is&nbsp;required.</p>
<div class="section">
<p class="subhead3">Recover From CAS Corruption Caused by Out of Memory Error During Attaching CAS Store (Solaris Only)</p>
<p>An out of memory error during attaching CAS store may happen in the first RUP Installer. You can check for these errors in the <code class="codeph">APPTOP/fusionapps/applications/cfgtoollogs/opatch/obrepoXXX.log</code>.&nbsp;</p>
<div class="p">The following errors may be seen:
<pre dir="ltr">
[Jan 21, 2017 12:03:50 PM] [INFO] [OPSR-TIME] Loading CAS libraries
[Jan 21, 2017 12:03:50 PM] [INFO] [OPSR-TIME] CAS library loaded
[Jan 21, 2017 12:03:50 PM] [INFO] [OPSR-TIME] CAS - attaching cas store
[Jan 21, 2017 1:39:07 PM] [INFO] attachMain error: Corrupt master view:
java.lang.OutOfMemoryError: Direct buffer memory
[Jan 21, 2017 1:39:07 PM] [INFO] Stack Description:
oracle.glcm.opatch.content.errors.FileWriteException: Corrupt master view:
java.lang.OutOfMemoryError: Direct buffer memory
</pre></div>
<div class="p">The errors shown above may corrupt the CAS master view. If these errors are seen, perform the following steps during this Pause Point:
<ol>
<li>
<p>Remove the <code class="codeph">.cas</code> directory from the <code class="codeph">APPLTOP/fusionapps/applications/</code> directory.</p>
</li>
<li>
<p>Fix the memory setting in the <code class="codeph">oraparam.ini</code> under <code class="codeph">APPLTOP/fusionapps/applications/oui</code> by updating the memory setting for <code class="codeph">JRE_MEMORY_OPTIONS</code> from <code class="codeph">-mx1024m</code> to <code class="codeph">-mx3072m</code>.</p>
</li>
<li>
<div class="p">Run the following <code class="codeph">obrepo attach</code> command:
<pre dir="ltr">
OH/OPatch/obrepo attach -oh 
&lt;OH location&gt; -jdk &lt;jdk location&gt; -invPtrLoc &lt;inventory pointer location for oraInst.loc&gt;
</pre></div>
<div class="p">For example:
<pre dir="ltr">
APPLTOP/fusionapps/applications/OPatch/obrepo attach -oh 
APPLTOP/fusionapps/applications -jdk /u01/repository/jdk -invPtrLoc /u01/APPLTOP/fusionapps/applications/oraInst.loc 
</pre></div>
</li>
<li>
<p>Resume with second RUP Installer.</p>
</li>
</ol>
</div>
</div>
<!-- class="section" --></div>
</div>
<div class="sect3"><a id="GUID-CEDD71C1-E171-4DD3-B06A-977290FB8383"></a>
<h3 id="OAPUP-GUID-CEDD71C1-E171-4DD3-B06A-977290FB8383" class="sect3"><span class="enumeration_section">6.2.8</span> Update Status to Success&nbsp;(Reload Orchestration)</h3>
<div>
<p>Update the task status to success on all hosts by performing the following steps:</p>
<ol>
<li class="stepexpand"><span>Update the task status on the primordial host as follows:</span>
<div>
<pre dir="ltr">
(Unix)
cd ORCH_LOCATION/bin
./orchestration.sh updateStatus -pod <span class="italic">POD_NAME</span> -hosttype PRIMORDIAL -hostname <span class="italic">host_name</span> -release 11.12.x.0.0 -phase DowntimeDuringFA -taskid ReloadOrchPausePoint -taskstatus success
</pre></div>
</li>
<li class="stepexpand"><span>Update the task status on each Midtier host that is listed in the <code class="codeph">HOSTNAME_MIDTIER</code> property in the <code class="codeph">pod.properties</code> file as follows:</span>
<div>
<pre dir="ltr">
(Unix) 
cd ORCH_LOCATION/bin ./orchestration.sh updateStatus -pod <span class="italic">POD_NAME</span> -hosttype MIDTIER -hostname <span class="italic">host_name</span> -release 11.12.x.0.0 -phase DowntimeDuringFA -taskid ReloadOrchPausePoint -taskstatus success 
</pre></div>
</li>
<li class="stepexpand"><span>Update the task status on each OHS host that is listed in the <code class="codeph">HOSTNAME_OHS</code> property in the <code class="codeph">pod.properties</code> file as follows:</span>
<div>
<pre dir="ltr">
(Unix) 
cd ORCH_LOCATION/bin ./orchestration.sh updateStatus -pod <span class="italic">POD_NAME</span> -hosttype OHS -hostname <span class="italic">host_name</span> -release 11.12.x.0.0 -phase DowntimeDuringFA -taskid ReloadOrchPausePoint -taskstatus success 
</pre></div>
</li>
<li class="stepexpand"><span>Update the task status on each IDM host that is listed in the following properties in the <code class="codeph">pod.properties</code> file as shown in the following example:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">HOSTNAME_IDMOID</code></p>
</li>
<li>
<p><code class="codeph">HOSTNAME_IDMOIM</code></p>
</li>
<li>
<p><code class="codeph">HOSTNAME_IDMOHS</code></p>
</li>
</ul>
<pre dir="ltr">
(Unix) 
cd ORCH_LOCATION/bin ./orchestration.sh updateStatus -pod <span class="italic">POD_NAME</span> -hosttype IDM -hostname <span class="italic">host_name</span> -release 11.12.x.0.0 -phase DowntimeDuringFA -taskid ReloadOrchPausePoint -taskstatus success 
</pre></div>
</li>
</ol>
</div>
</div>
<div class="sect3"><a id="GUID-53C04013-37E2-45C1-9CA9-66982E53699D"></a>
<h3 id="OAPUP-GUID-53C04013-37E2-45C1-9CA9-66982E53699D" class="sect3"><span class="enumeration_section">6.2.9</span> Resume Upgrade Orchestrator (Reload Orchestration)</h3>
<div>
<p>Resume orchestration on all host types, including the respective scaled out hosts, by performing Steps 1 through 4 as listed in <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-3FBB01B1-047B-4699-A166-66B9951C2966">Run Upgrade Orchestrator During Downtime</a>.</p>
<div class="tblformal" id="GUID-53C04013-37E2-45C1-9CA9-66982E53699D__GUID-998FAFAB-310B-4F66-80C3-22D189BFE602">
<p class="titleintable">Table 6-3 Tasks Run During Various Downtime Phases</p>
<table class="cellalignment153" title="Tasks Run During Various Downtime Phases" summary="Task list for DowntimePreFA phase">
<thead>
<tr class="cellalignment142">
<th class="cellalignment184" id="d22286e2712">Task Name</th>
<th class="cellalignment184" id="d22286e2715">Phase Name</th>
<th class="cellalignment184" id="d22286e2718">Task ID</th>
<th class="cellalignment185" id="d22286e2721">Host Types</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment142">
<td class="cellalignment187" id="d22286e2726" headers="d22286e2712">
<p>Run RUP Lite for Domain Configuration</p>
</td>
<td class="cellalignment187" headers="d22286e2726 d22286e2715">
<p>DowntimeDuringFA Phase</p>
</td>
<td class="cellalignment187" headers="d22286e2726 d22286e2718">
<p>RunRUPLiteForDomainsConfig</p>
</td>
<td class="cellalignment188" headers="d22286e2726 d22286e2721">
<p>Primordial, Midtier</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment187" id="d22286e2739" headers="d22286e2712">
<p>Start Node Managers</p>
</td>
<td class="cellalignment187" headers="d22286e2739 d22286e2715">
<p>DowntimeDuringFA Phase</p>
</td>
<td class="cellalignment187" headers="d22286e2739 d22286e2718">
<p>StartNodeManager</p>
</td>
<td class="cellalignment188" headers="d22286e2739 d22286e2721">
<p>Primordial, Midtier</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment187" id="d22286e2752" headers="d22286e2712">
<p>Start OPMN Control Processes</p>
</td>
<td class="cellalignment187" headers="d22286e2752 d22286e2715">
<p>DowntimeDuringFA Phase</p>
</td>
<td class="cellalignment187" headers="d22286e2752 d22286e2718">
<p>StartOPMNProcesses</p>
</td>
<td class="cellalignment188" headers="d22286e2752 d22286e2721">
<p>Primordial, OHS, Midtier,</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment187" id="d22286e2765" headers="d22286e2712">
<p>Update Topology Information and Worker Details</p>
</td>
<td class="cellalignment187" headers="d22286e2765 d22286e2715">
<p>DowntimeDuringFA Phase</p>
</td>
<td class="cellalignment187" headers="d22286e2765 d22286e2718">
<p>UpdateTopologyInfoPlugin</p>
</td>
<td class="cellalignment188" headers="d22286e2765 d22286e2721">
<p>Primordial, Midtier</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment187" id="d22286e2778" headers="d22286e2712">
<p>Run Oracle Fusion Applications RUP Installation Part 2 of 2</p>
</td>
<td class="cellalignment187" headers="d22286e2778 d22286e2715">
<p>DowntimeDuringFA Phase</p>
</td>
<td class="cellalignment187" headers="d22286e2778 d22286e2718">
<p>RunSecondRUPInstaller</p>
</td>
<td class="cellalignment188" headers="d22286e2778 d22286e2721">
<p>Primordial</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment187" id="d22286e2791" headers="d22286e2712">
<p>Start Remote Workers for Applying Database Patches in Distributed Mode</p>
</td>
<td class="cellalignment187" headers="d22286e2791 d22286e2715">
<p>DowntimeDuringFA Phase</p>
</td>
<td class="cellalignment187" headers="d22286e2791 d22286e2718">
<p>StartRemoteWorkersPlugin</p>
</td>
<td class="cellalignment188" headers="d22286e2791 d22286e2721">
<p>Primordial, Midtier</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment187" id="d22286e2804" headers="d22286e2712">
<p>Clean up Worker Details Information for the Topology</p>
</td>
<td class="cellalignment187" headers="d22286e2804 d22286e2715">
<p>DowntimeDuringFA Phase</p>
</td>
<td class="cellalignment187" headers="d22286e2804 d22286e2718">
<p>CleanupTopologyInfoPlugin</p>
</td>
<td class="cellalignment188" headers="d22286e2804 d22286e2721">
<p>Primordial, Midtier</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment187" id="d22286e2817" headers="d22286e2712">
<p>Run Vital Signs Checks</p>
</td>
<td class="cellalignment187" headers="d22286e2817 d22286e2715">
<p>DowntimePostFA Phase</p>
</td>
<td class="cellalignment187" headers="d22286e2817 d22286e2718">
<p>VitalSignsChecks</p>
</td>
<td class="cellalignment188" headers="d22286e2817 d22286e2721">
<p>Primordial</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment187" id="d22286e2830" headers="d22286e2712">
<p>Prepare for Oracle Fusion Applications Web Tier Upgrade</p>
</td>
<td class="cellalignment187" headers="d22286e2830 d22286e2715">
<p>DowntimePostFA Phase</p>
</td>
<td class="cellalignment187" headers="d22286e2830 d22286e2718">
<p>CopyWebtierUpgradeToCentralLoc</p>
</td>
<td class="cellalignment188" headers="d22286e2830 d22286e2721">
<p>Primordial</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment187" id="d22286e2843" headers="d22286e2712">
<p>Stop Oracle Fusion Applications - APPOHS</p>
</td>
<td class="cellalignment187" headers="d22286e2843 d22286e2715">
<p>DowntimePostFA Phase</p>
</td>
<td class="cellalignment187" headers="d22286e2843 d22286e2718">
<p>StopOPMNProcesses</p>
</td>
<td class="cellalignment188" headers="d22286e2843 d22286e2721">
<p>OHS</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment187" id="d22286e2856" headers="d22286e2712">
<p>Remove Conflicting Patches for Oracle Fusion Applications Web Tier Oracle Homes</p>
</td>
<td class="cellalignment187" headers="d22286e2856 d22286e2715">
<p>DowntimePostFA Phase</p>
</td>
<td class="cellalignment187" headers="d22286e2856 d22286e2718">
<p>RemoveConflictingPatches</p>
</td>
<td class="cellalignment188" headers="d22286e2856 d22286e2721">
<p>OHS</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment187" id="d22286e2870" headers="d22286e2712">
<p>Upgrade Oracle Fusion Applications OHS Binaries</p>
</td>
<td class="cellalignment187" headers="d22286e2870 d22286e2715">
<p>DowntimePostFA Phase</p>
</td>
<td class="cellalignment187" headers="d22286e2870 d22286e2718">
<p>UpgradeOHSBinary</p>
</td>
<td class="cellalignment188" headers="d22286e2870 d22286e2721">
<p>OHS</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment187" id="d22286e2883" headers="d22286e2712">
<p>Upgrade Oracle Fusion Applications OHS Configuration</p>
</td>
<td class="cellalignment187" headers="d22286e2883 d22286e2715">
<p>DowntimePostFA Phase</p>
</td>
<td class="cellalignment187" headers="d22286e2883 d22286e2718">
<p>UpgradeOHSConfig</p>
</td>
<td class="cellalignment188" headers="d22286e2883 d22286e2721">
<p>OHS</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment187" id="d22286e2896" headers="d22286e2712">
<p>Star OPMN Control Processes</p>
</td>
<td class="cellalignment187" headers="d22286e2896 d22286e2715">
<p>DowntimePostFA Phase</p>
</td>
<td class="cellalignment187" headers="d22286e2896 d22286e2718">
<p>StartOPMNProcesses</p>
</td>
<td class="cellalignment188" headers="d22286e2896 d22286e2721">
<p>OHS</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment187" id="d22286e2909" headers="d22286e2712">
<p>Run RUP Lite for BI</p>
</td>
<td class="cellalignment187" headers="d22286e2909 d22286e2715">
<p>DowntimePostFA Phase</p>
</td>
<td class="cellalignment187" headers="d22286e2909 d22286e2718">
<p>RunRUPLiteForBI</p>
</td>
<td class="cellalignment188" headers="d22286e2909 d22286e2721">
<p>Midtier</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment187" id="d22286e2922" headers="d22286e2712">
<p>Run RUP Lite for Domain Configuration in online mode</p>
</td>
<td class="cellalignment187" headers="d22286e2922 d22286e2715">
<p>DowntimePostFA Phase</p>
</td>
<td class="cellalignment187" headers="d22286e2922 d22286e2718">
<p>RunRUPLiteForDomainsConfigOnline</p>
</td>
<td class="cellalignment188" headers="d22286e2922 d22286e2721">
<p>Primordial, Midtier</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment187" id="d22286e2935" headers="d22286e2712">
<p>Run RUP Lite for OVM in Online Mode as Application User</p>
</td>
<td class="cellalignment187" headers="d22286e2935 d22286e2715">
<p>DowntimePostFA Phase</p>
</td>
<td class="cellalignment187" headers="d22286e2935 d22286e2718">
<p>RupLiteOvmOnline</p>
</td>
<td class="cellalignment188" headers="d22286e2935 d22286e2721">
<p>Primordial, OHS, Midtier, IDM</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<div class="sect3"><a id="GUID-8F198C4E-C677-4DAC-B296-43BF72F99B94"></a>
<h3 id="OAPUP-GUID-8F198C4E-C677-4DAC-B296-43BF72F99B94" class="sect3"><span class="enumeration_section">6.2.10</span> Pause Point 4- Run RUP Lite for OVM in Post-Root Mode (Oracle VM Only)</h3>
<div>
<div class="p">If Oracle Fusion Applications is <span class="italic">not</span> running on an Oracle VM environment, proceed to <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-643AFEA8-28E5-4D6C-B63B-805CFF32C8EE">Pause Point 5 - Create the Incremental Provisioning Response File</a>.
<p>If Oracle Fusion Applications is running on an Oracle VM environment, orchestration pauses RUP Lite for OVM can be run in post-root mode as the root user on the primordial, OHS, Midtier, and IDM hosts. Perform the steps listed in <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-8C4BD64E-07DC-4D4B-8245-384DEC2A275C">Run RUP Lite for OVM in Post-Root Mode (Oracle VM Only)</a> .</p>
</div>
<!-- class="section" --></div>
</div>
<div class="sect3"><a id="GUID-17A41000-E5E3-4028-838A-D6B1570C6040"></a>
<h3 id="OAPUP-GUID-17A41000-E5E3-4028-838A-D6B1570C6040" class="sect3"><span class="enumeration_section">6.2.11</span> Update Status to Success (Oracle VM Only)</h3>
<div>
<div class="section">After successful completion of running RUP Lite for OVM in post-root mode, update the task status to <code class="codeph">success</code> by performing the following steps:</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Update the task status on the primordial host as follows:</span>
<div>
<pre dir="ltr">
cd <span class="italic">ORCH_LOCATION</span>/bin
 ./orchestration.sh updateStatus -pod <span class="italic">POD_NAME</span> -hosttype PRIMORDIAL -hostname <span class="italic">host_name</span> -release 11.12.x.0.0 -phase DowntimePostFA -taskid RupLiteOvmPostRootPausePointPlugin -taskstatus success
</pre></div>
</li>
<li class="stepexpand"><span>Update the task status on the OHS host that is listed in the HOSTNAME_OHS property in the pod.properties file as follows:</span>
<div>
<pre dir="ltr">
cd <span class="italic">ORCH_LOCATION</span>/bin
./orchestration.sh updateStatus -pod <span class="italic">POD_NAME</span> -hosttype OHS -hostname <span class="italic">host_name</span>  -release 11.12.x.0.0 -phase DowntimePostFA -taskid RupLiteOvmPostRootPausePointPlugin  -taskstatus success
</pre></div>
</li>
<li class="stepexpand"><span>Update the task status on each Midtier host that is listed in the HOSTNAME_MIDTIER property in the pod.properties file as follows:</span>
<div>
<pre dir="ltr">
cd <span class="italic">ORCH_LOCATION</span>/bin
./orchestration.sh updateStatus -pod <span class="italic">POD_NAME</span> -hosttype MIDTIER -hostname <span class="italic">host_name</span> -release 11.12.x.0.0 -phase DowntimePostFA -taskid RupLiteOvmPostRootPausePointPlugin -taskstatus success
</pre></div>
</li>
<li class="stepexpand"><span>Update the task status on each IDM host that is listed in the following properties in the pod.properties file:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">HOSTNAME_IDMOID</code></p>
</li>
<li>
<p><code class="codeph">HOSTNAME_IDMOIM</code></p>
</li>
<li>
<p><code class="codeph">HOSTNAME_IDMOHS</code></p>
</li>
</ul>
</div>
<div>
<pre dir="ltr">
cd <span class="italic">ORCH_LOCATION</span>/bin
./orchestration.sh updateStatus -pod POD_NAME -hosttype IDM -hostname host_name  -release 11.12.x.0.0 -phase DowntimePostFA -taskid RupLiteOvmPostRootPausePointPlugin -taskstatus success
</pre></div>
</li>
</ol>
</div>
</div>
<a id="OAPUP2365"></a><a id="OAPUP2364"></a>
<div class="sect3"><a id="GUID-8BF826F4-455A-44EE-9AF2-7D74944D6DA7"></a>
<h3 id="OAPUP-GUID-8BF826F4-455A-44EE-9AF2-7D74944D6DA7" class="sect3"><span class="enumeration_section">6.2.12</span> Resume Upgrade Orchestrator (Oracle VM Only)</h3>
<div>
<div class="section">
<p>Resume orchestration on the Midtier hosts using the command in <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-3FBB01B1-047B-4699-A166-66B9951C2966">Run Upgrade Orchestrator During Downtime</a>, Step <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-3FBB01B1-047B-4699-A166-66B9951C2966__BABFDCHF">2</a>.</p>
<p>Upgrade Orchestrator runs the tasks in the following table:</p>
<div class="tblformal" id="GUID-8BF826F4-455A-44EE-9AF2-7D74944D6DA7__GUID-CD51BEAA-256A-435B-9222-77678557BD86">
<p class="titleintable">Table 6-4 Tasks Run During the DowntimePostFA Phase</p>
<table class="cellalignment153" title="Tasks Run During the DowntimePostFA Phase" summary="Task list for DowntimePostFA phase">
<thead>
<tr class="cellalignment142">
<th class="cellalignment195" id="d22286e3114">Task Name</th>
<th class="cellalignment195" id="d22286e3117">Task ID</th>
<th class="cellalignment196" id="d22286e3120">Host Types</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment142">
<td class="cellalignment197" id="d22286e3125" headers="d22286e3114">
<p>Set CrashRecoveryEnabled Property to True</p>
</td>
<td class="cellalignment197" headers="d22286e3125 d22286e3117">
<p>EnableCrashRecoveryEnabled</p>
</td>
<td class="cellalignment198" headers="d22286e3125 d22286e3120">
<p>Primordial</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment197" id="d22286e3135" headers="d22286e3114">
<p>Run Post Upgrade Health Checks</p>
</td>
<td class="cellalignment197" headers="d22286e3135 d22286e3117">
<p>PostUpgradeChecks</p>
</td>
<td class="cellalignment198" headers="d22286e3135 d22286e3120">
<p>Primordial, OHS, Midtier</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment197" id="d22286e3145" headers="d22286e3114">
<p>Run Data Quality Checks</p>
</td>
<td class="cellalignment197" headers="d22286e3145 d22286e3117">
<p>DataQualityChecks</p>
</td>
<td class="cellalignment198" headers="d22286e3145 d22286e3120">
<p>Primordial</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" --></div>
</div>
<a id="OAPUP2692"></a>
<div class="sect3"><a id="GUID-643AFEA8-28E5-4D6C-B63B-805CFF32C8EE"></a>
<h3 id="OAPUP-GUID-643AFEA8-28E5-4D6C-B63B-805CFF32C8EE" class="sect3"><span class="enumeration_section">6.2.13</span> Pause Point 5 - Create the Incremental Provisioning Response File</h3>
<div>
<div class="section">
<p>Orchestration pauses if one of the conditions described in <a href="GUID-5413A516-96B1-4B54-B7AA-E5A728B11A4F.htm#GUID-363A6A8E-5EB4-4DF6-A771-B59D068C0DE0">Prepare Incremental Provisioning</a> is met, so a response file for running incremental provisioning can be created. Perform the steps in <a class="olink OAINS4763" target="_blank" href="../OAINS/GUID-95532CCB-297E-4B22-B123-923A5EAE057D.htm#OAINS4763">Create an Extended Provisioning Response File</a> in <span class="italic"><span id="GUID-643AFEA8-28E5-4D6C-B63B-805CFF32C8EE__OAINS"><cite>Oracle Fusion Applications Installation Guide</cite></span></span>.</p>
<p>Then, proceed to <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-EB56EA5B-C87A-43C0-B515-61549436BAC8">Update Status to Success (Incremental Provisioning Response File)</a>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="OAPUP2693"></a>
<div class="sect3"><a id="GUID-EB56EA5B-C87A-43C0-B515-61549436BAC8"></a>
<h3 id="OAPUP-GUID-EB56EA5B-C87A-43C0-B515-61549436BAC8" class="sect3"><span class="enumeration_section">6.2.14</span> Update Status to Success (Incremental Provisioning Response File)</h3>
<div>
<div class="section">
<p>After successfully creating the response file for manual incremental provisioning, update the task status to <code class="codeph">success</code> on the primordial host as follows:</p>
<pre dir="ltr">
(Unix)
cd <span class="italic">ORCH_LOCATION/</span>bin
./orchestration.sh updateStatus -pod <span class="italic">POD_NAME </span>-hosttype PRIMORDIAL -hostname <span class="italic">host_name </span>-release 11.12.x.0.0 -phase DowntimePostFA -taskid CreateIpResponseFilePausePointTask -taskstatus success 

</pre></div>
<!-- class="section" --></div>
</div>
<a id="OAPUP2694"></a>
<div class="sect3"><a id="GUID-4BC8FBF6-0C8D-4E89-84F1-3F3C06F008C5"></a>
<h3 id="OAPUP-GUID-4BC8FBF6-0C8D-4E89-84F1-3F3C06F008C5" class="sect3"><span class="enumeration_section">6.2.15</span> Resume Upgrade Orchestrator (Incremental Provisioning Response File)</h3>
<div>
<div class="section">
<p>Resume orchestration on the primordial host, using the commands in <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-3FBB01B1-047B-4699-A166-66B9951C2966">Run Upgrade Orchestrator During Downtime</a>, Step <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-3FBB01B1-047B-4699-A166-66B9951C2966__BABIIBFE">1</a>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="OAPUP2695"></a>
<div class="sect3"><a id="GUID-9A8B6981-0A77-473D-893E-BC1000A03292"></a>
<h3 id="OAPUP-GUID-9A8B6981-0A77-473D-893E-BC1000A03292" class="sect3"><span class="enumeration_section">6.2.16</span> Pause Point 6 - Perform Incremental Provisioning</h3>
<div>
<div class="section">
<p>If the <code class="codeph">PERFORM_INCREMENTAL_PROVISIONING</code> property is set to <code class="codeph">true</code> in the <code class="codeph"><a href="GUID-3157F2F3-4AB5-48B5-80C3-0839F9FF52B8.htm#GUID-38D5EDE0-ED59-4CE6-8711-B6CE0517E078">pod.properties</a></code> file, orchestration pauses at this point, so incremental provisioning can be performed manually. Perform the steps listed in <a class="olink OAINS4776" target="_blank" href="../OAINS/GUID-95532CCB-297E-4B22-B123-923A5EAE057D.htm#OAINS4776">Perform Incremental Provisioning</a> in the <span class="italic"><span id="GUID-9A8B6981-0A77-473D-893E-BC1000A03292__OAINS"><cite>Oracle Fusion Applications Installation Guide</cite></span></span>.</p>
<div class="p">Perform the following after Incremental Provisioning has been completed adding new provisioning offerings. This is only required if Incremental Provisioning is run, not otherwise:
<ul style="list-style-type: disc;">
<li>
<div class="p">Edit <code class="codeph">&lt;APPTOP&gt;/instance/fapatch/FUSION_env.properties</code> on the CommonDomain AdminServer host. The values of the following properties in the file should be edited to specify the host and port of the OID where the OPSS policy store lives:
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">POLICY_STORE_LDAP_HOSTNAME=&lt;fully qualified OID host name&gt;</code></p>
</li>
<li>
<p><code class="codeph">POLICY_STORE_LDAP_PORT=&lt;OID port&gt;</code></p>
</li>
<li>
<p><code class="codeph">POLICY_STORE_CONNECT_PROTOCOL_SSL=&lt;Yes/No&gt;</code></p>
<p>Set the value to Yes or No depending on whether the policy store communicates with Fusion Application in secure mode or not.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="p">Note the following:
<ul style="list-style-type: disc;">
<li>
<p>This is required to be done only if Incremental Provisioning is run to add new provisioning offerings during upgrade and should be done only after Incremental Provisioning is complete and before <code class="codeph">'postUpgradeCleanup'</code> step of upgrade is run as part of the resumed upgrade flow.</p>
</li>
<li>
<p>If the policy store OID host and port is not known, please refer to the response file used to provision the environment initially. The values are found in properties <code class="codeph">OAM_OPSS_HOST and OAM_OPSS_PORT</code> respectively of the response file.</p>
</li>
</ul>
</div>
<p>Then, proceed to <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-4A95138C-0300-4ED1-8D57-5A7A524C1F42">Update Status to Success (Incremental Provisioning)</a>.</p>
<p>If the <code class="codeph">PERFORM_INCREMENTAL_PROVISIONING</code> property is set to false, this pause point does not occur and orchestration continues with the tasks listed in <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-E3DBAA37-DE71-474A-B4CB-2EB6A23A15FC__BABDCIGI" title="Task list for DowntimePostFA phase">Table 6-5</a>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="OAPUP2696"></a>
<div class="sect3"><a id="GUID-4A95138C-0300-4ED1-8D57-5A7A524C1F42"></a>
<h3 id="OAPUP-GUID-4A95138C-0300-4ED1-8D57-5A7A524C1F42" class="sect3"><span class="enumeration_section">6.2.17</span> Update Status to Success (Incremental Provisioning)</h3>
<div>
<div class="section">
<p>After successfully performing manual incremental provisioning, update the task status to <code class="codeph">success</code> on the primordial, OHS, and Midtier hosts:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Update the task status on the primordial host as follows:</span>
<div>
<pre dir="ltr">
(Unix)
cd <span class="italic">ORCH_LOCATION</span>/bin
./orchestration.sh updateStatus -pod <span class="italic">POD_NAME</span> -hosttype PRIMORDIAL -hostname <span class="italic">host_name</span> -release 11.12.x.0.0 -phase DowntimePostFA -taskid <span>RunIncrementalProvisioningManually</span> -taskstatus success 

</pre></div>
</li>
<li class="stepexpand"><span>Update the task status on each Midtier host that is listed in the <code class="codeph">HOSTNAME_MIDTIER</code> property in the <code class="codeph"><a href="GUID-3157F2F3-4AB5-48B5-80C3-0839F9FF52B8.htm#GUID-38D5EDE0-ED59-4CE6-8711-B6CE0517E078">pod.properties</a></code> file as follows:</span>
<div>
<pre dir="ltr">
(Unix)
cd <span class="italic">ORCH_LOCATION</span>/bin
./orchestration.sh updateStatus -pod <span class="italic">POD_NAME</span> -hosttype MIDTIER -hostname <span class="italic">host_name</span> -release 11.12.x.0.0 -phase DowntimePostFA -taskid <span>RunIncrementalProvisioningManually </span>-taskstatus success 

</pre></div>
</li>
<li class="stepexpand"><span>Update the task status on each OHS host that is listed in the <code class="codeph">HOSTNAME_OHS</code> property in the <code class="codeph"><a href="GUID-3157F2F3-4AB5-48B5-80C3-0839F9FF52B8.htm#GUID-38D5EDE0-ED59-4CE6-8711-B6CE0517E078">pod.properties</a></code> file as follows:</span>
<div>
<pre dir="ltr">
(Unix)
cd <span class="italic">ORCH_LOCATION</span>/bin
./orchestration.sh updateStatus -pod <span class="italic">POD_NAME</span> -hosttype OHS -hostname <span class="italic">host_name</span>  -release 11.12.x.0.0 -phase DowntimePostFA -taskid <span>RunIncrementalProvisioningManually </span>-taskstatus success 

</pre></div>
</li>
</ol>
</div>
</div>
<a id="OAPUP2527"></a><a id="OAPUP2526"></a>
<div class="sect3"><a id="GUID-E3DBAA37-DE71-474A-B4CB-2EB6A23A15FC"></a>
<h3 id="OAPUP-GUID-E3DBAA37-DE71-474A-B4CB-2EB6A23A15FC" class="sect3"><span class="enumeration_section">6.2.18</span> Resume Upgrade Orchestrator</h3>
<div>
<div class="section">
<p>Resume orchestration on all host types, including the respective scaled out hosts, using the commands in <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-3FBB01B1-047B-4699-A166-66B9951C2966">Run Upgrade Orchestrator During Downtime</a>, Steps <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-3FBB01B1-047B-4699-A166-66B9951C2966__BABIIBFE">1</a> through <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-3FBB01B1-047B-4699-A166-66B9951C2966__BABFHGJC">3</a>.</p>
<p>Upgrade Orchestrator runs the tasks shown in the following table:</p>
<div class="tblformal" id="GUID-E3DBAA37-DE71-474A-B4CB-2EB6A23A15FC__BABDCIGI">
<p class="titleintable">Table 6-5 Tasks Run For the Language Pack Upgrade</p>
<table class="cellalignment153" title="Tasks Run For the Language Pack Upgrade" summary="Task list for DowntimePostFA phase">
<thead>
<tr class="cellalignment142">
<th class="cellalignment173" id="d22286e3493">Task Name</th>
<th class="cellalignment173" id="d22286e3498">Task ID</th>
<th class="cellalignment173" id="d22286e3503">Host Types</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment142">
<td class="cellalignment176" id="d22286e3510" headers="d22286e3493">
<p>Run Post Incremental Provisioning Health Checks</p>
</td>
<td class="cellalignment176" headers="d22286e3510 d22286e3498">
<p>PostIPChecks</p>
</td>
<td class="cellalignment176" headers="d22286e3510 d22286e3503">
<p>Primordial, OHS, Midtier</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment176" id="d22286e3526" headers="d22286e3493">
<p>Run Post Upgrade GeneralSystem Health Checks</p>
</td>
<td class="cellalignment176" headers="d22286e3526 d22286e3498">
<p>GeneralSystemChecks</p>
</td>
<td class="cellalignment176" headers="d22286e3526 d22286e3503">
<p>Primordial, OHS, Midtier</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment176" id="d22286e3542" headers="d22286e3493">
<p>Update Topology Information and Worker Details</p>
</td>
<td class="cellalignment176" headers="d22286e3542 d22286e3498">
<p>UpdateTopologyInfoPlugin</p>
</td>
<td class="cellalignment176" headers="d22286e3542 d22286e3503">
<p>Primordial, Midtier</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment176" id="d22286e3558" headers="d22286e3493">
<p>Runs Configuration Actions for all Installed Languages</p>
</td>
<td class="cellalignment176" headers="d22286e3558 d22286e3498">
<p>LanguagePackConfig</p>
</td>
<td class="cellalignment176" headers="d22286e3558 d22286e3503">
<p>Primordial, Midtier</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment176" id="d22286e3574" headers="d22286e3493">
<p>Run Post Language Pack Health Checks</p>
</td>
<td class="cellalignment176" headers="d22286e3574 d22286e3498">
<p>PostLangPackChecks</p>
</td>
<td class="cellalignment176" headers="d22286e3574 d22286e3503">
<p>Primordial</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment176" id="d22286e3590" headers="d22286e3493">
<p>Perform Post Upgrade Configuration</p>
</td>
<td class="cellalignment176" headers="d22286e3590 d22286e3498">
<p>PostUpgradeConfiguration</p>
</td>
<td class="cellalignment176" headers="d22286e3590 d22286e3503">
<p>Primordial</p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment176" id="d22286e3605" headers="d22286e3493">
<p>Run Post Upgrade Cleanup Tasks</p>
</td>
<td class="cellalignment176" headers="d22286e3605 d22286e3498">
<p>PostUpgradeCleanup</p>
</td>
<td class="cellalignment176" headers="d22286e3605 d22286e3503">
<p>Primordial</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" --></div>
</div>
<a id="OAPUP2135"></a>
<div class="sect3"><a id="GUID-8ACAF982-B202-459C-BF02-74F8C797E74F"></a>
<h3 id="OAPUP-GUID-8ACAF982-B202-459C-BF02-74F8C797E74F" class="sect3"><span class="enumeration_section">6.2.19</span> Upgrade Orchestrator Completes Successfully</h3>
<div>
<div class="section">
<p>Upgrade Orchestrator generates the <span id="GUID-8ACAF982-B202-459C-BF02-74F8C797E74F__FA">Oracle Fusion Applications</span> Orchestration Report upon successful completion of the upgrade, which is reviewed as a post-upgrade task. To continue with the upgrade after all tasks complete successfully, proceed to <a href="GUID-8A80C606-D05D-4AA9-AC82-7194EF47776B.htm#GUID-8A80C606-D05D-4AA9-AC82-7194EF47776B" title="The process for disabling Oracle Java Virtual Machine (OJVM) support has already been partially completed during pre-upgrade. In particular, patch 23341410 has already been downloaded and unzipped into a stage directory. When performing a direct upgrade and if Release 11 and Release 12 are in the upgrade path,&nbsp;the FUSION_APPS_HCM_IIP_APPID credential is seeded with different passwords causing a password mismatch between&nbsp;OID and the credential store.When performing a direct upgrade to Release 12 and the fusion_aq prefix is missing in the JRFWSAsyncJmsModuleAQDOO-jms.xml file, you must rerun the fmwDS.py script.In post release 12 upgrade, the 'WSDLContext' attribute value for BISoapConnection in the CRM Domain is incorrect. After upgrading to Release 12, the Oracle Fusion Applications and Oracle Identity Management Databases can be upgrade to RDBMS 12c as it is supported for Release 12.">Run Post-Upgrade Tasks</a>.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="sect3"><a id="GUID-E9C9825C-73F7-429E-BDC6-526ED2F6C32C"></a>
<h3 id="OAPUP-GUID-E9C9825C-73F7-429E-BDC6-526ED2F6C32C" class="sect3"><span class="enumeration_section">6.2.20</span> Clean Up the Middle Tier Credential Store</h3>
<div>
<p>After running RUP Installer, the following post-upgrade step must be performed to clean up the middle tier credential store:</p>
<div class="p">
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-36D1825E-A63C-4296-AD0D-4785C182604C" title="The Credential Store Framework (CSF) Cleanup Utility runs on the Fusion Applications (FA) middle tier and removes all common users from CSF. To run the CSF Cleanup Utility manually, perform the following steps:">Run the CSF Cleanup Utility Manually</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4"><a id="GUID-36D1825E-A63C-4296-AD0D-4785C182604C"></a>
<h4 id="OAPUP-GUID-36D1825E-A63C-4296-AD0D-4785C182604C" class="sect4"><span class="enumeration_section">6.2.20.1</span> Run the CSF Cleanup Utility Manually</h4>
<div>
<p>The Credential Store Framework (CSF) Cleanup Utility runs on the Fusion Applications (FA) middle tier and removes all common users from CSF. To run the CSF Cleanup Utility manually, perform the following steps:</p>
<div class="section"></div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Go to the following directory on the FA admin host:</span>
<div>
<pre dir="ltr">
$CODE_BASE/fusionapps/applications/lcm/util/bin
</pre></div>
</li>
<li class="stepexpand"><span>Run the following command:</span>
<div>
<pre dir="ltr">
./csfClean.sh -appbase &lt;appbase&gt; -codebase &lt;codebase&gt;
</pre>
<p>Where:</p>
<div class="p">
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">-appbase</code>: The <code class="codeph"><span class="codeinlineitalic">APPLICATIONS_BASE</span></code> directory, which is the root directory under which all of the middle tier Fusion Applications (FA) and Fusion Middleware (FMW) code is installed.</p>
</li>
<li>
<p><code class="codeph">-codebase</code>: The base directory under which the utility code is installed or staged.&nbsp;By default, it is the same as <code class="codeph">-appbase</code>.&nbsp;However, when running any utility on the database (DB) host, <code class="codeph">-codebase</code> must be specified and <code class="codeph">-appbase</code> should not since there is no <code class="codeph">APPLICATIONS_BASE</code> directory on the DB host.</p>
</li>
</ul>
</div>
<p>For more information about the CSF Cleanup Utility, see <a class="olink OASAD-GUID-461E5096-D1EA-415E-B16E-B7F21523260F" target="_blank" href="../OASAD/GUID-59E310E0-149E-4C4B-8F29-53900D4A64E4.htm#OASAD-GUID-461E5096-D1EA-415E-B16E-B7F21523260F">Run Utilities</a> in the <cite><span id="GUID-36D1825E-A63C-4296-AD0D-4785C182604C__OASAD"><cite>Oracle Fusion Applications Administrator's Guide</cite></span></cite>.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<a id="OAPUP1979"></a>
<div class="sect2"><a id="GUID-AC31712A-6D9E-4EB0-946A-A80052DFFEB4"></a>
<h2 id="OAPUP-GUID-AC31712A-6D9E-4EB0-946A-A80052DFFEB4" class="sect2"><span class="enumeration_section">6.3</span> Pause Point Steps</h2>
<div>
<p>This section describes the detailed steps required only by the following default pause points:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-7A8398A3-D8D8-4A06-ABB2-E453620AC76C">Upgrade the Oracle Identity Management Domain to Release 12 (11.12.x.0.0)</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-383D62FD-C490-4397-8FF7-4DAAD1C83CB4">Run RUP Lite for OVM in Pre-Root Mode (Oracle VM Only)</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-8C4BD64E-07DC-4D4B-8245-384DEC2A275C">Run RUP Lite for OVM in Post-Root Mode (Oracle VM Only)</a></p>
</li>
</ul>
</div>
<div class="sect3"><a id="GUID-7A8398A3-D8D8-4A06-ABB2-E453620AC76C"></a>
<h3 id="OAPUP-GUID-7A8398A3-D8D8-4A06-ABB2-E453620AC76C" class="sect3"><span class="enumeration_section">6.3.1</span> Upgrade the Oracle Identity Management Domain to Release 12 (11.12.x.0.0)</h3>
<div>
<p>Before performing an upgrade to Release 12 (11.12.x.0.0), check the <span class="italic">Oracle Fusion Applications Technical Known Issues - Release 12 (Doc ID 2224140.1)</span> for the latest information on required patches.</p>
<p>Perform the following steps to manually upgrade the Oracle Identity Management domain to Release 12 (11.12.x.0.0):</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-57647584-5A2D-4FF2-A3C9-A3CF55BED37C">Perform Preinstallation and Upgrade Tasks</a></p>
</li>
</ul>
<p>For more information about the Oracle Identity Management domain, see <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-F9BBBBE7-775D-413C-B3A8-BCD5216F2573">Overview of Upgrade Patches</a> and <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-241A14D5-8D27-4C30-A0AD-6D49F2FA357D">About Identity Management Domain, Nodes and Oracle homes</a>.</p>
</div>
<div class="sect4"><a id="GUID-F9BBBBE7-775D-413C-B3A8-BCD5216F2573"></a>
<h4 id="OAPUP-GUID-F9BBBBE7-775D-413C-B3A8-BCD5216F2573" class="sect4"><span class="enumeration_section">6.3.1.1</span> Overview of Upgrade Patches</h4>
<div>
<div class="section">
<p>Oracle Identity Management for Oracle Fusion Applications 11<span class="italic">g</span>, Release 12 (11.12.x.0.0) includes patches for the following products that are installed in the Oracle Identity Management domain:</p>
<ul style="list-style-type: disc;">
<li>
<p>Oracle IDM Tools</p>
</li>
<li>
<p>Oracle Access Manager</p>
</li>
<li>
<p>Oracle WebGate</p>
</li>
<li>
<p>Oracle Internet Directory</p>
</li>
</ul>
<p>The Oracle Fusion Applications Release 12 Identity Management software and patches for the appropriate platform are available in the Oracle Fusion Applications repository under <span class="italic"><code class="codeph">SHARED_LOCATION/</code></span><code class="codeph">11.12.x.0.0/</code><code class="codeph">Repository/</code><code class="codeph">installers</code>. Review the individual patch <code class="codeph">Readme</code> files before applying them.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="sect4"><a id="GUID-241A14D5-8D27-4C30-A0AD-6D49F2FA357D"></a>
<h4 id="OAPUP-GUID-241A14D5-8D27-4C30-A0AD-6D49F2FA357D" class="sect4"><span class="enumeration_section">6.3.1.2</span> About Identity Management Domain, Nodes and Oracle homes</h4>
<div>
<div class="section">
<p>This section describes the nodes and Oracle homes in the Identity Management domain for Oracle Fusion Applications 11<span class="italic">g</span> Release 12 (11.12.x.0.0).</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Identity Management (IDM) Node</span></p>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code class="codeph">WEBLOGIC_ORACLE_HOME</code></span>: (For IDM provisioned environments, this is <span class="italic"><code class="codeph">IDM_BASE/</code></span><code class="codeph">products/dir/wlserver_10.3</code>):</p>
<ul style="list-style-type: disc;">
<li>
<p>Oracle WebLogic Server</p>
</li>
</ul>
</li>
</ul>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code class="codeph">IDM_ORACLE_HOME</code></span>: This is also known as the <span class="italic"><code class="codeph">OID_ORACLE_HOME</code></span>. (For IDM provisioned environments, this is <span class="italic"><code class="codeph">IDM_BASE/</code></span><code class="codeph">products/dir/oid</code>). The following Oracle Identity Management products are installed in this Oracle home:</p>
<ul style="list-style-type: disc;">
<li>
<p>Oracle Internet Directory</p>
</li>
<li>
<p>Oracle Virtual Directory</p>
</li>
<li>
<p>Oracle Directory Services Manager</p>
</li>
</ul>
</li>
</ul>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code class="codeph">IDM_ORACLE_COMMON_HOME</code></span>: (For IDM provisioned environments, this is <span class="italic"><code class="codeph">IDM_BASE/</code></span><code class="codeph">products/dir/oracle_common</code>). The following Oracle Identity Management products are installed in this Oracle home:</p>
<ul style="list-style-type: disc;">
<li>
<p>Oracle Platform Security Services (OPSS)</p>
</li>
<li>
<p>Oracle Web Services Manager (OWSM)</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Database Node</span></p>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code class="codeph">RDBMS_ORACLE_HOME</code></span>: This is the <span class="italic"><code class="codeph">ORACLE_HOME</code></span> of the <span id="GUID-241A14D5-8D27-4C30-A0AD-6D49F2FA357D__DBGEN">Oracle Database</span>. Apply mandatory database patches to this Oracle home.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<div class="sect4"><a id="GUID-57647584-5A2D-4FF2-A3C9-A3CF55BED37C"></a>
<h4 id="OAPUP-GUID-57647584-5A2D-4FF2-A3C9-A3CF55BED37C" class="sect4"><span class="enumeration_section">6.3.1.3</span> Perform Preinstallation and Upgrade Tasks</h4>
<div>
<p>Perform the following tasks to upgrade Oracle Identity Management:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-6F435664-6993-489F-97C2-D5B54E6D8810">Verify Prerequisites</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-AA8D64F6-5CF6-4C17-8801-F6246192D787">Stop the Servers and Processes</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-BB9DE2A6-62A4-4382-8DCA-2685BEDFD168">Create Backups</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-C3021B35-38FE-46CF-8143-6361A2F67B90">Patch the Database (RDBMS_ORACLE_HOME)</a></p>
</li>
<li>
<p><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-51FAC4EC-E467-4623-8C03-747FD8A5044E">Patch the Database Clients</a></p>
</li>
</ul>
</div>
<div class="sect5"><a id="GUID-6F435664-6993-489F-97C2-D5B54E6D8810"></a>
<h5 id="OAPUP-GUID-6F435664-6993-489F-97C2-D5B54E6D8810" class="sect5"><span class="enumeration_section">6.3.1.3.1</span> Verify Prerequisites</h5>
<div>
<div class="section">
<p>Ensure that the environment meets the following requirements before installing or uninstalling the patch:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Verify the OUI Inventory</p>
<p>OPatch needs access to a valid OUI inventory to apply patches. Validate the OUI inventory with the following command:</p>
<pre dir="ltr">
opatch lsinventory
</pre>
<p>If the command errors out, contact Oracle Support for assistance in validating and verifying the inventory setup before proceeding.</p>
</li>
<li>
<p>Confirm the executables appear in the system <code class="codeph">PATH</code>.</p>
<p>The patching process uses the <code class="codeph">unzip</code> and the <code class="codeph">OPatch</code> executables. After setting the ORACLE_HOME environment, confirm whether the following executables exist, before proceeding to the next step.</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">which opatch</code></p>
</li>
<li>
<p><code class="codeph">which unzip</code></p>
</li>
</ul>
</li>
</ul>
<p>For more information about OPatch, see the Patching Oracle Fusion Middleware with Oracle OPatch section in the <span class="italic">Oracle Fusion Middleware Patching Guide</span>.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="sect5"><a id="GUID-AA8D64F6-5CF6-4C17-8801-F6246192D787"></a>
<h5 id="OAPUP-GUID-AA8D64F6-5CF6-4C17-8801-F6246192D787" class="sect5"><span class="enumeration_section">6.3.1.3.2</span> Stop the Servers and Processes</h5>
<div>
<div class="section">
<p>To stop the servers and processes, perform the following steps:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>In the Oracle Identity Management domain, stop all Oracle Identity Management services and processes using the following sequence. Do not stop the database:</p>
<p>Stop the following servers and processes:</p>
<ul style="list-style-type: disc;">
<li>
<p>Oracle HTTP Server</p>
</li>
<li>
<p>Oracle Identity Manager managed servers</p>
</li>
<li>
<p>Oracle SOA managed servers</p>
</li>
<li>
<p>Oracle Identity Federation managed servers</p>
</li>
<li>
<p>Oracle Access Manager managed servers</p>
</li>
<li>
<p>Oracle Directory Services Manager</p>
</li>
<li>
<p>Oracle WebLogic Administration Server for the Oracle Identity Management domain</p>
</li>
<li>
<p>Oracle Virtual Directory</p>
</li>
<li>
<p>Oracle Internet Directory</p>
</li>
</ul>
</li>
</ul>
<p>For more information about specific commands for stopping components, see <a href="GUID-4CF23357-D8FE-42D2-9CB4-071775464DC8.htm#GUID-4CF23357-D8FE-42D2-9CB4-071775464DC8">Stop and Start Identity Management Related Servers</a>.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="sect5"><a id="GUID-BB9DE2A6-62A4-4382-8DCA-2685BEDFD168"></a>
<h5 id="OAPUP-GUID-BB9DE2A6-62A4-4382-8DCA-2685BEDFD168" class="sect5"><span class="enumeration_section">6.3.1.3.3</span> Create Backups</h5>
<div>
<div class="section">
<p>At a minimum, create the following backups:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Middleware home directory (including the Oracle home directories inside the Middleware home)</p>
</li>
<li>
<p>Local domain home directory</p>
</li>
<li>
<p>Local Oracle instances</p>
</li>
<li>
<p>Domain home and Oracle instances on any remote systems that use the Middleware home</p>
</li>
<li>
<p>The database</p>
<p>Ensure the backup includes the schema version registry table, as each Fusion Middleware schema has a row in this table. The name of the schema version registry table is <code class="codeph">SYSTEM.SCHEMA_VERSION_REGISTRY$</code>.</p>
</li>
<li>
<p>The Configurations and Stores&mdash;specifically, all data under the root node of the LDAP store</p>
</li>
<li>
<p>Any Oracle Identity Federation Java Server Pages (JSP) that was customized</p>
<p>The patching process overwrites JSPs included in the <code class="codeph">oif.ear</code> file. After completing the patching process, restore the custom JSPs.</p>
</li>
</ul>
<p>In addition to the preceding backups, Oracle recommends performing your organization's typical backup processes.</p>
<p>Refer to the Backing Up Your Middleware Home, Domain Home and Oracle Instances, Backing Up Your Database and Database Schemas, and Backing Up Additional Configuration Information sections in the <span class="italic">Oracle Fusion Middleware Patching Guide</span> for detailed information about creating the backups.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="sect5"><a id="GUID-51FAC4EC-E467-4623-8C03-747FD8A5044E"></a>
<h5 id="OAPUP-GUID-51FAC4EC-E467-4623-8C03-747FD8A5044E" class="sect5"><span class="enumeration_section">6.3.1.3.4</span> Patch the Database Clients</h5>
<div>
<div class="section">
<p>The Database Client patches are available under the <span class="italic"><code class="codeph">SHARED_LOCATION/</code></span><code class="codeph">11.12.x.0.0/</code><code class="codeph">Repository/</code><code class="codeph">installers/dbclient/patch</code> directory. Follow the patch <code class="codeph">Readme</code> and apply all patches in the directory. To apply all patches, proceed as follows:</p>
</div>
<!-- class="section" -->
<div class="section">
<ol>
<li>
<p>Set the Oracle home to <span class="italic"><code class="codeph">RDBMS_ORACLE_HOME</code></span>, for example, <code class="codeph">ORACLE_HOME/u01/oid/oid_home</code>.</p>
</li>
<li>
<p>Go to the patch directory as follows:</p>
<pre dir="ltr">
cd <span class="italic">SHARED_LOCATION/</span>11.12.x.0.0/Repository/installers/dbclient/patch
</pre></li>
<li>
<p>Run <code class="codeph">opatch</code> using the <code class="codeph">napply</code> option.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<div class="sect5"><a id="GUID-C3021B35-38FE-46CF-8143-6361A2F67B90"></a>
<h5 id="OAPUP-GUID-C3021B35-38FE-46CF-8143-6361A2F67B90" class="sect5"><span class="enumeration_section">6.3.1.3.5</span> Patch the Database (RDBMS_ORACLE_HOME)</h5>
<div>
<div class="section">
<p>Ensure the patches listed in <a href="GUID-3443FB53-034A-4ADC-AE17-8C23751A01A1.htm#GUID-3443FB53-034A-4ADC-AE17-8C23751A01A1" title="This section describes how to update an Oracle Fusion Applications database and Oracle Identity Management database before an upgrade. The following topics are discussed:">Update the Oracle Fusion Applications and Oracle Identity Management Databases</a> are applied on the Identity Management database to keep both Oracle Fusion Applications and Identity Management databases synchronized. To apply the patches, follow the steps listed in <a href="GUID-3443FB53-034A-4ADC-AE17-8C23751A01A1.htm#GUID-3443FB53-034A-4ADC-AE17-8C23751A01A1" title="This section describes how to update an Oracle Fusion Applications database and Oracle Identity Management database before an upgrade. The following topics are discussed:">Update the Oracle Fusion Applications and Oracle Identity Management Databases</a>.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
<a id="OAPUP2803"></a>
<div class="sect3"><a id="GUID-383D62FD-C490-4397-8FF7-4DAAD1C83CB4"></a>
<h3 id="OAPUP-GUID-383D62FD-C490-4397-8FF7-4DAAD1C83CB4" class="sect3"><span class="enumeration_section">6.3.2</span> Run RUP Lite for OVM in Pre-Root Mode (Oracle VM Only)</h3>
<div>
<div class="section">
<p>Run RUP Lite for OVM in pre-root mode locally on every node on the Oracle VM, for example, primordial, Midtier, IDM, and OHS. Use the -i option to point to the Release 12 <code class="codeph">rupliteovm/metadata</code> directory that was set up as part of the pre-upgrade preparation in <a href="GUID-5413A516-96B1-4B54-B7AA-E5A728B11A4F.htm#GUID-CDEE35E5-FC05-4BCA-BB9C-4FA5250A37B8">Prepare RUP Lite for OVM</a>. Run this command as super user (root) as follows:</p>
<pre dir="ltr">
setenv JAVA_HOME java_home_directory
cd /u01/lcm/rupliteovm
bin/ruplite.sh pre-root -i ORCH_LOCATION/config/POD_NAME/11.12.x.0.0/rupliteovm/metadata
</pre>
<p>Then, proceed to <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-9E8B7CD2-0E44-4A36-8505-47779B1EA62B">Update Status to Success (Oracle VM Only)</a>.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="sect3"><a id="GUID-8C4BD64E-07DC-4D4B-8245-384DEC2A275C"></a>
<h3 id="OAPUP-GUID-8C4BD64E-07DC-4D4B-8245-384DEC2A275C" class="sect3"><span class="enumeration_section">6.3.3</span> Run RUP Lite for OVM in Post-Root Mode (Oracle VM Only)</h3>
<div>
<div class="section">Run RUP Lite for OVM in post-root mode locally on every node on the Oracle VM, for example, primordial, Midtier, IDM, and OHS. Use the -i option to point to the Release 12 <code class="codeph">rupliteovm/metadata</code> directory that was set up as part of the pre-upgrade preparation in <a href="GUID-5413A516-96B1-4B54-B7AA-E5A728B11A4F.htm#GUID-CDEE35E5-FC05-4BCA-BB9C-4FA5250A37B8">Prepare RUP Lite for OVM</a>. Run this command as super user (root) as follows:</div>
<!-- class="section" -->
<div class="p">
<pre dir="ltr">
setenv JAVA_HOME java_home_directory
cd /u01/lcm/rupliteovm
bin/ruplite.sh post-root -I <span class="italic">ORCH_LOCATION/</span>config/<span class="italic">POD_NAME</span>/11.12.x.0.0/rupliteovm/metadata
</pre></div>
<!-- class="section" -->
<div class="section"></div>
<!-- class="section" --></div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment141">
<tr>
<td class="cellalignment150">
<table class="cellalignment146">
<tr>
<td class="cellalignment145"><a href="GUID-3DDF50C7-783C-4091-B1BF-20A5A5465BA1.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment145"><a href="GUID-3B21D3BE-4AFB-4246-908D-00F3D73AC53A.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2011, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment152">
<table class="cellalignment144">
<tr>
<td class="cellalignment145"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment145"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
