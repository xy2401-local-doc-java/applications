<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Run Pre-Downtime Checks</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="This section describes how to ensure system reliability by running pre-downtime checks. The following topics are discussed:" />
<meta name="dcterms.created" content="2018-03-22T11:25:04Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Applications Upgrade Guide" />
<meta name="dcterms.identifier" content="E70415-09" />
<meta name="dcterms.isVersionOf" content="OAPUP" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2011, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="GUID-89F8BA95-C492-4C35-82FD-3DA6B14E879B.htm" title="Previous" type="text/html" />
<link rel="Next" href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm" title="Next" type="text/html" />
<link rel="alternate" href="OAPUP.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-3DDF50C7-783C-4091-B1BF-20A5A5465BA1"></a> <span id="PAGE" style="display:none;">9/17</span> <!-- End Header -->
<a id="OAPUP2609"></a><a id="OAPUP2608"></a>
<h1 id="OAPUP-GUID-3DDF50C7-783C-4091-B1BF-20A5A5465BA1" class="sect1"><span class="enumeration_chapter">5</span> Run Pre-Downtime Checks</h1>
<div>
<div><span>This section describes how to ensure system reliability by running pre-downtime checks. The following topics are discussed:</span></div>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-3DDF50C7-783C-4091-B1BF-20A5A5465BA1.htm#GUID-42A89FDB-2A25-4A5F-B9D5-8BDEA0E269B9">Run the Health Checker Utility</a></p>
</li>
<li>
<p><a href="GUID-3DDF50C7-783C-4091-B1BF-20A5A5465BA1.htm#GUID-42078932-952D-43A3-9044-58A6FE40036B">Run the Prevalidation Check on IDM Hosts</a></p>
</li>
</ul>
</div>
<a id="OAPUP2610"></a>
<div class="sect2"><a id="GUID-42A89FDB-2A25-4A5F-B9D5-8BDEA0E269B9"></a>
<h2 id="OAPUP-GUID-42A89FDB-2A25-4A5F-B9D5-8BDEA0E269B9" class="sect2"><span class="enumeration_section">5.1</span> Run the Health Checker Utility</h2>
<div>
<p>Health Checker is a command line utility that performs a set of validation checks against an Oracle Fusion Applications environment to ensure that the environment meets recommended standards. When Health Checker runs, it uses a specific manifest file that performs the appropriate checks. Health Checker provides a list of corrective actions for any checks that fail validation. The suggested corrective actions must be run manually to fix the issue before proceeding with the upgrade. The following topics are discussed in this section:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-3DDF50C7-783C-4091-B1BF-20A5A5465BA1.htm#GUID-1B1DA5DA-4DE0-4DD5-94BE-9F585910EE06">Pre-Downtime Health Checker Manifests</a></p>
</li>
<li>
<p><a href="GUID-3DDF50C7-783C-4091-B1BF-20A5A5465BA1.htm#GUID-A4A0F868-3D16-4AFD-BD15-1C550EEA1E46">Run Health Checker on the Primordial Host</a></p>
</li>
<li>
<p><a href="GUID-3DDF50C7-783C-4091-B1BF-20A5A5465BA1.htm#GUID-216F9D05-1FF7-427E-ADBD-64E12D933AFE">Run Health Checker on the Midtier Host</a></p>
</li>
<li>
<p><a href="GUID-3DDF50C7-783C-4091-B1BF-20A5A5465BA1.htm#GUID-88AF70F4-DD77-4B3F-B844-9F2FF5B9D694">Run Health Checker on the OHS Host</a></p>
</li>
</ul>
</div>
<a id="OAPUP2611"></a>
<div class="sect3"><a id="GUID-1B1DA5DA-4DE0-4DD5-94BE-9F585910EE06"></a>
<h3 id="OAPUP-GUID-1B1DA5DA-4DE0-4DD5-94BE-9F585910EE06" class="sect3"><span class="enumeration_section">5.1.1</span> Pre-Downtime Health Checker Manifests</h3>
<div>
<div class="section">
<p>When running Health Checker during pre-downtime, the following manifests are run:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">GeneralSystemHealthChecks.xml</code>: Run on the Primordial, Midtier, and OHS hosts</p>
</li>
<li>
<p><code class="codeph">PreDowntimeUpgradeReadinessHealthChecks.xml</code>: Run on the Primordial, Midtier, and OHS hosts</p>
</li>
<li>
<p><code class="codeph">DataQualityChecks.xml</code>: Run on the Primordial host only</p>
</li>
</ul>
<p>For more information about the checks performed by Health Checker, see <a href="GUID-30562294-F253-4262-8867-30645D049237.htm#GUID-B1C936C8-9301-4D0D-AC4A-724E62082B95">Health Checker Plug-ins</a>.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="sect3"><a id="GUID-C39F1DA3-F381-4BC0-8011-24A587A59635"></a>
<h3 id="OAPUP-GUID-C39F1DA3-F381-4BC0-8011-24A587A59635" class="sect3"><span class="enumeration_section">5.1.2</span> Check for Supported Perl Versions</h3>
<div>
<p>Ensure that a supported Perl version is running. The following are the only versions that are supported:</p>
<ul style="list-style-type: disc;">
<li>
<p>5.8.8 (default in OEL5)</p>
</li>
<li>
<p>5.10.0 (bundled with MW_HOMEs)</p>
</li>
<li>
<p>5.10.1 (default in OEL6)</p>
</li>
</ul>
</div>
</div>
<a id="OAPUP2687"></a><a id="OAPUP2612"></a>
<div class="sect3"><a id="GUID-A4A0F868-3D16-4AFD-BD15-1C550EEA1E46"></a>
<h3 id="OAPUP-GUID-A4A0F868-3D16-4AFD-BD15-1C550EEA1E46" class="sect3"><span class="enumeration_section">5.1.3</span> Run Health Checker on the Primordial Host</h3>
<div>
<div class="section">
<div class="p">Before running Health Checker (HC) on the Primordial host, verify that the preupgrade JRE locations is as follows:
<pre dir="ltr">
<span class="italic">APPLICATIONS_BASE</span>/fusionapps/jdk6/
</pre></div>
</div>
<!-- class="section" -->
<div class="section">
<p>After the location has been verified, run Health Checker on the Primordial host by performing the following steps:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Confirm that all <span id="GUID-A4A0F868-3D16-4AFD-BD15-1C550EEA1E46__FA">Oracle Fusion Applications</span>, database and Oracle Identity Management services are up and running.</span></li>
<li class="stepexpand"><span>Set the following environment variables:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code class="codeph">APPLICATIONS_BASE</code></span>: The directory that contains Oracle Fusion Applications. For example, if Oracle Fusion Applications is installed in <code class="codeph">/u01/APPTOP/fusionapps</code>, then set the <code class="codeph">APPLICATIONS_BASE</code> environment variable to <code class="codeph">/u01/APPTOP</code>.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">DOWNLOAD_PATCH_DIR</code></span>: The location where post-release patches were downloaded, <span class="italic"><code class="codeph">SHARED_LOCATION/</code></span><code class="codeph">11.12.x.0.0&shy;_post_repo_patches,</code> in <a href="GUID-5413A516-96B1-4B54-B7AA-E5A728B11A4F.htm#GUID-05750A63-6FB7-4AFB-B58B-6194A44D7FA9">Download and Unzip Mandatory Post-Release 12 Patches</a>.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">HC_OVERRIDE_FILES</code></span>: The location of any Health Checker overrides that may have been created, as described in <a href="GUID-5413A516-96B1-4B54-B7AA-E5A728B11A4F.htm#GUID-55DC1C56-2AD9-427C-99D8-C7F8B68C0615">Download Patches for the Health Checker Exclusion List</a>. If the <code class="codeph">HC_OVERRIDE_FILES</code> variable is not set, the default location is <span class="italic"><code class="codeph">APPLICATIONS_BASE/</code></span><code class="codeph">instance/fapatch/healthchecker.</code> Note that when Health Checker is run through orchestration, this environment variable is set by orchestration, to <span class="italic"><code class="codeph">SHARED_UPGRADE_LOCATION/</code></span><code class="codeph">healthchecker</code>/<span class="italic"><code class="codeph">POD_NAME</code></span>.</p>
<p>It is possible to skip this environment variable if there are no Health Checker overrides.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">RUP_OVERRIDE</code></span>: The location of the override file for RUP Installer, that may have been created in <a href="GUID-5413A516-96B1-4B54-B7AA-E5A728B11A4F.htm#GUID-59518E1C-BD48-4FE0-BDC2-59914710CFB5">Create an Override File for RUP Installer</a>. If there is not an override file for RUP Installer, skip this environment variable.</p>
</li>
<li>
<p><code class="codeph">REPOSITORY_LOCATION</code>: The directory that contains the repository <code class="codeph">SHARED_LOCATION/11.12.x.0.0/Repository</code>. See <a href="GUID-5413A516-96B1-4B54-B7AA-E5A728B11A4F.htm#GUID-C6F261EC-2385-4E19-A165-03B7E8A11B48" title="The BI patch 25499241 application fails in Fusion Applications (FA) upgrade in Release 11.12.x.0.0. To resolve this issue, perform the following steps:">Download and Unzip the Release 12 Repository</a>.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Run Health Checker for each manifest:</span>
<div>Note that this is one command.</div>
<div>
<pre dir="ltr">
(UNIX)
<span class="italic">ORCH_LOCATION/</span>fusionapps/applications/lcm/hc/bin/hcplug.sh -hostType PRIMORDIAL -manifest 
<span class="italic">ORCH_LOCATION/</span>fusionapps/applications/lcm/hc/config/GeneralSystemHealthChecks.xml [-DlogLevel=<span class="italic">log_level</span>] 

<span class="italic">ORCH_LOCATION/</span>fusionapps/applications/lcm/hc/bin/hcplug.sh -hostType PRIMORDIAL -manifest 
<span class="italic">ORCH_LOCATION/</span>fusionapps/applications/lcm/hc/config/PreDowntimeUpgradeReadinessHealthChecks.xml [-DlogLevel=<span class="italic">log_level</span>] 

<span class="italic">ORCH_LOCATION/</span>fusionapps/applications/lcm/hc/bin/hcplug.sh -hostType PRIMORDIAL -manifest 
<span class="italic">ORCH_LOCATION/</span>fusionapps/applications/lcm/hc/config/DataQualityChecks.xml [-DlogLevel=<span class="italic">log_level</span>] 

</pre></div>
</li>
<li class="stepexpand"><span>If any health checks fail, refer to the Health Checker log files and reports to find the corrective actions to resolve the issue. The suggested corrective actions must be run manually to fix the issue before proceeding with the upgrade. Then rerun Health Checker to ensure all checks are successful. Optionally, use the -<code class="codeph">checkpoint true</code> option when restarting Health Checker, so that only the failed plug-ins or the plug-ins that did not run are executed.</span>
<div>
<p>If the failure is a known issue and the check needs to be excluded, see <a href="GUID-30562294-F253-4262-8867-30645D049237.htm#GUID-B8D60277-F891-4A77-A643-25B95AEEBA4E" title="The all_overrides.xml file will define plug-in exclusions. These exclusions are applicable across the fleet. Checks disabled out of the box, and checks disabled due to emergency patch will be combined in this file. This file cannot be edited.The file FA_pods_overrides.xml can be used to define custom/pod-specific check exclusions. If there is a need to exclude a specific plugin, or to re-enable one of the excluded plugins, use this file as it will have higher precedence than all_overrides.xml.The following example shows an exclusion in the all_overrides.xml file:It is possible to exclude a plug-in for a specific host, a specific version of the Oracle Fusion Cloud Application, or a combination of both.">Override Health Checks</a>.</p>
<div class="p">The following table provides the location of log files and reports on the primordial host. Health Checker log directories are created with reference to version being upgraded from. For example:
<ul style="list-style-type: disc;">
<li>
<p>If the upgrade is from 11.1.8.0.0 to 11.1.11.0.0, the log directory is 11.1.8.0.0.</p>
</li>
<li>
<p>If the upgrade is from 11.1.9.2.0, the log directory is 11.1.9.2.0.</p>
</li>
<li>
<p>If the upgrade is from 11.1.10.0.0, the log directory is 11.1.10.0.0.</p>
</li>
<li>
<p>If the upgrade is from 11.1.11.0.0, the log directory is 1.1.11.0.0</p>
</li>
</ul>
</div>
<div class="tblformal" id="GUID-A4A0F868-3D16-4AFD-BD15-1C550EEA1E46__GUID-6439F1A0-7DEB-4CBF-A5D5-37A502F189DB">
<p class="titleintable">Table 5-1 Health Checker Log Files and Reports on the Primordial Host</p>
<table class="cellalignment190" title="Health Checker Log Files and Reports on the Primordial Host" summary="Logs and reports for Health Checker on primordial host">
<thead>
<tr class="cellalignment142">
<th class="cellalignment172" id="d19564e364">Manifest File Name</th>
<th class="cellalignment209" id="d19564e367">Log File Location</th>
<th class="cellalignment210" id="d19564e370">Report Location - html and xml formats</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment142">
<td class="cellalignment175" id="d19564e375" headers="d19564e364">
<p><code class="codeph">GeneralSystemHealthChecks.xml</code></p>
</td>
<td class="cellalignment211" headers="d19564e375 d19564e367">
<p><span class="italic"><code class="codeph">APPLICATIONS_CONFIG/</code></span><code class="codeph">lcm/logs/11.1.11.0.0/healthchecker/primordial_</code><span class="italic"><code class="codeph">hostname</code></span><code class="codeph">-GeneralSystemHealthChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.log</code></p>
</td>
<td class="cellalignment212" headers="d19564e375 d19564e370">
<p><span class="italic"><code class="codeph">APPLICATIONS_CONFIG/</code></span><code class="codeph">lcm/logs/11.1.11.0.0/healthchecker/primordial_</code><span class="italic"><code class="codeph">hostname</code></span><code class="codeph">-GeneralSystemHealthChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.html</code></p>
<p><span class="italic"><code class="codeph">APPLICATIONS_CONFIG/</code></span><code class="codeph">lcm/logs/11.1.11.0.0/healthchecker/primordial_</code><span class="italic"><code class="codeph">hostname</code></span><code class="codeph">-GeneralSystemHealthChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.xml</code></p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment175" id="d19564e430" headers="d19564e364">
<p><code class="codeph">PreDowntimeUpgradeReadinessHealthChecks.xml</code></p>
</td>
<td class="cellalignment211" headers="d19564e430 d19564e367">
<p><span class="italic"><code class="codeph">APPLICATIONS_CONFIG/</code></span><code class="codeph">lcm/logs/11.1.11.0.0/healthchecker/primordial_</code><span class="italic"><code class="codeph">hostname</code></span><code class="codeph">-PreDowntimeUpgradeReadinessHealthChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.log</code></p>
</td>
<td class="cellalignment212" headers="d19564e430 d19564e370">
<p><span class="italic"><code class="codeph">APPLICATIONS_CONFIG/</code></span><code class="codeph">lcm/logs/11.1.11.0.0/healthchecker/primordial_</code><span class="italic"><code class="codeph">hostname</code></span><code class="codeph">-PreDowntimeUpgradeReadinessHealthChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.html</code></p>
<p><span class="italic"><code class="codeph">APPLICATIONS_CONFIG/</code></span><code class="codeph">lcm/logs/11.1.11.0.0/healthchecker/primordial_</code><span class="italic"><code class="codeph">hostname</code></span><code class="codeph">-PreDowntimeUpgradeReadinessHealthChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.xml</code></p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment175" id="d19564e485" headers="d19564e364">
<p><code class="codeph">DataQualityChecks.xml</code></p>
</td>
<td class="cellalignment211" headers="d19564e485 d19564e367">
<p><span class="italic"><code class="codeph">APPLICATIONS_CONFIG/</code></span><code class="codeph">lcm/logs11.1.11.0.0/healthchecker/primordial_</code><span class="italic"><code class="codeph">hostname</code></span><code class="codeph">-DataQualityChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.log</code></p>
</td>
<td class="cellalignment212" headers="d19564e485 d19564e370">
<p><span class="italic"><code class="codeph">APPLICATIONS_CONFIG/</code></span><code class="codeph">lcm/logs/11.1.11.0.0/healthchecker/primordial_</code><span class="italic"><code class="codeph">hostname</code></span><code class="codeph">-DataQualityHealthChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.html</code></p>
<p><span class="italic"><code class="codeph">APPLICATIONS_CONFIG/</code></span><code class="codeph">lcm/logs/11.1.11.0.0/healthchecker/primordial_</code><span class="italic"><code class="codeph">hostname</code></span><code class="codeph">-DataQualityChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.xml</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</li>
</ol>
</div>
</div>
<a id="OAPUP2615"></a><a id="OAPUP2614"></a>
<div class="sect3"><a id="GUID-216F9D05-1FF7-427E-ADBD-64E12D933AFE"></a>
<h3 id="OAPUP-GUID-216F9D05-1FF7-427E-ADBD-64E12D933AFE" class="sect3"><span class="enumeration_section">5.1.4</span> Run Health Checker on the Midtier Host</h3>
<div>
<div class="section">
<div class="p">Before running Health Checker (HC) on the midtier host, verify that the preupgrade JRE locations is as follows:
<pre dir="ltr">
<span class="italic">APPLICATIONS_BASE</span>/fusionapps/jdk6/
</pre></div>
<p>After the location has been verified, run Health Checker on the midtier host by performing the following steps:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Set the following environment variables:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code class="codeph">APPLICATIONS_BASE</code></span>: The directory that contains Oracle Fusion Applications. For example, if Oracle Fusion Applications is installed in <code class="codeph">/u01/APPTOP/fusionapps</code>, then set the <code class="codeph">APPLICATIONS_BASE</code> environment variable to <code class="codeph">/u01/APPTOP</code>.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">REPOSITORY_LOCATION</code></span>: The directory where the repository is staged, <span class="italic"><code class="codeph">SHARED_LOCATION/</code></span><code class="codeph">11.12.x.0.0/Repository</code>.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">HC_OVERRIDE_FILES:</code></span> The location of any Health Checker overrides that may have been created, as described in <a href="GUID-5413A516-96B1-4B54-B7AA-E5A728B11A4F.htm#GUID-55DC1C56-2AD9-427C-99D8-C7F8B68C0615">Download Patches for the Health Checker Exclusion List</a>. If the <code class="codeph">HC_OVERRIDE_FILES</code> variable is not set, the default location is <span class="italic"><code class="codeph">APPLICATIONS_BASE/</code></span><code class="codeph">instance/fapatch/healthchecker.</code> Note that when Health Checker is run through orchestration, this environment variable is set by orchestration, to <span class="italic"><code class="codeph">SHARED_UPGRADE_LOCATION/</code></span><code class="codeph">healthchecker</code>/<span class="italic"><code class="codeph">POD_NAME</code></span>.</p>
<p>It is possible to skip this environment variable if there are no Health Checker overrides.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Run Health Checker for each manifest as follows:</span>
<div>Note that this is one command.</div>
<div>
<pre dir="ltr">
(UNIX)
<span class="italic">ORCH_LOCATION/</span>fusionapps/applications/lcm/hc/bin/hcplug.sh  -hostType MIDTIER -manifest 
<span class="italic">ORCH_LOCATION/</span>fusionapps/applications/lcm/hc/config/GeneralSystemHealthChecks.xml  [-DlogLevel=<span class="italic">log_level</span>] 

<span class="italic">ORCH_LOCATION/</span>fusionapps/applications/lcm/hc/bin/hcplug.sh -hostType MIDTIER -manifest 
<span class="italic">ORCH_LOCATION/</span>fusionapps/applications/lcm/hc/config/PreDowntimeUpgradeReadinessHealthChecks.xml [-DlogLevel=<span class="italic">log_level</span>] 
</pre></div>
</li>
<li class="stepexpand"><span>If any health checks fail, refer to the Health Checker log files and reports to find the corrective actions to resolve the issue. The suggested corrective actions must be run manually to fix the issue before proceeding with the upgrade. Then rerun Health Checker to ensure all checks are successful. Optionally, use the -<code class="codeph">checkpoint true</code> option when restarting Health Checker, so that only the failed plug-ins or the plug-ins that did not run are executed.</span>
<div>
<p>If the failure is a known issue and the check needs to be excluded, see <a href="GUID-30562294-F253-4262-8867-30645D049237.htm#GUID-B8D60277-F891-4A77-A643-25B95AEEBA4E" title="The all_overrides.xml file will define plug-in exclusions. These exclusions are applicable across the fleet. Checks disabled out of the box, and checks disabled due to emergency patch will be combined in this file. This file cannot be edited.The file FA_pods_overrides.xml can be used to define custom/pod-specific check exclusions. If there is a need to exclude a specific plugin, or to re-enable one of the excluded plugins, use this file as it will have higher precedence than all_overrides.xml.The following example shows an exclusion in the all_overrides.xml file:It is possible to exclude a plug-in for a specific host, a specific version of the Oracle Fusion Cloud Application, or a combination of both.">Override Health Checks</a>.</p>
<div class="p">The following table provides the location of log files and reports on the Midtier host. Health Checker log directories are created with reference to version being upgraded from. For example:
<ul style="list-style-type: disc;">
<li>If the upgrade is from 11.1.8.0.0 to 11.1.10.3.0, the log directory is 11.1.8.0.0.</li>
<li>If the upgrade is from 11.1.9.2.0, the log directory is 11.1.9.2.0.</li>
</ul>
</div>
<div class="tblformal" id="GUID-216F9D05-1FF7-427E-ADBD-64E12D933AFE__GUID-6C75606D-3237-4692-88B0-145087FDB1E0">
<p class="titleintable">Table 5-2 Health Checker Log Files and Reports on the Midtier Host</p>
<table class="cellalignment190" title="Health Checker Log Files and Reports on the Midtier Host" summary="Logs and reports for Health Checker on primordial host">
<thead>
<tr class="cellalignment142">
<th class="cellalignment172" id="d19564e713">Manifest File Name</th>
<th class="cellalignment209" id="d19564e716">Log File Location</th>
<th class="cellalignment210" id="d19564e719">Report Location - html and xml formats</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment142">
<td class="cellalignment175" id="d19564e724" headers="d19564e713">
<p><code class="codeph">GeneralSystemHealthChecks.xml</code></p>
</td>
<td class="cellalignment211" headers="d19564e724 d19564e716">
<p><span class="italic"><code class="codeph">APPLICATIONS_CONFIG/</code></span><code class="codeph">lcm/logs/11.1.11.0.0/healthchecker/midtier_</code><span class="italic"><code class="codeph">hostname</code></span><code class="codeph">-GeneralSystemHealthChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.log</code></p>
</td>
<td class="cellalignment212" headers="d19564e724 d19564e719">
<p><span class="italic"><code class="codeph">APPLICATIONS_CONFIG/</code></span><code class="codeph">lcm/logs/11.1.11.0.0/healthchecker/midtier_</code><span class="italic"><code class="codeph">hostname</code></span><code class="codeph">-GeneralSystemHealthChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.html</code></p>
<p><span class="italic"><code class="codeph">APPLICATIONS_CONFIG/</code></span><code class="codeph">lcm/logs/11.1.11.0.0/healthchecker/midtier_</code><span class="italic"><code class="codeph">hostname</code></span><code class="codeph">-GeneralSystemHealthChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.xml</code></p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment175" id="d19564e779" headers="d19564e713">
<p><code class="codeph">PreDowntimeUpgradeReadinessHealthChecks.xml</code></p>
</td>
<td class="cellalignment211" headers="d19564e779 d19564e716">
<p><span class="italic"><code class="codeph">APPLICATIONS_CONFIG/</code></span><code class="codeph">lcm/logs/11.1.11.0.0/healthchecker/midtier_</code><span class="italic"><code class="codeph">hostname</code></span><code class="codeph">-PreDowntimeUpgradeReadinessHealthChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.log</code></p>
</td>
<td class="cellalignment212" headers="d19564e779 d19564e719">
<p><span class="italic"><code class="codeph">APPLICATIONS_CONFIG/</code></span><code class="codeph">lcm/logs/11.1.11.0.0/healthchecker/midtier_</code><span class="italic"><code class="codeph">hostname</code></span><code class="codeph">-PreDowntimeUpgradeReadinessHealthChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.html</code></p>
<p><span class="italic"><code class="codeph">APPLICATIONS_CONFIG/</code></span><code class="codeph">lcm/logs/11.1.11.0.0/healthchecker/midtier_</code><span class="italic"><code class="codeph">hostname</code></span><code class="codeph">-PreDowntimeUpgradeReadinessHealthChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.xml</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</li>
</ol>
</div>
</div>
<a id="OAPUP2617"></a><a id="OAPUP2616"></a>
<div class="sect3"><a id="GUID-88AF70F4-DD77-4B3F-B844-9F2FF5B9D694"></a>
<h3 id="OAPUP-GUID-88AF70F4-DD77-4B3F-B844-9F2FF5B9D694" class="sect3"><span class="enumeration_section">5.1.5</span> Run Health Checker on the OHS Host</h3>
<div>
<div class="section">
<div class="p">Before running Health Checker (HC) on the OHS host, verify that the preupgrade JRE locations is as follows:
<pre dir="ltr">
<span class="italic">APPLICATIONS_BASE</span>/fusionapps/jdk6/
</pre></div>
<p>After the location has been verified, run Health Checker on the OHS host by performing the following steps:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Confirm that ORCH_LOCATION is set up correctly and is ready for running Health Checker on the OHS host by verifying that the ORCH_LOCATION<code class="codeph">/webtier_mwhome</code> directory exists. If this directory does not exist, run <code class="codeph">orchsetup.py</code> as described in <a href="GUID-5413A516-96B1-4B54-B7AA-E5A728B11A4F.htm#GUID-78E93CC1-C76C-4982-ACA9-A8EB293715A9">Set Up Upgrade Orchestrator on a Shared Location</a>.</span></li>
<li class="stepexpand"><span>Set the following environment variables:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code class="codeph">APPLICATIONS_BASE:</code></span> The variable <code class="codeph">APPLICATIONS_BASE</code> is required to point to <code class="codeph">ORCH_LOCATION</code> to run HC on the OHS host only. This variable was created in <a href="GUID-5413A516-96B1-4B54-B7AA-E5A728B11A4F.htm#GUID-6187477A-1338-43AB-A8A5-5C07BB46E336">Unzip Orchestration.zip</a>.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">REPOSITORY_LOCATION</code></span>: The directory where the repository is staged, <span class="italic"><code class="codeph">SHARED_LOCATION/</code></span><code class="codeph">11.12.x.0.0/Repository</code>.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">JAVA_HOME</code></span>: The jdk location under the applications base on the OHS host, for example, <code class="codeph">/APPTOP/webtier_mwhome/webtier/jdk6</code>. Do not use the jdk under the orchestration directory. Note that this same location is used for the <code class="codeph">-jreloc</code> argument when running the commands in this section.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">WT_MW_HOME</code></span>: Location of the Web Tier <span class="italic"><code class="codeph">MW_HOME</code></span>, for example, <code class="codeph">/APPTOP/webtier_mwhome</code>.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">WT_ORACLE_HOME</code></span>: Location of the Web Tier directory, which is a subdirectory under <span class="italic"><code class="codeph">WT_MW_HOME</code></span>, for example:<code class="codeph">/APPTOP/webtier_mwhome/webtier</code>.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">WT_CONFIG_HOME</code></span>: Location of the Web Tier instance configuration home, for example: <code class="codeph">/u01/mw_home/Oracle_WT1/instance/CommonDomain_webtier</code>.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">OHS_INSTANCE_ID</code></span>: The OHS instance ID on the host. Normally this is <code class="codeph">ohs1</code> and is the value for <code class="codeph">ias-component id</code> in the <code class="codeph">opmn.xml</code> file.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">OHS_UPGRADE_BINARIES_HOSTNAME</code></span>: A comma separated list of your OHS host names, which do not share binaries. For example, if there are a main OHS host and a scaled out OHS host, both pointing to the same binaries, this environment variable should list only the main OHS host, since the scaled out OHS host is using shared binaries. Note that this parameter is optional.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">CURRENT_FA_RELEASE_VERSION</code></span>: The current version on the environment before the upgrade, such as 11.1.11.0.0.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">DOWNLOAD_PATCH_DIR</code></span>: The location of downloaded post-release patches, <span class="italic"><code class="codeph">SHARED_LOCATION/</code></span><code class="codeph">11.12.x.0.0&shy;_post_repo_patches</code>, which was downloaded in <a href="GUID-5413A516-96B1-4B54-B7AA-E5A728B11A4F.htm#GUID-05750A63-6FB7-4AFB-B58B-6194A44D7FA9">Download and Unzip Mandatory Post-Release 12 Patches</a>.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">HC_OVERRIDE_FILES</code></span>: The location of any Health Checker overrides that may have been created, as described in <a href="GUID-5413A516-96B1-4B54-B7AA-E5A728B11A4F.htm#GUID-55DC1C56-2AD9-427C-99D8-C7F8B68C0615">Download Patches for the Health Checker Exclusion List</a>. If the <code class="codeph">HC_OVERRIDE_FILES</code> variable is not set, the default location is <span class="italic"><code class="codeph">APPLICATIONS_BASE/</code></span><code class="codeph">instance/fapatch/healthchecker</code>. Note that when Health Checker is run through orchestration, this environment variable is set by orchestration, to <span class="italic"><code class="codeph">SHARED_UPGRADE_LOCATION/</code></span><code class="codeph">healthchecker</code>/<span class="italic"><code class="codeph">POD_NAME</code></span>. See <a href="GUID-30562294-F253-4262-8867-30645D049237.htm#GUID-B8D60277-F891-4A77-A643-25B95AEEBA4E" title="The all_overrides.xml file will define plug-in exclusions. These exclusions are applicable across the fleet. Checks disabled out of the box, and checks disabled due to emergency patch will be combined in this file. This file cannot be edited.The file FA_pods_overrides.xml can be used to define custom/pod-specific check exclusions. If there is a need to exclude a specific plugin, or to re-enable one of the excluded plugins, use this file as it will have higher precedence than all_overrides.xml.The following example shows an exclusion in the all_overrides.xml file:It is possible to exclude a plug-in for a specific host, a specific version of the Oracle Fusion Cloud Application, or a combination of both.">Override Health Checks</a>.</p>
<p>It is possible to skip this environment variable if there are no Health Checker overrides.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Run Health Checker for each manifest as follows:</span>
<div>Note that this is one command.</div>
<div>
<pre dir="ltr">
(UNIX)
<span class="italic">ORCH_LOCATION/</span>fusionapps/applications/lcm/hc/bin/hcplug.sh -hostType OHS -manifest 
<span class="italic">ORCH_LOCATION/</span>fusionapps/applications/lcm/hc/config/GeneralSystemHealthChecks.xml [-DlogLevel=<span class="italic">log_level</span>] -jreLoc <span class="italic">JDK_LOCATION</span> -logDir /u01/logs/OHS 

<span class="italic">ORCH_LOCATION/</span>fusionapps/applications/lcm/hc/bin/hcplug.sh -hostType OHS -manifest 
<span class="italic">ORCH_LOCATION/</span>fusionapps/applications/lcm/hc/config/PreDowntimeUpgradeReadinessHealthChecks.xml [-DlogLevel=<span class="italic">log_level</span>] -jreLoc <span class="italic">JDK_LOCATION</span> -logDir /u01/logs/OHS 

</pre></div>
</li>
<li class="stepexpand"><span>If any health checks fail, refer to the Health Checker log files and reports to find the corrective actions to resolve the issue. The suggested corrective actions must be run manually to fix the issue before proceeding with the upgrade. Then rerun Health Checker to ensure all checks are successful. Optionally, use the -<code class="codeph">checkpoint true</code> option when restarting Health Checker, so that only the failed plug-ins or the plug-ins that did not run are executed.</span>
<div>
<p>If the failure is a known issue and the check needs to be excluded, see <a href="GUID-30562294-F253-4262-8867-30645D049237.htm#GUID-B8D60277-F891-4A77-A643-25B95AEEBA4E" title="The all_overrides.xml file will define plug-in exclusions. These exclusions are applicable across the fleet. Checks disabled out of the box, and checks disabled due to emergency patch will be combined in this file. This file cannot be edited.The file FA_pods_overrides.xml can be used to define custom/pod-specific check exclusions. If there is a need to exclude a specific plugin, or to re-enable one of the excluded plugins, use this file as it will have higher precedence than all_overrides.xml.The following example shows an exclusion in the all_overrides.xml file:It is possible to exclude a plug-in for a specific host, a specific version of the Oracle Fusion Cloud Application, or a combination of both.">Override Health Checks</a>.</p>
<p>The following table provides the location of log files and reports on the OHS host:</p>
<div class="tblformal" id="GUID-88AF70F4-DD77-4B3F-B844-9F2FF5B9D694__GUID-25E61B35-BD85-4FC2-B022-E07B7CE5C903">
<p class="titleintable">Table 5-3 Health Checker Log Files and Reports on the OHS Host</p>
<table class="cellalignment190" title="Health Checker Log Files and Reports on the OHS Host" summary="Logs and reports for Health Checker on primordial host">
<thead>
<tr class="cellalignment142">
<th class="cellalignment172" id="d19564e1125">Manifest File Name</th>
<th class="cellalignment209" id="d19564e1128">Log File Location</th>
<th class="cellalignment210" id="d19564e1131">Report Location - html and xml formats</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment142">
<td class="cellalignment175" id="d19564e1136" headers="d19564e1125">
<p><code class="codeph">GeneralSystemHealthChecks.xml</code></p>
</td>
<td class="cellalignment211" headers="d19564e1136 d19564e1128">
<p><span class="italic"><code class="codeph">logdir_argument_location/</code></span><code class="codeph">logs/healthchecker/OHS_</code><span class="italic"><code class="codeph">hostname-</code></span><code class="codeph">GeneralSystemHealthChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.log</code></p>
</td>
<td class="cellalignment212" headers="d19564e1136 d19564e1131">
<p><code class="codeph">/u01/logs/OHS/logs/healthchecker/OHS_</code><span class="italic"><code class="codeph">hostname-</code></span><code class="codeph">GeneralSystemHealthChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.html</code></p>
<p><code class="codeph">/u01/logs/OHS/logs/healthchecker/OHS_</code><span class="italic"><code class="codeph">hostname-</code></span><code class="codeph">GeneralSystemHealthChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.xml</code></p>
</td>
</tr>
<tr class="cellalignment142">
<td class="cellalignment175" id="d19564e1185" headers="d19564e1125">
<p><code class="codeph">PreDowntimeUpgradeReadinessHealthChecks.xml</code></p>
</td>
<td class="cellalignment211" headers="d19564e1185 d19564e1128">
<p><span class="italic"><code class="codeph">logdir_argument_location/</code></span><code class="codeph">logs/healthchecker/OHS_</code><span class="italic"><code class="codeph">hostname-</code></span><code class="codeph">PreDowntimeUpgradeReadinessHealthChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.log</code></p>
</td>
<td class="cellalignment212" headers="d19564e1185 d19564e1131">
<p><code class="codeph">/u01/logs/OHS/logs/healthchecker/OHS_</code><span class="italic"><code class="codeph">hostname-</code></span><code class="codeph">PreDowntimeUpgradeReadinessHealthChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.html</code></p>
<p><code class="codeph">/u01/logs/OHS/logs/healthchecker/OHS_</code><span class="italic"><code class="codeph">hostname-</code></span><code class="codeph">PreDowntimeUpgradeReadinessHealthChecks_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.xml</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</li>
</ol>
</div>
</div>
</div>
<a id="OAPUP2618"></a>
<div class="sect2"><a id="GUID-42078932-952D-43A3-9044-58A6FE40036B"></a>
<h2 id="OAPUP-GUID-42078932-952D-43A3-9044-58A6FE40036B" class="sect2"><span class="enumeration_section">5.2</span> Run the Prevalidation Check on IDM Hosts</h2>
<div>
<p>Follow the steps in this section only if the environment meets the following criteria:</p>
<ul style="list-style-type: disc;">
<li>
<p>Runs on a Linux or Solaris platform</p>
</li>
<li>
<p>Supports type 1 and type 2 IDM upgrade scenarios. For more information about these upgrade types, see <a href="GUID-3B21D3BE-4AFB-4246-908D-00F3D73AC53A.htm#GUID-A71A9EB0-FF00-491B-A3DB-2335C61FD683" title="Review the following flowchart and roadmap for an overview of the upgrade process for IDM for FA to Release 12.">IDM for FA Upgrade Roadmap</a>.</p>
</li>
</ul>
<p>Otherwise, proceed to <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC" title="This section describes the steps that must be performed to upgrade to Oracle Fusion Applications Release 12 (11.12.x.0.0). The following topics are discussed:">Upgrade to Oracle Fusion Applications Release 12</a> when the upgrade is ready to begin.</p>
</div>
<a id="OAPUP2648"></a>
<div class="sect3"><a id="GUID-12E319D0-FC3A-4B82-82F2-6B1AF2E3B3DB"></a>
<h3 id="OAPUP-GUID-12E319D0-FC3A-4B82-82F2-6B1AF2E3B3DB" class="sect3"><span class="enumeration_section">5.2.1</span> Confirm Prerequisite Steps Are Complete</h3>
<div>
<div class="section">
<p>Ensure that the steps in <a href="GUID-5413A516-96B1-4B54-B7AA-E5A728B11A4F.htm#GUID-B31F2AD2-9247-4B80-8475-477D70111A73">Copy and Unzip idmUpgrade.zip</a> were completed.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="OAPUP2649"></a>
<div class="sect3"><a id="GUID-06D77EE4-BAC0-4869-B517-7C84634454EC"></a>
<h3 id="OAPUP-GUID-06D77EE4-BAC0-4869-B517-7C84634454EC" class="sect3"><span class="enumeration_section">5.2.2</span> Set Environment Variables</h3>
<div>
<div class="section">
<p>The steps for setting the environment variables on each node vary by platform. Refer to one of the following sections that is appropriate for the platform:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-3DDF50C7-783C-4091-B1BF-20A5A5465BA1.htm#GUID-30F2B2E5-AAF1-4612-874E-971672836C78">Environment Variables Required for Linux</a></p>
</li>
<li>
<p><a href="GUID-3DDF50C7-783C-4091-B1BF-20A5A5465BA1.htm#GUID-F35B4600-C749-4F8F-B443-1FE37D8624FD">Environment Variables Required for Solaris</a></p>
</li>
</ul>
<p>For more information about IDM environment variables, see <a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm#GUID-241A14D5-8D27-4C30-A0AD-6D49F2FA357D">About Identity Management Domain, Nodes and Oracle homes</a>.</p>
</div>
<!-- class="section" --></div>
<a id="OAPUP2650"></a>
<div class="sect4"><a id="GUID-30F2B2E5-AAF1-4612-874E-971672836C78"></a>
<h4 id="OAPUP-GUID-30F2B2E5-AAF1-4612-874E-971672836C78" class="sect4"><span class="enumeration_section">5.2.2.1</span> Environment Variables Required for Linux</h4>
<div>
<div class="section">
<div class="p">On Linux, use the following system Perl:
<ul style="list-style-type: disc;">
<li>
<p>Perl version 5.8.8 on Oracle Enterprise Linux version 5</p>
</li>
<li>
<p>Perl version 5.10.1 on Oracle Enterprise Linux version 6</p>
</li>
</ul>
</div>
<p>Set <code class="codeph">LD_LIBRARY_PATH</code>, only if Oracle Identity Management is not installed in the default location of <code class="codeph">/u01/IDMTOP</code>, as shown in the following example:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>On OID and OIM nodes:</p>
<pre dir="ltr">
LD_LIBRARY_PATH=<span class="italic">OID_ORACLE_HOME</span>/lib 
 export LD_LIBRARY_PATH
</pre></li>
<li>
<p>On the OHS node:</p>
<pre dir="ltr">
 LD_LIBRARY_PATH=<span class="italic">OHS_ORACLE_HOME</span>/lib
 export LD_LIBRARY_PATH
</pre></li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="OAPUP2652"></a>
<div class="sect4"><a id="GUID-F35B4600-C749-4F8F-B443-1FE37D8624FD"></a>
<h4 id="OAPUP-GUID-F35B4600-C749-4F8F-B443-1FE37D8624FD" class="sect4"><span class="enumeration_section">5.2.2.2</span> Environment Variables Required for Solaris</h4>
<div>
<div class="section">
<p>On Solaris, use the perl that is part of the OID or OHS home, which is perl version 5.10.0.</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Set <code class="codeph">LD_LIBRARY_PATH</code></p>
<ul style="list-style-type: disc;">
<li>
<p>On the OID and OIM nodes:</p>
<pre dir="ltr">
LD_LIBRARY_PATH=<span class="italic">OID_ORACLE_HOME</span>/lib 
export LD_LIBRARY_PATH
</pre></li>
<li>
<p>On the OHS node:</p>
<pre dir="ltr">
 LD_LIBRARY_PATH=<span class="italic">OHS_ORACLE_HOME</span>/lib
 export LD_LIBRARY_PATH
</pre></li>
</ul>
</li>
<li>
<p>Set <code class="codeph">PERL5LIB</code> to the <span class="italic"><code class="codeph">ORACLE_HOME/</code></span><code class="codeph">perl</code> location.</p>
<ul style="list-style-type: disc;">
<li>
<p>On the OID and OIM nodes:</p>
<pre dir="ltr">
PERL5LIB=<span class="italic">OID_ORACLE_HOME</span>/perl/lib/site_perl/5.10.0:<span class="italic">OID_ORACLE_HOME</span>/perl/lib/5.10.0 
export PERL5LIB
</pre></li>
<li>
<p>On the OHS node:</p>
<pre dir="ltr">
PERL5LIB=<span class="italic">OHS_ORACLE_HOME</span>/perl/lib/site_perl/5.10.0:<span class="italic">OHS_ORACLE_HOME</span>/perl/lib/5.10.0
export PERL5LIB
</pre></li>
</ul>
</li>
<li>
<p>Set <code class="codeph">PATH</code> to <code class="codeph">ORACLE_HOME/</code><code class="codeph">perl/bin</code> to use the 64-bit perl version 5.10.0.</p>
<ul style="list-style-type: disc;">
<li>
<p>On the OID and OIM nodes:</p>
<pre dir="ltr">
PATH=<span class="italic">OID_ORACLE_HOME</span>/perl/bin:$PATH
 export PATH
</pre></li>
<li>
<p>On the OHS node</p>
<pre dir="ltr">
PATH=<span class="italic">OHS_ORACLE_HOME</span>/perl/bin:$PATH
 export PATH
</pre></li>
</ul>
</li>
<li>
<p>Set PATH to <code class="codeph">/usr/xpg4/bin</code> to use <code class="codeph">awk</code> for Solaris.</p>
<ul style="list-style-type: disc;">
<li>
<div class="p">On the PRIMORDIAL node:
<pre dir="ltr">
PATH=/usr/xpg4/bin:$PATH  
 export PATH 
</pre></div>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
</div>
<div class="sect3"><a id="GUID-90A5F6CB-5964-440A-B9CC-38B13602D4C0"></a>
<h3 id="OAPUP-GUID-90A5F6CB-5964-440A-B9CC-38B13602D4C0" class="sect3"><span class="enumeration_section">5.2.3</span> Run preValidateOnPremise.pl on Each Node</h3>
<div>
<div class="section">
<div class="p">To run the preValidate scripts on all IDM nodes, choose the procedure that applies to your IDM upgrade environment. You can skip this step now and perform it once you get to <a href="GUID-3B21D3BE-4AFB-4246-908D-00F3D73AC53A.htm#GUID-3B21D3BE-4AFB-4246-908D-00F3D73AC53A" title="Review the following flowchart and roadmap for an overview of the upgrade process for IDM for FA to Release 12.The upgrade steps will vary according to the type of IDM installation you have.Perform this steps only if your IDM for FA is integrated with Enterprise IDM. You must disconnect integrations by cloning your IDM environment. The cloning process involves the following high-level steps:This section describes how to upgrade type I IDM environments.Before the upgrade of your type I IDM environment, perform the following tasks:The following preValidateOnPremise.pl script must be executed serially on each IDM node, including the scaled out nodes:After running the preValidate script on your type I environment, manually download the OIM email template as follows:Stop all IDM services by running the following command on all IDM nodes:Upgrade the binary files used by IDM components by running the following command on all IDM nodes:&nbsp;Update the IDM configuration to Release 12 level by running the following config upgrade commands on all IDM nodes:During IDM upgrade on Solaris platforms, the OIM Config step displays the following message in the IDM upgrade console:To confirm that the upgrade was successful, run the following post-upgrade validation command on all IDM nodes:Before the upgrade of your type II IDM environment, perform the following tasks:The topology&nbsp;discovery tool&nbsp;introspects the existing IDM environment to discover information that will be needed for setting up a parallel true-up environment.&nbsp;Before running the discovery tool, perform the following steps. Note that if your environment has OIF and it is not up during discovery, then OIF will not be part of the upgrade process.If your set up has IDM nodes on different machines (including scaled out support), the discovery tool will have to be run serially on each IDM node. A true-up environment is an entirely new IDM environment, which behaves exactly like the current IDM installation. Your true-up environment will conform to the layout and structure of an environment that has been provisioned using the IDM provisioning scripts provided by Oracle.Before setting up your true-up environment, ensure you meet the following prerequisites:To set up the binary files, you need the True-up tars.This section describes how to migrate the configuration to the true-up environment. This section contains the following sections:Before running migration, ensure the following prerequisites are met:After running migration, you must perform the following task:After completing migration, you must manually register OID instances to enable the OID and OVD status to be shown in EM console. The following preValidateOnPremise.pl script must be executed serially on each IDM node, including the scaled out nodes:After running the preValidate script on your type II environment, manually download the OIM email template as follows:Stop all IDM services by running the following command on all IDM nodes:Upgrade the binary files used by IDM components by running the following command on all IDM nodes:&nbsp;Update the IDM configuration to Release 12 level by running the following config upgrade commands on all IDM nodes:To confirm that the upgrade was successful, run the following post-upgrade validation command on all IDM nodes:This section describes some properties files used in the IDM for FA Upgrade to Release 12 (11.12.x.0.0).The following table shows the location of the IDM Upgrade and migration log files:">Upgrade Oracle Identity Management to Release 12</a>.
<ul style="list-style-type: disc;">
<li>
<p>If you have a type 1 environment, perform the steps as listed in <a href="GUID-3B21D3BE-4AFB-4246-908D-00F3D73AC53A.htm#GUID-812600A5-8379-4345-86AB-A5F1AF8ADD47" title="The following preValidateOnPremise.pl script must be executed serially on each IDM node, including the scaled out nodes:">Run preValidate Script</a>.</p>
</li>
<li>
<p>If you have a type 2 environment, perform the steps as listed in <a href="GUID-3B21D3BE-4AFB-4246-908D-00F3D73AC53A.htm#GUID-C4981E65-E5F5-479A-8A50-C56908CD4EAE" title="The following preValidateOnPremise.pl script must be executed serially on each IDM node, including the scaled out nodes:">Run preValidate Script</a>.</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<div class="sect3"><a id="GUID-64256D0F-01F7-437A-94FB-66FE70748E48"></a>
<h3 id="OAPUP-GUID-64256D0F-01F7-437A-94FB-66FE70748E48" class="sect3"><span class="enumeration_section">5.2.4</span> Ensure Free Tablespace for OTBI Schema</h3>
<div>
<p>Before beginning upgrade from Release 11 (11.1.11) to Release 12 (11.12.x.0.0), ensure that the Oracle Transactional Business Intelligence (OTBI) schema has at least 2GB free space in <code class="codeph">FUSION_TS_TOOLS</code> tablespace. For more information about disk space requirements, see <a href="GUID-5413A516-96B1-4B54-B7AA-E5A728B11A4F.htm#GUID-E52228F8-237E-44EC-B1FB-DF3E6D1E538B__GUID-C50D8C1D-FDF0-4C0D-B1C7-44232B64BB11" title="Memory requirements for upgrade">Table 2-2</a>.</p>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment141">
<tr>
<td class="cellalignment150">
<table class="cellalignment146">
<tr>
<td class="cellalignment145"><a href="GUID-89F8BA95-C492-4C35-82FD-3DA6B14E879B.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment145"><a href="GUID-B23BA47E-F742-49AF-A08E-DD3BAC6DB3AC.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2011, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment152">
<table class="cellalignment144">
<tr>
<td class="cellalignment145"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment145"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
