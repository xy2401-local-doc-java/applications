<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Patching Concepts, Framework, Tools, Utilities, and Components</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="dcterms.created" content="2017-09-11T13:03:11Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Applications Patching Guide" />
<meta name="dcterms.identifier" content="E71563_03" />
<meta name="dcterms.isVersionOf" content="OAPAT" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2011, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="GUID-405043B5-44A9-4813-9882-D0BF7F1D1CB7.htm" title="Previous" type="text/html" />
<link rel="Next" href="GUID-D71DC177-4FBA-40A6-AE3D-457818A31382.htm" title="Next" type="text/html" />
<link rel="alternate" href="OAPAT.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-7E4C6556-9EDE-4971-AE22-D85138212325"></a> <span id="PAGE" style="display:none;">6/14</span> <!-- End Header -->
<h1 id="OAPAT-GUID-7E4C6556-9EDE-4971-AE22-D85138212325" class="sect1"><span class="enumeration_chapter">2</span> Patching Concepts, Framework, Tools, Utilities, and Components</h1>
<div>
<p>Patching requires a full understanding of several concepts, and this section describes three Fusion Applications patching concepts</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-34F787C0-6D75-4FCF-8287-066D633D0446">Frameworks Available for Fusion Applications Patching</a></p>
</li>
<li>
<p><a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-2278F4B5-EB9B-415F-B60D-3B31A693A335">About Patch Manager and Functional Patching Topology</a></p>
</li>
<li>
<p><a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-642E417A-737E-4155-B0AC-8FEDC408B448">Oracle Fusion Applications Patching and the Security Model</a></p>
</li>
</ul>
</div>
<div class="sect2"><a id="GUID-34F787C0-6D75-4FCF-8287-066D633D0446"></a>
<h2 id="OAPAT-GUID-34F787C0-6D75-4FCF-8287-066D633D0446" class="sect2"><span class="enumeration_section">2.1</span> Frameworks Available for Oracle Fusion Applications</h2>
<div>
<div class="section">
<p>Oracle Fusion Applications is updated by the following patching frameworks:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-4E42357A-54FA-4D41-BE52-44FC5D782106">Technical Patches</a></p>
</li>
<li>
<p><a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-A7C6A197-9408-401C-8389-18D0CCCA77A5">Functional Patches</a></p>
</li>
<li>
<p><a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-CAE18534-B2AE-42E5-8CAB-0DFC0D3B3018">Oracle Identity Management Patches</a></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
<div class="sect3"><a id="GUID-4E42357A-54FA-4D41-BE52-44FC5D782106"></a>
<h3 id="OAPAT-GUID-4E42357A-54FA-4D41-BE52-44FC5D782106" class="sect3"><span class="enumeration_section">2.1.1</span> Technical Patches</h3>
<div>
<p>Technical patches are geared toward delivering new or fixing existing technical capabilities in the underlying Fusion Middleware components that Fusion Applications is built on, as described in the following table:</p>
<div class="tblformal" id="GUID-4E42357A-54FA-4D41-BE52-44FC5D782106__GUID-79DCF843-1D95-47D0-9D1D-BA009964199A">
<p class="titleintable">Table 2-1 Types of Oracle Fusion Applications Technical Patches</p>
<table class="cellalignment237" title="Types of Oracle Fusion Applications Technical Patches" summary="Types of Oracle Fusion Applications Technical Patches">
<thead>
<tr class="cellalignment228">
<th class="cellalignment288" id="d2582e153">Patch Type</th>
<th class="cellalignment288" id="d2582e156">Description</th>
<th class="cellalignment288" id="d2582e159">Frequency</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment228">
<td class="cellalignment289" id="d2582e164" headers="d2582e153">
<p>One-Off Patch</p>
</td>
<td class="cellalignment289" headers="d2582e164 d2582e156">
<p>Contain a single bug fix</p>
</td>
<td class="cellalignment289" headers="d2582e164 d2582e159">
<p>As needed for critical fixes</p>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment289" id="d2582e174" headers="d2582e153">
<p>Critical Patch Updates (CPUs)</p>
</td>
<td class="cellalignment289" headers="d2582e174 d2582e156">
<p>Address security vulnerabilities</p>
</td>
<td class="cellalignment289" headers="d2582e174 d2582e159">
<p>On the Tuesday closest to the 17<sup>th</sup> day of January, April, July, and October</p>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment289" id="d2582e187" headers="d2582e153">
<p>Patch Bundle (P4FA)</p>
</td>
<td class="cellalignment289" headers="d2582e187 d2582e156">
<p>Collection of tech stack fixes (bundles or one-offs) for Fusion Applications customers</p>
</td>
<td class="cellalignment289" headers="d2582e187 d2582e159">
<p>Monthly</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<div class="sect3"><a id="GUID-A7C6A197-9408-401C-8389-18D0CCCA77A5"></a>
<h3 id="OAPAT-GUID-A7C6A197-9408-401C-8389-18D0CCCA77A5" class="sect3"><span class="enumeration_section">2.1.2</span> Functional Patches</h3>
<div>
<p>Functional patches deliver new functional features or fix existing functional capabilities within Fusion Applications. Functional patches are delivered in three formats and all are applied using Patch Manager, as described in the following table:</p>
<div class="tblformal" id="GUID-A7C6A197-9408-401C-8389-18D0CCCA77A5__GUID-49545F02-743F-4123-8BE9-071318609762">
<p class="titleintable">Table 2-2 Types of Oracle Fusion Applications Functional Patches</p>
<table class="cellalignment237" title="Types of Oracle Fusion Applications Functional Patches" summary="This table describes the existing patch types">
<thead>
<tr class="cellalignment228">
<th class="cellalignment288" id="d2582e244">Patch Type</th>
<th class="cellalignment288" id="d2582e247">Description</th>
<th class="cellalignment288" id="d2582e250">Frequency</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment228">
<td class="cellalignment228" rowspan="1" colspan="1" id="d2582e255" headers="d2582e244">
<p>Functional Patch Bundles</p>
</td>
<td class="cellalignment228" rowspan="1" colspan="1" headers="d2582e255 d2582e247">
<p>Collection of one-off patches for a product family, which are cumulative and distributed for a specific baseline release. They include previously released Aggregated One-Off Patches (AOOs) and One-Off Patches</p>
</td>
<td class="cellalignment228" rowspan="1" colspan="1" headers="d2582e255 d2582e250">
<p>Monthly</p>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment228" rowspan="1" colspan="1" id="d2582e265" headers="d2582e244">
<p>Aggregated One-Off Patches (AOO)</p>
</td>
<td class="cellalignment228" rowspan="1" colspan="1" headers="d2582e265 d2582e247">
<p>Collection of One-Off Patches for a product family</p>
</td>
<td class="cellalignment228" rowspan="1" colspan="1" headers="d2582e265 d2582e250">
<p>Weekly, but not all product families release AOOs weekly</p>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment228" rowspan="1" colspan="1" id="d2582e275" headers="d2582e244">
<p>Functional One-Off Patches</p>
</td>
<td class="cellalignment228" rowspan="1" colspan="1" headers="d2582e275 d2582e247">
<p>Contain a single bug fix</p>
</td>
<td class="cellalignment228" rowspan="1" colspan="1" headers="d2582e275 d2582e250">
<p>As needed for critical fixes</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<div class="sect3"><a id="GUID-CAE18534-B2AE-42E5-8CAB-0DFC0D3B3018"></a>
<h3 id="OAPAT-GUID-CAE18534-B2AE-42E5-8CAB-0DFC0D3B3018" class="sect3"><span class="enumeration_section">2.1.3</span> Oracle Identity Management Patches</h3>
<div>
<p>The primary purpose of the Oracle Identity Management patching framework for Oracle Fusion Applications is to simplify and expedite the maintenance of the code and functionality shipped as part of Oracle Identity Management for the Oracle Fusion Applications suite of products.</p>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-2278F4B5-EB9B-415F-B60D-3B31A693A335"></a>
<h2 id="OAPAT-GUID-2278F4B5-EB9B-415F-B60D-3B31A693A335" class="sect2"><span class="enumeration_section">2.2</span> About Patch Manager and Functional Patching Topology</h2>
<div>
<div class="p">During the provisioning of Oracle Fusion Applications, the configuration of the patching framework performs the following:
<ul style="list-style-type: disc;">
<li>
<p>The <code class="codeph">FUSION_env.properties</code> file is populated in the admin directory with complete environment setup information required by the patching framework. This is the source of information that patching framework utilities use when setting up the environment.</p>
</li>
<li>
<p>The patching framework configuration scripts are created to set the environment and call utilities. For example, it creates the <code class="codeph">fapmgr.sh</code> script, which sets up the environment and then calls Oracle Fusion Applications Patch Manager (Patch Manager) when applying the patch.</p>
</li>
</ul>
The Patching topology and configuration topics include the following:</div>
<ul style="list-style-type: disc;">
<li><a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-FD681BE7-3E7D-45E0-843C-FBFF78606751">Understand Patch Manager and Functional Patching</a></li>
<li>
<p><a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-F431318E-07F5-4981-990A-21FF722B0104">Oracle Fusion Applications Oracle Home</a></p>
</li>
<li>
<p><a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-556B57FB-9F1D-4784-A3FC-FCA9776BE2F4">Patch Top Directory</a></p>
</li>
<li>
<p><a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-760E6CBF-B1E6-4CA9-808C-B627E95E9B3D">Backup Copies of Patched Database Artifacts</a></p>
</li>
<li>
<p><a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-506A5DB9-9C41-49CC-9530-B002F29DE60C">Oracle Universal Installer (OUI) Inventory</a></p>
</li>
<li>
<p><a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-C8054990-86B0-4D4F-8220-EA6987C62DCC">Taxonomy URL</a></p>
</li>
<li>
<p><a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-B90A2CAE-E6A8-48DA-A50A-B8DA2273A5B5">One-Off Patch Directory Structure</a></p>
</li>
<li>
<p><a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-2EFF1791-72AD-4585-A09E-0E923CB4974B">One-Off Patch Contents</a></p>
</li>
</ul>
</div>
<div class="sect3"><a id="GUID-FD681BE7-3E7D-45E0-843C-FBFF78606751"></a>
<h3 id="OAPAT-GUID-FD681BE7-3E7D-45E0-843C-FBFF78606751" class="sect3"><span class="enumeration_section">2.2.1</span> Understand Patch Manager and Functional Patching</h3>
<div>
<p>The primary function of Oracle Fusion Applications Patch Manager (Patch Manager) is to apply Functional Patches. It also validates whether patches can be applied and generates patching reports. Patch Manager supports parallel processing of non-dependent tasks, thereby improving the performance during patch application.</p>
<p>Patch Manager provides a command-line interface to coordinate its patching functions. A single patch may include changes to both Oracle Fusion Middleware and database artifacts, and these Oracle Fusion Middleware artifacts may be deployed to Managed Servers running on different nodes. The artifacts are updated in the Oracle Fusion Applications Oracle home that is shared by the different nodes. To patch both types of artifacts, two patching tools are called by Patch Manager to manage the actions involved: <span class="italic">OPatch</span> for the Oracle Fusion Middleware artifacts and <span class="italic">Oracle Fusion Applications AutoPatch</span> (AutoPatch) for artifacts associated with the database.</p>
<p>The same set of patching-related software and database tables is used by both Patch Manager and Oracle Fusion Middleware Extensions for Applications (Applications Core). Patch Manager and Applications Core each reside in their own separate Oracle home and use their specific shell scripts to support their product-specific patching requirements. These scripts are uniquely defined to reference the appropriate Oracle home, set the patching configuration and environment, and then call the AutoPatch utility for database patching.</p>
<p><span class="bold">WARNING</span>: There can be only one patching session active for Oracle Fusion Applications or Applications Core at a time.</p>
<p>For detailed information about how to run Patch Manager, see the <a href="GUID-1D6499E1-01AA-477D-91E0-3FDCAF5EBBEC.htm#GUID-1D6499E1-01AA-477D-91E0-3FDCAF5EBBEC" title="This chapter describes the commands used to validate and apply patches, to run the Product Family Report, the Patches Applied Report and the Patching Report.">Patch Manager Command Reference</a> section.</p>
</div>
<div class="sect4"><a id="GUID-7880D0CC-D1A4-4F4A-A7F9-63F11938B357"></a>
<h4 id="OAPAT-GUID-7880D0CC-D1A4-4F4A-A7F9-63F11938B357" class="sect4"><span class="enumeration_section">2.2.1.1</span> Patch Modes</h4>
<div>
<div class="p">The patch administrator is responsible for ensuring there are no active transactions or processes running during patching. The three patching modes supported by the Patch Manager are as follows:
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-90C7EA81-1509-45AE-8500-9FB8A3AF6144">Online Mode</a></p>
</li>
<li>
<p><a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-726D011A-3F7E-4B22-8FCC-944A3ED56C66">Offline Mode</a></p>
</li>
<li>
<p><a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-2BDC7B26-5728-4902-A2B2-993190C3CA65">Hot Patching Mode</a></p>
</li>
</ul>
Each patching mode type affects users, servers, artifacts, and the database in different ways, as described in the following table:</div>
<div class="p">
<div class="tblformal" id="GUID-7880D0CC-D1A4-4F4A-A7F9-63F11938B357__GUID-FB7702F2-D29A-4DD9-A324-B3AC80CC797E">
<p class="titleintable">Table 2-3 Effect of Oracle Fusion Applications Patching Modes</p>
<table class="cellalignment237" title="Effect of Oracle Fusion Applications Patching Modes" summary="This table describes how every patching mode affects users, servers, artifacts, and the database">
<thead>
<tr class="cellalignment228">
<th class="cellalignment288" id="d2582e539">Patching Mode</th>
<th class="cellalignment288" id="d2582e542">Online</th>
<th class="cellalignment288" id="d2582e545">Offline</th>
<th class="cellalignment288" id="d2582e548">Hot Patch</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment228">
<td class="cellalignment228" rowspan="1" colspan="1" id="d2582e553" headers="d2582e539">
<p><span class="bold">Users</span></p>
</td>
<td class="cellalignment228" rowspan="1" colspan="1" headers="d2582e553 d2582e542">
<p>No Access</p>
</td>
<td class="cellalignment228" rowspan="1" colspan="1" headers="d2582e553 d2582e545">
<p>No Access</p>
</td>
<td class="cellalignment228" rowspan="1" colspan="1" headers="d2582e553 d2582e548">
<p>Active</p>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment228" rowspan="1" colspan="1" id="d2582e567" headers="d2582e539">
<p><span class="bold">Servers Bounced</span></p>
</td>
<td class="cellalignment228" rowspan="1" colspan="1" headers="d2582e567 d2582e542">
<p>Automatically</p>
</td>
<td class="cellalignment228" rowspan="1" colspan="1" headers="d2582e567 d2582e545">
<p>Manually</p>
</td>
<td class="cellalignment228" rowspan="1" colspan="1" headers="d2582e567 d2582e548">
<p>No Bounce</p>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment228" rowspan="1" colspan="1" id="d2582e581" headers="d2582e539">
<p><span class="bold">Artifacts Deployed</span></p>
</td>
<td class="cellalignment228" rowspan="1" colspan="1" headers="d2582e581 d2582e542">
<p>Automatically</p>
</td>
<td class="cellalignment228" rowspan="1" colspan="1" headers="d2582e581 d2582e545">
<p>Manually</p>
</td>
<td class="cellalignment228" rowspan="1" colspan="1" headers="d2582e581 d2582e548">
<p>Automatically</p>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment228" rowspan="1" colspan="1" id="d2582e595" headers="d2582e539">
<p><span class="bold">Database Use</span></p>
</td>
<td class="cellalignment228" rowspan="1" colspan="1" headers="d2582e595 d2582e542">
<p>Idle</p>
</td>
<td class="cellalignment228" rowspan="1" colspan="1" headers="d2582e595 d2582e545">
<p>Idle</p>
</td>
<td class="cellalignment228" rowspan="1" colspan="1" headers="d2582e595 d2582e548">
<p>Active</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<div class="sect5"><a id="GUID-90C7EA81-1509-45AE-8500-9FB8A3AF6144"></a>
<h5 id="OAPAT-GUID-90C7EA81-1509-45AE-8500-9FB8A3AF6144" class="sect5"><span class="enumeration_section">2.2.1.1.1</span> Online Mode</h5>
<div>
<p><span class="bold">MANDATORY</span>: To apply any patch in online mode, the Administration Servers must be running.</p>
<p>Before applying the patch, review which servers will be impacted by the patch. For more information, see the <a href="GUID-1D6499E1-01AA-477D-91E0-3FDCAF5EBBEC.htm#GUID-05D899F8-C973-4A84-A9B4-F7582613ADFD">Online Patch Progress Report and Diagnostics Report</a> section.</p>
<p>In online mode, Patch Manager automates the post-apply steps, such as shutting down and starting the impacted Managed Servers, and deploying supported Oracle Fusion Middleware artifacts, such as SOA composites, Oracle Business Intelligence Publisher (Oracle BIP) artifacts, and Flexfields. When patching in online mode, Patch Manager provides messages about the steps to take after the patch is applied, to resolve any failures that occurred during the post-apply tasks. For more information, see the <a href="GUID-EB1763ED-50E3-4489-835E-3290A33836FA.htm#GUID-948A4DB3-CF82-4EE0-8F8C-5A00D8351602">Oracle Fusion Applications Patch Manager Middleware Artifact Support</a> section.</p>
<p>To enable online patching mode, specify the <code class="codeph">online</code> option and the <code class="codeph">stoponerror</code> option when running Patch Manager. Patch Manager determines which domains the patch affects by referencing the <span>taxonomy URL</span>, either by an environment setting or by using the <code class="codeph">taxonomyurl</code> option. For more information, see the <a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-C8054990-86B0-4D4F-8220-EA6987C62DCC">Taxonomy URL</a> section.</p>
<p>In online mode, only those impacted servers that are running are stopped and started. No stop or start operations are performed on those servers that are not in a running state even if the patch impacts an application that is deployed on this server.</p>
</div>
</div>
<div class="sect5"><a id="GUID-726D011A-3F7E-4B22-8FCC-944A3ED56C66"></a>
<h5 id="OAPAT-GUID-726D011A-3F7E-4B22-8FCC-944A3ED56C66" class="sect5"><span class="enumeration_section">2.2.1.1.2</span> Offline Mode</h5>
<div>
<p>In offline mode, server management is performed manually.</p>
<p><span class="bold">OPTIONAL</span>: Before applying the patch, the Patch Impact report can be run to see which servers will be impacted by the patch.</p>
<p>In offline mode, all applications are unavailable to users, but only the servers impacted by the patch are shut down. The net effect is that the system is unavailable, but the system downtime is minimized if only certain servers are shut down and then started.</p>
<p><span class="bold">MANDATORY</span>: All servers impacted by the patch must be shut down before applying patches in offline mode, and when applying a patch in offline mode, manually start and stop the impacted Managed Servers and manually deploy certain Oracle Fusion Middleware artifacts, such as SOA composites, Oracle BI Publisher artifacts, and Flexfields, after the patch applies.</p>
<p><span class="bold">OPTIONAL</span>: To minimize downtime, servers can remain running during patching. The impacted server stop and start can occur after the patching session ends.</p>
<p>For information about deploying patch artifacts manually when applying a patch in offline mode, refer to the <a href="GUID-EB1763ED-50E3-4489-835E-3290A33836FA.htm#GUID-EB1763ED-50E3-4489-835E-3290A33836FA" title="This chapter describes how Oracle Fusion Applications Patch Manager (Patch Manager) supports the patching of middleware and database artifacts. It also provides detailed steps for the manual deployment of artifacts, if needed.">Manual Patching of Oracle Fusion Applications During Offline Patching</a> section.</p>
</div>
</div>
<div class="sect5"><a id="GUID-2BDC7B26-5728-4902-A2B2-993190C3CA65"></a>
<h5 id="OAPAT-GUID-2BDC7B26-5728-4902-A2B2-993190C3CA65" class="sect5"><span class="enumeration_section">2.2.1.1.3</span> Hot Patching Mode</h5>
<div>
<p>Hot patching mode allows a patch to be applied in online mode concurrent with active users and transactions. Hot patching is supported for only database, JEE, BIP, MAA (Mobile Artifact), SOA, and C artifacts.</p>
<p><span class="bold">MANDATORY</span>: The patch must be enabled for hot patching.</p>
<p>During hot patching, an application is updated by deploying a new version of the application with modified artifacts from the patch. Any requests to the application are directed to the new version once it is available. A user may experience a small performance impact due to the added load on the system by patching sessions and also due to initialization when an updated application is accessed for the first time.</p>
<p>The following phases occur during hot patching mode before the patch is actually applied:</p>
<ul style="list-style-type: disc;">
<li>
<p>The system is placed in maintenance preparatory warning mode. In this mode users are informed of the upcoming maintenance window.</p>
<p><span class="bold">MANDATORY</span>: All users impacted by the applications must complete their activities before the maintenance window begins.</p>
</li>
<li>
<p>During maintenance warning mode, the impacted ESS task schedulers are paused and the impacted SOA Event Delivery Network is paused.</p>
</li>
<li>
<p>When the specified waiting period ends, background processes are checked to ensure there are no active tasks. If the <code class="codeph">-forceterminateactivetasks</code> option is specified at the command line, all active tasks are terminated. Otherwise, a list of tasks is printed and the patching session exits with a failure.</p>
</li>
</ul>
<p>See <a href="GUID-F4736CC1-6A0B-4834-9B34-A51B51CA6B34.htm#GUID-78A506BF-B20E-4BE1-BD60-4E7BFB9BC849">Apply Patches in Hot Patching Mode</a> for more information about hot patching mode.</p>
</div>
</div>
</div>
<div class="sect4"><a id="GUID-1A1845A4-F458-435E-A78B-51AAF2F01F74"></a>
<h4 id="OAPAT-GUID-1A1845A4-F458-435E-A78B-51AAF2F01F74" class="sect4"><span class="enumeration_section">2.2.1.2</span> Coordinated Patching with Patch Manager</h4>
<div>
<p>When a patch contains Database and Oracle Fusion Middleware changes, Patch Manager coordinates the application of both changes, applying database changes first, followed by Oracle Fusion Middleware changes. The patch is applied in a single operation, regardless of the type of artifacts that are updated.</p>
<p>Patch Manager examines patch metadata and determines which actions must be performed by OPatch and which must be performed by AutoPatch. If Patch Manager discovers that a patch contains only database changes, it assigns the patch directly to AutoPatch for processing. If the patch is related only to Oracle Fusion Middleware changes, Patch Manager orchestrates the application of the changes across domains and the Oracle home.</p>
<p>The following figure illustrates the patching process coordinated to Patch Manager:</p>
<div class="figure" id="GUID-1A1845A4-F458-435E-A78B-51AAF2F01F74__GUID-84C29D0C-6891-4B93-B4FE-D2D64C6C780A">
<p class="titleinfigure">Figure 2-1 Oracle Fusion Applications Coordinated Patching</p>
<img width="452" height="302" src="img/GUID-38DE84F7-5E23-4442-BEE2-2C28247005DA-default.gif" alt="Description of Figure 2-1 follows" title="Description of Figure 2-1 follows" /><br />
<a href="img_text/GUID-38DE84F7-5E23-4442-BEE2-2C28247005DA-default.htm">Description of "Figure 2-1 Oracle Fusion Applications Coordinated Patching"</a></div>
<!-- class="figure" -->
<div class="section">
<p>The following high-level phases occur when applying a patch in online mode that contains an Oracle Application Development Framework (Oracle ADF) library and a seed data file:</p>
<ul style="list-style-type: disc;">
<li>
<p>Patch Manager interprets the contents of the patch by reading the patch metadata.</p>
</li>
<li>
<p>AutoPatch updates the seed data.</p>
</li>
<li>
<p>OPatch applies the change to the Oracle ADF library in the form of a JAR file.</p>
</li>
<li>
<p>Patch Manager coordinates with OPatch and forces an immediate shutdown and restart of the impacted Managed Servers so the change to the Oracle ADF library takes effect.</p>
</li>
<li>
<p>Patch Manager consolidates and provides results and status for the overall patching tasks in the Log Summary and the Diagnostics report.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<div class="sect4"><a id="GUID-B3C63960-856D-4185-A7A6-B0C73A2F1F16"></a>
<h4 id="OAPAT-GUID-B3C63960-856D-4185-A7A6-B0C73A2F1F16" class="sect4"><span class="enumeration_section">2.2.1.3</span> Patch Database Artifacts</h4>
<div>
<p>A patch with database-related changes includes a patch driver file that provides instructions to AutoPatch about how to apply the patch. The patch driver file specifies the types of actions to be executed and the phases in which they are executed. To achieve efficient processing time, the database tasks are performed by worker processes and the number of tasks performed is minimized by file version verification.. See the <a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-E140B546-3453-4306-B660-9BADD51A52D2">About Worker Processes</a> and the <a href="GUID-7E4C6556-9EDE-4971-AE22-D85138212325.htm#GUID-EFA88740-E278-4749-BD20-F7C95430EE65">File Version Verification</a> sections to understabd how Autopatch works.</p>
<p>When a patch contains updates to database artifacts, such as application seed data, the database schema, PL/SQL objects, and SQL scripts; Patch Manager calls AutoPatch to coordinate the following tasks:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Worker calculation</span>: Calculates the default number of workers that are necessary. If patching is run on the same machine as the database server, the default number of workers is calculated as 0.5 times the number of Virtual CPUs (VCPUs) on the database server. If patching is run on a machine different from the database server on a Linux platform, the default number of workers is calculated as the minimum of the VCPUs available on the database server and the patching machine. On non-Linux platforms, the default number of workers is equal to the number of VCPUs on the database server. Reduce the number of workers If the machine where the patch is applied has a lower number of VCPUs when compared to those on the database server, then reduce the number of workers.</p>
<p><span class="bold">OPTIONAL</span>: To override the default number of workers when applying a patch, specify the number of workers by using the <code class="codeph">workers</code> option.</p>
<p>The number of workers used for patching database artifacts also imposes a requirement on the open file descriptors configured for the system. Patching requires that the open file descriptors be set to a minimum of 8000 times the number of workers used for the patch session.</p>
</li>
<li>
<p><span class="bold">Patch validation</span> : Validates whether the database portion of the patch is compatible with the environment and can be applied. If the patch is not valid and the patching session fails, see the <a href="GUID-C9E7FC50-20BE-4F33-9760-E5B8C3F978DE.htm#GUID-C9E7FC50-20BE-4F33-9760-E5B8C3F978DE" title="This section describes how to monitor and troubleshoot Oracle Fusion Applications patching and AD Administration processing sessions.">Monitor and Troubleshoot Patches</a> section. If the patch is valid, the following validations are performed:</p>
<ul style="list-style-type: disc;">
<li>
<p>Platform check: Compares the operating system platform for each Oracle Fusion Applications Oracle home against the platform metadata in the patch.</p>
</li>
<li>
<p>Prerequisite check: Validates that all patch prerequisites have been applied.</p>
</li>
</ul>
</li>
<li>
<p><span class="bold">Patch Application</span>: Copies the database artifacts to the Oracle home and then makes changes in the Oracle Fusion Applications database using the updated files.</p>
</li>
<li>
<p><span class="bold">Invalid Object Compilation</span>: Compiles all invalid objects in the database.</p>
</li>
<li>
<p><span class="bold">Consolidation of log files</span>: Collects the patching results and location of log files for reporting purposes.</p>
</li>
</ul>
</div>
<div class="sect5"><a id="GUID-E140B546-3453-4306-B660-9BADD51A52D2"></a>
<h5 id="OAPAT-GUID-E140B546-3453-4306-B660-9BADD51A52D2" class="sect5"><span class="enumeration_section">2.2.1.3.1</span> About Worker Processes</h5>
<div>
<p>An AutoPatch <code class="codeph">manager</code> process reads the patch driver file and determines the set of tasks to be performed. It then spawns processes called <span class="bold">workers</span> to execute the tasks. The manager and its workers communicate through a table in the database, which contains one row for each worker process. The manager assigns tasks to workers by updating the worker row in the table. Each worker process checks the table for updates to its row and carries out the task. When the task is complete, the worker updates the status in the table, and the manager then assigns another task to the worker.</p>
</div>
</div>
<div class="sect5"><a id="GUID-EFA88740-E278-4749-BD20-F7C95430EE65"></a>
<h5 id="OAPAT-GUID-EFA88740-E278-4749-BD20-F7C95430EE65" class="sect5"><span class="enumeration_section">2.2.1.3.2</span> File Version Verification</h5>
<div>
<p>AutoPatch performs file version verification to ensure that only new actions run during patch applications.</p>
<p><span class="bold">CONDITIONAL</span>: AutoPatch runs the action only if the version in the patch is newer than the last version run.</p>
</div>
</div>
<div class="sect5"><a id="GUID-0DB8FF91-A32D-49F6-9A5D-22C30907C6CD"></a>
<h5 id="OAPAT-GUID-0DB8FF91-A32D-49F6-9A5D-22C30907C6CD" class="sect5"><span class="enumeration_section">2.2.1.3.3</span> Compile Invalid Objects</h5>
<div>
<p>Patch Manager uses the standard database-supplied compile utility, which compiles all invalid objects in the database, if no specific schema is supplied. If a schema is supplied it compiles all objects in the schema that are in an invalid state, including those invalid objects that were not affected by the patch. Dependencies between objects can be complex, such as when patching an object causes other objects to become invalid, even though those objects are not in the patch. The purpose of compiling invalid objects after a patch applies is to have a clean database where all objects are in a valid state.</p>
</div>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-F431318E-07F5-4981-990A-21FF722B0104"></a>
<h3 id="OAPAT-GUID-F431318E-07F5-4981-990A-21FF722B0104" class="sect3"><span class="enumeration_section">2.2.2</span> Oracle Fusion Applications Oracle Home</h3>
<div>
<p>During provisioning, the patching framework and the Oracle Fusion Applications software were installed into what is known as the <span class="italic">Oracle Fusion Applications Oracle home</span>. This Oracle home directory, <code class="codeph">/net/mount1/appbase/fusionapps/applications</code>, is a subdirectory under the Oracle Fusion Applications Middleware home. The top level directory, <code class="codeph">/net/mount1/appbase</code>, is referred to as the <code class="codeph">APPLICATIONS_BASE</code>, and is where all <span id="GUID-F431318E-07F5-4981-990A-21FF722B0104__FA">Oracle Fusion Applications</span> binaries reside. There is one and only one set of patching-related software and database tables for each Oracle home. Unless otherwise specified, the use of "Oracle home" and <span class="italic"><code class="codeph">FA_ORACLE_HOME</code></span> in this guide refers to the Oracle Fusion Applications Oracle home.</p>
<p>The following figure shows the related directory structure, beginning with <code class="codeph">APPLICATIONS_BASE</code>:</p>
<div class="figure" id="GUID-F431318E-07F5-4981-990A-21FF722B0104__GUID-E3C18292-D86F-4A54-8517-5967D263C700">
<p class="titleinfigure">Figure 2-2 Oracle Fusion Applications Directory Structure</p>
<img width="417" height="315" src="img/GUID-D86E5A32-8686-42E1-9621-C60FA68E38FD-default.gif" alt="Oracle Fusion Applications directory structure" title="Oracle Fusion Applications directory structure" /></div>
<!-- class="figure" -->
<p>The Oracle home contains the following subdirectories:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">lcm</span>: Contains the patching framework software in the following subdirectories:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">.../ad/bin</code>: Patching framework software and files, including C artifacts and configuration scripts that set the environment and start the corresponding utility</p>
</li>
<li>
<p><code class="codeph">.../ad/java</code>: Java artifacts</p>
</li>
<li>
<p><code class="codeph">.../ad/db/sql</code>: Database artifacts and SQL files</p>
</li>
<li>
<p><code class="codeph">.../ad/lib</code>: Application libraries</p>
</li>
<li>
<p><code class="codeph">.../ad/template</code>: Configuration files or templates delivered and used by the patching framework during configuration activities</p>
</li>
</ul>
</li>
<li>
<p><span class="bold">bin</span>: Contains applications artifacts called by Enterprise Scheduler Service jobs.</p>
</li>
<li>
<p><span class="italic"><span class="bold">product family</span></span>: Contains directories for artifacts specific to a product configuration.</p>
</li>
<li>
<p><span class="bold">admin</span>: Contains the patching framework environment properties file (<code class="codeph">FUSION_env</code>.<code class="codeph">properties)</code>, Oracle Fusion Applications AutoPatch (AutoPatch) and the patching logs, reports, and administration files.</p>
<p><span class="bold">MANDATORY</span>: These files are required by Patch Manager.</p>
</li>
<li>
<p><span class="bold">lib</span>: Contains applications-specific libraries.</p>
</li>
<li>
<p><span class="bold">OPatch</span>: Contains the OPatch utility called by Patch Manager when patching middleware artifacts. This version of OPatch is used to apply patches to the middleware files and software artifacts that reside within the Oracle Fusion Applications Oracle home, and is delivered as part of the Oracle Fusion Applications software. There may be multiple versions of OPatch to support the enterprise software. However, if a newer version is required it will clearly stated in the README of patch set to be applied.</p>
<p><span class="bold">CONDITIONAL</span>: When applying patches to the Oracle homes, on hosts where Oracle Fusion Middleware Oracle homes co-exists with <span class="italic"><code class="codeph">FA_ORACLE_HOME</code></span>, OPatch from <span class="italic"><code class="codeph">FA_ORACLE_HOME</code></span> has to be used. For example, SOA (<code class="codeph">fusionapps/soa</code>) and ATGPF (<code class="codeph">fusionapps/atgpf</code>) Oracle homes exist on the same file system as <span class="italic"><code class="codeph">FA_ORACLE_HOME</code></span> (<code class="codeph">fusionapps/applications</code>). When applying patches or executing any OPatch related commands for SOA and ATGPF, the OPatch from <span class="italic"><code class="codeph">FA_ORACLE_HOME</code></span> (<code class="codeph">fusionapps/applications/OPatch/opatch</code>) must be used.</p>
</li>
</ul>
<p>Oracle Fusion Middleware Oracle homes and Oracle Fusion Applications Oracle home are read only and customers are not expected to update or install any components manually to these home directories. These home directories can be updated only by Oracle Fusion Applications LifeCycle tools, such as Provisioning, Upgrade Orchestrator, and Patch Manager.</p>
</div>
</div>
<div class="sect3"><a id="GUID-556B57FB-9F1D-4784-A3FC-FCA9776BE2F4"></a>
<h3 id="OAPAT-GUID-556B57FB-9F1D-4784-A3FC-FCA9776BE2F4" class="sect3"><span class="enumeration_section">2.2.3</span> Patch Top Directory</h3>
<div>
<p>The patch top directory is any directory selected for downloading patch ZIP files. This directory is also called <code class="codeph">patch_top</code> or <code class="codeph">PATCH_TOP</code>. For example, if patch 1234567.zip is downloaded into <code class="codeph">/home/mypatches</code> and unzipped there, the patch top directory is <code class="codeph">/home/mypatches/1234567</code>.</p>
</div>
</div>
<div class="sect3"><a id="GUID-760E6CBF-B1E6-4CA9-808C-B627E95E9B3D"></a>
<h3 id="OAPAT-GUID-760E6CBF-B1E6-4CA9-808C-B627E95E9B3D" class="sect3"><span class="enumeration_section">2.2.4</span> Backup Copies of Patched Database Artifacts</h3>
<div>
<p>When a patch with a later version of an existing database artifact is applied on the Oracle Home, Patch Manager automatically backs up the existing database artifacts and restores them into a backup directory. The default location for the backup directory is <code class="codeph">admin/pbackup</code> under the Oracle home. This location may be overridden by editing the <code class="codeph">PATCH_BACKUP_DIR</code> parameter in the <code class="codeph">FUSION_env</code>.<code class="codeph">properties</code> file.</p>
</div>
</div>
<div class="sect3"><a id="GUID-506A5DB9-9C41-49CC-9530-B002F29DE60C"></a>
<h3 id="OAPAT-GUID-506A5DB9-9C41-49CC-9530-B002F29DE60C" class="sect3"><span class="enumeration_section">2.2.5</span> Oracle Universal Installer (OUI) Inventory</h3>
<div>
<p>The Oracle Universal Installer (OUI) inventory stores information about all Oracle software products installed in all Oracle homes. Each product, such as Oracle Fusion Applications, maintains its own local inventory and Oracle home. The Local inventory files for <span id="GUID-506A5DB9-9C41-49CC-9530-B002F29DE60C__FA">Oracle Fusion Applications</span> are located in the Oracle Fusion Applications Oracle home where they are read and updated by the patching framework.</p>
<p>The OUI inventory has the following hierarchical structure:</p>
<ul style="list-style-type: disc;">
<li>
<p>Central Inventory Pointer File: The Central Inventory is located in the directory that the inventory pointer file specifies. Each Oracle software installation has its own Central Inventory pointer file that is unknown to another Oracle software installation. The following table shows the location of the default inventory pointer file for various platforms:</p>
<div class="tblformal" id="GUID-506A5DB9-9C41-49CC-9530-B002F29DE60C__GUID-0B094568-3E7B-4DD3-86D0-C47838A5E6C0">
<p class="titleintable">Table 2-4 Default Inventory Pointer File Locations</p>
<table class="cellalignment252" title="Default Inventory Pointer File Locations" summary="Default Inventory Pointer File Locations">
<thead>
<tr class="cellalignment228">
<th class="cellalignment290" id="d2582e1421">Platform</th>
<th class="cellalignment291" id="d2582e1424">Default Inventory Pointer Location</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment228">
<td class="cellalignment292" id="d2582e1429" headers="d2582e1421">
<p>Linux Linux.PPC64 AIX</p>
</td>
<td class="cellalignment293" headers="d2582e1429 d2582e1424">
<p><code class="codeph">/etc/oraInst.loc</code></p>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment292" id="d2582e1437" headers="d2582e1421">
<p>Solaris.SPARC Solaris.X64 HPUX HPIA HP.TRU64 Linux.IA64 Linux.xSeries</p>
</td>
<td class="cellalignment293" headers="d2582e1437 d2582e1424">
<p><code class="codeph">/var/opt/oracle/oraInst.loc</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></li>
<li>
<p>Central Inventory File: This file, <code class="codeph">inventory.xml</code>, is present in the following location: <span class="italic"><code class="codeph">central_inventory_location/</code></span><code class="codeph">ContentsXML/inventory.xml</code>. It contains a list of Oracle homes installed on the node.</p>
</li>
<li>
<p>Oracle Home Inventory: The Oracle home inventory or local inventory is present inside each Oracle home and contains only information relevant to a specific Oracle home. This file is located in the <code class="codeph">$ORACLE_HOME/inventory</code> and contains the following files:</p>
<ul style="list-style-type: disc;">
<li>
<p>Components File</p>
</li>
<li>
<p>Home Properties File</p>
</li>
<li>
<p>Other Folders</p>
</li>
</ul>
</li>
</ul>
<p>Each Oracle home contains OUI components. In Oracle Fusion Applications, each product family is assigned an OUI component and other entities are also assigned a component. For example, the component <code class="codeph">oracle.fusionapps.fin</code> is assigned to Oracle Fusion Financials. The patching framework uses this information to identify and determine the specific contents of the patch that are applicable to the Oracle home, as well as to perform patch validation, patch verification, and reporting.</p>
</div>
</div>
<div class="sect3"><a id="GUID-C8054990-86B0-4D4F-8220-EA6987C62DCC"></a>
<h3 id="OAPAT-GUID-C8054990-86B0-4D4F-8220-EA6987C62DCC" class="sect3"><span class="enumeration_section">2.2.6</span> Taxonomy URL</h3>
<div>
<p>Patch Manager queries the taxonomy MBean URL (as defined by the environment property called <code class="codeph">taxonomy_url</code>) to determine which domain is affected by a specific patch. For example, to determine where a Java EE application is running or where a Service-Oriented Architecture (SOA) composite is deployed. The URL points to an Administration Server of the domain where taxonomy MBeans are hosted. This variable is set during the provisioning process in the <code class="codeph">FUSION_env</code>.<code class="codeph">properties</code> file. This value can be overridden during patching by providing the <code class="codeph">taxonomyurl</code> option when running Patch Manager. For example, if the server being referenced by the default <code class="codeph">taxonomy_url</code> is down, enter an overriding URL from the command line.</p>
</div>
</div>
<div class="sect3"><a id="GUID-B90A2CAE-E6A8-48DA-A50A-B8DA2273A5B5"></a>
<h3 id="OAPAT-GUID-B90A2CAE-E6A8-48DA-A50A-B8DA2273A5B5" class="sect3"><span class="enumeration_section">2.2.7</span> One-Off Patch Directory Structure</h3>
<div>
<p>Oracle Fusion Applications patches often include content for both middleware artifacts and database artifacts. The patching framework examines the high-level contents of each patch and calls the appropriate patching tool to process the patch content.</p>
<p>If the patch only contained database artifacts, the <code class="codeph">12345_MW</code> directory would not exist. If the patch only contained middleware artifacts, the <code class="codeph">123456_DB</code> directory would not exist. Using patch number 123456 as an example of a patch that contains both database and middleware artifacts, the unzipped patch directory, <span class="italic"><code class="codeph">PATCH_TOP/</code></span>123456, contains the files and subdirectories shown in the following figure:</p>
<div class="figure" id="GUID-B90A2CAE-E6A8-48DA-A50A-B8DA2273A5B5__GUID-93D83DFC-0BC9-4B0A-B19F-6B2A76F9B56F">
<p class="titleinfigure">Figure 2-3 Example Directory Structure of a One-Off Patch</p>
<br />
<img width="614" height="689" src="img/GUID-00B34328-1A24-47AD-8564-788C6F14C995-default.gif" alt="Description of Figure 2-3 follows" title="Description of Figure 2-3 follows" /><br />
<a href="img_text/GUID-00B34328-1A24-47AD-8564-788C6F14C995-default.htm">Description of "Figure 2-3 Example Directory Structure of a One-Off Patch"</a><br /></div>
<!-- class="figure" --></div>
</div>
<div class="sect3"><a id="GUID-2EFF1791-72AD-4585-A09E-0E923CB4974B"></a>
<h3 id="OAPAT-GUID-2EFF1791-72AD-4585-A09E-0E923CB4974B" class="sect3"><span class="enumeration_section">2.2.8</span> One-Off Patch Contents</h3>
<div>
<p>A sample of the Patch Content is described below, using patch number 123456 as an example of a patch that contains both database and middleware artifacts:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">README.txt</code>: Provides general instructions to apply the patch and to perform manual steps, if required by the patch. If there are patches listed under "Other Patches" in the <code class="codeph">README</code> file, they must be downloaded and applied before deploying the Oracle Fusion Applications patch.</p>
</li>
<li>
<p><code class="codeph">obj123456.xml</code>: Contains information about each artifact included in the patch.</p>
<p>An example of the contents of the <code class="codeph">obj123456.xml</code> is described below:</p>
<pre dir="ltr">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;PATCH_OBJECT_MANIFEST VERSION="1.0"&gt;
 &lt;COMPONENT TYPE="MW"&gt;
   &lt;OBJECT_INFO NAME="AdfPjgTopPublicUi.jar" 
SUBDIR="prj/deploy/EARProjectsFinancials.ear/EARProjectsFinancials/WEB-INF/lib"
SRCDIR="prj/deploy/EARProjectsFinancials.ear/EARProjectsFinancials/WEB-INF/lib"
PRODUCTFAMILY="prj" PRODUCT="pjg" LBA="PjgTop"
APPNAME="EARProjectsFinancials.ear"
HEADERSTRING="$AppsHeader:fusionapps/prj/components/projectsFinancials/jlib/AdfPjgTopPublicUi.jar st_fusionapps_pt/63 level:0 00.S $"

OUI_COMPONENT="oracle.fusionapps.prj.deploy" VERSION="63.0" TRANSLATION_LEVEL="0" ACTION="COPY" ARTIFACT_TYPE="JEE" /&gt;
 &lt;/COMPONENT&gt;
       &lt;COMPONENT TYPE="DB"&gt;
               &lt;OBJECT_INFO NAME="pjf_event_type_data.sql" SUBDIR="prj/pjf/db/sql"
SRCDIR="prj/pjf/db/sql" PRODUCTFAMILY="prj" PRODUCT="pjf"
LBA="" APPNAME="" HEADERSTRING="$Header: fusionapps/prj/pjf/db/sql/pjf_event_type_data.sql"
OUI_COMPONENT="oracle.fusionapps.prj.db" VERSION="st_fusionapp/1"
TRANSLATION_LEVEL="0" /&gt;
       &lt;/COMPONENT&gt;
       &lt;COMPONENT TYPE="DB"&gt;
               &lt;OBJECT_INFO NAME="pjf_event_type_data.sql" SUBDIR="prj/pjf/db/sql" 
PRODUCTFAMILY="prj" PRODUCT="pjf" LBA="" APPNAME=""
HEADERSTRING="$Header: fusionapps/prj/pjf/db/sql/pjf_event_type_data.sql"
OUI_COMPONENT="oracle.fusionapps.prj.db" VERSION="st_fusionapps/1"
TRANSLATION_LEVEL="0" /&gt;       &lt;/COMPONENT&gt;
&lt;/PATCH_OBJECT_MANIFEST&gt;
</pre></li>
<li>
<p><code class="codeph">uw123456.xml</code> contains high-level information about the patch and provides the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p>Translation and platform attributes</p>
</li>
<li>
<p>Prerequisite patches</p>
</li>
<li>
<p>Additional bug fixes that are included in the patch</p>
</li>
<li>
<p>Compatibility information for the patch, such as product family and application name</p>
</li>
<li>
<p>Type of patch content and attributes, such as the patch driver location and whether manual steps exist</p>
</li>
</ul>
<p>An example of the contents of the <code class="codeph">uw123456.xml</code> file is described below:</p>
<pre dir="ltr">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!--PATCHGEN_VERSION:     11.1.1.5.0--&gt;
&lt;!--OPACK_LABEL:          /net/sta.world.com/OPATCH_MAIN_GENERIC.rdd/opatch/OPack--&gt;
&lt;!--OPACK_VERSION:        null--&gt;
&lt;!--VIEW_LABEL:           FUSIONAPPS_PT.2000.S--&gt;
&lt;!--PATCH_COMMAND:        ant stFullPatchTransaction -Dtransaction=prj_adflib_db -Dinclude=ALL -Dbugid=123456 --&gt;
&lt;PatchManifest Version="1.0"&gt;
&lt;PatchList PatchType="SNOWBALL" Translatable="Y" PartialTranslations="N" HighAvailability="DERIVE" Merge="N" GUID="1004567" &gt;
       &lt;Patch Number="123456" Language="US" Platform="GENERIC" GUID="1004567" BaseBug="123456" BaseProductFamily="UNKNOWN" BaseProduct="UNKNOWN" BaseLBA="" 
Description="" /&gt;
&lt;/PatchList&gt;
&lt;PreReqBugfixList&gt;
&lt;/PreReqBugfixList&gt;
&lt;RequiredComponentList&gt;
       &lt;RequiredComponent ID="oracle.fusionapps.prj.deploy" Version="11.1.1.5.0" /&gt;
       &lt;RequiredComponent ID="oracle.fusionapps.prj.db" Version="11.1.1.5.0" /&gt;
&lt;/RequiredComponentList&gt;
&lt;BugfixList&gt;
       &lt;Bugfix Number="123456" ProductFamily="" Product="" LBA="" Description=""/&gt;
&lt;/BugfixList&gt;
&lt;Impact&gt;
       &lt;ProductFamilyList&gt;
               &lt;ProductFamily Name="prj"&gt;
               &lt;ProductList&gt;
                       &lt;Product Name="pjf"&gt;
                       &lt;/Product&gt;
                       &lt;Product Name="pjg"&gt;
                       &lt;LBAList&gt;
                               &lt;LBA Name="PjgTop"/&gt;
                       &lt;/LBAList&gt;
                       &lt;/Product&gt;
               &lt;/ProductList&gt;
               &lt;/ProductFamily&gt;
       &lt;/ProductFamilyList&gt;
       &lt;ApplicationList&gt;
               &lt;Application Name="EARProjectsFinancials.ear"/&gt;
       &lt;/ApplicationList&gt;
&lt;/Impact&gt;
&lt;ContentList&gt;
                       &lt;/Product&gt;
                       &lt;Product Name="pjg"&gt;
                       &lt;LBAList&gt;
                               &lt;LBA Name="PjgTop"/&gt;
                       &lt;/LBAList&gt;
                       &lt;/Product&gt;
               &lt;/ProductList&gt;
               &lt;/ProductFamily&gt;
       &lt;/ProductFamilyList&gt;
       &lt;ApplicationList&gt;
               &lt;Application Name="EARProjectsFinancials.ear"/&gt;
       &lt;/ApplicationList&gt;
&lt;/Impact&gt;
&lt;ContentList&gt;
       &lt;Content Type="DB" PreApplySteps="N" PostApplySteps="N" PatchDriver="u123456.drv"
PatchDriverLocation="123456_DB" DataModelChanges="N" SeedDataChanges="N"
PlSqlChanges="N" SQLChanges="Y" FlexChanges="N" LDAPChanges="N" DataSecurityChanges="N" /&gt;
       &lt;Content Type="MW" PreApplySteps="N" PostApplySteps="N" PatchDriverLocation="123456_MW" /&gt;
&lt;/ContentList&gt;
&lt;/PatchManifest&gt;
</pre></li>
<li>
<p><code class="codeph">123456_DB</code>: Contains files related to changes for the database artifacts included in this patch, bundled so that they can be accessed and applied using AutoPatch.</p>
<p>The following files exist in the <code class="codeph">123456_DB</code> directory:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">u123456.drv</code>: Contains instructions for AutoPatch to make changes to an Oracle Fusion Applications database and is referred to as the patch driver file.</p>
</li>
</ul>
<ul style="list-style-type: disc;">
<li>
<p>Product family directory: Contains the patch content for database artifacts in a form that is readable by AutoPatch.</p>
</li>
</ul>
</li>
<li>
<p><code class="codeph">123456_MW</code>: Contains files related to middleware artifact changes included in this patch, bundled so that they can be accessed and applied using OPatch. The patch content resides under the <code class="codeph">files</code> subdirectory in a form that is readable by OPatch. The patch metadata resides under the <code class="codeph">etc</code> subdirectory.</p>
<p>The middleware metadata files exist in the following subdirectories:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">/etc/config/actions.xml</code></p>
<p>An example of the contents of the <code class="codeph">actions.xml</code> file is described below:</p>
<pre dir="ltr">
&lt;oneoff_actions&gt;
   &lt;oracle.fusionapps.prj.deploy version="11.1.1.5.0" opt_req="R"&gt;
       &lt;copy name="AdfPjgTopPublicUi.jar" path="%ORACLE_HOME%/prj/deploy/EARProjectsFinancials.ear/EARProjectsFinancials/WEB-INF/lib" file_name="prj/deploy
/EARProjectsFinancials.ear/EARProjectsFinancials/WEB-INF/lib/AdfPjgTopPublic
Ui.jar" file_version="63.0"/&gt;
   &lt;/oracle.fusionapps.prj.deploy&gt;
&lt;/oneoff_actions&gt; 
</pre></li>
<li>
<p><code class="codeph">/etc/config/automation.xml</code></p>
<p>An example of the contents of the <code class="codeph">automation.xml</code> file is described below:</p>
<pre dir="ltr">
&lt;automation xmlns="http://oracle.com/schema/opatch/Automation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://oracle.com/schema
/opatch/Automation ../../xsd/automation.xsd" opatch-version="11.1.0.6.0" deployment-type="fapps" deployment-sub-type="fapps-artifacts"&gt;
    &lt;post-patch-application&gt;
        &lt;deploy-action acts-on="SOAComposite"&gt;
            &lt;deploy-artifact file-name="sca_FinGlCurrencyUserPreferredCurrencyComposite.jar"
 destination-path="%ORACLE_HOME%/fin/deploy" name="FinGlCurrencyUser
PreferredCurrencyComposite" revision="7_5512345"/&gt;
        &lt;/deploy-action&gt;
    &lt;/post-patch-application&gt;
&lt;/automation&gt;
</pre></li>
<li>
<p><code class="codeph">/etc/config/checksum.xml</code></p>
<p>An example of the contents of the <code class="codeph">checksum.xml</code> file is described below:</p>
<pre dir="ltr">
&lt;/checksum_info&gt;
    &lt;file path="%ORACLE_HOME%/fscm/security/policies/system-jazn-data.xml" checksum="-1"/&gt;
&lt;/checksum_info&gt;
</pre></li>
<li>
<p>/<code class="codeph">etc/config/inventory.xml</code></p>
<p>An example of the contents of the <code class="codeph">inventory.xml</code> file is described below:</p>
<pre dir="ltr">
&lt;oneoff_inventory&gt;
   &lt;opack_version version="11.1.0.6.0"/&gt;
   &lt;patch_id number="123456"/&gt;
   &lt;cannot_autorollback&gt;false&lt;/cannot_autorollback&gt;
   &lt;date_of_patch year="2011" month="Feb" day="16" time="10:47:37 hrs" zone="PST8PDT"/&gt;  
   &lt;base_bugs&gt;
       &lt;bug number="123456" description="fusionapps patch"/&gt;
   &lt;/base_bugs&gt;
   &lt;required_components&gt;
       &lt;component internal_name="oracle.fusionapps.prj.deploy" version="11.1.1.5.0" opt_req="R"/&gt;
   &lt;/required_components&gt;
   &lt;os_platforms&gt;
       &lt;platform name="Generic Platform 2" id="2000"/&gt;
   &lt;/os_platforms&gt;
   &lt;executables&gt;&lt;/executables&gt;
   &lt;instance_shutdown&gt;false&lt;/instance_shutdown&gt;
   &lt;instance_shutdown_message&gt;&lt;/instance_shutdown_message&gt;
   &lt;online_rac_installable&gt;false&lt;/online_rac_installable&gt;
   &lt;run_as_root&gt;false&lt;/run_as_root&gt;
   &lt;sql_migrate&gt;false&lt;/sql_migrate&gt;
   &lt;wls_prereq_oneoffs&gt;&lt;/wls_prereq_oneoffs&gt;
   &lt;os_platforms&gt;
       &lt;platform name="Generic Platform 2" id="2000"/&gt;
   &lt;/os_platforms&gt;
   &lt;executables&gt;&lt;/executables&gt;
   &lt;instance_shutdown&gt;false&lt;/instance_shutdown&gt;
   &lt;instance_shutdown_message&gt;&lt;/instance_shutdown_message&gt;
   &lt;online_rac_installable&gt;false&lt;/online_rac_installable&gt;
   &lt;run_as_root&gt;false&lt;/run_as_root&gt;
   &lt;sql_migrate&gt;false&lt;/sql_migrate&gt;
   &lt;wls_prereq_oneoffs&gt;&lt;/wls_prereq_oneoffs&gt;
   &lt;prereq_oneoffs&gt;&lt;/prereq_oneoffs&gt;
   &lt;coreq_oneoffs&gt;&lt;/coreq_oneoffs&gt;
   &lt;overlay_oneoffs&gt;&lt;/overlay_oneoffs&gt;
   &lt;patch_type value="snowball"/&gt;
   &lt;patch_language value="en"/&gt;
   &lt;product_family value="fusionapps"/&gt;
   &lt;patching_model value="snowball"/&gt;
   &lt;auto&gt;false&lt;/auto&gt;
   &lt;translatable&gt;true&lt;/translatable&gt;
   &lt;applicable_product/&gt;
   &lt;products&gt;&lt;/products&gt;
   &lt;update_components&gt;&lt;/update_components&gt;
&lt;/oneoff_inventory&gt; 
</pre></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-642E417A-737E-4155-B0AC-8FEDC408B448"></a>
<h2 id="OAPAT-GUID-642E417A-737E-4155-B0AC-8FEDC408B448" class="sect2"><span class="enumeration_section">2.3</span> Oracle Fusion Applications Patching and the Security Model</h2>
<div>
<p>In Oracle Fusion Applications, credentials used for patching are stored securely based in the Lightweight Directory Access Protocol (LDAP) Credential Store Framework (CSF), where they can be retrieved when required and hidden when starting processes from the command line. Credentials are not stored in any format in the file system or in the database. Users are not prompted for passwords when using command-line utilities. A separate role is not used for patching purposes because all patch administrators log in as the same operating system user to apply patches.</p>
<p><span class="bold">MANDATORY</span>: The patch administrator user must be an owner of the Oracle Fusion Applications Oracle home.</p>
</div>
<div class="sect3"><a id="GUID-90A4E7A2-4FCF-4B38-A350-24D6D2537E7C"></a>
<h3 id="OAPAT-GUID-90A4E7A2-4FCF-4B38-A350-24D6D2537E7C" class="sect3"><span class="enumeration_section">2.3.1</span> Obtain Credentials</h3>
<div>
<p>Patch Manager obtains passwords from the CSF based on the following criteria:</p>
<ul style="list-style-type: disc;">
<li>
<p>CSF APIs are used to obtain passwords from the CSF</p>
</li>
<li>
<p>A combination of a <code class="codeph">MAP</code> and a <code class="codeph">KEY</code> returns the user name, and its corresponding password, in decrypted format</p>
</li>
</ul>
<p>All credentials are securely stored in a wallet that is stored in LDAP. Patch Manager credentials are available under the <code class="codeph">oracle.patching</code> <code class="codeph">MAP</code> name and each credential is identified by a KEY.</p>
</div>
</div>
<div class="sect3"><a id="GUID-CEE17302-483F-4741-8F01-5C18FBF28736"></a>
<h3 id="OAPAT-GUID-CEE17302-483F-4741-8F01-5C18FBF28736" class="sect3"><span class="enumeration_section">2.3.2</span> Usage of CSF APIs</h3>
<div>
<p>The patching framework uses CSF APIs to retrieve credentials. It does not pass the credentials at the command line when calling either AutoPatch or OPatch.</p>
</div>
</div>
<div class="sect3"><a id="GUID-9B848BE5-7DC5-4518-A43A-64C7A16C00A5"></a>
<h3 id="OAPAT-GUID-9B848BE5-7DC5-4518-A43A-64C7A16C00A5" class="sect3"><span class="enumeration_section">2.3.3</span> No Password Prompts in Interactive Mode</h3>
<div>
<p>Security can be breached when prompted for a password while invoking patching from the command line. To avoid this situation, Patch Manager uses the Oracle Platform Security Services APIs to fetch passwords from the CSF.</p>
</div>
</div>
<div class="sect3"><a id="GUID-49D08362-C46F-4089-AC5D-58B8463FE4FD"></a>
<h3 id="OAPAT-GUID-49D08362-C46F-4089-AC5D-58B8463FE4FD" class="sect3"><span class="enumeration_section">2.3.4</span> Removal of Credential From Files</h3>
<div>
<p>Patch Manager uses a defaults file to store the arguments and other information required for a given session, but does not read or write credentials to or from the defaults file. Additionally, Patch Manager does not read or write credentials from restart files or log files.</p>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment227">
<tr>
<td class="cellalignment234">
<table class="cellalignment232">
<tr>
<td class="cellalignment231"><a href="GUID-405043B5-44A9-4813-9882-D0BF7F1D1CB7.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment231"><a href="GUID-D71DC177-4FBA-40A6-AE3D-457818A31382.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2011, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment236">
<table class="cellalignment230">
<tr>
<td class="cellalignment231"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment231"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
