<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Apply Identity Management (IDM) Patches</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="This section describes how apply Oracle Identity Management (IDM) in Patching Framework." />
<meta name="dcterms.created" content="2017-09-11T13:03:11Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Applications Patching Guide" />
<meta name="dcterms.identifier" content="E71563_03" />
<meta name="dcterms.isVersionOf" content="OAPAT" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2011, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="GUID-324B8325-AF58-4C7D-A3E4-CC7C76E42688.htm" title="Previous" type="text/html" />
<link rel="Next" href="GUID-C9E7FC50-20BE-4F33-9760-E5B8C3F978DE.htm" title="Next" type="text/html" />
<link rel="alternate" href="OAPAT.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-A5685EA1-D608-482C-B9F0-FC44EB2BD80B"></a> <span id="PAGE" style="display:none;">11/14</span> <!-- End Header -->
<h1 id="OAPAT-GUID-A5685EA1-D608-482C-B9F0-FC44EB2BD80B" class="sect1"><span class="enumeration_chapter">7</span> Apply Identity Management (IDM) Patches</h1>
<div>
<div><span>This section describes how apply Oracle Identity Management (IDM) in Patching Framework.</span></div>
<p>The primary purpose of the Oracle Identity Management (IDM) Patching Framework for Oracle Fusion Applications is to simplify and expedite the maintenance of the code and functionality shipped as part of Oracle Identity Management for the Oracle Fusion Applications suite of products.</p>
<div class="section">
<p>IDM patching can be either manual or automated depending on a variety of factors.</p>
</div>
<!-- class="section" --></div>
<div class="sect2"><a id="GUID-0A349EA0-9147-42A9-8504-2530A16A0936"></a>
<h2 id="OAPAT-GUID-0A349EA0-9147-42A9-8504-2530A16A0936" class="sect2"><span class="enumeration_section">7.1</span> Overview of the Oracle Identity Management Patching Framework</h2>
<div>
<p>The Oracle Identity Management patching framework coordinates the application of multiple patches to an Oracle Identity Management deployment and includes the following features:</p>
<ul style="list-style-type: disc;">
<li>
<p>Patches all products within the <span id="GUID-0A349EA0-9147-42A9-8504-2530A16A0936__OIM">Oracle Identity Management</span> domain, including dependencies</p>
</li>
<li>
<p>Runs across multiple machines</p>
</li>
<li>
<p>Uses shared or local storage</p>
</li>
<li>
<p>Runs during both initial provisioning and on an ongoing basis</p>
</li>
<li>
<p>Runs in a defined, tier-wise order, minimizing downtime based on the patches being applied</p>
</li>
<li>
<p>Stops and starts affected servers, as required and when appropriate</p>
</li>
<li>
<p>Includes the ability to execute post-patch artifact changes</p>
</li>
<li>
<p>Includes comprehensive state-sharing and reporting</p>
</li>
</ul>
<p>Oracle Identity Manager includes patches for the following products that are installed in the Oracle Identity Management domain:</p>
<ul style="list-style-type: disc;">
<li>
<p>Oracle Internet Directory</p>
</li>
<li>
<p>Oracle Virtual Directory</p>
</li>
<li>
<p>Oracle Directory Services Manager</p>
</li>
<li>
<p>Oracle Identity Federation</p>
</li>
<li>
<p>Oracle Access Manager</p>
</li>
<li>
<p>Oracle Identity Manager</p>
</li>
<li>
<p>Oracle HTTP Server</p>
</li>
<li>
<p>Oracle HTTP Server WebGate</p>
</li>
<li>
<p>Oracle SOA Suite</p>
</li>
<li>
<p>Oracle WebLogic Server</p>
</li>
</ul>
</div>
<div class="sect3"><a id="GUID-8596F2D7-9DEB-4209-A820-5D97853251C9"></a>
<h3 id="OAPAT-GUID-8596F2D7-9DEB-4209-A820-5D97853251C9" class="sect3"><span class="enumeration_section">7.1.1</span> Understand Oracle Identity Management Patching Framework Concepts</h3>
<div>
<p>The <span id="GUID-8596F2D7-9DEB-4209-A820-5D97853251C9__OIMPAT">Oracle Identity Management Patching Framework</span> is composed of the <span id="GUID-8596F2D7-9DEB-4209-A820-5D97853251C9__OIMPATMGR">Oracle Identity Management Patch Manager</span> and the <span id="GUID-8596F2D7-9DEB-4209-A820-5D97853251C9__OIMPATCHER">Oracle Identity Management Patcher</span> tools. These tools work to apply patches to the <span id="GUID-8596F2D7-9DEB-4209-A820-5D97853251C9__OIM">Oracle Identity Management</span> environment, using complete information about the deployment topology and verifying what services are running on which hosts. Based on the topology and the patches available, a patch session is created that defines and executes a patch plan. The <span>Oracle Identity Management Patch Manager</span> is used to generate the patch plan.</p>
<p>The patch plan is then executed by the <span>Oracle Identity Management Patcher</span> by:</p>
<ul style="list-style-type: disc;">
<li>
<p>Stopping and starting servers</p>
</li>
<li>
<p>Applying patches, as required, in an optimal manner</p>
</li>
</ul>
</div>
</div>
<div class="sect3"><a id="GUID-1A80BB69-41AB-46D2-AEE8-BE25BAE0DB9F"></a>
<h3 id="OAPAT-GUID-1A80BB69-41AB-46D2-AEE8-BE25BAE0DB9F" class="sect3"><span class="enumeration_section">7.1.2</span> About Oracle Identity Management Patch Manager</h3>
<div>
<p>The Oracle Identity Management Patch Manager is a tool that generates the patch plan and controls the patch session.</p>
<p>The Oracle Identity Management Patch Manager generates the patch plan as follows:</p>
<ol>
<li>
<p>A <span class="italic"><code class="codeph">PATCH_TOP</code></span> directory containing patches, classified by each product subdirectory is provided to the tool.</p>
</li>
<li>
<p>The <span class="italic"><code class="codeph">PATCH_TOP</code></span> directory is scanned and initial validations are performed.</p>
</li>
<li>
<p>The deployment topology is read and analyzed.</p>
</li>
<li>
<p>The information obtained in Step 2 and Step 3 is combined, and a patch plan is generated using the <code class="codeph">OPlan</code> utility. The patch plan is generated in HTML and plain-text formats, as well as binary format used for execution.</p>
</li>
</ol>
<p>The topology data used by the tools is located in the topology store, which is an XML file located at <code class="codeph">$LCM_CONFIG/topology/topology.xml</code>. This file contains most of the environment information used by the tools to apply patches. Additionally, the <code class="codeph">provisioning.plan</code> file, located at <code class="codeph">$IDM_TOP/provisioning/plan</code>, is also used for some tasks.</p>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-3BD3DFB5-6D33-43F5-973B-42EC62AD7411"></a>
<h2 id="OAPAT-GUID-3BD3DFB5-6D33-43F5-973B-42EC62AD7411" class="sect2"><span class="enumeration_section">7.2</span> Verify the <code class="codeph">patchtop-contents.properties</code> File</h2>
<div>
<div class="section">
<p>The downloaded patches must be organized in the following directory structure:</p>
<ul style="list-style-type: disc;">
<li>
<p>A top-level <span class="italic"><code class="codeph">PATCH_TOP</code></span> directory containing different subdirectories for storing product-specific patches.</p>
</li>
<li>
<p>Mapping between the products and the relative paths of the subdirectories under the <span class="italic"><code class="codeph">PATCH_TOP</code></span> stored in <code class="codeph">patchtop-contents.properties</code>.</p>
</li>
</ul>
<p>The relative paths of the subdirectories should be populated correctly in the patchtop-contents.properties file under the <code class="codeph">$IDM_LCM_TOP/patch/config/</code> directory to ensure that the <span id="GUID-3BD3DFB5-6D33-43F5-973B-42EC62AD7411__OIMPAT">Oracle Identity Management Patching Framework</span> can find the patches.</p>
<p><span class="bold">CONDITIONAL:</span> There is a default structure already supported by the <code class="codeph">patchtop-content.properties</code> file. If you do not want to follow the existing directory structure for storing the patches, then ensure that the <code class="codeph">patchtop-content.properties</code> file is updated with the relative paths created under the <span class="italic"><code class="codeph">PATCH_TOP</code></span> so that the patching framework can find the product-specific patches correctly.</p>
<p>The following example provides details of the <code class="codeph">patchtop-contents.properties</code> file:</p>
<pre dir="ltr">
#key: name of Fusion Middleware/Application patch component
#value: list of <span>PATCH_TOP</span> subdirectories containing the patches of the component separated by commas.
common=oracle_common/patch
dir=idm/patch/oid, idm/patch/ovd, pltsec/patch
oam=iamsuite/patch/oam, idm/patch
odsm=idm/patch/odsm
ohs=webtier/patch
ohswg=webgate/patch
oif=idm/patch/oif, oif/patch
soa=soa/patch
wls=smart_update/weblogic
</pre>
<p>The targets shown on the left side cannot be modified, but the values on the right side can be updated. These values are the relative paths from the <span class="italic"><code class="codeph">PATCH_TOP</code></span>. If these paths are deleted from the file, the <span>Oracle Identity Management Patching Framework</span> assumes the default path location.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="sect2"><a id="GUID-FBAD02E8-E10F-4B3A-9E43-D8294C4868B0"></a>
<h2 id="OAPAT-GUID-FBAD02E8-E10F-4B3A-9E43-D8294C4868B0" class="sect2"><span class="enumeration_section">7.3</span> Verify the <code class="codeph">env.properties</code> File</h2>
<div>
<div class="section">
<p>The <code class="codeph">env.properties</code> file, located at <code class="codeph">$IDM_LCM_TOP/patch/config/env.properties</code>, contains all environment variables required by the <span id="GUID-FBAD02E8-E10F-4B3A-9E43-D8294C4868B0__OIMPAT">Oracle Identity Management Patching Framework</span>. These properties are populated by the provisioning flow. Before running the <span id="GUID-FBAD02E8-E10F-4B3A-9E43-D8294C4868B0__OIM">Oracle Identity Management</span> Patch Manager and <span id="GUID-FBAD02E8-E10F-4B3A-9E43-D8294C4868B0__OIMPATCHER">Oracle Identity Management Patcher</span> tools, ensure that the environment variables described in the following table are set:</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-FBAD02E8-E10F-4B3A-9E43-D8294C4868B0__GUID-9E665706-45B6-4D3E-BF5C-0BD9114310FE">
<p class="titleintable">Table 7-1 Environment Variables</p>
<table class="cellalignment237" title="Environment Variables" summary="Environment variables">
<thead>
<tr class="cellalignment228">
<th class="cellalignment238" id="d9881e446">Name</th>
<th class="cellalignment280" id="d9881e449">Value</th>
<th class="cellalignment281" id="d9881e452">Mandatory</th>
<th class="cellalignment282" id="d9881e455">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment228">
<td class="cellalignment240" id="d9881e460" headers="d9881e446">
<p>JAVA_HOME</p>
</td>
<td class="cellalignment283" headers="d9881e460 d9881e449">
<p>JDK absolute path</p>
</td>
<td class="cellalignment284" headers="d9881e460 d9881e452">
<p>Yes</p>
</td>
<td class="cellalignment285" headers="d9881e460 d9881e455">
<p>The path pointing to the JDK location.</p>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment240" id="d9881e473" headers="d9881e446">
<p>IDM_TOP</p>
</td>
<td class="cellalignment283" headers="d9881e473 d9881e449">
<p>IDM_TOP absolute path</p>
</td>
<td class="cellalignment284" headers="d9881e473 d9881e452">
<p>Yes</p>
</td>
<td class="cellalignment285" headers="d9881e473 d9881e455">
<p>The absolute path of the IDM_TOP where IDM products are installed and configurations are stored.</p>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment240" id="d9881e486" headers="d9881e446">
<p>LCM_CONFIG</p>
</td>
<td class="cellalignment283" headers="d9881e486 d9881e449">
<p>IDMLCM absolute path</p>
</td>
<td class="cellalignment284" headers="d9881e486 d9881e452">
<p>Yes</p>
</td>
<td class="cellalignment285" headers="d9881e486 d9881e455">
<p>Absolute path where the IDMLCM configuration is stored.</p>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment240" id="d9881e499" headers="d9881e446">
<p>ANT_HOME</p>
</td>
<td class="cellalignment283" headers="d9881e499 d9881e449">
<p>Ant Home</p>
</td>
<td class="cellalignment284" headers="d9881e499 d9881e452">
<p>No, but recommended</p>
</td>
<td class="cellalignment285" headers="d9881e499 d9881e455">
<p>Absolute path pointing to the root directory of an Apache Ant distribution. This is required only to apply artifact changes for some products. If this environment variable is not set, impacted artifact changes may not complete.</p>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment240" id="d9881e512" headers="d9881e446">
<p>RETURN_MESSAGE_BUFFER_SIZE</p>
</td>
<td class="cellalignment283" headers="d9881e512 d9881e449">
<p>This buffer size includes standard output and error messages stored in log files Default value is 8KB</p>
</td>
<td class="cellalignment284" headers="d9881e512 d9881e452">
<p>No</p>
</td>
<td class="cellalignment285" headers="d9881e512 d9881e455">
<p>The size of return message that is stored for each command executed. Affects the size of output printed to console and logs.</p>
<p>Available units are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>B (byte)</p>
</li>
<li>
<p>KB (kilobyte)</p>
</li>
<li>
<p>MB (megabyte)</p>
</li>
<li>
<p>GB (gigabyte)</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment240" id="d9881e540" headers="d9881e446">
<p>COMMAND_TIMEOUT</p>
</td>
<td class="cellalignment283" headers="d9881e540 d9881e449">
<p>A number and unit default value is 3600s (1 hour)</p>
</td>
<td class="cellalignment284" headers="d9881e540 d9881e452">
<p>No</p>
</td>
<td class="cellalignment285" headers="d9881e540 d9881e455">
<p>Timeout value followed by unit. If command execution takes longer, it is terminated. Permissible units are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>ms (milliseconds)</p>
</li>
<li>
<p>s (seconds)</p>
</li>
<li>
<p>m (minutes)</p>
</li>
<li>
<p>h (hours)</p>
</li>
<li>
<p>d (days)</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p>The <code class="codeph">env.properties</code> file is populated during the provisioning flow. However, in case of multiple <code class="codeph">IDM_TOP</code>s are using a single <span>Oracle Identity Management</span> provisioning and patching tools install, then the values must be deleted of the <code class="codeph">IDM_TOP</code> and <code class="codeph">LCM_CONFIG</code> variables from the <code class="codeph">env.properties</code> file and set the correct values.</p>
<p>There is also an option to set the environment variables through the command line using the commands listed. However, ensure that the existing values are deleted from the <code class="codeph">env.properties</code> file before setting the values. In case of use a POSIX-compliant shell, use the following command:</p>
<div class="p">
<pre dir="ltr">
export JAVA_HOME=&lt;JDK absolute path&gt;
</pre></div>
</div>
<!-- class="section" --></div>
</div>
<div class="sect2"><a id="GUID-D44AE1CF-D190-4117-B58E-9DE53F03EEF9"></a>
<h2 id="OAPAT-GUID-D44AE1CF-D190-4117-B58E-9DE53F03EEF9" class="sect2"><span class="enumeration_section">7.4</span> Use the Oracle Identity Management Patching Framework</h2>
<div>
<div class="section">
<p>The <span id="GUID-D44AE1CF-D190-4117-B58E-9DE53F03EEF9__OIMPAT">Oracle Identity Management Patching Framework</span> consists of the <span id="GUID-D44AE1CF-D190-4117-B58E-9DE53F03EEF9__OIMPATMGR">Oracle Identity Management Patch Manager</span> and <span id="GUID-D44AE1CF-D190-4117-B58E-9DE53F03EEF9__OIMPATCHER">Oracle Identity Management Patcher</span> tools. The following sections describe how to create and apply the patch plan:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-A5685EA1-D608-482C-B9F0-FC44EB2BD80B.htm#GUID-D9776CD5-69F6-45E9-85E9-12AF4E98A823">Create an IDM Patch Plan</a></p>
</li>
<li>
<p><a href="GUID-1D6499E1-01AA-477D-91E0-3FDCAF5EBBEC.htm#GUID-D6A9419E-87B5-43E4-9742-C68685C29A92">Apply the Patches</a></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
<div class="sect3"><a id="GUID-AFC1C980-06E3-4B9B-9EE3-AD34CA993254"></a>
<h3 id="OAPAT-GUID-AFC1C980-06E3-4B9B-9EE3-AD34CA993254" class="sect3"><span class="enumeration_section">7.4.1</span> Create an IDM Patch Plan</h3>
<div>
<div class="section">
<p>Perform the following steps to create the patch plan using <span id="GUID-AFC1C980-06E3-4B9B-9EE3-AD34CA993254__OIMPATMGR">Oracle Identity Management Patch Manager</span>:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-A5685EA1-D608-482C-B9F0-FC44EB2BD80B.htm#GUID-A16C9397-E653-4471-A421-386EB7276334">Run Oracle Identity Management Patch Manager</a></p>
</li>
<li>
<p><a href="GUID-A5685EA1-D608-482C-B9F0-FC44EB2BD80B.htm#GUID-F8C5AD0E-486A-4964-BB46-018AF6EB437F">Understand the Patch Plan</a></p>
</li>
<li>
<p><a href="GUID-A5685EA1-D608-482C-B9F0-FC44EB2BD80B.htm#GUID-D9776CD5-69F6-45E9-85E9-12AF4E98A823">Create a Patch Plan</a></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
<div class="sect4"><a id="GUID-A16C9397-E653-4471-A421-386EB7276334"></a>
<h4 id="OAPAT-GUID-A16C9397-E653-4471-A421-386EB7276334" class="sect4"><span class="enumeration_section">7.4.1.1</span> Run Oracle Identity Management Patch Manager</h4>
<div>
<div class="section">
<p>To run the <span id="GUID-A16C9397-E653-4471-A421-386EB7276334__OIMPATMGR">Oracle Identity Management Patch Manager</span>, use the command line utility, <code class="codeph">idmpatchmgr</code>, located in the <code class="codeph">$IDM_LCM_TOP/patch/bin</code> directory. Its shell script sets the environment and calls the utility. For UNIX, the shell script is <code class="codeph">idmpatchmgr.sh</code>. <code class="codeph">idmpatchmgr</code> and can be run with various commands and options. <span>Oracle Identity Management Patch Manager</span> maintains a stateful session to track the patch process coordination with the <span id="GUID-A16C9397-E653-4471-A421-386EB7276334__OIMPATCHER">Oracle Identity Management Patcher</span> tool.</p>
<p><span class="bold">MANDATORY</span>: The <span>Oracle Identity Management Patch Manager</span> must be run on the primordial host to create the patch plan as described in the <a href="GUID-A5685EA1-D608-482C-B9F0-FC44EB2BD80B.htm#GUID-D9776CD5-69F6-45E9-85E9-12AF4E98A823">Create the Patch Plan</a> section. A new patching session cannot be created until the existing session is completed or is aborted.</p>
<p><span>Oracle Identity Management Patch Manager</span> maintains a session file in the <code class="codeph">$LCM_CONFIG/patch/session/</code> directory. The session file has the current state of the <span>Oracle Identity Management Patch Manager</span> patch session. At any given point in time there will be only one or zero active patch sessions existing on the primordial host.</p>
<p>The patch session displays one of the statuses as described in the following table. The status <code class="codeph">COMPLETE</code> and <code class="codeph">INCOMPLETE</code> are the terminal states; whereas <code class="codeph">FAILED</code> and <code class="codeph">ABORTING</code> are recoverable states.</p>
<div class="tblformal" id="GUID-A16C9397-E653-4471-A421-386EB7276334__GUID-5F918ABB-928D-4A21-9792-A2D774B07F6F">
<p class="titleintable">Table 7-2 Patch Session Status</p>
<table class="cellalignment237" title="Patch Session Status" summary="Oracle Identity Management Patch Manager commands">
<thead>
<tr class="cellalignment228">
<th class="cellalignment263" id="d9881e821">State</th>
<th class="cellalignment286" id="d9881e824">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment228">
<td class="cellalignment266" id="d9881e829" headers="d9881e821">
<p><code class="codeph">ACTIVE</code></p>
</td>
<td class="cellalignment287" headers="d9881e829 d9881e824">
<p>In-progress state</p>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment266" id="d9881e837" headers="d9881e821">
<p><code class="codeph">FAILED</code></p>
</td>
<td class="cellalignment287" headers="d9881e837 d9881e824">
<p>Halted state in response to a step failing execution</p>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment266" id="d9881e845" headers="d9881e821">
<p><code class="codeph">ABORTING</code></p>
</td>
<td class="cellalignment287" headers="d9881e845 d9881e824">
<p>Halted state in response to the administrator issuing an abort command</p>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment266" id="d9881e853" headers="d9881e821">
<p><code class="codeph">COMPLETE</code></p>
</td>
<td class="cellalignment287" headers="d9881e853 d9881e824">
<p>Terminal state where all steps are executed</p>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment266" id="d9881e861" headers="d9881e821">
<p><code class="codeph">INCOMPLETE</code></p>
</td>
<td class="cellalignment287" headers="d9881e861 d9881e824">
<p>Terminal state if a session is aborted, either in response to a step execution failure or otherwise</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>Run the&nbsp;Oracle Identity Management Patch Manager, use the command line utility,&nbsp;<code class="codeph">idmpatchmgr</code>, where instructions in brackets are optional . Example of the Oracle Identity Management Patch Manager command is a follows:</p>
<div class="p">
<pre dir="ltr">
(UNIX) $IDM_LCM_TOP/patch/bin/idmpatchmgr.sh &lt;command&gt; [-options]
</pre></div>
<p>Where &lt;command&gt; is any IDM Patch Manager command, and the [options] are any options desired for the given command. The following table describes all the IDM Patch Manager commands:</p>
</div>
<!-- class="section" -->
<div class="section">
<div class="tblformal" id="GUID-A16C9397-E653-4471-A421-386EB7276334__GUID-C0674F15-77F3-4ADC-B9D7-D3D1C53FF42A">
<p class="titleintable">Table 7-3 Oracle Identity Management Patch Manager Commands</p>
<table class="cellalignment237" title="Oracle Identity Management Patch Manager Commands" summary="Oracle Identity Management Patch Manager commands">
<thead>
<tr class="cellalignment228">
<th class="cellalignment263" id="d9881e893">Command</th>
<th class="cellalignment286" id="d9881e896">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment228">
<td class="cellalignment266" id="d9881e901" headers="d9881e893">
<p>apply</p>
</td>
<td class="cellalignment287" headers="d9881e901 d9881e896">
<p>Starts a patch session where selected patches will be deployed.</p>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment266" id="d9881e908" headers="d9881e893">
<p>rollback</p>
</td>
<td class="cellalignment287" headers="d9881e908 d9881e896">
<p>Starts a patch session where selected patches will be removed.</p>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment266" id="d9881e915" headers="d9881e893">
<p>abort</p>
</td>
<td class="cellalignment287" headers="d9881e915 d9881e896">
<p>Ends a patch session without completing all planned steps.</p>
</td>
</tr>
<tr class="cellalignment228">
<td class="cellalignment266" id="d9881e922" headers="d9881e893">
<p>progress</p>
</td>
<td class="cellalignment287" headers="d9881e922 d9881e896">
<p>Displays the status for an ongoing patch session.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>To view additional information for any <code class="codeph">idmpatchmgr</code> command, use the following syntax:</p>
<div class="p">
<pre dir="ltr">
(UNIX) $IDM_LCM_TOP/patch/bin/idmpatchmgr.sh command -help
</pre></div>
</div>
<!-- class="section" --></div>
</div>
<div class="sect4"><a id="GUID-D9776CD5-69F6-45E9-85E9-12AF4E98A823"></a>
<h4 id="OAPAT-GUID-D9776CD5-69F6-45E9-85E9-12AF4E98A823" class="sect4"><span class="enumeration_section">7.4.1.2</span> Create the Patch Plan</h4>
<div>
<div class="section">
<p>To create a patch plan containing instructions for applying patches to an Oracle Identity Management environment, run the <code class="codeph">idmpatchmgr apply</code> command. This plan can be executed by running the <span id="GUID-D9776CD5-69F6-45E9-85E9-12AF4E98A823__OIMPATCHER">Oracle Identity Management Patcher</span> tool.</p>
<p><span class="bold">MANDATORY</span>: To create the patch plan, run the <span id="GUID-D9776CD5-69F6-45E9-85E9-12AF4E98A823__OIMPATMGR">Oracle Identity Management Patch Manager</span> on the primordial host.</p>
<p><span class="bold">Syntax</span></p>
<div class="p">
<pre dir="ltr">
(UNIX) $IDM_LCM_TOP/patch/bin/idmpatchmgr.sh apply -patchtop <span class="italic">patch_top</span>
</pre></div>
<p>For more information about the way the patch plan is generated, see the <a href="GUID-A5685EA1-D608-482C-B9F0-FC44EB2BD80B.htm#GUID-F8C5AD0E-486A-4964-BB46-018AF6EB437F">Understand the Patch Plan</a> section.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="sect4"><a id="GUID-F8C5AD0E-486A-4964-BB46-018AF6EB437F"></a>
<h4 id="OAPAT-GUID-F8C5AD0E-486A-4964-BB46-018AF6EB437F" class="sect4"><span class="enumeration_section">7.4.1.3</span> Understand the Patch Plan</h4>
<div>
<p>The patch plan is automatically generated by the <span id="GUID-F8C5AD0E-486A-4964-BB46-018AF6EB437F__OIMPATMGR">Oracle Identity Management Patch Manager</span>. To do so, <span>Oracle Identity Management Patch Manager</span> performs the following:</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>The <code class="codeph">apply</code> command validates the given <span class="italic"><code class="codeph">PATCH_TOP</code></span> location and validates the existence of the patch session with <code class="codeph">ACTIVE</code> or <code class="codeph">FAILED</code> status.</p>
</li>
<li>
<p>If no patch session exists, the patch scanner is internally invoked to validate and generate a composite bundle patch from the provided <span class="italic"><code class="codeph">PATCH_TOP</code></span>. This bundle patch is internally used in the plan generation. The composite bundle patch is created in the location: <code class="codeph">$LCM_CONFIG/patch/patches</code>.</p>
</li>
<li>
<p>A patch plan is generated with instructions for applying patches using the topology store information and composite bundle patch.</p>
</li>
<li>
<p>The <code class="codeph">apply</code> command generates the patch plan in the following location in HTML and plain text formats:</p>
<div class="p">
<pre dir="ltr">
$LCM_CONFIG/patch/status/<span class="italic">current-sessionID</span>/manager/log/PatchInstructions.html
</pre></div>
<div class="p">
<pre dir="ltr">
$LCM_CONFIG/patch/status/<span class="italic">current-sessionID</span>/manager/log/PatchInstructions.text
</pre></div>
<p>The patch plan in HTML and plain text formats provides useful information regarding the <span id="GUID-F8C5AD0E-486A-4964-BB46-018AF6EB437F__OIM">Oracle Identity Management</span> environment, commands executed by the <span id="GUID-F8C5AD0E-486A-4964-BB46-018AF6EB437F__OIMPATCHER">Oracle Identity Management Patcher</span>, total number of steps, steps that require downtime and so on. This enables you to better understand the <span id="GUID-F8C5AD0E-486A-4964-BB46-018AF6EB437F__OIMPAT">Oracle Identity Management Patching Framework</span> execution flow.</p>
</li>
<li>
<p>At the time of plan generation, a new patch session is created in <code class="codeph">ACTIVE</code> status, with all steps with status <code class="codeph">PLANNED</code>. The patch session is stored in the <code class="codeph">$LCM_CONFIG/patch/session/session</code> file. The step information is stored in the <code class="codeph">$LCM_CONFIG/patch/session/step</code> file.</p>
</li>
<li>
<p>The log files are generated in the following locations:</p>
<p>Before the session is created:</p>
<div class="p">
<pre dir="ltr">
$LCM_CONFIG/patch/status/log/idmpatchmgr.log
</pre></div>
<p>After the session is created:</p>
<div class="p">
<pre dir="ltr">
$LCM_CONFIG/patch/status/<span class="italic">currentSessionID</span>/manager/log/idmpatchmgr-session.log
</pre></div>
</li>
</ul>
<p>The following table lists the option available for the <code class="codeph">apply</code> command:</p>
<div class="tblformal" id="GUID-F8C5AD0E-486A-4964-BB46-018AF6EB437F__GUID-3C76877F-6F10-46DF-9450-251A8CC922FF">
<p class="titleintable">Table 7-4 <code class="codeph">apply</code> Command Option</p>
<table class="cellalignment237" title="apply Command Option" summary="apply Command Options">
<thead>
<tr class="cellalignment228">
<th class="cellalignment271" id="d9881e1169">Option</th>
<th class="cellalignment275" id="d9881e1172">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment228">
<td class="cellalignment274" id="d9881e1177" headers="d9881e1169">
<p><code class="codeph">-patchtop</code></p>
</td>
<td class="cellalignment276" headers="d9881e1177 d9881e1172">
<p>Displays the path to the location of the patches.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" --></div>
</div>
</div>
<div class="sect3"><a id="GUID-30A584D2-8A2D-4737-9322-88FCAEE20A3A"></a>
<h3 id="OAPAT-GUID-30A584D2-8A2D-4737-9322-88FCAEE20A3A" class="sect3"><span class="enumeration_section">7.4.2</span> Apply Oracle Identity Management Patches</h3>
<div>
<p>The following section describe the concept of applying Oracle Identity Management Patcher is based on an understanding of the Oracle Identity Management Patches utility and consists of applying the patches and applying artifact changes. This section contains the following topics:</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-A5685EA1-D608-482C-B9F0-FC44EB2BD80B.htm#GUID-BBA84764-A2B9-4FF2-AEB0-F226941C7F00">Understand the Oracle Identity Management Patcher</a></p>
</li>
<li>
<p><a href="GUID-1D6499E1-01AA-477D-91E0-3FDCAF5EBBEC.htm#GUID-D6A9419E-87B5-43E4-9742-C68685C29A92">Apply the Patches</a></p>
</li>
<li>
<p><a href="GUID-A5685EA1-D608-482C-B9F0-FC44EB2BD80B.htm#GUID-9228D47A-4B10-4F0F-8B70-078FF973DA33">Apply Artifact Changes</a></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
<div class="sect4"><a id="GUID-BBA84764-A2B9-4FF2-AEB0-F226941C7F00"></a>
<h4 id="OAPAT-GUID-BBA84764-A2B9-4FF2-AEB0-F226941C7F00" class="sect4"><span class="enumeration_section">7.4.2.1</span> Understand the Oracle Identity Management Patcher</h4>
<div>
<p>The <span id="GUID-BBA84764-A2B9-4FF2-AEB0-F226941C7F00__OIMPATCHER">Oracle Identity Management Patcher</span> is the tool used to apply Oracle Identity Management (IDM) patches to an Oracle Fusion Applications environment.</p>
<div class="section">
<p>To apply patches, use the <code class="codeph">run</code> command. This command performs the following tasks:</p>
<ul style="list-style-type: disc;">
<li>
<p>Validates the existence of a patch session and the availability of one or more steps with status <code class="codeph">PLANNED</code> for the host where the tool is running.</p>
</li>
<li>
<p>If there are one or more steps with status <code class="codeph">PLANNED</code> for any other host prior to the above steps, then <span>Oracle Identity Management Patcher</span> reports that the execution is not possible until execution is complete for the other host.</p>
</li>
<li>
<p>Creates the following log file named <code class="codeph">status</code> with the details:</p>
<div class="p">
<pre dir="ltr">
$LCM_CONFIG/patch/status/<span class="italic">currentSessionID</span>/hosts/<span class="italic">currentHostName</span>/status
</pre></div>
</li>
<li>
<p>When <span>Oracle Identity Management Patcher</span> starts executing the patching steps, the status log file is updated with <code class="codeph">key =</code> <span class="italic">step-id</span> and <code class="codeph">value = RUNNING</code>. After setting the status, it extracts the command from the execution step and invokes the command using the step executor. On successful execution of the command, the status log file will be updated with <code class="codeph">key =</code> <span class="italic">step-id</span> and <code class="codeph">value = COMPLETED</code>. The execution continues to the next step from the execution plan for the current host.</p>
</li>
<li>
<p>If there are no steps to be executed for the current host, it halts the execution and updates the administrator on the next steps to be executed.</p>
</li>
<li>
<p>The <code class="codeph">run</code> command also updates the session status. When reusing the <code class="codeph">run</code> command, <span id="GUID-BBA84764-A2B9-4FF2-AEB0-F226941C7F00__OIMPATMGR">Oracle Identity Management Patch Manager</span> displays the results.</p>
</li>
<li>
<p>On failure, the status log file is updated with <code class="codeph">key =</code> <span class="italic">step-id</span> and <code class="codeph">value = FAILED</code> and execution is stopped.</p>
</li>
<li>
<p>The <code class="codeph">run</code> command generates log files in the following locations:</p>
<p>Before the session is created:</p>
<div class="p">
<pre dir="ltr">
$LCM_CONFIG/patch/status/log/idmpatchmgr.log
</pre></div>
<div class="p">
<pre dir="ltr">
$LCM_CONFIG/patch/status/log/idmpatch.log
</pre></div>
<p>After the session is created:</p>
<div class="p">
<pre dir="ltr">
$LCM_CONFIG/patch/status/<span class="italic">currentSessionID</span>/manager/log/idmpatchmgr-session.log
</pre></div>
<div class="p">
<pre dir="ltr">
$LCM_CONFIG/patch/status/<span class="italic">currentSessionID</span>/hosts/<span class="italic">hostname</span>/log/idmpatch-session.log
</pre></div>
</li>
</ul>
<p>For information about how to use the<span>Oracle Identity Management Patcher</span> <code class="codeph">run</code> command, see the <a href="GUID-1D6499E1-01AA-477D-91E0-3FDCAF5EBBEC.htm#GUID-D6A9419E-87B5-43E4-9742-C68685C29A92">Apply the Patches</a> section.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="sect4"><a id="GUID-D6A9419E-87B5-43E4-9742-C68685C29A92"></a>
<h4 id="OAPAT-GUID-D6A9419E-87B5-43E4-9742-C68685C29A92" class="sect4"><span class="enumeration_section">7.4.2.2</span> Apply the Patches</h4>
<div>
<div class="section">
<p>To run the <span id="GUID-D6A9419E-87B5-43E4-9742-C68685C29A92__OIMPATCHER">Oracle Identity Management Patcher</span>, use the command line utility, <code class="codeph">idmpatch</code>, located in the <code class="codeph">$IDM_LCM_TOP/patch/bin</code> directory. Its shell script sets the environment and calls the utility. The following command shows the basic syntax for the <code class="codeph">idmpatch</code> utility:</p>
<div class="p">
<pre dir="ltr">
(UNIX) $IDM_LCM_TOP/patch/bin/idmpatch.sh run 
</pre></div>
<p><span class="bold">OPTIONAL</span>: To run only the prerequisites, use the <code class="codeph">prereq</code> option . This will not stop and start the services or apply and rollback patches. The syntax to run the <code class="codeph">idmpatch</code> is as follows:</p>
<div class="p">
<pre dir="ltr">
(UNIX)$IDM_LCM_TOP/patch/bin/idmpatch.sh run -prereq
</pre></div>
</div>
<!-- class="section" --></div>
</div>
<div class="sect4"><a id="GUID-9228D47A-4B10-4F0F-8B70-078FF973DA33"></a>
<h4 id="OAPAT-GUID-9228D47A-4B10-4F0F-8B70-078FF973DA33" class="sect4"><span class="enumeration_section">7.4.2.3</span> Apply Artifact Changes</h4>
<div>
<p>Oracle Identity Management Patch Manager supports the application of post-patch artifact changes, such as adding an entry within a configuration properties file or invoking a product MBean. While most patches do not include them, Oracle Identity Management Patch Manager automatically executes the changes after all binary patch application for a single product is completed for those patches that do.</p>
<p>For example, if three patches [1, 2, 3] are applied to Oracle Access Manager within a patch session, and 1 contains an artifact change, the order of operations is [binary 1, binary 2, binary 3, artifact 1].</p>
</div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment227">
<tr>
<td class="cellalignment234">
<table class="cellalignment232">
<tr>
<td class="cellalignment231"><a href="GUID-324B8325-AF58-4C7D-A3E4-CC7C76E42688.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment231"><a href="GUID-C9E7FC50-20BE-4F33-9760-E5B8C3F978DE.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2011, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment236">
<table class="cellalignment230">
<tr>
<td class="cellalignment231"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment231"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
