<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Troubleshoot Oracle SOA Suite</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="This section describes common problems that might be encountered when using Oracle SOA Suite and explains how to solve them." />
<meta name="dcterms.created" content="2018-02-21T10:06:12Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Applications Administrator's Guide" />
<meta name="dcterms.identifier" content="E66226-03" />
<meta name="dcterms.isVersionOf" content="OASAD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2011, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="GUID-FE333592-7A78-438C-8743-FA5C36221622.htm" title="Previous" type="text/html" />
<link rel="Next" href="GUID-61BE9E1A-B754-4BB0-9A8B-D7084275FEBE.htm" title="Next" type="text/html" />
<link rel="alternate" href="OASAD.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-78C0349D-173F-4A80-903F-58E980358727"></a> <span id="PAGE" style="display:none;">17/27</span> <!-- End Header -->
<a id="OASAD4389"></a><a id="OASAD2703"></a>
<h1 id="OASAD-GUID-78C0349D-173F-4A80-903F-58E980358727" class="sect1"><span class="enumeration_chapter">13</span> Troubleshoot <span id="SOA">Oracle SOA Suite</span></h1>
<div>
<div><span>This section describes common problems that might be encountered when using <span>Oracle SOA Suite</span> and explains how to solve them.</span></div>
<p>The following topics are discussed:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-9E2F2526-74B5-4904-A411-8E8AC09E23EA">Introduction to Oracle SOA Suite</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-8D1493D5-FAD0-42C5-AFEF-BA1F27EFA4A4">Get Started with Troubleshooting and Logging Basics for Oracle SOA Suite</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-47098ACF-512C-403E-BDE1-8F6B85F8D3EB">Runtime Diagnostics</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-37892412-A202-47AE-9730-A0B837E9CF7E">Security and Oracle WSM Policy Manager Configuration</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-2A36F7AF-5366-4CD1-B086-46F6CAE15B1F">Human Workflow</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-64145224-294D-49B8-B6A1-7732DA06616E">Patching and Deployment</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-8327C504-39B0-47A4-846E-AD7037EC1F02">Performance</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-0A1076D7-946D-4662-8F71-34CCFA0FD7C9">Maintenance</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-3EDDDBC6-1AC1-4E3F-BFDF-81BD50984008">Custom Development (Extensibility)</a></p>
</li>
</ul>
<p>Some procedures in this section reference content in the <span id="GUID-78C0349D-173F-4A80-903F-58E980358727__FMW">Oracle Fusion Middleware</span> guides. These guides describe using <span id="GUID-78C0349D-173F-4A80-903F-58E980358727__IASOEMFRAMESHORT">Fusion Middleware Control</span>. These procedures also apply to <span id="GUID-78C0349D-173F-4A80-903F-58E980358727__FAOEMFRAMESHORT">Fusion Applications Control</span>.</p>
<p>To gain insight into the log details generated by Oracle Fusion applications, see <a href="GUID-FE333592-7A78-438C-8743-FA5C36221622.htm#GUID-FE333592-7A78-438C-8743-FA5C36221622" title="This section describes how to use incidents, log settings, log files, QuickTrace output, and diagnostic tests and how they relate to help diagnose and resolve problems with Oracle Fusion Applications.">Prepare to Troubleshoot Using Incidents, Logs, QuickTrace, and Diagnostic Tests</a>. Also, review the <span class="italic">Fusion Middleware Error Messages</span> for information about the error messages that may be encountered.</p>
<div class="p">Some parts of this section describe how to set properties in the System MBean Browser of <span>Fusion Applications Control</span>. Some MBean properties are applicable to <span id="GUID-78C0349D-173F-4A80-903F-58E980358727__WLS">Oracle WebLogic Server</span> and others are applicable to the SOA Infrastructure.
<ul style="list-style-type: disc;">
<li>
<p><span>Oracle WebLogic Server</span> Mbeans are properties that affect the Java Virtual Machine (JVM) server level process that runs on the operating system. Example properties include the port on which the server is listening, and so on. These properties are agnostic to the type of application running on that server.</p>
</li>
<li>
<p>SOA Infrastructure-level Mbeans are properties that impact the SOA Infrastructure application running on the same <span>Oracle WebLogic Server</span>. Example properties include audit levels, transaction retries, and so on.</p>
</li>
</ul>
</div>
</div>
<a id="OASAD6508"></a>
<div class="props_rev_3"><a id="GUID-9E2F2526-74B5-4904-A411-8E8AC09E23EA"></a>
<h2 id="OASAD-GUID-9E2F2526-74B5-4904-A411-8E8AC09E23EA" class="sect2"><span class="enumeration_section">13.1</span> Introduction to <span>Oracle SOA Suite</span></h2>
<div>
<p><span id="GUID-9E2F2526-74B5-4904-A411-8E8AC09E23EA__SOA">Oracle SOA Suite</span> offers developers drag and drop composition and revision of business processes, resulting in reuse, faster application development, assembly, and solution delivery. The event delivery network of <span>Oracle SOA Suite</span> unifies business events and services in a single declarative environment. The components of the suite benefit from common capabilities that include consistent tooling, a single deployment and management model, end-to-end security, and unified metadata management.</p>
<p><span id="GUID-9E2F2526-74B5-4904-A411-8E8AC09E23EA__FA">Oracle Fusion Applications</span> are built using SOA composite applications to simplify the implementation of business logic and connection to external services, applications, and technologies.</p>
</div>
</div>
<a id="OASAD3331"></a><a id="OASAD3330"></a>
<div class="props_rev_3"><a id="GUID-8D1493D5-FAD0-42C5-AFEF-BA1F27EFA4A4"></a>
<h2 id="OASAD-GUID-8D1493D5-FAD0-42C5-AFEF-BA1F27EFA4A4" class="sect2"><span class="enumeration_section">13.2</span> Get Started with Troubleshooting and Logging Basics for <span>Oracle SOA Suite</span></h2>
<div>
<div class="section">
<p>In the majority of cases in which an Oracle SOA Suite error occurs with Distributed Order Orchestration (DOO), a message is logged that is displayed in the DOO user interface.</p>
</div>
<!-- class="section" -->
<div class="section">
<p>SOA troubleshooting must be performed when the Oracle Fusion application transaction flow:</p>
<ul style="list-style-type: disc;">
<li>
<p>Has an error in SOA (or check if it is a SOA-related error)</p>
</li>
<li>
<p>Has not completed and is taking longer than it should and it has been identified as stuck in SOA (or check if it is stuck in SOA)</p>
</li>
<li>
<p>Is not working as expected, and the wrong data is passed</p>
</li>
</ul>
<p>The recommended approach to troubleshooting SOA issues is as follows:</p>
<ol>
<li>
<p>Check the server and composite status log in <span id="GUID-8D1493D5-FAD0-42C5-AFEF-BA1F27EFA4A4__WLS">Oracle WebLogic Server</span> Administration Console and check to see if the SOA server is up and running successfully (that is, not in a failed state).</p>
<ol>
<li>
<p>Log in to <span>Oracle WebLogic Server</span> Administration Console.</p>
</li>
<li>
<p>In the <span class="bold">Domain Structure</span>, click <span class="bold">Deployments</span>.</p>
</li>
<li>
<p>In the <span class="bold">Name</span> column of the <span class="bold">Deployments</span> section, find <span class="bold">soa-infra</span>.</p>
</li>
<li>
<p>Ensure the <span class="bold">State</span> column is set to <span class="bold">Active</span> and the <span class="bold">Health</span> column is set to <span class="bold">OK</span>.</p>
</li>
<li>
<p>Click <span class="bold">soa-infra</span>, and then <span class="bold">Monitoring</span> tab.</p>
</li>
<li>
<p>Expand to ensure that all components have <span class="bold">Health</span> set to <span class="bold">OK</span>.</p>
</li>
<li>
<p>Note the server name on which SOA is deployed.</p>
</li>
<li>
<p>Go to <span class="bold">Domain Structure</span>, click <span class="bold">Environment</span>, and then <span class="bold">Servers</span>. Verify that the <span class="bold">State</span> column is set to <span class="bold">RUNNING</span> and the <span class="bold">Health</span> column is set to <span class="bold">OK</span>.</p>
</li>
<li>
<p>Note the <span class="bold">Listen Port</span> column value as this is the SOA runtime port.</p>
</li>
</ol>
</li>
<li>
<div class="p">Check that the SOA platform status is ready.
<ol>
<li>
<p>Log into EM.</p>
</li>
<li>
<p>Expand SOA and click <span class="bold">soainfra</span>.</p>
</li>
<li>
<p>Make sure SOA Runtime Health is showing as up as Initialized Successfully.</p>
</li>
<li>
<p>Click <span class="bold">Deployed Composites tab</span> and make sure status of composites are up (Green up arrow).</p>
</li>
</ol>
</div>
</li>
<li>
<p>Check to see if any <span id="GUID-8D1493D5-FAD0-42C5-AFEF-BA1F27EFA4A4__FAAPP">Oracle Fusion application</span> incident was created for the problem encountered.</p>
</li>
<li>
<p>Check whether the event was delivered to the SOA cluster by checking the log messages in <span id="GUID-8D1493D5-FAD0-42C5-AFEF-BA1F27EFA4A4__FAOEMFRAMESHORT">Fusion Applications Control</span>.</p>
<p>This requires the <span class="bold">oracle.integration.platform.blocks.event</span> logger to be set to <span class="bold">TRACE:32 (FINEST)</span>. There are potentially many types of exceptions that can appear in the log messages on the client side that raised the event. For example:</p>
<ul style="list-style-type: disc;">
<li>
<p>If a Java class is not in the class path, then a <code class="codeph">ClassNotFoundException</code> may appear.</p>
</li>
<li>
<p>If the Java Naming and Directory Interface (JNDI) for the context or connection factory is not configured properly, then a <code class="codeph">NamingException</code> or <code class="codeph">FabricException</code> may appear.</p>
</li>
<li>
<p>If the event payload XML created is invalid or contains invalid characters, it is possible to receive a <code class="codeph">FabricException</code> indicating that enqueueing of the event fails at the PL/SQL API with invalid characters, and so on.</p>
</li>
</ul>
<p>For information about enabling this log and troubleshooting business events, see <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A">Business Event Subscriptions Are Not Firing</a>.</p>
</li>
<li>
<p>Check the composite instance flow. If the event was fired, then find the composite instance based on the application data.</p>
<p>See <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-34C0FF86-C490-4ADC-8213-0C50DCB7BE4E">Correlate Application Issues to the SOA Composite IDs</a> for primary key mapping to the composite instance ID.</p>
</li>
<li>
<p>Review the composite instance flow and fault details. If the instance is in error and it is recoverable, attempt recovery using the <span class="bold">Recovery</span> tab of the BPEL process service engine in <span>Fusion Applications Control</span>.</p>
</li>
<li>
<p>View the logs.</p>
<p>If the problem still cannot be solved, increase the log level of the system to debug the transactions. To simplify troubleshooting, it is recommended to enable the following parent loggers at the <span class="bold">TRACE:32 (FINEST)</span> level in <span>Fusion Applications Control</span>:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">oracle.soa</span></p>
</li>
<li>
<p><span class="bold">oracle.fabric</span></p>
</li>
<li>
<p><span class="bold">oracle.integration</span></p>
</li>
</ul>
<p>The <span class="bold">oracle.wsm logger</span> can remain set to the <span class="bold">ERROR</span> level where it logs the required error messages. The <span class="bold">oracle.apps</span> logger should be set to <span class="bold">ALL</span>. To change logger levels, perform the following steps:</p>
<ol>
<li>
<p>Go to <span>Fusion Applications Control</span>.</p>
</li>
<li>
<p>In the navigation pane, select <span class="bold">WebLogic Domain</span>.</p>
</li>
<li>
<p>Right-click a Managed Server from within the domain (each server's log levels can be independently set).</p>
</li>
<li>
<p>Choose <span class="bold">Logs</span>, and then <span class="bold">Log Configuration</span>.</p>
</li>
<li>
<p>In the <span class="bold">Logger Name</span> column, expand the <span class="bold">oracle</span> runtime loggers to display loggers such as <span class="bold">oracle.soa</span>.</p>
</li>
<li>
<p>Change the logging level to <span class="bold">TRACE:32</span>. The change should take effect within a few minutes.</p>
<div class="figure" id="GUID-8D1493D5-FAD0-42C5-AFEF-BA1F27EFA4A4__GUID-FB31D093-2D31-424A-8DCB-E98187F4E522">
<p class="titleinfigure">Figure 13-1 Log Levels Tab</p>
<br />
<div class="imagecenter"><img class="imagecenter" width="700" height="484" src="img/GUID-76FD5B5B-AF85-4672-980C-838F145A0A24-default.gif" alt="Description of Figure 13-1 follows" title="Description of Figure 13-1 follows" /><br />
<a href="img_text/GUID-76FD5B5B-AF85-4672-980C-838F145A0A24-default.htm">Description of "Figure 13-1 Log Levels Tab"</a></div>
<br /></div>
<!-- class="figure" -->
<p>Note that in a production system, setting the trace at a fine-grained level can result in a large amount of output that must be diagnosed. It is possible to alternately use selective tracing that provides a way to get a detailed, on-disk trace selectively (for example, by user name, thereby eliminating trace output for other users).</p>
</li>
<li>
<p>To activate selective tracing, right-click the domain under <span class="bold">WebLogic Domain</span>, choose <span class="bold">Logs</span>, and then <span class="bold">Selective Tracing</span>.</p>
<p>Note that <span class="bold">Selecting Tracing</span> does not display as an option when right-clicking an Administration Server or Managed Server and choose <span class="bold">Logs</span>.</p>
</li>
<li>
<p>From the <span class="bold">Option Name</span> list, choose the type of selective trace (for example, based on user name), and start the trace.</p>
</li>
<li>
<p>When the problem has been reproduced, disable the trace and view the output to narrow down the issue.</p>
</li>
<li>
<p>Review the error logs (from <span>Fusion Applications Control</span>) for more information on the error.</p>
<p>Cross layer, server, and family functionality can be correlated through the execution context ID (ECID) (for example, look up the composite instance for a given expense report by correlating all the log entries with the ECID associated with that expense report transaction).</p>
</li>
</ol>
</li>
<li>
<p>Check for incorrect configurations and any networking issues, especially around potentially incorrect settings of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>External load balancers</p>
</li>
<li>
<p>Oracle HTTP Server</p>
</li>
<li>
<p>Virtual host/IP address</p>
</li>
<li>
<p><span>Oracle WebLogic Server</span> front-end URL</p>
</li>
<li>
<p>SSL host name verification settings</p>
</li>
</ul>
</li>
<li>
<p>Verify that custom applications have been deployed on the correct servers using the correct configuration plan during deployment.</p>
</li>
<li>
<p>Contact Oracle Support Services.</p>
<p>If the error still cannot be resolved, file a ticket with Oracle Support Services and provide the logs and information shown in <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-8D1493D5-FAD0-42C5-AFEF-BA1F27EFA4A4__BABBGICC" title="SOA Log Information for Oracle Support">Table 13-1</a>.</p>
<div class="tblformal" id="GUID-8D1493D5-FAD0-42C5-AFEF-BA1F27EFA4A4__BABBGICC">
<p class="titleintable">Table 13-1 SOA Log Information for Oracle Support Services</p>
<table class="cellalignment27" title="SOA Log Information for Oracle Support Services" summary="SOA Log Information for Oracle Support">
<thead>
<tr class="cellalignment11">
<th class="cellalignment28" id="d129285e539">Log</th>
<th class="cellalignment29" id="d129285e542">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment11">
<td class="cellalignment30" id="d129285e547" headers="d129285e539">
<p>Application diagnostic log</p>
</td>
<td class="cellalignment31" headers="d129285e547 d129285e542">
<p>View the following log:</p>
<pre dir="ltr">
$DOMAIN_HOME/servers/<span class="italic">domain_name</span>/logs/apps/<span class="italic">server_name</span>-diagnostic.log
</pre></td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment30" id="d129285e562" headers="d129285e539">
<p>Server diagnostic log</p>
</td>
<td class="cellalignment31" headers="d129285e562 d129285e542">
<p>View the following log:</p>
<pre dir="ltr">
$DOMAIN_HOME/servers/<span class="italic">server_name</span>/logs/<span class="italic">server_name</span>-diagnostic.log
</pre>
<p>For example, <code class="codeph">soa_server1-diagnostic.log</code>, if <span class="italic"><code class="codeph">server_name</code></span> is <code class="codeph">soa_server1</code>.</p>
<p>This is where the log output is available. By default, only the last 100 MB of the diagnostic logs are retained.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment30" id="d129285e591" headers="d129285e539">
<p>Server log</p>
</td>
<td class="cellalignment31" headers="d129285e591 d129285e542">
<p>View the following log:</p>
<pre dir="ltr">
<span class="italic">server_name</span>.log
</pre>
<p>For example, <code class="codeph">soa_server1.log</code>, if <span class="italic"><code class="codeph">server_name</code></span> is <code class="codeph">soa_server1</code>.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment30" id="d129285e614" headers="d129285e539">
<p>Server console output</p>
</td>
<td class="cellalignment31" headers="d129285e614 d129285e542">
<p><code class="codeph">&lt;stdout&gt;</code> is also helpful, especially for deployment or patching issues.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment30" id="d129285e623" headers="d129285e539">
<p>Server thread dump</p>
</td>
<td class="cellalignment31" headers="d129285e623 d129285e542">
<p>Enter the following at the operating system command prompt:</p>
<pre dir="ltr">
kill -3 <span class="italic">managed_server_process_ID</span>
</pre>
<p><span>Oracle WebLogic Server</span> Administration Console can be also used.</p>
<ol>
<li>
<p>In the navigation tree of <span>Oracle WebLogic Server</span> Administration Console, select <span class="bold">Environment</span> then, <span class="bold">Servers</span>.</p>
</li>
<li>
<p>In the table, select the server.</p>
</li>
<li>
<p>Select the <span class="bold">Monitoring</span> tab.</p>
</li>
<li>
<p>Select the <span class="bold">Threads</span> tab.</p>
</li>
<li>
<p>Click <span class="bold">Dump Thread Stacks</span>.</p>
</li>
</ol>
<p>The output is in the console logs.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment30" id="d129285e674" headers="d129285e539">
<p>OPatch thread dump</p>
</td>
<td class="cellalignment31" headers="d129285e674 d129285e542">
<pre dir="ltr">
kill -3 <span class="italic">opatch_client_process_ID</span>
</pre></td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment30" id="d129285e683" headers="d129285e539">
<p>OWSM message log</p>
</td>
<td class="cellalignment31" headers="d129285e683 d129285e542">
<p>The following log captures all SOAP messages on the wire.</p>
<pre dir="ltr">
$DOMAIN_HOME/servers/<span class="italic">server_name</span>/logs/owsm/msglogging/diagnostic.log
</pre>
<p>This log is not enabled by default. To enable this log:</p>
<ol>
<li>
<p>Go to <span class="bold">Fusion Applications Control</span> then, <span class="bold">Weblogic Domain</span> then, <span class="bold">Web Services</span> and then, <span class="bold">Policies</span>.</p>
</li>
<li>
<p>Choose the security level for which to enable logging.</p>
</li>
<li>
<p>Edit the policy to enable the log assertion.</p>
</li>
</ol>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></li>
<li>
<p>Send Oracle Support Services information about the error packaged with Automatic Diagnostic Repository-based incident processing.</p>
</li>
</ol>
<p>The following documentation provides additional information about the topics discussed in this section:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>For information about how to investigate, report, and, in some cases, resolve a problem, see section Investigating, Reporting, and Solving a Problem in <span class="italic"><span id="GUID-8D1493D5-FAD0-42C5-AFEF-BA1F27EFA4A4__ASADM"><cite>Administering Oracle Fusion Middleware</cite></span></span>.</p>
</li>
<li>
<p>For information about correlating all log entries with the ECID, see section Correlating Messages Across Log Files and Components in <span class="italic"><span><cite>Administering Oracle Fusion Middleware</cite></span></span>.</p>
</li>
<li>
<p>For information about configuration plans, see section How to Use Configuration Plans to Customize SOA Composite Applications for the Target Environment in <span class="italic"><span id="GUID-8D1493D5-FAD0-42C5-AFEF-BA1F27EFA4A4__SOASE"><cite>Developing SOA Applications with Oracle SOA Suite</cite></span></span>.</p>
</li>
<li>
<p>For information about setting logging levels for SOA components, see section Setting Logging Levels for Troubleshooting in the <span class="italic"><span id="GUID-8D1493D5-FAD0-42C5-AFEF-BA1F27EFA4A4__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</li>
<li>
<p>For information about incorrect configurations and any networking issues see the <span class="italic">Fusion Middleware Enterprise Deployment Guide for Oracle SOA Suite</span>.</p>
</li>
<li>
<p>For information about selective tracing, see section Configuring and Using Selective Tracing in <span class="italic"><span><cite>Administering Oracle Fusion Middleware</cite></span></span>.</p>
</li>
<li>
<p>For information about <span>Oracle Fusion application</span> incident processing, see <a href="GUID-FE333592-7A78-438C-8743-FA5C36221622.htm#GUID-EAE93C90-3E46-4526-88BD-668D6A5B30BE">Create Incidents Manually</a>.</p>
</li>
<li>
<p>For information about the list of loggers and log levels, see section Troubleshooting Oracle SOA Suite and Oracle BPM Suite appendix in <span class="italic"><span><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD2704"></a>
<div class="props_rev_3"><a id="GUID-47098ACF-512C-403E-BDE1-8F6B85F8D3EB"></a>
<h2 id="OASAD-GUID-47098ACF-512C-403E-BDE1-8F6B85F8D3EB" class="sect2"><span class="enumeration_section">13.3</span> Runtime Diagnostics</h2>
<div>
<p>This section contains the following topics that describe common problems and solutions for <span id="GUID-47098ACF-512C-403E-BDE1-8F6B85F8D3EB__SOA">Oracle SOA Suite</span> runtime:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-34C0FF86-C490-4ADC-8213-0C50DCB7BE4E">Correlate Application Issues to the SOA Composite IDs</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A">Business Event Subscriptions Are Not Firing</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-6D88D2FC-12FB-485C-B866-308E4D9F505C">Long Delays After an Event is Published and Before a Subscriber is Triggered</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-24CBE060-92A9-4466-8613-3F10CFABF230">Events Are Consumed by Multiple Revisions of the Same Composites</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-5D542C9C-688C-4B6E-BB9E-86B4928239A6">Rolled Back OAOO Event Delivery Messages Are Displayed in the Log Files</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-F4653C2C-AF0E-4D38-93D0-C281ED9F8C70">Application Transaction Does Not Complete and the Underlying Composite Is Stuck in a Running State</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-0B8989BF-64CD-44FF-8EBB-736308EE2C54">BPEL Process Received No Response from an ADF Asynchronous Service</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-ED4F094E-9066-42C9-B84A-57A5BAAEFEDD">Business Event Is Picked Up Twice (Or More) By SOA Server</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-549F2066-5EEE-44B8-A1D8-D02943BF629F">Long Running, Synchronous Calls To Remote Web Services Error Out or Asynchronous Transactions Return with an Error after a Long Time</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-84C4D6D7-E2B1-4B38-853A-2B0D58F0870E">Some Messages Are Lost Between EDN and Composites or Composites Across Clusters</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-2372C95C-3914-467A-825B-B8B3B9BA5749">Some Composites Are Being Retried Multiple Times on Failure</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-07C061E0-2278-4BD1-85D0-9B8CC0C77719">Some Fusion Applications Control Features Are Missing the No Recover Button or Export Composite Capability</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-61747D8B-1011-497C-803E-8867DF13C66D">Automatic Recovery of BPEL Instances is Not Recovering A Specific Instance</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-942B3383-5D06-4082-AD8F-63510C59486B">SOA Runtime Fails with a "Cannot read WSDL" Error</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-E0509F46-0ACC-4788-BE64-D5F198C4B9F9">Upload a Composite for Oracle Support Services</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-287F9640-4165-4326-8237-CF3A23E5A987">Confirm SOA Component Configuration Properties for Oracle Support Services</a></p>
</li>
</ul>
</div>
<a id="OASAD2705"></a>
<div class="props_rev_3"><a id="GUID-34C0FF86-C490-4ADC-8213-0C50DCB7BE4E"></a>
<h3 id="OASAD-GUID-34C0FF86-C490-4ADC-8213-0C50DCB7BE4E" class="sect3"><span class="enumeration_section">13.3.1</span> Correlate Application Issues to the SOA Composite IDs</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>How does an administrator translate an issue faced in the application to a composite instance in <span id="GUID-34C0FF86-C490-4ADC-8213-0C50DCB7BE4E__FAOEMFRAMESHORT">Fusion Applications Control</span> for debugging purposes? For example, a purchase order transaction is stuck in processing for days and the administrator wants to see what the composite instance is doing. How does the administrator map the purchase order ID to the composite instance ID?</p>
<p><span class="bold">Solution</span></p>
<p><span id="GUID-34C0FF86-C490-4ADC-8213-0C50DCB7BE4E__FA">Oracle Fusion Applications</span> modules write context-specific and business user-identifiable keys to the log files. This includes primary keys for any of the logical entities processed by the composite. After the primary key and other context information is included in the log messages, the administrator can search for that context (for example, purchase order ID) in the log file and derive the composite instance ID and ECID. From there, they can diagnose the issue in <span>Fusion Applications Control</span>. Usually, the primary key information is written to the logs in case of any error/incident/message level.</p>
<p>Cross layer, server, and family functionality are all designed to be correlated through the ECID. For example, it is possible to look up the composite instance for a given expense report by correlating all the log entries with the ECID associated with that expense report transaction.</p>
<p>During a specific time interval, several hundred instances may be created. This is a fairly common use case. If there is no error, or if the application has not implemented a BPEL process with sensor logging (should not be common), then instead of searching for the primary key, perform one of the following tasks:</p>
<ul style="list-style-type: disc;">
<li>
<p>Try using the approximate timestamp of the transaction.</p>
</li>
<li>
<p>Inspect the input payload of the audit trail flow (until the right one is found) to identify the right composite.</p>
</li>
</ul>
<p>Any extensions/customizations are also expected to log the same context-specific keys. <code class="codeph">AF_LOG</code> and <code class="codeph">AF_LOG_MODULE</code> can be set properly (such as setting log channel levels) to specify finer-grained logging from a particular family/logical business area (LBA)/composite.</p>
</div>
</div>
<a id="OASAD2708"></a>
<div class="props_rev_3"><a id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A"></a>
<h3 id="OASAD-GUID-C945A210-69FB-47C7-BD5C-20750CDE001A" class="sect3"><span class="enumeration_section">13.3.2</span> Business Event Subscriptions Are Not Firing</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>When a business event is published, the business event subscription defined in the composite does not fire and a composite instance is not created. This can occur, for example, with an ADF application invoking a SOA composite.</p>
<p><span class="bold">Solution</span></p>
<p>To resolve this problem.</p>
<ol>
<li id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABJEGAB">
<p>Enable EDN logging in <span id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__FAOEMFRAMESHORT">Fusion Applications Control</span>. The following server loggers specific to EDN are available for selection:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">oracle.integration.platform.blocks.event</span></p>
</li>
<li>
<p><span class="bold">oracle.integration.platform.blocks.event.saq</span></p>
</li>
<li>
<p><span class="bold">oracle.integration.platform.blocks.event.jms</span></p>
which only appears if EDN is running in EDN-JMS mode instead of the default EDN-DB mode.</li>
</ul>
<p>The server loggers can be set to one of the following levels:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">TRACE:1 (FINE)</span></p>
</li>
<li>
<p><span class="bold">TRACE:16 (FINER)</span></p>
</li>
<li>
<p><span class="bold">TRACE:32 (FINEST)</span></p>
</li>
</ul>
<p>Alternately selective tracing can be used to get detailed, on-disk trace selectively (for example, by user name, thereby eliminating trace output for other users). See <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-8D1493D5-FAD0-42C5-AFEF-BA1F27EFA4A4">Get Started with Troubleshooting and Logging Basics for Oracle SOA Suite</a> for details.</p>
<p>Detailed logging goes into SOA server's <code class="codeph">diagnostic.log</code> file configured in <span>Fusion Applications Control</span>. To set the log level for the loggers:</p>
<ol>
<li>
<p>Go to the navigation pane.</p>
</li>
<li>
<p>Right-click <span class="bold">soa-infra</span>.</p>
</li>
<li>
<p>Choose <span class="bold">Logs</span>, and then <span class="bold">Log Configuration</span>.</p>
</li>
<li>
<p>Expand <span class="bold">oracle.integration</span>, <span class="bold">oracle.integration.platform</span>, <span class="bold">oracle.integration.platform.blocks</span>, and then <span class="bold">oracle.integration.platform.blocks.event</span>.</p>
</li>
<li>
<p>Set the loggers described in step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABJEGAB">1</a> to an appropriate logging level.</p>
</li>
</ol>
<p>The following sample shows a portion of a server log file:</p>
<pre dir="ltr">
[2011-03-22T11:52:37.038-07:00] [soa_server1] [TRACE] [SOA-31010]
[oracle.integration.platform.blocks.event.saq] [tid:
weblogic.work.j2ee.J2EEWorkManager$WorkWithListener@96bab0] [userId:
&lt;anonymous&gt;] [ecid:
5fc0ca821d51e919:3d214296:12ebaa2c996:-8000-00000000000c2b83,0:1:100000140]
[SRC_CLASS:
oracle.integration.platform.blocks.event.saq.SAQBusinessEventBusMessages]
[APP: soa-infra] [composite_name: MediatorPubSub] [component_name:
PublishEvent] [component_instance_id: 8E0411C054B511E0AF455DABE1395E7B] [SRC_
METHOD: fineDequeuedEvent] [composite_instance_id: 90087] Dequeued event,
Subject: null [source type "J"]:[[
    &lt;business-event
xmlns:ns="http://schemas.oracle.com/events/edl/MyEventDefn"
xmlns="http://oracle.com/fabric/businessEvent"&gt;
      &lt;name&gt;ns:MyEvent&lt;/name&gt;
      &lt;id&gt;a7ae9d28-9530-4049-8385-e0ebfb0eea50&lt;/id&gt;

&lt;source&gt;default/MediatorPubSub!2.0*soa_
58454bff-3b36-4e29-a883-949085d85719/default/MediatorPubSub!2.0*soa_
58454bff-3b36-4e29-a883-949085d85719/PublishEvent&lt;/source&gt;
    &lt;tracking&gt;
      &lt;ecid&gt;5fc0ca821d51e919:3d214296:12ebaa2c996:-8000-00000000000c2b83&lt;/ecid&gt;
      &lt;compositeInstanceId&gt;90087&lt;/compositeInstanceId&gt;
&lt;parentComponentInstanceId&gt;mediator:8E0411C054B511E0AF455DABE1395E7B&lt;/parentCom
ponentInstanceId&gt;
    &lt;/tracking&gt;
      &lt;content&gt;
         &lt;inp1:singleString
xmlns:inp1="http://xmlns.oracle.com/singleString"&gt;PO123&lt;/inp1:singleString&gt;
      &lt;/content&gt;
&lt;/business-event&gt;
     
   ]]
   [2011-03-22T11:52:37.042-07:00] [soa_server1] [TRACE] [SOA-31011]
[oracle.integration.platform.blocks.event.saq] [tid:
weblogic.work.j2ee.J2EEWorkManager$WorkWithListener@96bab0] [userId:
&lt;anonymous&gt;] [ecid:
5fc0ca821d51e919:3d214296:12ebaa2c996:-8000-00000000000c2b83,0:1:100000140]
[SRC_CLASS:
oracle.integration.platform.blocks.event.saq.SAQBusinessEventBusMessages]
[APP: soa-infra] [composite_name: MediatorPubSub] [component_name:
PublishEvent] [component_instance_id: 8E0411C054B511E0AF455DABE1395E7B] [SRC_
METHOD: fineFilterResults] [composite_instance_id: 90087] Filter [XPath Filter:
/be:business-event/be:content/ns1:singleString = 'PO123'] for subscriber
"default/MediatorPubSub!2.0*soa_
58454bff-3b36-4e29-a883-949085d85719/SubsEvent" returned true
. . .
. . .
</pre></li>
<li>
<p>Check whether bad composites exist in the SOA domain that slow down the overall EDN event delivery.</p>
<p>EDN internally uses two advanced queuing (AQ) queues in a serial processing fashion for all business events. One or more bad SOA composite applications that fail to consume certain types of events can slow down EDN delivery of all other event types and cause an event backlog in the AQ queues.</p>
<ol>
<li id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABBFHFE">
<p>Check if there are repeated errors from bad SOA composite applications in the SOA server log with EDN logging enabled. Even if the errors are in completely separate SOA composite applications that are unrelated to the event types of interest, it can delay the overall delivery of events of interest to the target SOA composite applications.</p>
</li>
<li id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABHIJIE">
<p>Check the event backlog count as detailed in Step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABCECBH">2.d</a> (events are stuck in advanced queue). Check backlog event counts and subscriber details by navigating to the following URL: http://host_name:port/soa-infra/events/edn-db-backlog.</p>
<p>If bad composites are found in Step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABBFHFE">2.a</a> and large numbers of backlogged events occur in Step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABHIJIE">2.b</a>, then proceed to <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABJGBFE">2.c</a>.</p>
</li>
<li id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABJGBFE">
<p>Stop bad composites identified in Step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABBFHFE">2.a</a>. This can be achieved from <span id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__IASOEMFRAME">Oracle Enterprise Manager Fusion Middleware Control</span> or the WLST command line utility.</p>
</li>
<li id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABCECBH">
<p>Temporarily increase the number of EDN threads to a larger number, (for example, from 3 to 5 or 7) to clear up the backlogged events faster.</p>
<p>To change the number of EDN threads through the configuration of the <span class="bold">EDNConfig</span> MBean in <span>Oracle Enterprise Manager Fusion Middleware Control</span>:</p>
<ol>
<li>
<p>Go to the navigation pane.</p>
</li>
<li>
<p>Right-click <span class="bold">soa-infra</span>.</p>
</li>
<li>
<p>Select <span class="bold">SOA Infrastructure</span> then <span class="bold">Administration</span> and then, <span class="bold">System MBean Browser</span>.</p>
</li>
<li>
<p>Expand <span class="bold">Application Defined MBeans</span>, choose <span class="bold">oracle.as.soainfra.config</span>, and then <span class="bold">Server:</span> <span class="italic"><span class="bold">soa_server-x</span></span> , <span class="bold">EDNConfig</span>, and then <span class="bold">edn</span>.</p>
</li>
<li>
<p>Change the value for the <span class="bold">NumberOfThreads</span> attribute, and click <span class="bold">Apply</span>.</p>
<p>If backlog event processing is not important, the backed up events can be purged directly in AQ. The purge script is as follows:</p>
<pre dir="ltr">
DECLARE
  purge_options dbms_aqadm.aq$_purge_options_t;
BEGIN
  purge_options.block := FALSE;
  DBMS_AQADM.PURGE_QUEUE_TABLE(
    queue_table     =&gt; '&amp;edn_user..edn_event_queue_table',
    purge_condition =&gt; NULL,
    purge_options   =&gt; purge_options);
  DBMS_AQADM.PURGE_QUEUE_TABLE(
    queue_table     =&gt; '&amp;edn_user..edn_oaoo_delivery_table',
    purge_condition =&gt; NULL,
    purge_options   =&gt; purge_options);
END;
/
commit;
</pre></li>
</ol>
</li>
<li>
<p>Periodically monitor the EDN backlog count (see Step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABHIJIE">2.b</a>) to confirm that it is being reduced. If the clear-up rate is very slow, the EDN thread number can be further increased (see Step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABCECBH">2.d</a>).</p>
</li>
<li>
<p>Continue to monitor the EDN backlog count over a period of time. Also monitor the recent instances and faults in <span>Oracle Enterprise Manager Fusion Middleware Control</span> to see if composite instances are being created or new faults are showing up both across the board (that is, at SOA Infrastructure level) and for the composite of interest.</p>
</li>
<li>
<p>Once the backlog is cleared up, revert the number of EDN threads to the previous setting or an appropriate number.</p>
</li>
<li>
<p>Publish a business event of interest and verify that the target composite is triggered with expected instance creations.</p>
</li>
</ol>
</li>
<li>
<p>Check whether the event publication is being delivered to the SOA cluster.</p>
<p>One way to do this is to use the log messages in <span>Fusion Applications Control</span>. The log messages include information about the incoming events and the event subject and payload. Before the event information can be viewed in the log messages, first the <span class="bold">oracle.integration.platform.blocks.event</span> logger must be set to <span class="bold">TRACE:32 (FINEST)</span>, as described in step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABJEGAB">1</a>, and then raise the event again. To search for the event-related messages:</p>
<ol>
<li>
<p>Right-click <span class="bold">soa-infra</span>, choose <span class="bold">Logs</span>, and then <span class="bold">View Log Messages</span>.</p>
</li>
<li>
<p>Specify the date range.</p>
</li>
<li>
<p>In the <span class="bold">Message Types</span> section, select the <span class="bold">Notification</span> and <span class="bold">Trace</span> checkboxes.</p>
</li>
<li>
<p>To search for all events delivered to the SOA cluster, specify <span class="bold">Message</span> <span class="bold">contains</span> <code class="codeph">Dequeued event</code> as the search criteria, and click <span class="bold">Search</span>.</p>
<p>The subject associated with the event is displayed in the <span class="bold">Message</span> field and the business event namespace and local name, payload, ECID, and message details are displayed in the <span class="bold">Supplemental Detail</span> field.</p>
</li>
<li>
<p>To search for a particular event by event name, click <span class="bold">Add Fields</span>.</p>
</li>
<li>
<p>Select <span class="bold">Supplemental Detail</span>, and click <span class="bold">Add</span>.</p>
</li>
<li>
<p>Specify that <span class="bold">Supplemental Detail</span> <span class="bold">contains</span> either the event name space or event local name as the search criteria.</p>
</li>
<li>
<p>Click <span class="bold">Search</span>.</p>
</li>
<li>
<p>Use additional information such as the time interval or data in the payload to identify the specific event message of interest.</p>
<p>The log message is generally a good way to identify whether the issue is with the publisher or subscriber. For example, if the subject is missing or the <code class="codeph">fmw-context</code> is missing, it typically means there is an issue with the publisher. If the information reported in the log message is correct, then it typically means there is a problem with the subscriber.</p>
<p>If the <code class="codeph">Dequeued</code> <code class="codeph">event</code> log message is seen for the business event, then go to step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABJGHBI">10</a>.</p>
<p>If the <code class="codeph">Dequeued</code> <code class="codeph">event</code> log message is not seen, there may be issues with the following:</p>
<div class="tblformal" id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__GUID-5BF66BE9-F084-4C5F-9A53-6DF46503B04E">
<table class="cellalignment27" summary="Possible issues and where to go for answers">
<thead>
<tr class="cellalignment11">
<th class="cellalignment88" id="d129285e1313">For This Issue...</th>
<th class="cellalignment84" id="d129285e1316">See...</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment11">
<td class="cellalignment89" id="d129285e1321" headers="d129285e1313">
<p>EDN is in paused mode and temporarily stopped delivering events to its subscribers.</p>
</td>
<td class="cellalignment85" headers="d129285e1321 d129285e1316">
<p>Step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABCCEIC">4</a></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment89" id="d129285e1330" headers="d129285e1313">
<p>Events are stuck in the advanced queue.</p>
</td>
<td class="cellalignment85" headers="d129285e1330 d129285e1316">
<p>Step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABEGIFJ">5</a></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment89" id="d129285e1339" headers="d129285e1313">
<p>More than one SOA cluster is pointing to the same advanced queue.</p>
</td>
<td class="cellalignment85" headers="d129285e1339 d129285e1316">
<p>Step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABFHCFJ">6</a></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment89" id="d129285e1348" headers="d129285e1313">
<p>There are internal SOA issues in the database layer.</p>
</td>
<td class="cellalignment85" headers="d129285e1348 d129285e1316">
<p>Step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABDHDEC">7</a></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment89" id="d129285e1357" headers="d129285e1313">
<p>The data source is configured to point to the wrong <code class="codeph">SOAINFRA</code> schema.</p>
</td>
<td class="cellalignment85" headers="d129285e1357 d129285e1316">
<p>Step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABJEAGD">8</a></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment89" id="d129285e1369" headers="d129285e1313">
<p>There are issues with the Java, SOA, or PL/SQL code raising the event.</p>
</td>
<td class="cellalignment85" headers="d129285e1369 d129285e1316">
<p>Step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABJBBFD">9</a></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></li>
</ol>
</li>
<li id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABCCEIC">
<p>When patches are applied to the SOA cluster, EDN is automatically placed in paused mode to prevent delivery of events during patching. After patching is complete, EDN exits paused mode and resumes event processing. When a patch fails, EDN may remain in paused mode to prevent event subscriptions from firing after the failure. Follow these steps to identify if EDN is in paused mode, and restart it:</p>
<ol>
<li>
<p>From the navigation pane, expand <span class="bold">SOA</span> and right-click <span class="bold">soa-infra</span>.</p>
</li>
<li>
<p>Choose <span class="bold">Administration</span> then, <span class="bold">System MBean Browser</span>.</p>
</li>
<li>
<p>Go to <span class="bold">Application Defined MBeans</span>, choose <span class="bold">oracle.as.soainfra.config</span>, and then <span class="bold">Server:</span> <span class="italic"><span class="bold">SOA_cluster_name</span></span>, <span class="bold">EDNConfig</span>, and then <span class="bold">edn</span>.</p>
</li>
<li>
<p>In the <span class="bold">Attributes</span> column, locate the <span class="bold">Paused</span> property.</p>
</li>
<li>
<p>If <span class="bold">Paused</span> is set to <span class="bold">true</span>, the listener threads are decreased to zero, which temporarily stops event delivery.</p>
</li>
<li>
<p>To restart event delivery, select <span class="bold">false</span>.</p>
</li>
<li>
<p>Click <span class="bold">Apply</span>.</p>
</li>
</ol>
</li>
<li id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABEGIFJ">
<p>At times, the message may be stuck in the advanced queue in different stages of delivery. Check the count of (potentially stuck) events currently in the following queue tables:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">EDN_EVENT_QUEUE_TABLE</code>: Every event published is temporarily enqueued into this table (for <code class="codeph">edn_event_queue</code>).</p>
</li>
<li>
<p><code class="codeph">EDN_OAOO_DELIVERY_TABLE</code>: Only events with a one-and-only-one (OAOO) delivery target(s) are temporarily enqueued into this table (for <code class="codeph">edn_oaoo_queue</code>).</p>
</li>
</ul>
<p>The count can also be checked in the <code class="codeph">edn-db-log</code>. The total number of messages in the <code class="codeph">EDN_EVENT_QUEUE_TABLE</code> and <code class="codeph">EDN_OAOO_DELIVERY_TABLE</code> are displayed at the top of the page.</p>
<ol>
<li>
<p>Navigate to the following URL to see the total number of messages at the top of the page:</p>
<pre dir="ltr">
http://<span class="italic">host_name</span>:<span class="italic">port</span>/soa-infra/events/edn-db-log
</pre>
<p>There is no need to enable the <code class="codeph">edn-db-log</code> to view these messages.</p>
</li>
</ol>
</li>
<li id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABFHCFJ">
<p>There may be more than one SOA cluster pointing to the same <code class="codeph">SOAINFRA</code> schema. This is highly unlikely in a provisioned environment, but for environments that are created by developers, it may be an issue. In this case, the expected SOA runtime environment may not be receiving the events properly. It is expected that only one SOA runtime environment listens for business events on a <code class="codeph">SOAINFRA</code> schema. Use the following query to identify the list of SOA runtime environments subscribing to business events from a <code class="codeph">SOAINFRA</code> schema. Have only the required SOA runtime environment up, which points to the <code class="codeph">SOAINFRA</code> schema, and shut down the others.</p>
<ol>
<li>
<p>Navigate to the <code class="codeph">edn-db-log</code> to see log messages that display each SOA cluster that is connecting to the EDN advanced queue:</p>
<pre dir="ltr">
http://<span class="italic">host_name</span>:<span class="italic">port</span>/soa-infra/events/edn-db-log
</pre>
<p>The <code class="codeph">edn-db-log</code> do not need to be enabled to view these messages. The messages continue to be displayed in the <code class="codeph">edn-db-log</code> until the next time the <span class="bold">Clear</span> link is clicked on it. Here is a sample message seen in the <code class="codeph">edn-db-log</code>:</p>
<pre dir="ltr">
Starting EDN bus. Timestamp=Wed Feb 23 10:11:26 PST 2011.
    Parameters: platform="weblogic", cluster="", server="soa_server1",
    domain="fusion_domain", admin server="AdminServer", host="adc2180440".
</pre></li>
<li>
<p>Alternatively, the following <code class="codeph">select</code> statement can be run against the <code class="codeph">SOAINFRA</code> schema. For example, use <code class="codeph">FIN_FUSION_SOAINFRA</code> for the SOA cluster in the Financials domain.</p>
<pre dir="ltr">
select * from V$SESSION where username like '<span class="italic">family</span>_FUSION_SOAINFRA';
</pre></li>
</ol>
</li>
<li id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABDHDEC">
<p>Verify that the event is properly being enqueued and dequeued by the underlying EDN PL/SQL procedures. This can be done by using the <code class="codeph">edn-db-log</code> that displays all events, including their name space, names, payload, and subject, which are enqueued and dequeued by the PL/SQL EDN procedures.</p>
<div class="p">Before proceeding, consider the following:
<ul style="list-style-type: disc;">
<li>
<p>The administrator privilege must be active in order to enable/disable the <code class="codeph">edn-db-log</code>.</p>
</li>
<li>
<p>The <code class="codeph">edn-db-log</code> must always be disabled after debugging to disable logging. This prevents excessive database growth in the EDN database log table. If the <code class="codeph">edn-db-log</code> remains enabled, then debugging messages related to events that are published/enqueued into the database and subscribed to/dequeued from the database continue to be persisted into certain EDN database log tables. This causes the table to grow indefinitely.</p>
</li>
</ul>
</div>
<ol>
<li>
<p>Navigate to the following URL:</p>
<pre dir="ltr">
http://<span class="italic">host_name</span>:<span class="italic">port</span>/soa-infra/events/edn-db-log
</pre></li>
<li>
<p>Click the <span class="bold">Enable</span> link.</p>
</li>
<li>
<p>Raise the business event again.</p>
</li>
<li>
<p>Click the <span class="bold">Refresh</span> link.</p>
</li>
</ol>
</li>
<li id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABJEAGD">
<p>The <code class="codeph">EDNSource</code> and <code class="codeph">EDNLocalTxSource</code> data sources may be pointing to a different database than the <code class="codeph">EDNDataSource</code> and <code class="codeph">EDNLocalTxDataSource</code> data source connections of the SOA server. Ensure that these four data source connections on ADF and the SOA server are pointing to the same database schema.</p>
<p>Check or set the data sources in the <span id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__WLS">Oracle WebLogic Server</span> Administration Console:</p>
<ol>
<li>
<p>In the <span class="bold">Domain Structure</span>, select <span class="bold">Services</span>, and then <span class="bold">Data Sources</span>.</p>
</li>
<li>
<p>In the <span class="bold">Name</span> column of the table, select <span class="italic"><span class="bold">data_source_name</span></span>.</p>
<p>The connection pool and driver name are only available for generic data sources, and not for multidata sources.</p>
</li>
<li>
<p>Select the <span class="bold">Connection Pool</span> tab.</p>
</li>
<li>
<p>In the <span class="bold">Driver Class Name</span> field, set the data source.</p>
</li>
</ol>
</li>
<li id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABJBBFD">
<p>Check the log files in <span>Fusion Applications Control</span> for the code that raises the event to see if there were failures in raising the event or failures in the code that prevented the event from being raised.</p>
<p>For ADF, check the log files. Look for the ECID corresponding to the business key (for example, purchase order).</p>
<p>To enable event-related log messages in the server running the ADF application that raises the event, set the log level for the <span class="bold">oracle.integration.platform.blocks.event</span> logger to <span class="bold">TRACE:32</span> on that server.</p>
</li>
<li id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABJGHBI">
<p>By the time this step is reached, it has been confirmed that the business event is properly delivered to the SOA cluster. To identify whether any composite instances were created, perform the following steps:</p>
<ol>
<li>
<p>Because the ECID is different for a subscription with a guaranteed consistency level and a subscription with an OAOO level defined for the same event, the consistency level for the event subscription must be first identified. To do this, right click <span class="bold">soa-infra</span>, choose <span class="bold">Business Events</span>, and click the <span class="bold">Subscriptions</span> tab. Find the composite that subscribes to the business event in the <span class="bold">Components Subscriptions</span> table and get the value from the <span class="bold">Consistency Level</span> column.</p>
</li>
<li>
<p>If the value is set to <span class="bold">Guaranteed</span>, then get the ECID from the <code class="codeph">Dequeued</code> <code class="codeph">event</code> log message.</p>
</li>
<li>
<p>If the value is set to <span class="bold">One And Only One</span>, then search for the log message with <span class="bold">Message</span> <span class="bold">contains</span> <code class="codeph">Dequeued OAOO event</code> as criteria and use the ECID from that message.</p>
</li>
<li>
<p>Locate the composite instance by right-clicking <span class="bold">soa-infra</span>, selecting the <span class="bold">Instances</span> tab, entering the ECID in the search criteria, and clicking <span class="bold">Search</span>.</p>
</li>
</ol>
<p>If composite instances are seen, then continue to step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABEDBJH">13</a>.</p>
<p>If composite instances are not seen, this may be due to the following issues:</p>
<ul style="list-style-type: disc;">
<li>
<p>There are issues with the subscription logic in the composite, possibly a mismatch in the event namespace or event name or error in the filter logic. See step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABGJCJF">11</a>.</p>
</li>
<li>
<p>There may be a SOA issue. See Step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABDFAIF">12</a>.</p>
</li>
</ul>
</li>
<li id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABGJCJF">
<p>If a filter is being used, there may be an issue with the filter logic. Use <span>Fusion Applications Control</span> to review the event subscriptions and filters defined for the composite and the payload content.</p>
<ol>
<li>
<p>Log in to <span>Fusion Applications Control</span> in the domain where the composite with the subscription is deployed.</p>
</li>
<li>
<p>Navigate to <span class="italic"><span class="bold">domain_name</span></span> then,<span class="bold">SOA</span>.</p>
</li>
<li>
<p>Right-click <span class="bold">soa-infra (</span><span class="italic"><span class="bold">SOA_cluster_name</span></span><span class="bold">)</span>, and choose <span class="bold">Business Events</span>.</p>
</li>
<li>
<p>Click the <span class="bold">Subscriptions</span> tab.</p>
</li>
<li>
<p>Review the information in the <span class="bold">Event Name</span>, <span class="bold">Namespace</span>, and <span class="bold">XPath Filter</span> columns of the <span class="bold">Component Subscriptions</span> table.</p>
</li>
</ol>
<p>Alternatively, the SOA server <code class="codeph">diagnostic.log</code> file can be also checked for filter-related logging. The log level must be set to at least <span class="bold">TRACE:1 (FINE)</span> for the <span class="bold">oracle.integration.platform.blocks.event.saq</span> logger. The following is an example log message that has the following statement pattern: <code class="codeph">Filter</code> <code class="codeph">[XPath Filter: &hellip;.]</code> <code class="codeph">for</code> <code class="codeph">subscriber</code> <code class="codeph">"&hellip;"</code> <code class="codeph">returned</code> <code class="codeph">true/false</code>.</p>
<pre dir="ltr">
[2011-03-22T11:52:36.976-07:00] [soa_server1] [TRACE] [SOA-31011]
[oracle.integration.platform.blocks.event.saq] [tid:
[ACTIVE].ExecuteThread: '2' for queue: 'weblogic.kernel.Default
(self-tuning)'] [userId: &lt;anonymous&gt;] [ecid:
5fc0ca821d51e919:3d214296:12ebaa2c996:-8000-00000000000c2b83,0:1] [SRC_
CLASS:
oracle.integration.platform.blocks.event.saq.SAQBusinessEventBusMessages]
[WEBSERVICE_PORT.name: execute_pt] [APP: soa-infra] [composite_name:
MediatorPubSub] [component_name: PublishEvent] [component_instance_id:
8E0411C054B511E0AF455DABE1395E7B] [J2EE_MODULE.name: fabric] [SRC_METHOD:
fineFilterResults] [WEBSERVICE.name: PublishEvent_ep] [J2EE_APP.name:
soa-infra] [composite_instance_id: 90087] Filter [XPath Filter:
/be:business-event/be:content/ns1:singleString = 'PO123'] for subscriber
"default/MediatorPubSub!2.0*soa_
58454bff-3b36-4e29-a883-949085d85719/SubsEvent" returned true
</pre></li>
<li id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABDFAIF">
<p>Check the SOA diagnostic log for stack traces related to the issue. For example, the SOA instance may have been rolled back due to an error.</p>
</li>
<li id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__BABEDBJH">
<p>By the time this step is reached, it has been confirmed that the business event has been delivered to the SOA cluster and a composite instance has been created. However, issues with the composite components may be encountered:</p>
<ul style="list-style-type: disc;">
<li>
<p>If a composite instance is seen, but not a BPEL instance, check if the BPEL process can be executed independently by a client, as opposed to the event subscription.</p>
</li>
<li>
<p>If a composite instance is seen, but not a BPEL instance, this symptom may indicate a stuck thread on a service call. In this scenario, the BPEL process service engine is hung on a service call and has not created the audit trail. To verify the behavior, take three thread dumps approximately 30 seconds apart on all servers in the cluster. See <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-8D1493D5-FAD0-42C5-AFEF-BA1F27EFA4A4__BABBGICC" title="SOA Log Information for Oracle Support">Table 13-1</a> for more information on taking thread dumps. If the same thread shows it is stuck after the three thread dumps (that is, after 1.5 minutes), the thread is stuck. In this case, wait for the call to time out, which then enables the recovery of the instance.</p>
</li>
<li>
<p>If the audit trail shows the following message:</p>
<pre dir="ltr">
Invoked 1-way operation "initiate" on target service <span class="italic">service_name</span>
</pre>
<p>There may be an issue with an incorrect driver type for the data sources. Note that the driver XA configuration should already be created by the SOA/provisioning template. If the driver type is changed or is not set properly, routing from <span id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__MEDIATOR">Oracle Mediator</span> does not occur. Instead, it tries to route and fails several times. This can be confirmed by instances in <span>Fusion Applications Control</span>. As per <span id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__FA">Oracle Fusion Applications</span> standards, the <code class="codeph">SOADataSource</code> and <code class="codeph">EDNDataSource</code> data sources should use the XA driver type; that is:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">EDNDataSource</code>: <code class="codeph">oracle.jdbc.xa.client.OracleXADataSource</code></p>
</li>
<li>
<p><code class="codeph">SOADataSource</code>: <code class="codeph">oracle.jdbc.xa.client.OracleXADataSource</code></p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>The following documentation provides additional information about the topics discussed in this section:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>For more information about setting logging levels for Oracle SOA Suite, see section Setting Logging Levels for Troubleshooting in the <span class="italic"><span id="GUID-C945A210-69FB-47C7-BD5C-20750CDE001A__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</li>
<li>
<p>For more information about data sources, see section Configuring the SOA Infrastructure in the <span class="italic"><span><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD4612"></a>
<div class="props_rev_3"><a id="GUID-6D88D2FC-12FB-485C-B866-308E4D9F505C"></a>
<h3 id="OASAD-GUID-6D88D2FC-12FB-485C-B866-308E4D9F505C" class="sect3"><span class="enumeration_section">13.3.3</span> Long Delays After an Event is Published and Before a Subscriber is Triggered</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>After a business event is published, there is a long delay (minutes, hours, or even days) before the event subscriber is triggered and its composite instance is created.</p>
<p>This can occur, for example, with an ADF application invoking a SOA composite.</p>
<p><span class="bold">Solution</span></p>
<p>To resolve this problem, perform the following steps.</p>
<ol>
<li id="GUID-6D88D2FC-12FB-485C-B866-308E4D9F505C__BABGHDJH">
<p>Enable EDN logging in <span id="GUID-6D88D2FC-12FB-485C-B866-308E4D9F505C__FAOEMFRAMESHORT">Fusion Applications Control</span>. The following server loggers specific to EDN are available for selection:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">oracle.integration.platform.blocks.event</span></p>
</li>
<li>
<p><span class="bold">oracle.integration.platform.blocks.event.saq</span></p>
</li>
<li>
<p><span class="bold">oracle.integration.platform.blocks.event.jms</span></p>
</li>
</ul>
<p>Note that <span class="bold">oracle.integration.platform.blocks.event.jms</span> only appears if EDN is running in EDN-JMS mode, instead of the default EDN-DB mode.</p>
</li>
<li>
<p>Set the server loggers to one of the following levels:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">TRACE:1 (FINE)</span></p>
</li>
<li>
<p><span class="bold">TRACE:16 (FINER)</span></p>
</li>
<li>
<p><span class="bold">TRACE:32 (FINEST)</span></p>
</li>
</ul>
<p>Selective tracing can be alternately used to selectively get a detailed, on-disk trace (for example, by user name, thereby eliminating trace output for other users). See <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-8D1493D5-FAD0-42C5-AFEF-BA1F27EFA4A4">Get Started with Troubleshooting and Logging Basics for Oracle SOA Suite</a> for details.</p>
<p>Detailed logging goes into the server's <code class="codeph">diagnostic.log</code> file configured in <span>Fusion Applications Control</span>.</p>
</li>
<li>
<p>Set the log level for the loggers.</p>
<ol>
<li>
<p>Go to the navigation pane.</p>
</li>
<li>
<p>Right-click <span class="bold">soa-infra</span>.</p>
</li>
<li>
<p>Select <span class="bold">Logs</span>, and then <span class="bold">Log</span> <span class="bold">Configuration</span>.</p>
</li>
<li>
<p>Expand <span class="bold">oracle.integration</span>, choose <span class="bold">oracle.integration.platform</span> and <span class="bold">oracle.integration.platform.blocks</span>, and then <span class="bold">oracle.integration.platform.blocks.event</span>.</p>
</li>
<li>
<p>Set the loggers described in step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-6D88D2FC-12FB-485C-B866-308E4D9F505C__BABGHDJH">1</a> to an appropriate logging level.</p>
<p>The following sample shows a portion of a server log file:</p>
<pre dir="ltr">
[2011-03-22T11:52:37.038-07:00] [soa_server1] [TRACE] [SOA-31010]
[oracle.integration.platform.blocks.event.saq] [tid:
weblogic.work.j2ee.J2EEWorkManager$WorkWithListener@96bab0] [userId:
&lt;anonymous&gt;] [ecid:
5fc0ca821d51e919:3d214296:12ebaa2c996:-8000-00000000000c2b83,0:1:100000140]
[SRC_CLASS:
oracle.integration.platform.blocks.event.saq.SAQBusinessEventBusMessages]
[APP: soa-infra] [composite_name: MediatorPubSub] [component_name:
PublishEvent] [component_instance_id: 8E0411C054B511E0AF455DABE1395E7B]
 [SRC_
METHOD: fineDequeuedEvent] [composite_instance_id: 90087] Dequeued event,
Subject: null [source type "J"]:[[
    &lt;business-event
xmlns:ns="http://schemas.oracle.com/events/edl/MyEventDefn"
xmlns="http://oracle.com/fabric/businessEvent"&gt;
      &lt;name&gt;ns:MyEvent&lt;/name&gt;
      &lt;id&gt;a7ae9d28-9530-4049-8385-e0ebfb0eea50&lt;/id&gt;
&lt;source&gt;default/MediatorPubSub!2.0*soa_
58454bff-3b36-4e29-a883-949085d85719/default/MediatorPubSub!2.0*soa_
58454bff-3b36-4e29-a883-949085d85719/PublishEvent&lt;/source&gt;
    &lt;tracking&gt;
&lt;ecid&gt;5fc0ca821d51e919:3d214296:12ebaa2c996:-8000-00000000000c2b83&lt;/ecid&gt;
      &lt;compositeInstanceId&gt;90087&lt;/compositeInstanceId&gt;
&lt;parentComponentInstanceId&gt;mediator:8E0411C054B511E0AF455DABE1395E7B&lt;/paren
tCom
ponentInstanceId&gt;
    &lt;/tracking&gt;
      &lt;content&gt;
         &lt;inp1:singleString
xmlns:inp1="http://xmlns.oracle.com/singleString"&gt;PO123&lt;/inp1:singleString&gt;
      &lt;/content&gt;
&lt;/business-event&gt;
   ]]
   [2011-03-22T11:52:37.042-07:00] [soa_server1] [TRACE] [SOA-31011]
[oracle.integration.platform.blocks.event.saq] [tid:
weblogic.work.j2ee.J2EEWorkManager$WorkWithListener@96bab0] [userId:
&lt;anonymous&gt;] [ecid:
5fc0ca821d51e919:3d214296:12ebaa2c996:-8000-00000000000c2b83,0:1:100000140]
[SRC_CLASS:
oracle.integration.platform.blocks.event.saq.SAQBusinessEventBusMessages]
[APP: soa-infra] [composite_name: MediatorPubSub] [component_name:
PublishEvent] [component_instance_id: 8E0411C054B511E0AF455DABE1395E7B]
 [SRC_
METHOD: fineFilterResults] [composite_instance_id: 90087] Filter [XPath
 Filter:
/be:business-event/be:content/ns1:singleString = 'PO123'] for subscriber
"default/MediatorPubSub!2.0*soa_
58454bff-3b36-4e29-a883-949085d85719/SubsEvent" returned true
. . .
. . .
</pre></li>
</ol>
</li>
<li>
<p>Find out when the event is published, dequeued, and sent to the subscriber by EDN.</p>
<p>Use the Java logging in step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-6D88D2FC-12FB-485C-B866-308E4D9F505C__BABGHDJH">1</a> to identify the timestamps of event publishing, dequeuing, and sending to the subscriber. From these timestamps, it can be identified, if the delay is on the publishing side or the EDN delivery side.</p>
<p>To search for the event-related messages in the log messages.</p>
<ol>
<li>
<p>Right-click <span class="bold">soa-infra</span>.</p>
</li>
<li>
<p>Select <span class="bold">Logs</span> then, <span class="bold">View</span> <span class="bold">Log</span> <span class="bold">Messages</span>.</p>
</li>
<li>
<p>Specify the date range.</p>
</li>
<li>
<p>To search for all events delivered to the SOA cluster, specify <span class="bold">Message contains</span> <code class="codeph">Dequeued</code> <code class="codeph">event</code> as the search criteria, and click <span class="bold">Search</span>.</p>
<p>The subject associated with the event is displayed in the <span class="bold">Message</span> field and the business event namespace and local name, payload, ECID, and message details are displayed in the <span class="bold">Supplemental Detail</span> field.</p>
</li>
<li>
<p>To search for a particular event by event name, click <span class="bold">Add Fields</span>.</p>
</li>
<li>
<p>Select <span class="bold">Supplemental Detail</span>, and click <span class="bold">Add</span>.</p>
</li>
<li>
<p>Specify that <span class="bold">Supplemental Detail</span> contains either the event namespace or the event local name as the search criteria.</p>
</li>
<li>
<p>Click <span class="bold">Search</span>.</p>
</li>
<li>
<p>Use additional information such as the time interval or data in the payload to identify the specific event message of interest.</p>
<p>The following sample shows a portion of a server log file containing information about event publishing with a timestamp of <code class="codeph">2011-03-22T11:52:36.968-07:00</code>.</p>
<pre dir="ltr">
[2011-03-22T11:52:36.968-07:00] [soa_server1] [TRACE] [SOA-31000]
[oracle.integration.platform.blocks.event.saq] [tid:
[ACTIVE].ExecuteThread: '2' for queue: 'weblogic.kernel.Default
(self-tuning)'] [userId: &lt;anonymous&gt;] [ecid:
5fc0ca821d51e919:3d214296:12ebaa2c996:-8000-00000000000c2b83,0:1] [SRC_
CLASS:
oracle.integration.platform.blocks.event.saq.SAQBusinessEventBusMessages]
[WEBSERVICE_PORT.name: execute_pt] [APP: soa-infra] [composite_name:
MediatorPubSub] [component_name: PublishEvent] [component_instance_id:
8E0411C054B511E0AF455DABE1395E7B] [J2EE_MODULE.name: fabric] [SRC_METHOD:
fineEventPublished] [WEBSERVICE.name: PublishEvent_ep] [J2EE_APP.name:
soa-infra] [composite_instance_id: 90087] Received event: Subject: null 
Sender: default/MediatorPubSub!2.0*soa_
58454bff-3b36-4e29-a883-949085d85719/default/MediatorPubSub!2.0*soa_
58454bff-3b36-4e29-a883-949085d85719/PublishEvent
Event:[[
&lt;business-event xmlns:ns="http://schemas.oracle.com/events/edl/MyEventDefn"
xmlns="http://oracle.com/fabric/businessEvent"&gt;
  &lt;name&gt;ns:MyEvent&lt;/name&gt;
  &lt;id&gt;a7ae9d28-9530-4049-8385-e0ebfb0eea50&lt;/id&gt;
  &lt;tracking&gt;
 &lt;ecid&gt;5fc0ca821d51e919:3d214296:12ebaa2c996:-8000-00000000000c2b83&lt;/ecid&gt;
     &lt;compositeInstanceId&gt;90087&lt;/compositeInstanceId&gt;

&lt;parentComponentInstanceId&gt;mediator:8E0411C054B511E0AF455DABE1395E7B&lt;/paren
tComponentInstanceId&gt;
  &lt;/tracking&gt;
  &lt;content&gt;
     &lt;inp1:singleString
xmlns:inp1="http://xmlns.oracle.com/singleString"&gt;PO123&lt;/inp1:singleString&gt;
  &lt;/content&gt;
&lt;/business-event&gt;

]]
</pre>
<p>The following sample shows a portion of a server log file containing information about an event dequeued by EDN with a timestamp of <code class="codeph">2011-03-22T11:52:37.038-07:00</code>.</p>
<pre dir="ltr">
[2011-03-22T11:52:37.038-07:00] [soa_server1] [TRACE] [SOA-31010]
[oracle.integration.platform.blocks.event.saq] [tid:
weblogic.work.j2ee.J2EEWorkManager$WorkWithListener@96bab0] [userId:
&lt;anonymous&gt;] [ecid:
5fc0ca821d51e919:3d214296:12ebaa2c996:-8000-00000000000c2b83,0:1:100000140]
[SRC_CLASS:
oracle.integration.platform.blocks.event.saq.SAQBusinessEventBusMessages]
[APP: soa-infra] [composite_name: MediatorPubSub] [component_name:
PublishEvent] [component_instance_id: 8E0411C054B511E0AF455DABE1395E7B]
[SRC_METHOD: fineDequeuedEvent] [composite_instance_id: 90087] Dequeued
event, Subject: null [source type "J"]:[[
&lt;business-event xmlns:ns="http://schemas.oracle.com/events/edl/MyEventDefn"
xmlns="http://oracle.com/fabric/businessEvent"&gt;
  &lt;name&gt;ns:MyEvent&lt;/name&gt;
  &lt;id&gt;a7ae9d28-9530-4049-8385-e0ebfb0eea50&lt;/id&gt;

&lt;source&gt;default/MediatorPubSub!2.0*soa_
58454bff-3b36-4e29-a883-949085d85719/default/MediatorPubSub!2.0*soa_
58454bff-3b36-4e29-a883-949085d85719/PublishEvent&lt;/source&gt;
 &lt;tracking&gt;
  &lt;ecid&gt;5fc0ca821d51e919:3d214296:12ebaa2c996:-8000-00000000000c2b83&lt;/ecid&gt;
      &lt;compositeInstanceId&gt;90087&lt;/compositeInstanceId&gt;
  &lt;parentComponentInstanceId&gt;mediator:8E0411C054B511E0AF455DABE1395E7B
  &lt;/parentComponentInstanceId&gt;
 &lt;/tracking&gt;
   &lt;content&gt;
     &lt;inp1:singleString
xmlns:inp1="http://xmlns.oracle.com/singleString"&gt;PO123&lt;/inp1:singleString&gt;
   &lt;/content&gt;
&lt;/business-event&gt;

]]
</pre>
<p>The following sample shows a portion of a server log file containing information of an event sent to a subscriber by EDN with a timestamp of <code class="codeph">2011-03-22T11:52:37.150-07:00</code>.</p>
<pre dir="ltr">
[2011-03-22T11:52:37.150-07:00] [soa_server1] [TRACE] [SOA-31033]
[oracle.integration.platform.blocks.event.saq] [tid:
weblogic.work.j2ee.J2EEWorkManager$WorkWithListener@b402db] [userId:
&lt;anonymous&gt;] [ecid:
5fc0ca821d51e919:3d214296:12ebaa2c996:-8000-00000000000c2b83,0:1:100000141]
[SRC_CLASS:
oracle.integration.platform.blocks.event.saq.SAQBusinessEventBusMessages]
[APP: soa-infra] [SRC_METHOD: fineSentOAOOEvent] Sent OAOO event [QName:
"{http://schemas.oracle.com/events/edl/MyEventDefn}MyEvent" to target:
"default/MediatorPubSub!2.0*soa_
58454bff-3b36-4e29-a883-949085d85719/SubsEvent"]:[[
&lt;business-event xmlns:ns="http://schemas.oracle.com/events/edl/MyEventDefn"
xmlns="http://oracle.com/fabric/businessEvent"&gt;
  &lt;name&gt;ns:MyEvent&lt;/name&gt;
  &lt;id&gt;a7ae9d28-9530-4049-8385-e0ebfb0eea50&lt;/id&gt;
&lt;source&gt;default/MediatorPubSub!2.0*soa_
 58454bff-3b36-4e29-a883-949085d85719/default/MediatorPubSub!2.0*soa_
 58454bff-3b36-4e29-a883-949085d85719/PublishEvent&lt;/source&gt;
&lt;tracking&gt;
&lt;ecid&gt;5fc0ca821d51e919:3d214296:12ebaa2c996:-8000-00000000000c2b83&lt;/ecid&gt;
     &lt;compositeInstanceId&gt;90087&lt;/compositeInstanceId&gt;

&lt;parentComponentInstanceId&gt;mediator:8E0411C054B511E0AF455DABE1395E7B&lt;/paren
tComponentInstanceId&gt;
&lt;/tracking&gt;
  &lt;content&gt;
     &lt;inp1:singleString
xmlns:inp1="http://xmlns.oracle.com/singleString"&gt;PO123&lt;/inp1:singleString&gt;
  &lt;/content&gt;
&lt;/business-event&gt;
]]
</pre></li>
</ol>
</li>
<li>
<p>If the delay comes from the event publishing side, then check the following:</p>
<ol>
<li>
<p>If the remote EDN API is used to publish events from, for example, an ADF component to the SOA server, and the following event connection factory lookup code is used:</p>
<pre dir="ltr">
BusinessEventConnectionFactory BusinessEventConnectionFactorySupport.
findRelevantBusinessEventConnectionFactory(boolean forceRetry)
</pre>
<p>The <code class="codeph">forceRetry</code> parameter may need to be set to <code class="codeph">true</code> to cache the <code class="codeph">BusinessEventConnectionFactory</code> object after it is found, and avoid forced retries of JNDI lookups that can cause a significant delay.</p>
</li>
<li>
<p>If multiple events are published with a loop statement in a batch fashion, the above event connection factory lookup may need to be moved outside the loop to avoid a lookup per event.</p>
</li>
</ol>
</li>
<li>
<p>If the delay comes from event dequeuing after the event is published, then check the following:</p>
<div class="tblformal" id="GUID-6D88D2FC-12FB-485C-B866-308E4D9F505C__GUID-AE942B8D-824E-4E02-B5F6-62EB6CA07972">
<table class="cellalignment27" summary="If a delay occurs, check the following.">
<thead>
<tr class="cellalignment11">
<th class="cellalignment23" id="d129285e2220">Ensure That...</th>
<th class="cellalignment90" id="d129285e2223">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment11">
<td class="cellalignment26" id="d129285e2228" headers="d129285e2220">
<p>The SOA server is up running, and EDN has been configured with the correct amount of dequeuer threads through an <code class="codeph">EDNConfig</code> MBean.</p>
</td>
<td class="cellalignment91" headers="d129285e2228 d129285e2223">
<p>To examine the configuration of the <code class="codeph">EDNConfig</code> MBean in <span>Fusion Applications Control</span>:</p>
<ol>
<li>
<p>Go to the navigation pane.</p>
</li>
<li>
<p>Right-click <span class="bold">soa-infra</span>.</p>
</li>
<li>
<p>Select <span class="bold">SOA Infrastructure</span> then, <span class="bold">Administration</span> and then, <span class="bold">System MBean Browser</span>.</p>
</li>
<li>
<p>Expand <span class="bold">Application Defined MBeans</span> then, <span class="bold">oracle.as.soainfra.config</span> then, <span class="bold">Server:</span> <span class="italic"><span class="bold">soa_server</span></span><span class="bold">-</span><span class="italic"><span class="bold">x</span></span> then, <span class="bold">EDNConfig</span> and then, <span class="bold">edn</span>.</p>
</li>
<li>
<p>Ensure that the <span class="bold">NumberOfThreads</span> attribute (for EDN dequeuer threads) is set to an appropriate number (the default is <code class="codeph">3</code>).</p>
</li>
</ol>
<p>Set the number of EDN dequeuer threads (the default is <code class="codeph">3</code>) to a value that matches the number of events published. If there are a large number of events published which cause event backlog, this can be verified by navigating to the following URL:&nbsp;http://host_name:port/soa-infra/events/edn-db-backlog. Note that the EDN dequeuer threads come from a thread pool that is provided by the SOA server and shared with other SOA processes. Therefore, when the number of EDN dequeuer threads is increased, it may potentially affect server performance for other SOA functionality.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment26" id="d129285e2307" headers="d129285e2220">
<p>The backing store of EDN is functioning properly.</p>
</td>
<td class="cellalignment91" headers="d129285e2307 d129285e2223">
<p>For example, if the backing store of EDN is Oracle AQ, and there are a significant amount of dead events stuck in the AQ that are not cleared, then event dequeuing by EDN may slow down significantly.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></li>
<li>
<p>If the delay comes from event consumption by its subscriber after the event is dequeued, then check the following:</p>
<ol>
<li>
<p>Ensure that all the event subscribing components such as <span id="GUID-6D88D2FC-12FB-485C-B866-308E4D9F505C__MEDIATOR">Oracle Mediator</span> or a BPEL process can consume and process the event within the expected time frame. If not, investigate why there is a delay.</p>
</li>
<li>
<p>If the event delivery is configured with an OAOO delivery guarantee, then EDN delivers the event to its subscriber in a global transaction context with built-in retry logics, should the transaction fail to commit. Retries may delay overall event processing. If the transaction fails to commit, ensure that the root cause of transaction failure is researched.</p>
</li>
</ol>
</li>
</ol>
<p>For more information about setting logging levels for Oracle SOA Suite, see section Setting Logging Levels for Troubleshooting in <span class="italic"><span id="GUID-6D88D2FC-12FB-485C-B866-308E4D9F505C__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD3549"></a>
<div class="props_rev_3"><a id="GUID-24CBE060-92A9-4466-8613-3F10CFABF230"></a>
<h3 id="OASAD-GUID-24CBE060-92A9-4466-8613-3F10CFABF230" class="sect3"><span class="enumeration_section">13.3.4</span> Events Are Consumed by Multiple Revisions of the Same Composites</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>Events are consumed by multiple revisions of the same composites.</p>
<p><span class="bold">Solution</span></p>
<p>By design, different composites can subscribe to the same event. However, it is an error if multiple revisions of the same composite subscribe to the same event. This occurs when multiple versions of the composite are active possibly as a result of a patch failure.</p>
<p>Perform the following steps to identify whether there are multiple, active revisions of the same composite and to retire the composite revision that should not be active:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Go to <span id="GUID-24CBE060-92A9-4466-8613-3F10CFABF230__FAOEMFRAMESHORT">Fusion Applications Control</span>.</span></li>
<li class="stepexpand"><span>Click <span class="bold">SOA</span> then, <span class="bold">soa-infra</span>.</span>
<div>
<p>In the <span class="bold">Deployed Composites</span> section of the <span class="bold">Dashboard</span> tab, a list of deployed composite names , revisions, and modes (for example, active) is seen.</p>
</div>
</li>
<li class="stepexpand"><span>Identify composites with the same name and with an active mode, but with different revisions.</span></li>
<li class="stepexpand"><span>Click the composite revision that should not be active.</span></li>
<li class="stepexpand"><span>Click the <span class="bold">Retire</span> button.</span></li>
</ol>
</div>
</div>
<a id="OASAD4129"></a>
<div class="props_rev_3"><a id="GUID-5D542C9C-688C-4B6E-BB9E-86B4928239A6"></a>
<h3 id="OASAD-GUID-5D542C9C-688C-4B6E-BB9E-86B4928239A6" class="sect3"><span class="enumeration_section">13.3.5</span> Rolled Back OAOO Event Delivery Messages Are Displayed in the Log Files</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>If the Java debug level is set to <span class="bold">TRACE:16 (FINER)</span> or a lower value, log messages such as the following may be seen :</p>
<pre dir="ltr">
Began XA for OAOO
Rolled back XA for OAOO
</pre>
<p><span class="bold">Solution</span></p>
<p>These are normal messages of OAOO event delivery when there are no events waiting to be delivered. These are <span class="italic">not</span> error conditions. These messages can be turned off by setting the Java logging level to <span class="bold">TRACE:1 (FINE)</span> or a higher value.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD2711"></a>
<div class="props_rev_3"><a id="GUID-F4653C2C-AF0E-4D38-93D0-C281ED9F8C70"></a>
<h3 id="OASAD-GUID-F4653C2C-AF0E-4D38-93D0-C281ED9F8C70" class="sect3"><span class="enumeration_section">13.3.6</span> Application Transaction Does Not Complete and the Underlying Composite Is Stuck in a Running State</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>An application transaction is not completing. For example, a purchase order status may remain processing. Checking the composite instance shows that the composite is stuck in the running state. In this case, the component is probably not running. Instead, it has likely faulted and may need recovery.</p>
<p>Faults may occur for various reasons:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>A BPEL activity faulted with an error (for example, a business error, security authorization error, or some other error).</p>
</li>
<li>
<p>A BPEL activity invoked an external web service that was unavailable.</p>
</li>
<li>
<p>A BPEL activity has already been terminated by the administrator using <span id="GUID-F4653C2C-AF0E-4D38-93D0-C281ED9F8C70__FAOEMFRAMESHORT">Fusion Applications Control</span>.</p>
</li>
<li>
<p>A BPEL activity invoked an asynchronous ADF service and the message is stuck in the AQ/JMS queue.</p>
</li>
<li>
<p>A BPEL activity invoked an asynchronous ADF service, but because SOA was unavailable, the callback message did not arrive.</p>
</li>
<li>
<p>A BPEL activity invoked a synchronous ADF service, which is taking a long time (or is hanging).</p>
</li>
<li>
<p>A network error occurred.</p>
</li>
</ul>
<p><span class="bold">Solution</span></p>
<ol>
<li>
<p>Log in to <span>Fusion Applications Control</span>.</p>
</li>
<li>
<p>In the navigator pane, go to <span class="italic"><span class="bold">domain_name</span></span> and then, <span class="bold">SOA</span>.</p>
</li>
<li>
<p>Click <span class="bold">soa-infra (</span><span class="italic"><span class="bold">SOA_cluster_name</span></span><span class="bold">)</span>.</p>
</li>
<li>
<p>Click the <span class="bold">Instances</span> tab.</p>
</li>
<li>
<p>Search for the composite instance, and click the instance ID.</p>
<p>The Flow Trace page appears.</p>
<p>If the instance is not visible (and the <span class="bold">Audit Level</span> is not set to <span class="bold">Off</span> in the SOA Infrastructure Common Properties page), this implies that the message is stuck outside of SOA. Check the ADF log (if invoked through an ADF service) to find out if it is stuck in the AQ/JMS queue.</p>
<p>If the message has reached <span id="GUID-F4653C2C-AF0E-4D38-93D0-C281ED9F8C70__MEDIATOR">Oracle Mediator</span>, but not instantiated the BPEL flow, the BPEL instance may have been rolled back from the start due to an error.</p>
<p>If the BPEL flow exists, the <span class="bold">Faults</span> section of the Flow Trace page typically shows the faulted service that can trace the root cause.</p>
</li>
<li>
<p>In the <span class="bold">Trace</span> section, click the BPEL process.</p>
</li>
<li>
<p>Expand the BPEL audit trail to see the exact point at which the service faulted.</p>
<p>This information is also available in the <span class="bold">Faults</span> tab of the BPEL flow trace. It also indicates whether the fault can be recovered.</p>
</li>
<li>
<p>Click the <span class="bold">View Raw XML</span> link.</p>
<p>The same information is also available through this link, where the error can be seen. For example:</p>
<pre dir="ltr">
...
&lt;message&gt;Faulted while invoking operation "modifyUserRoles" on provider
 "UserService". &lt;/message&gt;&lt;details&gt;
...
&lt;tns:message&gt;JBO-27023: Failed to validate all rows in a
 transaction.&lt;/tns:message&gt;
&lt;tns:severity&gt;SEVERITY_ERROR&lt;/tns:severity&gt;
...
&lt;message&gt;The transaction was rolled back. The work performed for bpel instance
 "451042" was rolled back to the previous dehydration point, but the audit
 trail has been saved.
The instance can be recovered from the recovery console by resubmitting the
 callback message or activity for execution.&lt;/message
</pre>
<p>Since the instance was rolled back to its previous dehydration point, the status remains as <span class="bold">Running</span>.</p>
</li>
<li id="GUID-F4653C2C-AF0E-4D38-93D0-C281ED9F8C70__BABCAGFG">
<p>In the <span class="bold">Audit Trail</span> and <span class="bold">Faults</span> tabs, make a note of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Composite name (for example, <span class="bold">HcmUsersSpmlComposite</span>)</p>
</li>
<li>
<p>Component (for example, <span class="bold">UpdateGuid</span> BPEL process)</p>
</li>
<li>
<p>BPEL instance ID (for example, <span class="bold">bpel:451042</span>)</p>
</li>
</ul>
<p>This is all used in the recovery of the instance, if it is recoverable. Note that the audit trail window may mark the error as a nonrecoverable business fault, but the recoverability of the message can be found in the <span class="bold">Recovery</span> tab of the BPEL process service engine.</p>
</li>
<li>
<p>To attempt to recover the instance, right-click <span class="bold">soa-infra (</span><span class="italic"><span class="bold">SOA_cluster_name</span></span><span class="bold">)</span>, and choose <span class="bold">Service Engines</span> then, <span class="bold">BPEL</span>.</p>
</li>
<li>
<p>Click the <span class="bold">Recovery</span> tab.</p>
</li>
<li>
<p>From the <span class="bold">Type</span> list, select <span class="bold">Activity</span>.</p>
</li>
<li>
<p>Specify the composite and component names captured in step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-F4653C2C-AF0E-4D38-93D0-C281ED9F8C70__BABCAGFG">9</a>, and click <span class="bold">Search</span>.</p>
</li>
<li>
<p>Find the specific BPEL instance ID. Faults marked as <span class="bold">Recoverable</span> can be recovered.</p>
</li>
<li>
<p>Check the other recovery options in the <span class="bold">Type</span> list (for example, <span class="bold">Invoke</span> and <span class="bold">Callback</span>), if they exist.</p>
<p>It is also possible to search for recoverable messages from the <span class="bold">Faults and Rejected Messages</span> tab of the SOA Infrastructure by clicking the message and selecting the appropriate action from the <span class="bold">Recovery Actions</span> list.</p>
</li>
<li>
<p>If the instance is not marked as recoverable, then reinvoking the service is not allowed (most probably because it is not idempotent). In some cases, diagnostic information may need to be provided to Oracle Support Services to resolve issues with nonrecoverable, nonidempotent transactions.</p>
</li>
<li>
<p>If the BPEL activity has invoked an asynchronous ADF service and the message is stuck in the AQ JMS queue, the <span class="italic"><code class="codeph">server</code></span><code class="codeph">.log</code> and <span class="italic"><code class="codeph">server</code></span><code class="codeph">-diagnostic.log</code> files can be viewed to see the logging of the message metadata logged by the JRF web services infrastructure.</p>
<p>In addition, the ADF diagnostic logs are also available to debug, if needed.</p>
<ol>
<li id="GUID-F4653C2C-AF0E-4D38-93D0-C281ED9F8C70__BABFFCEB">
<p>Use the ECID field to correlate and track ADF service logging corresponding with the SOA composite that invoked it.</p>
</li>
<li>
<p>When viewing the log in <span>Fusion Applications Control</span>, click the <span class="bold">Broaden Target Scope</span> dropdown list and select the <span class="italic"><span class="bold">farm_name</span></span>/<span class="italic"><span class="bold">domain_name</span></span> (Oracle WebLogic Domain) to view messages across the domain.</p>
</li>
<li>
<p>In the Log Messages page for the Oracle WebLogic Server domain, in the <span class="bold">Selected Targets</span> section, ensure that the search includes the <span class="bold">ECID</span> field with the value noted in step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-F4653C2C-AF0E-4D38-93D0-C281ED9F8C70__BABFFCEB">17.a</a> and the <span class="bold">Component Name</span> field is set to <span class="bold">adf-bc</span>.</p>
</li>
<li>
<p>Search and view log records for the Oracle Application Development Framework (Oracle ADF) Business Component (BC) and the ECID and note any issues.</p>
<p>For a specific ECID, find several root instances (top level clients). Drill down to the appropriate instance to find a specific fault.</p>
</li>
<li>
<p>Observe if the Oracle ADF Business Components completed successfully or completed with an error. See section Viewing and Searching Log Files in the <span class="italic"><span id="GUID-F4653C2C-AF0E-4D38-93D0-C281ED9F8C70__ASADM"><cite>Administering Oracle Fusion Middleware</cite></span></span>.</p>
<p>For more details on diagnosing Oracle ADF-BC asynchronous web service calls, see <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-0B8989BF-64CD-44FF-8EBB-736308EE2C54">BPEL Process Received No Response from an ADF Asynchronous Service</a>.</p>
</li>
</ol>
</li>
</ol>
<p>See the <span class="italic"><span id="GUID-F4653C2C-AF0E-4D38-93D0-C281ED9F8C70__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span> for the various ways to recover transactions and messages:</p>
<ul style="list-style-type: disc;">
<li>
<p>Managing SOA Composite Application Instances section to recover from the SOA composite application page in <span>Fusion Applications Control</span>.</p>
</li>
<li>
<p>Managing BPEL Process Service Components and Engines section to recover from the BPEL process service component and BPEL process service engine message recovery pages.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD2980"></a>
<div class="props_rev_3"><a id="GUID-0B8989BF-64CD-44FF-8EBB-736308EE2C54"></a>
<h3 id="OASAD-GUID-0B8989BF-64CD-44FF-8EBB-736308EE2C54" class="sect3"><span class="enumeration_section">13.3.7</span> BPEL Process Received No Response from an ADF Asynchronous Service</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>A BPEL activity has invoked an asynchronous ADF service and not received a response. The message may be stuck in the request or response queues.</p>
<p><span class="bold">Solution</span></p>
<ol>
<li>
<p>Check if the reply address is valid, the server is running, and the name of the server and port match with the server on which the BPEL process is running.</p>
</li>
<li>
<p>Verify that the policy on the callback receive activity matches with the policy advertised in the WSDL for the response port type/binding.</p>
</li>
<li>
<p>Look at the <span class="italic"><code class="codeph">server-name</code></span><code class="codeph">_diagnostic.log</code> file and check for all status messages of the request.</p>
<ol>
<li>
<p>Go to <span id="GUID-0B8989BF-64CD-44FF-8EBB-736308EE2C54__FAOEMFRAMESHORT">Fusion Applications Control</span>.</p>
</li>
<li>
<p>Right-click <span class="bold">soa-infra</span>.</p>
</li>
<li>
<p>Choose <span class="bold">Logs</span> &gt; <span class="bold">View Log Messages</span>.</p>
</li>
<li>
<p>Click <span class="bold">Target Log Files</span>.</p>
</li>
<li>
<p>Select the server diagnostic file to view, and click <span class="bold">View Log File</span>.</p>
<p>Every log contains the message ID and other details, such as ECID, that can help isolate it from other messages. After finding the message ID (that is, <code class="codeph">MessageID: urn:uuid:ac1a4a81-39df-45b1-a741-e16e752d5d33</code>), search for the same ID in the log file. Messages such as the following should be seen for each successful asynchronous operation.</p>
<p>If the following log is not available, this means the asynchronous operation was never called on this server:</p>
<pre dir="ltr">
[2010-12-17T12:27:13.537-08:00] [AdminServer] [NOTIFICATION] []
 [oracle.j2ee.ws.common.jaxws.JAXWSMessages] 
[tid: [ACTIVE].ExecuteThread: '2' for queue: 'weblogic.kernel.Default
 (self-tuning)'] [userId: &lt;anonymous&gt;]
[ecid: 0000Inq0wfa76EWLHyo2yf1D2wUW000000,0:1] 
[WEBSERVICE_PORT.name: AsyncEjbPort] [APP: AsyncEjb] [J2EE_MODULE.name:
 AsyncEjb-ejb] [WEBSERVICE.name: AsyncEjbService] [J2EE_APP.name: AsyncEjb]
*[MessageID: urn:uuid:ac1a4a81-39df-45b1-a741-e16e752d5d33] Sending message
 to JMS queue* 
"oracle.j2ee.ws.server.async.NonDefaultRequestQueue" for async processing
 of service "1d7551aa-73d9-4624-ad52-c15e35b5b25dRequest"
</pre>
<p>If the following log is not available, this means the asynchronous operation was never called on this server:</p>
<pre dir="ltr">
[2010-12-17T12:27:13.783-08:00] [AdminServer] [NOTIFICATION] []
 [oracle.j2ee.ws.common.jaxws.JAXWSMessages] 
[tid: [ACTIVE].ExecuteThread: '2' for queue: 'weblogic.kernel.Default
 (self-tuning)'] [userId: &lt;anonymous&gt;] 
[ecid: 0000Inq0wfa76EWLHyo2yf1D2wUW000000,0:1] 
[WEBSERVICE_PORT.name: AsyncEjbPort] [APP: AsyncEjb] [J2EE_MODULE.name:
 AsyncEjb-ejb] [WEBSERVICE.name: AsyncEjbService] [J2EE_APP.name: AsyncEjb]
*[MessageID: urn:uuid:ac1a4a81-39df-45b1-a741-e16e752d5d33] An asynchronous
 request message is received*
and successfully recorded for service "AsyncEjbService" with a replyTo
address as
"http://adc2180314:7001/AsyncEjbCallback/AsyncEjbResponseImplService"
 
[2010-12-17T12:27:13.986-08:00] [AdminServer] [NOTIFICATION] []
 [oracle.j2ee.ws.common.jaxws.JAXWSMessages] 
[tid: [ACTIVE].ExecuteThread: '0' for queue: 'weblogic.kernel.Default
 (self-tuning)'] [userId: weblogic] 
[ecid: 0000Inq0wfa76EWLHyo2yf1D2wUW000000,0] [APP: AsyncEjb]  
*[MessageID: urn:uuid:ac1a4a81-39df-45b1-a741-e16e752d5d33]
 Startedasynchronous request processing for the service* 
"AsyncEjbService" with the message selector
 "1d7551aa-73d9-4624-ad52-c15e35b5b25dRequest". Transaction enabled: "true"
 
[2010-12-17T12:27:14.296-08:00] [AdminServer] [NOTIFICATION] []
 [oracle.j2ee.ws.common.jaxws.JAXWSMessages] 
[tid: [ACTIVE].ExecuteThread: '0' for queue: 'weblogic.kernel.Default
 (self-tuning)'] [userId: weblogic] 
[ecid: 0000Inq0wfa76EWLHyo2yf1D2wUW000000,0] [APP: AsyncEjb]  
*[MessageID: urn:uuid:ac1a4a81-39df-45b1-a741-e16e752d5d33] Completed
 asynchronous request processing. A response will be sent to the client.*
 
[2010-12-17T12:27:14.312-08:00] [AdminServer] [NOTIFICATION] []
 [oracle.j2ee.ws.common.jaxws.JAXWSMessages] 
[tid: [ACTIVE].ExecuteThread: '2' for queue: 'weblogic.kernel.Default
 (self-tuning)'] [userId: weblogic] 
[ecid: 0000Inq0wfa76EWLHyo2yf1D2wUW000000,0] [APP: AsyncEjb]  
*[MessageID: urn:uuid:ac1a4a81-39df-45b1-a741-e16e752d5d33]
 Startedasynchronous response processing for the service* 
"AsyncEjbService" with the message selector
"1d7551aa-73d9-4624-ad52-c15e35b5b25dResponse".
 
[2010-12-17T12:27:15.018-08:00] [AdminServer] [NOTIFICATION] []
[oracle.j2ee.ws.common.jaxws.JAXWSMessages] 
[tid: [ACTIVE].ExecuteThread: '2' for queue: 'weblogic.kernel.Default
(self-tuning)'] [userId: weblogic] 
[ecid: 77e271e3-afd5-48e8-a83d-9b326860f3f2-0000000000000018,0] [APP:
AsyncEjb] *[MessageID: urn:uuid:ac1a4a81-39df-45b1-a741-e16e752d5d33]
Completed asynchronous response processing successfully. Client must have
received the response by now.*
</pre></li>
</ol>
<p>To monitor the traffic to the asynchronous ADF web services, monitor the Oracle AQ queues that are used for each family. The queue names for each family are shown in the following table:</p>
<div class="tblformal" id="GUID-0B8989BF-64CD-44FF-8EBB-736308EE2C54__GUID-47E8B744-E510-4469-BB08-83CCD357B2EE">
<table class="cellalignment27" summary="Family AQ names">
<thead>
<tr class="cellalignment11">
<th class="cellalignment62" id="d129285e2879">Family AQ</th>
<th class="cellalignment92" id="d129285e2882">Name</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment11">
<td class="cellalignment63" id="d129285e2887" headers="d129285e2879">
<p>Oracle Fusion Customer Relationship Management Product</p>
</td>
<td class="cellalignment93" headers="d129285e2887 d129285e2882">
<p><code class="codeph">CRM_AsyncWS_Request</code> and <code class="codeph">CRM_AsyncWS_Response</code></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment63" id="d129285e2898" headers="d129285e2879">
<p>Oracle Fusion Human Capital Management Product</p>
</td>
<td class="cellalignment93" headers="d129285e2898 d129285e2882">
<p><code class="codeph">HCM_AsyncWS_Request</code> and <code class="codeph">HCM_AsyncWS_Response</code></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment63" id="d129285e2909" headers="d129285e2879">
<p>Oracle Fusion Financials Product</p>
</td>
<td class="cellalignment93" headers="d129285e2909 d129285e2882">
<p><code class="codeph">FIN_AsyncWS_Request</code> and <code class="codeph">Fin_AsyncWS_Response</code></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment63" id="d129285e2920" headers="d129285e2879">
<p>Oracle Fusion Procurement Product</p>
</td>
<td class="cellalignment93" headers="d129285e2920 d129285e2882">
<p><code class="codeph">PRC_AsyncWS_Request</code> and <code class="codeph">PRC_AsyncWS_Response</code></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment63" id="d129285e2931" headers="d129285e2879">
<p>Oracle Fusion Project Product</p>
</td>
<td class="cellalignment93" headers="d129285e2931 d129285e2882">
<p><code class="codeph">PRJ_AsyncWS_Request</code> and <code class="codeph">PRJ_AsyncWS_Response</code></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment63" id="d129285e2942" headers="d129285e2879">
<p>Oracle Fusion Supply Chain Management Product</p>
</td>
<td class="cellalignment93" headers="d129285e2942 d129285e2882">
<p><code class="codeph">SCM_AsyncWS_Request</code> and <code class="codeph">SCM_AsyncWS_Response</code></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment63" id="d129285e2953" headers="d129285e2879">
<p>Oracle Fusion Setup Product</p>
</td>
<td class="cellalignment93" headers="d129285e2953 d129285e2882">
<p><code class="codeph">COMMON_AsyncWS_Request</code> and <code class="codeph">COMMON_AsyncWS_Response</code></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment63" id="d129285e2964" headers="d129285e2879">
<p>IC</p>
</td>
<td class="cellalignment93" headers="d129285e2964 d129285e2882">
<p><code class="codeph">IC_AsyncWS_Request</code> and <code class="codeph">IC_AsyncWS_Response</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>For more information about the different types of loggers to set, see section Setting Logging Levels for Troubleshooting in the <span class="italic"><span id="GUID-0B8989BF-64CD-44FF-8EBB-736308EE2C54__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD2983"></a>
<div class="props_rev_3"><a id="GUID-ED4F094E-9066-42C9-B84A-57A5BAAEFEDD"></a>
<h3 id="OASAD-GUID-ED4F094E-9066-42C9-B84A-57A5BAAEFEDD" class="sect3"><span class="enumeration_section">13.3.8</span> Business Event Is Picked Up Twice (Or More) By SOA Server</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>Business events are raised from Fusion J2EE applications and are picked up more than once. Expected behavior is that they should be picked up only once.</p>
<p><span class="bold">Solution</span></p>
<p>If a patch fails, it may be possible for two versions of a given composite to be active (that is, the older version has not been retired). When multiple versions of a composite are active, they all become subscribers and the event is picked up more than once. This should not happen under normal scenarios. Reapply the patch and ensure that the deployed composite only has one active version.</p>
</div>
</div>
<a id="OASAD2986"></a>
<div class="props_rev_3"><a id="GUID-549F2066-5EEE-44B8-A1D8-D02943BF629F"></a>
<h3 id="OASAD-GUID-549F2066-5EEE-44B8-A1D8-D02943BF629F" class="sect3"><span class="enumeration_section">13.3.9</span> Long Running, Synchronous Calls To Remote Web Services Error Out or Asynchronous Transactions Return with an Error after a Long Time</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>Long running synchronous calls to remote web services end with JTA transaction rolled-back errors. When executing a transaction making an asynchronous call (for example, to the SOA server), the application returns with an error. Server logs show JTA transaction timeouts, which can cause this behavior.</p>
<p><span class="bold">Solution</span></p>
<p>Check the JTA transaction timeout in Oracle WebLogic Administration Console.</p>
<ol>
<li>
<p>Log in to Oracle WebLogic Server Administration Console.</p>
</li>
<li>
<p>In the <span class="bold">Domain Structure</span>, select <span class="bold">Services</span> then, <span class="bold">JTA</span> to check the timeout value.</p>
<p>If the transaction is always timing out beyond 30 seconds and is a custom composite synchronous client invocation, then the design approach may need to be revisited. It may be best for the external web service to be invoked as an asynchronous transaction.</p>
<p>Increasing the JTA for supporting long running synchronous transactions is simply an interim mechanism.</p>
</li>
<li>
<p>If synchronous client invocations to <span id="GUID-549F2066-5EEE-44B8-A1D8-D02943BF629F__FA">Oracle Fusion Applications</span> code take a long time, check for any performance issues with the system and try to resolve them.</p>
</li>
<li>
<p>Check for appropriate values for the <span class="bold">syncMaxWaitTime</span> property and BPEL's EJB transaction timeout settings in relation to the JTA timeout settings and only then increase the value of the JTA timeout, if needed.</p>
</li>
<li>
<p>To view and change the BPEL EJB transaction timeout settings, perform the following steps:</p>
<ol>
<li>
<p>Log in to <span id="GUID-549F2066-5EEE-44B8-A1D8-D02943BF629F__WLS">Oracle WebLogic Server</span> Administration Console.</p>
</li>
<li>
<p>In the <span class="bold">Domain Structure</span>, click <span class="bold">Deployments</span>.</p>
</li>
<li>
<p>Expand <span class="bold">soa-infra</span> &gt; <span class="bold">EJBs</span>.</p>
</li>
<li>
<p>Update the following EJBs:</p>
<p>- <span class="bold">BPELActivityManagerBean</span></p>
<p>- <span class="bold">BPELDeliveryBean</span></p>
<p>- <span class="bold">BPELDispatcherBean</span></p>
<p>- <span class="bold">BPELEngineBean</span></p>
<p>- <span class="bold">BPELFinderBean</span></p>
<p>- <span class="bold">BPELInstanceManagerBean</span></p>
<p>- <span class="bold">BPELProcessManagerBean</span></p>
<p>- <span class="bold">BPELSensorValuesBean</span></p>
<p>- <span class="bold">BPELServerManagerBean</span></p>
</li>
<li>
<p>Click <span class="bold">Save</span>.</p>
</li>
<li>
<p>Restart <span>Oracle WebLogic Server</span>.</p>
</li>
</ol>
</li>
<li>
<p>For asynchronous transactions, check the values for both the BPEL EJB transaction timeout and the JTA transaction timeout and adjust as needed.</p>
</li>
</ol>
<p>The following documentation provides additional information about the topics discussed in this section:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>For information about changing the JTA transaction timeout setting, see section Resolving Connection Timeouts in the<span class="italic"><span id="GUID-549F2066-5EEE-44B8-A1D8-D02943BF629F__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</li>
<li>
<p>For information about viewing and changing the <span class="bold">syncMaxWaitTime</span> property, see section Configuring BPEL Process Service Engine Properties in the <span class="italic"><span><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD2989"></a>
<div class="props_rev_3"><a id="GUID-84C4D6D7-E2B1-4B38-853A-2B0D58F0870E"></a>
<h3 id="OASAD-GUID-84C4D6D7-E2B1-4B38-853A-2B0D58F0870E" class="sect3"><span class="enumeration_section">13.3.10</span> Some Messages Are Lost Between EDN and Composites or Composites Across Clusters</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>Messages primarily get lost for the following reasons:</p>
<ol>
<li>
<p>The EDN message was not delivered.</p>
</li>
<li>
<p>The target asynchronous service did not respond.</p>
</li>
<li>
<p>The message was roll backed (though it was not lost; it is still seen in <span id="GUID-84C4D6D7-E2B1-4B38-853A-2B0D58F0870E__FAOEMFRAMESHORT">Fusion Applications Control</span>).</p>
</li>
</ol>
<p><span class="bold">Solution</span></p>
<p>Identify where the messages are supposed to be and diagnose the path, is what this issue typically requires.</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>If the calling component is an ADF web service invoking a SOA composite, then check for any client errors in the ADF logs.</p>
</li>
<li>
<p>Because ADF invokes SOA composites using EDN, check the JMS/AQ and XA data source configurations to ensure that events are being fired. For more information about EDN issues, see <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C945A210-69FB-47C7-BD5C-20750CDE001A">Business Event Subscriptions Are Not Firing</a>.</p>
</li>
<li>
<p>Check if the Oracle WSM Policy Manager security configurations allow the client to invoke the SOA composite.</p>
</li>
<li>
<p>Verify that the transaction is not transient (nonpersistent).</p>
<p><span id="GUID-84C4D6D7-E2B1-4B38-853A-2B0D58F0870E__BPEL">Oracle BPEL Process Manager</span> uses the dehydration store database to maintain long-running, asynchronous processes and their current state information in a database while they wait for asynchronous callbacks. Storing the process in a database preserves the process and prevents any loss of state or reliability if a system shuts down or a network problem occurs. There are two types of processes in <span>Oracle BPEL Process Manager</span>. These processes affect the dehydration store database in different ways.</p>
<ul style="list-style-type: disc;">
<li>
<p>Transient processes: This process type does not incur any intermediate dehydration points during process execution. If there are unhandled faults or there is system downtime during process execution, the instances of a transient process do not leave a trace in the system. Instances of transient processes cannot be saved in-flight (whether they complete normally or abnormally). Transient processes are typically short-lived, request-response style processes. The synchronous process designed in <span id="GUID-84C4D6D7-E2B1-4B38-853A-2B0D58F0870E__JDEVSHORT">JDeveloper</span> is an example of a transient process.</p>
</li>
<li>
<p>Durable processes: This process type incurs one or more dehydration points in the database during execution because of the following activities:</p>
<ul style="list-style-type: disc;">
<li>
<p>Receive activity</p>
</li>
<li>
<p>OnMessage branch of a pick activity</p>
</li>
<li>
<p>OnAlarm branch of a pick activity</p>
</li>
<li>
<p>Wait activity</p>
</li>
</ul>
<p>Instances of durable processes can be saved in-flight (whether they complete normally or abnormally). These processes are typically long-living and initiated through a one-way invocation. Because of out-of-memory and system downtime issues, durable processes cannot be memory-optimized.</p>
</li>
</ul>
</li>
<li>
<p>If a composite instance is not visible in <span>Fusion Applications Control</span> and the SOA Infrastructure is running, check that the <span class="bold">Audit Level</span> is not set to <span class="bold">Off</span> in the SOA Infrastructure Common Properties page. This can be checked in <span>Fusion Applications Control</span>:</p>
<ol>
<li>
<p>Right-click <span class="bold">soa-infra (</span><span class="italic"><span class="bold">SOA_cluster_name</span></span><span class="bold">)</span>.</p>
</li>
<li>
<p>Choose <span class="bold">SOA Administration</span> and then, <span class="bold">Common Properties</span>.</p>
</li>
</ol>
</li>
<li>
<p>Check the ADF logs to see if there was a bad/malformed message or incorrect SOAP headers (if invoking from an external web service). The transaction may have rolled back before being dehydrated due to an internal error. Again, the SOA logs can identify the cause of this issue.</p>
</li>
<li>
<p>If the composite instance is available, check the <span class="bold">bpel.config.oneWayDeliveryPolicy</span> BPEL property value. The value can be checked in <span>Fusion Applications Control</span>:</p>
<ol>
<li>
<p>In the navigation pane, expand <span class="bold">soa-infra (</span><span class="italic"><span class="bold">SOA_cluster_name</span></span><span class="bold">)</span>.</p>
</li>
<li>
<p>Expand the partition, and select the composite.</p>
<p>The Dashboard page for the composite is displayed.</p>
</li>
<li>
<p>In the upper right corner, click the <span class="bold">Show XML Definition</span> icon.</p>
<p>The contents of <code class="codeph">composite.xml</code> for that composite are displayed.</p>
</li>
</ol>
<p>If this is set to <span class="bold">async.cache</span>, messages may be lost. Set it to <span class="bold">async.persist</span> for reliable messages. This is typically specified in the BPEL process service component section of the <code class="codeph">composite.xml</code> file, so this can be set for custom composites. If the value is not set in <code class="codeph">composite.xml</code>, the value for <span class="bold">oneWayDeliveryPolicy</span> in the System MBean Browser in <span>Fusion Applications Control</span> is used. The following values are possible:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">async.persist</span>: Messages are persisted in the database hash map.</p>
</li>
<li>
<p><span class="bold">async.cache</span>: Messages are stored in memory.</p>
</li>
<li>
<p><span class="bold">sync</span>: Direct invocation occurs on the same thread.</p>
</li>
</ul>
<p>It is also possible that the transaction has invoked a target asynchronous service that has not responded back. In this case, the composite instance flow shows the call to the target asynchronous service.</p>
</li>
<li>
<p>Check if the instance has rolled back and the message is in recovery.</p>
<ol>
<li>
<p>Log in to <span>Fusion Applications Control</span>.</p>
</li>
<li>
<p>Right-click <span class="bold">soa-infra (</span><span class="italic"><span class="bold">SOA_cluster_name</span></span><span class="bold">)</span>, and choose <span class="bold">Service Engines</span> then, <span class="bold">BPEL</span>.</p>
</li>
<li>
<p>Click the <span class="bold">Recovery</span> tab.</p>
</li>
</ol>
<p>This may occur if any external references receiving the message are not reachable (for example, an external web service, enterprise applications such as Siebel, and so on).</p>
</li>
</ul>
<p>The following documentation provides additional information about the topics discussed in this section:</p>
<ul style="list-style-type: disc;">
<li>
<p>For information about <span class="bold">oneWayDeliveryPolicy</span> property settings, see sections Deployment Descriptor Properties appendix and Transaction and Fault Propagation Semantics in BPEL Processes in the <span class="italic"><span id="GUID-84C4D6D7-E2B1-4B38-853A-2B0D58F0870E__SOASE"><cite>Developing SOA Applications with Oracle SOA Suite</cite></span></span>.</p>
</li>
<li>
<p>For information about setting the <span class="bold">oneWayDeliveryPolicy</span> property in the System MBean Browser, see section Configuring BPEL Process Service Engine Properties in the <span class="italic"><span id="GUID-84C4D6D7-E2B1-4B38-853A-2B0D58F0870E__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD2992"></a>
<div class="props_rev_3"><a id="GUID-2372C95C-3914-467A-825B-B8B3B9BA5749"></a>
<h3 id="OASAD-GUID-2372C95C-3914-467A-825B-B8B3B9BA5749" class="sect3"><span class="enumeration_section">13.3.11</span> Some Composites Are Being Retried Multiple Times on Failure</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>When a BPEL process flow errors out, it is retried with all its invocations. This is undesirable in some cases.</p>
<p><span class="bold">Solution</span></p>
<p>The property <span class="bold">GlobalTxMaxRetry</span> (default value is <code class="codeph">3</code>) specifies how many retries are performed if an error is identified as a retriable one. For example, after several web service invocations, if dehydration fails due to a data source error, then this is identified as a retriable error and all activities from the prior dehydration state are retried. If the activities being retried are not idempotent (that is, their state can change with each retry and is not guaranteed to give the same behavior), then multiple retries can be problematic.</p>
<p>To rectify this, customize the composite by specifically marking the nonidempotent activities with <code class="codeph">idempotentset</code> set to <code class="codeph">false</code> in the partner link settings section of the <code class="codeph">composite.xml</code> file to prevent retries.</p>
<pre dir="ltr">
&lt;property name="bpel.partnerLink.<span class="italic">partner_link_name</span>.idempotent"&gt;false&lt;/property&gt;
</pre>
<p>The <code class="codeph">idempotentset</code> property cannot be set in <span id="GUID-2372C95C-3914-467A-825B-B8B3B9BA5749__FAOEMFRAMESHORT">Fusion Applications Control</span>.</p>
<p><span class="bold">GlobalTxMaxRetry</span> can also be set to <code class="codeph">0</code> in the Systems MBean Browser.</p>
</div>
<!-- class="section" -->
<ol>
<li><span>Right-click <span class="bold">soa-infra (</span><span class="italic"><span class="bold">SOA_cluster_name</span></span><span class="bold">)</span>.</span></li>
<li><span>Choose <span class="bold">SOA Administration</span> then, <span class="bold">Common Properties</span>.</span></li>
<li><span>Click <span class="bold">More SOA Infra Advanced Configuration Properties</span>.</span></li>
<li><span>Click <span class="bold">GlobalTxMaxRetry</span>.</span></li>
<li><span>In the <span class="bold">Value</span> field, enter an appropriate value.</span></li>
<li><span>Click <span class="bold">Apply</span>.</span></li>
</ol>
<div class="section">
<p>For information about the <code class="codeph">idempotent</code> property, see the Tuning BPEL Properties Set Inside a Composite section of <span class="italic"><span id="GUID-2372C95C-3914-467A-825B-B8B3B9BA5749__ASPER"><cite>Tuning Performance</cite></span></span>.</p>
<p>For information about Oracle SOA Suite customizations in <span id="GUID-2372C95C-3914-467A-825B-B8B3B9BA5749__JDEVSHORT">JDeveloper</span>, see the Customizing and Extending SOA Components section in the <span class="italic"><span id="GUID-2372C95C-3914-467A-825B-B8B3B9BA5749__OAEXT"><cite>Oracle Applications Cloud Customizing the Applications for Functional Administrators</cite></span></span>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD2995"></a>
<div class="props_rev_3"><a id="GUID-07C061E0-2278-4BD1-85D0-9B8CC0C77719"></a>
<h3 id="OASAD-GUID-07C061E0-2278-4BD1-85D0-9B8CC0C77719" class="sect3"><span class="enumeration_section">13.3.12</span> Some <span id="FAOEMFRAMESHORT">Fusion Applications Control</span> Features Are Missing the No Recover Button or Export Composite Capability</h3>
<div>
<p><span class="bold">Problem</span></p>
<p><span id="GUID-07C061E0-2278-4BD1-85D0-9B8CC0C77719__FAOEMFRAMESHORT">Fusion Applications Control</span> is missing features needed for diagnostics and recovery. For example, the <span class="bold">Recovery</span> tab for the BPEL process service engine shows a BPEL instance as recoverable along with instructions to click the <span class="bold">Recover</span> button. However, there is no <span class="bold">Recover</span> button available. In addition, the ability to export a composite is not available.</p>
<p><span class="bold">Solution</span></p>
<p>Check that you are logged in as a user with administrator privileges and are not logged in as a read-only user. Read-only users do not see administrative features such as the <span class="bold">Recover</span> button or the ability to export composites.</p>
<p>See section Roles and Privileges for Oracle SOA Suite Users in Oracle Enterprise Manager appendix of <span class="italic"><span id="GUID-07C061E0-2278-4BD1-85D0-9B8CC0C77719__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD2998"></a>
<div class="props_rev_3"><a id="GUID-61747D8B-1011-497C-803E-8867DF13C66D"></a>
<h3 id="OASAD-GUID-61747D8B-1011-497C-803E-8867DF13C66D" class="sect3"><span class="enumeration_section">13.3.13</span> Automatic Recovery of BPEL Instances is Not Recovering A Specific Instance</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>BPEL processes have an automatic recovery feature that attempts to automatically recover activities that are recoverable such as unresolved invoke/callback messages, activities not completed over a provided threshold time, and so on. However, the automatic recovery feature only tries to recover a few instances and only retries a fixed number of times. If some instances are not being automatically recovered, they are likely not being picked up because of the configuration of the automatic recovery parameters.</p>
<p><span class="bold">Solution</span></p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Set the maximum number of messages to automatically recover.</p>
<p>By default, the automatic recovery feature of <span id="GUID-61747D8B-1011-497C-803E-8867DF13C66D__BPEL">Oracle BPEL Process Manager</span> processes fifty messages to submit for each recovery attempt. This is controlled by the <span class="bold">maxMessageRaiseSize</span> property.</p>
<ol>
<li>
<p>In the navigation pane, right-click <span class="bold">soa-infra (</span><span class="italic"><span class="bold">SOA_cluster_name)</span></span>.</p>
</li>
<li>
<p>Choose <span class="bold">SOA Administration</span>, then <span class="bold">BPEL Properties</span>, then <span class="bold">More BPEL Configuration Properties</span>, and then <span class="bold">RecoveryConfig</span>.</p>
</li>
<li>
<p>Expand both <span class="bold">RecurringScheduleConfig</span>, then <span class="bold">maxMessageRaiseSize</span> and <span class="bold">StartupScheduleConfig</span>, and then <span class="bold">maxMessageRaiseSize</span>.</p>
<p>The default value is <code class="codeph">50</code> for each. A negative value causes all messages selected from the database to be submitted for recovery. A value of <code class="codeph">0</code> causes no messages to be selected from the database (effectively disabling recovery). To recover more than fifty messages, set the property value to that value. Use this property to limit the impact of recovery on the server.</p>
</li>
</ol>
</li>
<li>
<p>Set the maximum number of automatic recovery attempts on a given message.</p>
<p>The number of automatic recovery attempts can also be configured to submit in the same recoverable instance. The value provided, specifies the maximum number of times that invoke and callback messages are recovered. If the value is <code class="codeph">0</code> (the default value), it recovers all messages. After the number of recovery attempts on a message exceeds the specified value, a message is marked as nonrecoverable.</p>
<p>Follow these steps to configure automatic recovery attempts for invoke and callback messages in <span id="GUID-61747D8B-1011-497C-803E-8867DF13C66D__FAOEMFRAMESHORT">Fusion Applications Control</span>.</p>
<ol>
<li>
<p>In the navigation pane, right-click <span class="bold">soa-infra (</span><span class="italic"><span class="bold">SOA_cluster_name)</span></span>.</p>
</li>
<li>
<p>Choose <span class="bold">SOA Administration</span>, then <span class="bold">BPEL Properties</span>, and then <span class="bold">More BPEL Configuration Properties</span>.</p>
</li>
<li>
<p>Select <span class="bold">MaxRecoverAttempt</span>, and enter a value in the <span class="bold">Value</span> field.</p>
</li>
<li>
<p>Click <span class="bold">Apply</span>.</p>
<p>It may not be desirable in all cases to use automatic recovery. If services are not idempotent, then corruption can occur. Moreover, the automatic recovery restores the composite to the last save point that can be immediately after an asynchronous invoke, wait, and so on. Therefore, it is important to understand the process behavior and what it does next before performing mass recoveries. Attempt mass automatic recovery only after the root cause of the composite failures has been fixed (for example, a service that was unavailable is now available, a database running out of space was fixed, and so on). Automatic recovery can also trigger an unexpected load during failure scenarios. This causes more threads to block on a remote server that can induce hangs in the SOA server in a cascading fashion.</p>
<p>For more information, see section <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-2372C95C-3914-467A-825B-B8B3B9BA5749">Some Composites Are Being Retried Multiple Times on Failure</a> and section Configuring Automatic Recovery for Oracle BPEL Process Manager in the <span class="italic"><span id="GUID-61747D8B-1011-497C-803E-8867DF13C66D__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</li>
</ol>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD3001"></a>
<div class="props_rev_3"><a id="GUID-942B3383-5D06-4082-AD8F-63510C59486B"></a>
<h3 id="OASAD-GUID-942B3383-5D06-4082-AD8F-63510C59486B" class="sect3"><span class="enumeration_section">13.3.14</span> SOA Runtime Fails with a "Cannot read WSDL" Error</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>The following error is displayed if either the endpoint is not available for a reference or a composite is deployed with an incorrect deployment plan file.</p>
<pre dir="ltr">
oracle.fabric.common.FabricException: Cannot read WSDL
</pre>
<p><span class="bold">Solution</span></p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Ensure that the endpoint for the reference is up and running.</span>
<div>
<p>The WSDL or endpoint is stated in the error. The service can then be looked up from <span id="GUID-942B3383-5D06-4082-AD8F-63510C59486B__FAOEMFRAMESHORT">Fusion Applications Control</span> to check if it is active. After the service is active and the endpoint is reachable, search for the SOA instance and retry through the <span class="bold">Recovery</span> tab for the BPEL process service engine in <span>Fusion Applications Control</span>.</p>
</div>
</li>
<li class="stepexpand"><span>For extensions/customizations, ensure that the correct URL is updated in the deployment configuration plan.</span>
<div>
<p>For information about deployment plans, including examples of using <code class="codeph">sca_extractPlan</code> to extract plans, see sections Customizing Your Application for the Target Environment Before Deployment of <span class="italic"><span id="GUID-942B3383-5D06-4082-AD8F-63510C59486B__SOASE"><cite>Developing SOA Applications with Oracle SOA Suite</cite></span></span> and Customizing SOA Composite Applications with JDeveloper of <span class="italic"><span id="GUID-942B3383-5D06-4082-AD8F-63510C59486B__OAEXT"><cite>Oracle Applications Cloud Customizing the Applications for Functional Administrators</cite></span></span>.</p>
</div>
</li>
</ol>
</div>
</div>
<a id="OASAD3004"></a>
<div class="props_rev_3"><a id="GUID-E0509F46-0ACC-4788-BE64-D5F198C4B9F9"></a>
<h3 id="OASAD-GUID-E0509F46-0ACC-4788-BE64-D5F198C4B9F9" class="sect3"><span class="enumeration_section">13.3.15</span> Upload a Composite for Oracle Support Services</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>Oracle Support Services has requested the composite to be uploaded to review the flow and associated configuration files.</p>
<p><span class="bold">Solution</span></p>
</div>
<!-- class="section" -->
<ol>
<li><span>Log in to <span id="GUID-E0509F46-0ACC-4788-BE64-D5F198C4B9F9__FAOEMFRAMESHORT">Fusion Applications Control</span> as a user with administrator privileges, and not as a read-only user.</span></li>
<li><span>In the navigation pane, expand <span class="bold">soa-infra (</span><span class="italic"><span class="bold">SOA_cluster_name)</span></span>.</span></li>
<li><span>Expand the partition in which the composite is located (for example, <span class="bold">default</span>).</span></li>
<li><span>Right-click the composite and choose <span class="bold">Export</span>.</span></li>
<li><span>Accept the default selections, and save the resulting JAR file.</span></li>
<li><span>Provide the JAR file to Oracle Support Services so that it can be imported for review in <span id="GUID-E0509F46-0ACC-4788-BE64-D5F198C4B9F9__JDEVSHORT">JDeveloper</span> by selecting <span class="bold">File</span> then, <span class="bold">Import</span>.</span></li>
</ol>
</div>
</div>
<a id="OASAD3007"></a>
<div class="props_rev_3"><a id="GUID-287F9640-4165-4326-8237-CF3A23E5A987"></a>
<h3 id="OASAD-GUID-287F9640-4165-4326-8237-CF3A23E5A987" class="sect3"><span class="enumeration_section">13.3.16</span> Confirm SOA Component Configuration Properties for Oracle Support Services</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>Oracle Support Services has requested the configuration properties of various SOA components to be confirmed.</p>
<p><span class="bold">Solution</span></p>
</div>
<!-- class="section" -->
<ol>
<li><span>In the navigation pane, right-click <span class="bold">soa-infra (</span><span class="italic"><span class="bold">SOA_cluster_name)</span></span>.</span></li>
<li><span>Choose <span class="bold">Administration</span> then, <span class="bold">MDS Configuration</span> and then, <span class="bold">Export</span>.</span></li>
<li><span>Upload the resulting file to Oracle Support Services for review.</span></li>
</ol>
</div>
</div>
</div>
<a id="OASAD3010"></a>
<div class="props_rev_3"><a id="GUID-37892412-A202-47AE-9730-A0B837E9CF7E"></a>
<h2 id="OASAD-GUID-37892412-A202-47AE-9730-A0B837E9CF7E" class="sect2"><span class="enumeration_section">13.4</span> Security and Oracle WSM Policy Manager Configuration</h2>
<div>
<p>For information about troubleshooting Oracle WSM Policy Manager, see section Diagnosing Problems in the <span class="italic"><span id="GUID-37892412-A202-47AE-9730-A0B837E9CF7E__WSSEC"><cite>Administering Web Services</cite></span></span>.</p>
</div>
<a id="OASAD3338"></a><a id="OASAD3339"></a><a id="OASAD3011"></a>
<div class="props_rev_3"><a id="GUID-A1616BB4-49D5-4FBF-A2C2-FE3D1BB47721"></a>
<h3 id="OASAD-GUID-A1616BB4-49D5-4FBF-A2C2-FE3D1BB47721" class="sect3"><span class="enumeration_section">13.4.1</span> Cannot Invoke Service Due To Oracle WSM Policy Manager Security Configuration or Access</h3>
<div>
<div class="section">
<p class="subhead3">Problem</p>
</div>
<!-- class="section" -->
<p>It is not possible to invoke a service due to access issues or policy configurations. Most common issues with Oracle WSM Policy Manager involve keystore and credential store framework (CSF) configuration, which can result in the following types of errors:</p>
<pre dir="ltr">
WSM-00138 : The path to the certificate is invalid due to exception
</pre>
<p>This error occurs on the client side, when the client is trying to validate the certificate advertised in the server's WSDL file. Ensure that the server's certificate or server's issuer certificate is present in the client's keystore.</p>
<pre dir="ltr">
WSM-00056 : The key, orakey, is not retrieved
</pre>
<p>This error occurs for many reasons. Set up the keystore and CSF entries properly and ensure that passwords are correct. If an <code class="codeph">UnrecoverableKeyException</code> error is seen in the details, that usually means there is a wrong password.</p>
<pre dir="ltr">
WSM-00015 : The user name is missing
</pre>
<p>This error occurs because Oracle WSM Policy Manager cannot locate the user name in the CSF. Either the map is missing, it is in an incorrect map, or the CSF key entry is missing.</p>
<div class="section">
<p class="subhead3">Solution</p>
</div>
<!-- class="section" -->
<p>To resolve this issue, perform the following steps:</p>
<ol>
<li>
<p>Diagnose Oracle WSM Policy Manager configuration issues:</p>
<ul style="list-style-type: disc;">
<li>
<p>Ensure Oracle WSM Policy Manager is configured by checking the validation URL.</p>
<pre dir="ltr">
http://<span class="italic">host</span>:<span class="italic">port</span>/wsm-pm/validator
</pre></li>
<li>
<p>Verify that the keystore and credential store are correctly set up on each <span id="GUID-A1616BB4-49D5-4FBF-A2C2-FE3D1BB47721__WLS">Oracle WebLogic Server</span> domain.</p>
</li>
<li>
<p>Enable trace level diagnostic logging and message logging in Oracle Web Services Manager and review the diagnostic log for <code class="codeph">WSM-00</code><span class="italic"><code class="codeph">xxx</code></span> errors.</p>
</li>
<li>
<p>To debug issues with signature and encryption failure, or with interoperability, enable message logging and use one of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>WireShark/Ethereal/tShark to capture messages (Wireshark preserves binary message faithfully)</p>
</li>
<li>
<p><span id="GUID-A1616BB4-49D5-4FBF-A2C2-FE3D1BB47721__JDEVSHORT">JDeveloper</span>'s HTTP Analyzer</p>
</li>
<li>
<p><code class="codeph">tcpmon</code> another type of SOAP testing tool such as SOAPUI</p>
</li>
</ul>
</li>
</ul>
<p>For more help with diagnosing Oracle Web Services Manager issues, see section Diagnosing Problems in the <span class="italic"><span id="GUID-A1616BB4-49D5-4FBF-A2C2-FE3D1BB47721__WSSEC"><cite>Administering Web Services</cite></span></span>.</p>
</li>
<li>
<p>Set up trust relationships properly for calling third party web services</p>
<p>For calling third party web services, verify that the external web service public certificate is imported in the keystore and the <code class="codeph">composite.xml</code> property <code class="codeph">keystore.recipient.alias</code> points to it. When a web service client talks to a web service, the service advertises its certificate in the WSDL file. The client checks whether it trusts this certificate before talking to the server. Ensure that either the server's certificate or its issuer in the client's keystore (it does not matter which alias is used for these) have been included. The <code class="codeph">keystore.recipient.alias</code> property is a mechanism to tell the client which certificate to use to encrypt the response to the service. It is ignored if the service already advertises a certificate in the WSDL file. If <code class="codeph">keystore.recipient.alias</code> is not defined and it is not in the service's WSDL file, then it defaults to <code class="codeph">orakey</code>.</p>
</li>
<li>
<p>Resolve credential store issues.</p>
<p>Oracle WSM Policy Manager only reads from one CSF map, which is typically <code class="codeph">oracle.wsm.security</code>. Oracle WSM Policy Manager does not read from any other maps. More specifically, <span id="GUID-A1616BB4-49D5-4FBF-A2C2-FE3D1BB47721__FA">Oracle Fusion Applications</span> use a <code class="codeph">oracle.apps.security</code> map. If an <code class="codeph">AppID</code> defined in <code class="codeph">oracle.apps.security</code> in Oracle WSM Policy Manager is needed, it must be duplicated in <code class="codeph">oracle.wsm.security</code>.</p>
<p>For more information, see <span class="italic"><span><cite>Administering Web Services</cite></span></span>.</p>
</li>
</ol>
</div>
</div>
<a id="OASAD3340"></a><a id="OASAD3341"></a><a id="OASAD3014"></a>
<div class="props_rev_3"><a id="GUID-088DDA88-06D1-450A-834A-F1ED699E1594"></a>
<h3 id="OASAD-GUID-088DDA88-06D1-450A-834A-F1ED699E1594" class="sect3"><span class="enumeration_section">13.4.2</span> Service Invocation Errors Due To SOAP Fault "PolicySet Invalid"</h3>
<div>
<div class="section">
<p class="subhead3">Problem</p>
</div>
<!-- class="section" -->
<p>A service invocation errors as follows.</p>
<pre dir="ltr">
javax.xml.ws.soap.SOAPFaultException: PolicySet Invalid: WSM-06102 PolicyReference The policy reference URI "oracle/wss_saml_or_username_token_service_policy" is not valid.
</pre>
<p>If a policy cannot be found, either the policy name is misspelled or it cannot contact the Oracle WSM Policy Manager.</p>
<div class="section">
<p class="subhead3">Solution</p>
</div>
<!-- class="section" -->
<p>An Oracle Web Services Manager policy is not available when Oracle Web Services Manager tries to access it. The following tips can help resolve the issue.</p>
<ol>
<li>
<p>Verify Oracle WSM Policy Manager application is active on <span id="GUID-088DDA88-06D1-450A-834A-F1ED699E1594__WLS">Oracle WebLogic Server</span> Administration Console. In the <span class="bold">Domain Structure</span> section, click <span class="bold">Deployments</span>, which lists all application deployments and their states.</p>
</li>
<li>
<p>Verify if the MDS-Oracle WSM Policy Manager data source connection is reachable and available.</p>
<ol>
<li>
<p>In the <span class="bold">Domain Structure</span> section of <span>Oracle WebLogic Server</span> Administration Console, click <span class="bold">Services</span>, and then <span class="bold">Data Sources</span>, which lists all JDBC data sources.</p>
</li>
<li>
<p>Select the data source.</p>
</li>
<li>
<p>View the connection details by selecting <span class="bold">Configuration</span>, and then <span class="bold">Connection Pool</span>.</p>
</li>
<li>
<p>To check if the data source connection is reachable, select <span class="bold">Monitoring</span>, and then <span class="bold">Testing</span> tab.</p>
</li>
<li>
<p>Select the data source and click <span class="bold">Test Data Source</span>.</p>
</li>
</ol>
</li>
<li>
<p>Verify <code class="codeph">wsm-pm/validator</code> has this policy available.</p>
<pre dir="ltr">
http://<span class="italic">host</span>:<span class="italic">port</span>/wsm-pm/validator
</pre></li>
<li>
<p>Check if the user is in a role that has the correct permission granted.</p>
</li>
</ol>
</div>
</div>
<a id="OASAD3342"></a><a id="OASAD3343"></a><a id="OASAD3017"></a>
<div class="props_rev_3"><a id="GUID-4ECCAD33-D761-4E06-BF85-CC22E4564508"></a>
<h3 id="OASAD-GUID-4ECCAD33-D761-4E06-BF85-CC22E4564508" class="sect3"><span class="enumeration_section">13.4.3</span> Service Invocation Fails with "ADFC-0619: Authorization check failed" Error</h3>
<div>
<div class="section">
<p class="subhead3">Problem</p>
</div>
<!-- class="section" -->
<p>This is not typically a problem, but instead is intended behavior (for example, the system was unable to authorize the user for the action that user is attempting). To debug this issue, check the calling application log for the authorization error (the ADF logs if it is called from ADF or the <code class="codeph">soa-diagnostic.log</code> if the service is being invoked from SOA composite). The error may look similar to the following:</p>
<pre dir="ltr">
JpsAuth Check Permission
    PolicyContext: &lt;context e.g. log#V2.0&gt;
    Resource/Target:
 oracle.apps.scm.shipping.coreSetup.parameters.ui.pageDefs.ParametersPageDef
    Action: view
    Permission Class: oracle.adf.share.security.authorization.RegionPermission
    Evaluator: ACC
    Result: FAILED
    Failed ProtectionDomain:null
</pre>
<p>Errors such as the following can also be encountered:</p>
<pre dir="ltr">
java.security.AccessControlException: access denied
 (oracle.wsm.security.WSFunctionPermission)
</pre>
<div class="section">
<p class="subhead3">Solution</p>
</div>
<!-- class="section" -->
<p>Check the policy context in the <code class="codeph">system-jazn-data.xml</code> file in the following directories:</p>
<ul style="list-style-type: disc;">
<li>
<p>UNIX</p>
<pre dir="ltr">
<span class="italic">DOMAIN_HOME</span>/config/fmwconfig
</pre></li>
<li>
<p>Windows</p>
<pre dir="ltr">
<span class="italic">DOMAIN_HOME</span>\config\fmwconfig
</pre></li>
</ul>
<p>The file should contain an application stripe with the context name mentioned in the error above and the permission being checked exists in the file. If the policy stripe does not exist or the permission exits under a different stripe, then the permissions are incorrectly set up and must be corrected. For more details, see section Users, Groups, and Security Roles in the <span class="italic"><span id="GUID-4ECCAD33-D761-4E06-BF85-CC22E4564508__ROLES"><cite>Securing Resources Using Roles and Policies for Oracle WebLogic Server</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3344"></a><a id="OASAD3345"></a><a id="OASAD3020"></a>
<div class="props_rev_3"><a id="GUID-30F2911A-7802-4D9C-BE88-83162B909B5B"></a>
<h3 id="OASAD-GUID-30F2911A-7802-4D9C-BE88-83162B909B5B" class="sect3"><span class="enumeration_section">13.4.4</span> Service Invocation Fails with Error "WSM-00060 : error in timestamp validation" or Due to "clockSkew"</h3>
<div>
<div class="section">
<p class="subhead3">Problem</p>
</div>
<!-- class="section" -->
<p>This problem either manifests itself as a timestamp validation or <code class="codeph">clockSkew</code> error as shown below:</p>
<pre dir="ltr">
Caused By: FAULT CODE: InvalidSecurityToken FAULT MESSAGE: Found invalid condition "on or after" in SAML assertion.
Current Time:Fri Feb 11 22:16:42 IST 2011, clockSkew:300000 milli seconds, NotOnOrAfter Time:Fri Feb 11 14:21:42 IST 2011.
</pre>
<p>This problem typically occurs if the server and client clocks are more than five minutes apart after they are converted to the same time zone.</p>
<div class="section">
<p class="subhead3">Solution</p>
</div>
<!-- class="section" -->
<p>Change the client or server clock so that they are within five minutes, both set to the correct time. For example, using a command such as follows:</p>
<pre dir="ltr">
sudo date -s "Fri Feb 11 14:32:05 IST 2011"
</pre>
<p>Or use an <code class="codeph">ntp</code> server to maintain the time.</p>
</div>
</div>
<a id="OASAD3346"></a><a id="OASAD3347"></a><a id="OASAD3023"></a>
<div class="props_rev_3"><a id="GUID-447C2CF3-CE56-419A-96AB-93FFD9BF1B55"></a>
<h3 id="OASAD-GUID-447C2CF3-CE56-419A-96AB-93FFD9BF1B55" class="sect3"><span class="enumeration_section">13.4.5</span> Web Service Invocation Throws "Attaching multiple authentication security policies is not supported" Error</h3>
<div>
<div class="section">
<p class="subhead3">Problem</p>
</div>
<!-- class="section" -->
<p>During any web service invocation, the following error is thrown.</p>
<div class="section">
<p class="subhead3">Solution</p>
</div>
<!-- class="section" -->
<p>As the error message shows, there are two policies that are attached to the same resource type, for example, a Web service, on the domain. This can occur when the MDS-Oracle Web Services Manager repository has two policy sets: one with the domain set as <code class="codeph">*</code> and the other with the domain set as <span class="italic"><code class="codeph">your-domain-name</code></span>. The following example shows this scenario.</p>
<pre dir="ltr">
wls:/soa_domain/serverConfig&gt; displayPolicySet('default-domain-ws-fusion_domain_
gpa')
 
Policy Set Details:
Name: default-domain-ws-fusion_domain_gpa
Type of Resources: Web Service Endpoint
Scope of Resources: Domain("* fusion_domain_gpa")
Description: Global policy attachments for Web Service Endpoint resources.
Enabled: true
Policy Reference: security : oracle/wss_saml_or_username_token_service_policy,
enabled=true
 
wls:/soa_domain/serverConfig&gt; displayPolicySet('default-domain-ws-fusion_domain')
 
Policy Set Details:
Name: default-domain-ws-fusion_domain
Type of Resources: Web Service Endpoint
Scope of Resources: Domain("* * ")
Description: Global policy attachments for Web Service Endpoint resources.
Enabled: true
Policy Reference: security : oracle/wss_saml_or_username_token_service_policy,
enabled=true.
</pre>
<p>In this example, the domain where the web service invocation error is occurring is <code class="codeph">fusion_domain_gpa</code>. This is because there are two policy sets with different names pointing to the same resource type on the domain.</p>
<p>To resolve this, delete one of the above policy sets. It may be better to delete the one with <code class="codeph">Domain("*")</code> since proper provisioning should create a policy set for each domain. To delete policy sets, use the following commands.</p>
<pre dir="ltr">
beginRepositorySession()
listPolicySets()
deletePolicySet('default-domain-ws-fusion_domain')
commitRepositorySession()
</pre></div>
</div>
</div>
<a id="OASAD3026"></a>
<div class="props_rev_3"><a id="GUID-2A36F7AF-5366-4CD1-B086-46F6CAE15B1F"></a>
<h2 id="OASAD-GUID-2A36F7AF-5366-4CD1-B086-46F6CAE15B1F" class="sect2"><span class="enumeration_section">13.5</span> Human Workflow</h2>
<div>
<p>This section contains the following topics that describe common problems and solutions for human workflow:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C7A68B33-C0B3-402F-8DC2-3E7EB890005E">Recover Human Task Instances Stuck in the Alerted State</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-11094C6D-0F53-48C5-B699-45AD43A6534D">Worklist: Notifications and Approvals Region Contains No Data</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-5D8311B1-6E07-46AC-881E-3AA32E7F23CA">Task Detail Page is Not Available</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-981613B9-5C65-4C73-ADD5-F585EC5E9E78">Task Chooses an Incorrect User If Several Rules Are Defined or Errors with "Ruleset returned lists with different list builder"</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-9B1B70B0-98A8-4531-AEED-FE191A1F9E34">Document Is Stuck in Pending Approval and Logs Show Error "Unable to walk hierarchy for user user_name"</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-4A486739-84E5-4401-B27B-7588407D5EED">Task History: Cannot Remove or Move a Participant After Yourself</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-84D07C4B-8212-4625-B0EE-DDAC6FA67E88">Hierarchy List Builders Display an Error Due to Security Configuration Issues and Log Report Errors in Authentication or Authorization with HCM Services</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-CD1102CE-01D2-49EC-B0AA-9F57D3C7A36E">HCM Services are Timing Out or Getting Stuck</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-020D4816-75EB-4A3C-B35E-554A499FCBF2">Error/Warning Reported in Retrieving the Position for a User</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-995A23BD-07BA-4A60-8A39-FC64971AE17C">Users See No Approvals in the Inbox when Using Position Hierarchy</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-9D33BF6F-D151-42AF-9FFD-BFA7DE52A261">Task Escalation Does Not Follow Job Level, Supervisory, or Position Hierarchies</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-F20E652C-508F-407C-9077-CF1C88228CC2">User Is Not Allowed to Perform an Action on a Human Workflow Task</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C03D84CE-BB18-40C3-B0E9-C767DC26A09D">Email Notification Is Not Being Sent Out</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-3F80E475-6C41-4F81-8C5E-667E7AD07493">Notifications Sent Are Not Actionable</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C36D3A14-D0E3-4929-AB0E-3FF1CA6436E2">Actionable Notifications Are Sent But No Action is Taken After Responding</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-D05191F5-7938-4710-948F-BFD612674CEC">After LDAP Configuration with Oracle WebLogic Server, Users Appear in the Console, But a "No Role found matching the criteria" Error Appears</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-57607033-5D5C-4697-A761-3F369C37C92D">Only a Subset of Users in LDAP Can Log In to Oracle BPM Worklist</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-0D79CEA5-1DFC-4F7F-B6CB-28E6EB012717">"Unknown Macro" Exception Appears when Myrealm Is Passed as a Parameter to the Identity Context To Identity Service APIs</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-1B016B6C-83DB-47D0-AA38-9E144750F910">Add Participant Button in Oracle BPM Worklist Is Disabled</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-15DCB09B-D538-4978-9FE4-933531D22720">Task Modifications Made in a Runtime Tool Are Not Appearing for the Task</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C58EA8D2-2367-4529-B2D4-20D11D18D659">How Can I Set Commonly Used Human Workflow Configuration Parameters?</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-98ABF07E-A60A-4A4A-A32D-3E9E4E5986E9">Set Human Workflow Configuration Parameters Not Available in the Fusion Applications Control Properties Pages</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-D75E897C-C749-42A3-89BA-5290BF307CDB">System MBean Browser Does Not Reflect My Changes After Editing the Human Workflow Config MBeans</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-B8F7F427-0230-47B8-AD4E-CF221318E5F0">Human Workflow Services Are Not Locating Resource Bundles or Classes Located at the Workflow Customizations Class Path URL</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-8C2732FF-0673-4AC0-A477-C34DC3786E9C">Manually Set the URL for Displaying Task Details for a Particular Human Workflow Task Component</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-347F1E14-882E-4FAA-B718-932FD07D5AAA">Test the Health of the Installed Server</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-5787EAB9-87BE-499F-A31B-176297542BDF">User Authentication Error (in this example, the user is FMW_USERID and identityContext is jazn.com)</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-ADC6DCF8-1CED-4F5D-BF33-C221A8DAD552">Error During Import of Task Payload Mapped Attribute Mappings</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-18A46016-058D-4512-9FEE-ADFD802AF261">Error During Rule Migration</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-8CB23312-E89A-4ED5-8B5E-E48CF12287C3">When Defining a Rule Based on the Approval Group List Builder During Runtime, a Message Says the Group Does Not Exist</a></p>
</li>
</ul>
</div>
<a id="OASAD4615"></a>
<div class="props_rev_3"><a id="GUID-C7A68B33-C0B3-402F-8DC2-3E7EB890005E"></a>
<h3 id="OASAD-GUID-C7A68B33-C0B3-402F-8DC2-3E7EB890005E" class="sect3"><span class="enumeration_section">13.5.1</span> Recover Human Task Instances Stuck in the Alerted State</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>If a human task instance fails due to a business error, the task status stays in the alerted state.</p>
<p><span class="bold">Solution</span></p>
<p>This can happen if, for example, the following occurs:</p>
<ul style="list-style-type: disc;">
<li>
<p>The assigned user does not exist.</p>
</li>
<li>
<p>The manager is not defined.</p>
</li>
<li>
<p>No applicable rule is found.</p>
</li>
</ul>
<p>In these cases, the task is set to alerted and is assigned to the process owner or the error assignee (if defined in the task metadata).</p>
<p>The administrator or process owner must go to <span id="GUID-C7A68B33-C0B3-402F-8DC2-3E7EB890005E__BPEL_WORKLIST">Oracle BPM Worklist</span> and reassign these tasks to the correct users for the workflow to continue forward.</p>
</div>
</div>
<a id="OASAD4707"></a>
<div class="props_rev_3"><a id="GUID-11094C6D-0F53-48C5-B699-45AD43A6534D"></a>
<h3 id="OASAD-GUID-11094C6D-0F53-48C5-B699-45AD43A6534D" class="sect3"><span class="enumeration_section">13.5.2</span> Worklist: Notifications and Approvals Region Contains No Data</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>If the <span class="bold">Worklist: Notifications and Approvals</span> region in the Welcome dashboard on the Oracle Fusion Applications home page does not contain data, it is likely the connection from Oracle BPM Worklist to the SOA Managed Server is timing out.</p>
<p><span class="bold">Solution</span></p>
<ol>
<li>
<p>Ensure the SOA Managed Servers are running in the <code class="codeph">CommonDomain</code> domain with <span id="GUID-11094C6D-0F53-48C5-B699-45AD43A6534D__FAOEMFRAMESHORT">Fusion Applications Control</span>:</p>
<ol>
<li>
<p>From the navigation pane, expand the farm, <span class="bold">WebLogic Domain</span>, <span class="bold">CommonDomain</span>, <span class="bold">FS_SOACluster</span>.</p>
</li>
<li>
<p>Click <span class="bold">FS_SOACluster</span> to display the Oracle WebLogic Server Cluster Home page.</p>
</li>
<li>
<p>In the <span class="bold">Servers</span> section, view the Status column of the SOA Managed Server, for example, <span class="bold">soa_server1</span>.</p>
<p>If the Managed Server is not running, restart it.</p>
</li>
</ol>
</li>
<li>
<p>Locate the <code class="codeph">HomePageServer_</code><span class="italic"><code class="codeph">n</code></span><code class="codeph">-Diagnostic.log</code> diagnostic log files on the <code class="codeph">CommonDomain</code> domain. This log file is typically stored in the following locations:</p>
<pre dir="ltr">
(UNIX) <span class="italic">DOMAIN_HOME</span>/servers/<span class="italic">server_name</span>/logs/HomePageServer_<span class="italic">n</span>-Diagnostic.log
</pre>
<p>These log files may be stored in a different location if the log file was reconfigured.</p>
</li>
<li>
<p>Review the <code class="codeph">HomePageServer_</code><span class="italic"><code class="codeph">n</code></span><code class="codeph">-Diagnostic.log</code> diagnostic log for the following exception:</p>
<pre dir="ltr">
[HomePageServer_1] [ERROR] []
[oracle.soa.services.workflow.worklist] [tid: [ACTIVE].ExecuteThread: '24'
for queue: 'weblogic.kernel.Default (self-tuning)'] [userId: <span class="italic">username</span>]
[ecid: <span class="italic">ecidvalue</span>] [APP: HomePageApp#V2.0] [URI:
/homePage/faces/AtkHomePageWelcome] TimeoutException occurred for
server='null'.[[
oracle.bpel.services.common.concurrent.TimeoutException: Execution timeout
     service : FederetedWorklistService
</pre></li>
<li>
<p>Modify default timeout interval in the profile:</p>
<ol>
<li>
<p>Log in to the Setup UI application.</p>
</li>
<li>
<p>From the <span class="bold">Administration</span> menu in the work area, choose <span class="bold">Setup and Maintenance</span>.</p>
<p>The Overview page displays.</p>
</li>
<li>
<p>Click the <span class="bold">All Tasks</span> tab.</p>
</li>
<li>
<p>In the <span class="bold">Name</span> field, enter <code class="codeph">Profiles</code> and click <span class="bold">Search</span>.</p>
</li>
<li>
<p>In the <span class="bold">Search Results</span> table, in the <span class="bold">Manage Administrator Profile Values</span> table, click the <span class="bold">Go to Task</span>.</p>
<div class="figure" id="GUID-11094C6D-0F53-48C5-B699-45AD43A6534D__GUID-D7F9A735-36BA-4D3B-B292-8D6310138680">
<p class="titleinfigure">Figure 13-2 Search Results Table</p>
<br />
<div class="imagecenter"><img class="imagecenter" width="696" height="257" src="img/GUID-9999C339-3377-4EE8-81D5-DBFABB101AD4-default.jpg" alt="Description of Figure 13-2 follows" title="Description of Figure 13-2 follows" /><br />
<a href="img_text/GUID-9999C339-3377-4EE8-81D5-DBFABB101AD4-default.htm">Description of "Figure 13-2 Search Results Table"</a></div>
<br /></div>
<!-- class="figure" -->
<p>From the Manage Administrator Profile Values page, in the <span class="bold">Profile Display Name</span> field, enter <code class="codeph">Welcome Dashboard Worklist Timeout Interval</code>, and then click <span class="bold">Search</span>.</p>
</li>
<li>
<p>In the <span class="bold">Search Results</span> table, select <span class="bold">ATK_HOME_PAGE_WORKLIST_TIMEOUT</span>.</p>
</li>
<li>
<p>In the <span class="bold">ATK_HOME_PAGE_WORKLIST_TIMEOUT: Profile Values</span> table, modify the <span class="bold">Profile Value</span> field.</p>
<p>Increase the default timeout of 5 seconds to a larger value such as 10 seconds. A larger timeout value increases the amount of time that home page server waits for response from background SOA web services for all users and it might adversely affect home page performance when there are many concurrent users. Increasing this value should be a temporary change until the root cause for the delay in SOA federated worklist response time can be found.</p>
</li>
<li>
<p>Click <span class="bold">Save</span>.</p>
</li>
<li>
<p>Run a session, and check that the <span class="bold">Worklist: Notifications and Approvals</span> region in the Welcome dashboard on the Oracle Fusion Applications home page contain data.</p>
</li>
</ol>
</li>
</ol>
<p>For information about starting managed servers, see the <a href="GUID-F6FF7583-44EE-498C-90F4-86DB7AF53B39.htm#GUID-98EAFEE9-0938-47F5-AF41-2E983977E21C">Start Administration Servers and Managed Servers</a> section.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD3027"></a>
<div class="props_rev_3"><a id="GUID-5D8311B1-6E07-46AC-881E-3AA32E7F23CA"></a>
<h3 id="OASAD-GUID-5D8311B1-6E07-46AC-881E-3AA32E7F23CA" class="sect3"><span class="enumeration_section">13.5.3</span> Task Detail Page is Not Available</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>When clicking the human task in <span id="GUID-5D8311B1-6E07-46AC-881E-3AA32E7F23CA__BPEL_WORKLIST">Oracle BPM Worklist</span>, the following message is displayed:</p>
<pre dir="ltr">
Task detail is not available
</pre>
<p><span class="bold">Solution</span></p>
<p>This problem typically occurs during the deployment of the ADF J2EE application containing the task details page definition. Therefore, the URI for the details page is not registered with the SOA cluster.</p>
<p>To confirm whether the task details page was registered in <span id="GUID-5D8311B1-6E07-46AC-881E-3AA32E7F23CA__FAOEMFRAMESHORT">Fusion Applications Control</span>:</p>
<ol>
<li>
<p>Log in to the domain where the composite with the subscription is deployed.</p>
</li>
<li>
<p>In the navigation pane, right-click <span class="bold">SOA</span> then, <span class="bold">soa-infra</span> (<span class="italic"><span class="bold">SOA_cluster_name</span></span>).</p>
</li>
<li>
<p>Choose <span class="bold">Service Engines</span> then, <span class="bold">Human Workflow</span>.</p>
</li>
<li>
<p>In the <span class="bold">Components</span> section, click the appropriate task.</p>
</li>
<li>
<p>Click the <span class="bold">Administration</span> tab to see a URI for the task details page.</p>
<p>If there is no URI displayed, then check the log files for any errors during deployment.</p>
<p>A possible problem may be incorrect entries in the <code class="codeph">wf_client_config.xml</code> file. The <code class="codeph">wf_client_config.xml</code> file resides in the exploded EAR file's <code class="codeph">APP-INF/classes</code> directory. For example:</p>
<pre dir="ltr">
<span class="italic">APPLICATIONS_BASE</span>/fusionapps/applications/fin/deploy/EarFinPayables.ear/
APP-INF/classes/wf_client_config.xml
</pre>
<p>The file contains the cluster URL information for the local SOA runtime of that particular <span id="GUID-5D8311B1-6E07-46AC-881E-3AA32E7F23CA__WLS">Oracle WebLogic Server</span> domain. If the cluster name is wrong or that cluster does not exist in the domain, then a problem exists with the deployment and configuration of the environment.</p>
<p>As a workaround, the task details page URI can be directly entered in <span>Fusion Applications Control</span>. For the values, enter the following:</p>
<div class="tblformal" id="GUID-5D8311B1-6E07-46AC-881E-3AA32E7F23CA__GUID-9E323837-C796-4C25-81F6-00571C186925">
<table class="cellalignment27" summary="URI values">
<thead>
<tr class="cellalignment11">
<th class="cellalignment78" id="d129285e4930">Field</th>
<th class="cellalignment94" id="d129285e4933">Value</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment11">
<td class="cellalignment79" id="d129285e4938" headers="d129285e4930">
<p><span class="bold">Application Name</span></p>
</td>
<td class="cellalignment95" headers="d129285e4938 d129285e4933">
<p><code class="codeph">worklist</code></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment79" id="d129285e4947" headers="d129285e4930">
<p><span class="bold">Host Name</span></p>
</td>
<td class="cellalignment95" headers="d129285e4947 d129285e4933">
<p>The server host name for SOA</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment79" id="d129285e4955" headers="d129285e4930">
<p><span class="bold">HTTP Port</span></p>
</td>
<td class="cellalignment95" headers="d129285e4955 d129285e4933">
<p>The HTTP server port used for SOA if SSL is disabled.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment79" id="d129285e4963" headers="d129285e4930">
<p><span class="bold">HTTPS Port</span></p>
</td>
<td class="cellalignment95" headers="d129285e4963 d129285e4933">
<p>The HTTPS server port used for SOA if SSL is enabled.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment79" id="d129285e4971" headers="d129285e4930">
<p><span class="bold">URI</span></p>
</td>
<td class="cellalignment95" headers="d129285e4971 d129285e4933">
<p>For example, for financials:</p>
<pre dir="ltr">
/payables/faces/adf.task-flow?_id=FinApInvoiceApprovalTaskFlow&amp;_
document=WEB-INF/oracle/apps/financials/payables/invoices/transact
ions/ui/invoiceApprovalTask/flow/FinApInvoiceApprovalTaskFlow.xml
</pre></td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>For information about the task details page URI in <span>Fusion Applications Control</span>, see the Managing the URI of the Human Task Service Component Task Details Application section in the <span class="italic"><span id="GUID-5D8311B1-6E07-46AC-881E-3AA32E7F23CA__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</li>
</ol>
</div>
</div>
<a id="OASAD3033"></a>
<div class="props_rev_3"><a id="GUID-981613B9-5C65-4C73-ADD5-F585EC5E9E78"></a>
<h3 id="OASAD-GUID-981613B9-5C65-4C73-ADD5-F585EC5E9E78" class="sect3"><span class="enumeration_section">13.5.4</span> Task Chooses an Incorrect User If Several Rules Are Defined or Errors with "Ruleset returned lists with different list builder"</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>At runtime, when a human workflow task tries to fetch the list of users, it errors with the following message:</p>
<pre dir="ltr">
Ruleset returned lists with different list builder
</pre>
<p>This can be seen in the <span class="bold">Task Detail Comments</span> field. Alternately, it may select a user or approver, which may not seem to be the correct or expected one. This is primarily caused by having overlapping rules with different list builders. When participants of a task are specified using business rules, it is expected that business rules return list builders of the same type.</p>
<p>Moreover, only one rule from a ruleset should be applicable for a transaction. In case a number of rules are true, the actions associated with the applicable rule with the highest priority get executed. If multiple applicable rules have the same priority, then the first rule in the list is picked and its actions are executed.</p>
<p><span class="bold">Solution</span></p>
<p>To resolve this issue, avoid writing overlapping rules. Constraints from different list builders are different and cannot be mixed. If more than one rule gets triggered with a different list builder, this error occurs. Moreover, only one set of constraints is honored.</p>
<p>Check that all rules in the ruleset have priorities defined so that multiple rules with the same priority are not applicable for the same transaction. For more details, see the Using Approval Management section in the <span class="italic"><span id="GUID-981613B9-5C65-4C73-ADD5-F585EC5E9E78__BPMPD"><cite>Developing Business Processes with Oracle Business Process Management Studio</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3039"></a>
<div class="props_rev_3"><a id="GUID-9B1B70B0-98A8-4531-AEED-FE191A1F9E34"></a>
<h3 id="OASAD-GUID-9B1B70B0-98A8-4531-AEED-FE191A1F9E34" class="sect3"><span class="enumeration_section">13.5.5</span> Document Is Stuck in Pending Approval and Logs Show Error "Unable to walk hierarchy for user <span class="italic">user_name</span>"</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>The document is stuck pending approval and the logs show the following error:</p>
<pre dir="ltr">
"Unable to walk hierarchy for user <span class="italic">username</span>'
</pre>
<p>This occurs when the hierarchy for the given user has not been set up correctly. For example, assume there are approval rules set up so that the rule getting fired uses the supervisory hierarchy and it is expected to route to USER01 then, USER02 then, USER03 and so on up to USER10 (ten level hierarchy). If the supervisory/management hierarchy of USER01 has not been set up, then the approval task throws an error stating the inability to go through the hierarchy for USER01.</p>
<p><span class="bold">Solution</span></p>
<p>Since the user level hierarchy does not exist for the <span class="italic"><code class="codeph">user_name</code></span>, verify the Human Capital Management (HCM) setup by manually running the HCM service to which <code class="codeph">workflow-identity-config.xml</code> is pointing. If it does not return any result, then configure the correct hierarchy for the user in HCM.</p>
<p>Run the HCM service, select the <code class="codeph">fetchManager</code>(s) API (for supervisory), and provide the following payload, where <code class="codeph">&lt;ns2:Id&gt;DD7A1614BBFAA0F0A4511ACD96D2C88D&lt;/ns2:Id&gt;</code> is the GUID of the user whose manager is being searched. The supervisory hierarchy and position hierarchy services can be found under <code class="codeph">HcmCore</code>. The name is <code class="codeph">HierarchyProviderService</code>. The corresponding WSDLs are as follows:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Supervisory hierarchy:</p>
<pre dir="ltr">
http://<span class="italic">host</span>:<span class="italic">port</span>/hcmEmploymentCoreApprovalHierarchy/HierarchyProviderService?wsdl
</pre></li>
<li>
<p>Position hierarchy:</p>
<pre dir="ltr">
http://<span class="italic">host</span>:<span class="italic">port</span>/hcmTreesModel/HierarchyProviderService?wsdl
</pre></li>
</ul>
<pre dir="ltr">
&lt;soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"&gt;
&lt;soap:Header&gt;
&lt;wsse:Security soap:mustUnderstand="1"
xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-sec
ext-1.0.xsd"&gt;
&lt;wsse:UsernameToken&gt;
&lt;wsse:Username&gt;FUSION_APPS_AMX_APPID&lt;/wsse:Username&gt;
&lt;wsse:Password
Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profi
le-1.0#PasswordText"&gt;<span class="italic">Password</span>&lt;/wsse:Password&gt;
&lt;/wsse:UsernameToken&gt;
&lt;/wsse:Security&gt;
&lt;/soap:Header&gt;
&lt;soap:Body
xmlns:ns1="http://xmlns.oracle.com/apps/hcm/employment/core/approvalHierarchyServi
ce/types/"&gt;
&lt;ns1:fetchManagers&gt;
&lt;ns1:principal
xmlns:ns2="http://xmlns.oracle.com/apps/hcm/employment/core/approvalHierarchyServi
ce/"&gt;
&lt;ns2:Id&gt;DD7A1614BBFAA0F0A4511ACD96D2C88D&lt;/ns2:Id&gt;
&lt;/ns1:principal&gt;
&lt;ns1:level&gt;2&lt;/ns1:level&gt;
&lt;/ns1:fetchManagers&gt;
&lt;/soap:Body&gt;
&lt;/soap:Envelope&gt; 
</pre>
<p>The following example shows the <code class="codeph">workflow-identity-config.xml</code> file used in a development environment:</p>
<pre dir="ltr">
&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;ISConfiguration xmlns="http://www.oracle.com/pcbpel/identityservice/isconfig/"&gt;
&lt;configurations&gt;
&lt;configuration realmName="myrealm"&gt;
&lt;provider name="JpsProvider" providerType="JPS" service="Identity"&gt;
&lt;property name="jpsContextName" value="default"/&gt;
&lt;property name="IdentityServiceExtension" value="HCMIdentityServiceExtension"/&gt;
&lt;/provider&gt;
&lt;/configuration&gt;
&lt;/configurations&gt;
&lt;property name="caseSensitive" value="false"/&gt;
&lt;property name="caseSensitiveGroups" value="true"/&gt;
&lt;serviceExtensions&gt;
&lt;serviceExtension name="HCMIdentityServiceExtension"&gt;
&lt;serviceProvider
classname="oracle.bpel.services.identity.hierarchy.providers.hcm.HCMHierarchyProvi
der" type="supervisoryHierarchyProvider"&gt;
&lt;initializationParameter name="wsdlUrl"
value="http://example.com:20619/hcmEmploymentCoreApprovalHierarchy/Hie
rarchyProviderService?WSDL"/&gt;
&lt;initializationParameter name="csf-key-name" value="FUSION_APPS_AMX_APPID-KEY"/&gt;
&lt;initializationParameter name="http-read-timeout" value="30000"/&gt;
&lt;initializationParameter name="securityPolicyName" value="oracle/wss_username_
token_client_policy"/&gt;
&lt;/serviceProvider&gt;
&lt;serviceProvider
classname="oracle.bpel.services.identity.hierarchy.providers.hcm.HCMHierarchyProvi
der" type="jobLevelHierarchyProvider"&gt;
&lt;initializationParameter name="wsdlUrl"
value="http://example.com:20619/hcmEmploymentCoreApprovalHierarchy/Hie
rarchyProviderService?WSDL"/&gt;
&lt;initializationParameter name="csf-key-name" value="FUSION_APPS_AMX_APPID-KEY"/&gt;
&lt;initializationParameter name="http-read-timeout" value="30000"/&gt;
&lt;initializationParameter name="securityPolicyName" value="oracle/wss_username_
token_client_policy"/&gt;
&lt;/serviceProvider&gt;
&lt;serviceProvider
classname="oracle.bpel.services.identity.hierarchy.providers.hcm.HCMPositionHierar
chyProvider" type="positionHierarchyProvider"&gt;
&lt;initializationParameter name="wsdlUrl"
value="http://example.com:20619/hcmTreesModel/HierarchyProviderService
?WSDL"/&gt;
&lt;initializationParameter name="csf-key-name" value="FUSION_APPS_AMX_APPID-KEY"/&gt;
&lt;initializationParameter name="http-read-timeout" value="30000"/&gt;
&lt;initializationParameter name="securityPolicyName" value="oracle/wss_username_
token_client_policy"/&gt;
&lt;/serviceProvider&gt;
&lt;serviceProvider
classname="oracle.bpel.services.identity.position.provider.hcm.PositionLookupServi
ceProvider" type="positionLookupProvider"&gt;
&lt;initializationParameter name="wsdlUrl"
value="http://example.com:20619/hcmEmploymentCore/positionLookupServic
e?WSDL"/&gt;
&lt;initializationParameter name="csf-key-name" value="FUSION_APPS_AMX_APPID-KEY"/&gt;
&lt;initializationParameter name="http-read-timeout" value="30000"/&gt;
&lt;initializationParameter name="securityPolicyName" value="oracle/wss_username_
token_client_policy"/&gt;
&lt;/serviceProvider&gt;
&lt;serviceProvider
classname="oracle.bpel.services.identity.position.provider.hcm.PositionDisplayName
Provider" type="positionDisplayNameProvider"&gt;
&lt;initializationParameter name="wsdlUrl"
value="http://example.com:20619/hcmTreesModel/HierarchyProviderService
?WSDL"/&gt;
&lt;initializationParameter name="csf-key-name" value="FUSION_APPS_AMX_APPID-KEY"/&gt;
&lt;initializationParameter name="http-read-timeout" value="30000"/&gt;
&lt;initializationParameter name="securityPolicyName" value="oracle/wss_username_
token_client_policy"/&gt;
&lt;/serviceProvider&gt;
&lt;/serviceExtension&gt;
&lt;/serviceExtensions&gt;
&lt;/ISConfiguration&gt;
</pre>
<p>The <code class="codeph">workflow-identity-config.xml</code> file is in the MDS repository. For information about how to export the <code class="codeph">workflow-identity-config.xml</code> file from MDS, see <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-84D07C4B-8212-4625-B0EE-DDAC6FA67E88">Hierarchy List Builders Display an Error Due to Security Configuration Issues and Log Report Errors in Authentication or Authorization with HCM Services</a>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD3042"></a>
<div class="props_rev_3"><a id="GUID-4A486739-84E5-4401-B27B-7588407D5EED"></a>
<h3 id="OASAD-GUID-4A486739-84E5-4401-B27B-7588407D5EED" class="sect3"><span class="enumeration_section">13.5.6</span> Task History: Cannot Remove or Move a Participant After Yourself</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>A participant that was added through future participant editing cannot be removed or moved. This is because the participant was anchored to you and you are the current assignee.</p>
<p><span class="bold">Solution</span></p>
<p>This feature is not supported.</p>
</div>
</div>
<a id="OASAD3045"></a>
<div class="props_rev_3"><a id="GUID-84D07C4B-8212-4625-B0EE-DDAC6FA67E88"></a>
<h3 id="OASAD-GUID-84D07C4B-8212-4625-B0EE-DDAC6FA67E88" class="sect3"><span class="enumeration_section">13.5.7</span> Hierarchy List Builders Display an Error Due to Security Configuration Issues and Log Report Errors in Authentication or Authorization with HCM Services</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>Hierarchy list builders (for example, supervisory, job-level, and position) used in rules are not working as expected and are throwing security configuration-related errors. For example:</p>
<pre dir="ltr">
SOAPFaultException: FailedAuthorization
</pre>
<p>Hierarchy services are protected services using Oracle Web Services Manager policies (for example, supervisory, job-level, and position services). Elevated privileges are used for authentication. These privileges must be configured in <span id="GUID-84D07C4B-8212-4625-B0EE-DDAC6FA67E88__FAOEMFRAMESHORT">Fusion Applications Control</span> and in configuration files.</p>
<p><span class="bold">Solution</span></p>
<p>To resolve this problem:</p>
<ol>
<li>
<p>Check the MDS store to see if <code class="codeph">workflow-identity-config.xml</code> and <code class="codeph">workflow-config.xml</code> are set up with the correct information (pointing to HCM services and the JAZN name).</p>
<ol>
<li>
<p>Run the following script to connect to the <code class="codeph">WLST</code> shell on Linux operating systems.</p>
<pre dir="ltr">
$MW_HOME/oracle_common/common/bin/wlst.sh
</pre></li>
<li>
<p>Run <code class="codeph">connect()</code>. This takes to the prompt as shown in the following example:</p>
<pre dir="ltr">
wls:/offline&gt; connect()
Please enter your username [weblogic] :weblogic
Please enter your password [weblogic] :
Please enter your server URL [t3://localhost:7001]
:t3://example.com:9401
</pre></li>
<li>
<p>Run the following command after connecting:</p>
<pre dir="ltr">
exportMetadata(application='soa-infra',server='soa_server1',toLocation='any
Location on
server',docs='/soa/configuration/default/workflow-identity-config.xml')
</pre>
<p>The file is stored in the <code class="codeph">soa/configuration/default</code> directory in the location given in the <code class="codeph">toLocation</code> attribute. After verifying, the file can be uploaded with the following command.</p>
<pre dir="ltr">
importMetadata(application='soa-infra',server='soa_
server1',fromLocation='any Location on
server',docs='/soa/configuration/default/workflow-identity-config.xml')
</pre></li>
</ol>
</li>
<li>
<p>Verify that the <code class="codeph">csf-keys</code> are specified as initialization parameters.</p>
<ol>
<li>
<p>Ensure that the <code class="codeph">csf-key-name</code> value is <code class="codeph">FUSION_APPS_AMX_APPID</code><code class="codeph">-KEY</code> in <code class="codeph">workflow-identity-config.xml</code>, as described in <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-9B1B70B0-98A8-4531-AEED-FE191A1F9E34">Document Is Stuck in Pending Approval and Logs Show Error "Unable to walk hierarchy for user user_name"</a>.</p>
</li>
</ol>
</li>
<li>
<p>Check in <span>Fusion Applications Control</span> that the keys defined for the services have the correct values for authentication.</p>
<ol>
<li>
<p>Retrieve a credential with a given map and key by using scripting to invoke the MBean operation <code class="codeph">JpsCredentialMXBean.getPortableCredential(map, key)</code>.</p>
<pre dir="ltr">
(map="oracle.wsm.security", key="FUSION_APPS_AMX_APPID-KEY")
</pre>
<p>For more information about this MBean, see the Managing Credentials with OPSS Scripts section of <span class="italic"><span id="GUID-84D07C4B-8212-4625-B0EE-DDAC6FA67E88__JISEC"><cite>Oracle Fusion Middleware Applications Security Guide</cite></span></span>.</p>
</li>
</ol>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD3048"></a>
<div class="props_rev_3"><a id="GUID-CD1102CE-01D2-49EC-B0AA-9F57D3C7A36E"></a>
<h3 id="OASAD-GUID-CD1102CE-01D2-49EC-B0AA-9F57D3C7A36E" class="sect3"><span class="enumeration_section">13.5.8</span> HCM Services are Timing Out or Getting Stuck</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>Hierarchy services sometimes get overloaded and do not respond (for example, supervisory, job-level, and position services).</p>
<p><span class="bold">Solution</span></p>
<p>Check that the <code class="codeph">workflow-identity-config.xml</code> file for the problematic service has correct timeout settings defined as initialization parameters. The timeout parameter is <code class="codeph">http-read-timeout</code>. For an example of the configuration file, see <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-9B1B70B0-98A8-4531-AEED-FE191A1F9E34">Document Is Stuck in Pending Approval and Logs Show Error "Unable to walk hierarchy for user user_name"</a>. Note that increasing the timeout may cause errors, such as other timeouts and only puts more load on an already overloaded server.</p>
</div>
</div>
<a id="OASAD3051"></a>
<div class="props_rev_3"><a id="GUID-020D4816-75EB-4A3C-B35E-554A499FCBF2"></a>
<h3 id="OASAD-GUID-020D4816-75EB-4A3C-B35E-554A499FCBF2" class="sect3"><span class="enumeration_section">13.5.9</span> Error/Warning Reported in Retrieving the Position for a User</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>Not all LDAP users are defined as people within Oracle Fusion HCM. For example, users may be defined in LDAP for Oracle Fusion Supply Chain Management that are not defined as people with positions in Oracle Fusion HCM. Therefore, the position lookup can generate a message that the user does not have positions.</p>
<p><span class="bold">Solution</span></p>
<p>This is a tolerated condition and the warning can be ignored if the user name specified in the warning is not an HCM user. If this is an HCM user, the problem is on the HCM side. Add a position to these users in the HCM application.</p>
</div>
</div>
<a id="OASAD3054"></a>
<div class="props_rev_3"><a id="GUID-995A23BD-07BA-4A60-8A39-FC64971AE17C"></a>
<h3 id="OASAD-GUID-995A23BD-07BA-4A60-8A39-FC64971AE17C" class="sect3"><span class="enumeration_section">13.5.10</span> Users See No Approvals in the Inbox when Using Position Hierarchy</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>This issue may be noticed by organizations using position hierarchy such as governments and universities. After users log in, they do not see any approvals in their inbox. This is caused by a failure to look up the position. This can be caused by network issues when accessing the HCM services. Sometimes due to load balancing or network setup, HCM services may not be accessible and <span id="GUID-995A23BD-07BA-4A60-8A39-FC64971AE17C__BPEL_WORKLIST">Oracle BPM Worklist</span> has errors such as the following:</p>
<pre dir="ltr">
WSDL port is not accessible
</pre>
<p>or</p>
<pre dir="ltr">
Could not find the host
</pre>
<p><span class="bold">Solution</span></p>
</div>
<!-- class="section" -->
<ol>
<li><span>Check the network setup and ensure that the HCM services are accessible and WSDL ports can be accessed in the browser. Tools like <code class="codeph">ping</code> and <code class="codeph">traceroute</code> can also diagnose the problem.</span></li>
<li><span>If the services are not available, bring up the services and retry.</span></li>
<li><span>Restart the HCM server and SOA server. For information, see the Starting and Stopping Managed Servers Using Fusion Middleware Control section in <span class="italic"><span id="GUID-995A23BD-07BA-4A60-8A39-FC64971AE17C__ASADM"><cite>Administering Oracle Fusion Middleware</cite></span></span>.</span></li>
</ol>
</div>
</div>
<a id="OASAD3063"></a>
<div class="props_rev_3"><a id="GUID-9D33BF6F-D151-42AF-9FFD-BFA7DE52A261"></a>
<h3 id="OASAD-GUID-9D33BF6F-D151-42AF-9FFD-BFA7DE52A261" class="sect3"><span class="enumeration_section">13.5.11</span> Task Escalation Does Not Follow Job Level, Supervisory, or Position Hierarchies</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>This feature is not supported. Escalation does not follow the job level, supervisory, or position hierarchies.</p>
<p><span class="bold">Solution</span></p>
<p>Build a customized plug-in. For more details, see <span class="italic"><span id="GUID-9D33BF6F-D151-42AF-9FFD-BFA7DE52A261__SOASE"><cite>Developing SOA Applications with Oracle SOA Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3072"></a>
<div class="props_rev_3"><a id="GUID-F20E652C-508F-407C-9077-CF1C88228CC2"></a>
<h3 id="OASAD-GUID-F20E652C-508F-407C-9077-CF1C88228CC2" class="sect3"><span class="enumeration_section">13.5.12</span> User Is Not Allowed to Perform an Action on a Human Workflow Task</h3>
<div>
<p>For troubleshooting information about this issue, see section Task Action Issues in the <span class="italic"><span id="GUID-F20E652C-508F-407C-9077-CF1C88228CC2__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3075"></a>
<div class="props_rev_3"><a id="GUID-C03D84CE-BB18-40C3-B0E9-C767DC26A09D"></a>
<h3 id="OASAD-GUID-C03D84CE-BB18-40C3-B0E9-C767DC26A09D" class="sect3"><span class="enumeration_section">13.5.13</span> Email Notification Is Not Being Sent Out</h3>
<div>
<p>For troubleshooting information about this issue, see section Notification Issues in the <span class="italic"><span id="GUID-C03D84CE-BB18-40C3-B0E9-C767DC26A09D__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3078"></a>
<div class="props_rev_3"><a id="GUID-3F80E475-6C41-4F81-8C5E-667E7AD07493"></a>
<h3 id="OASAD-GUID-3F80E475-6C41-4F81-8C5E-667E7AD07493" class="sect3"><span class="enumeration_section">13.5.14</span> Notifications Sent Are Not Actionable</h3>
<div>
<p>For troubleshooting information about this issue, see section Notification Issues in the <span class="italic"><span id="GUID-3F80E475-6C41-4F81-8C5E-667E7AD07493__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>. This section describes how to make the task actionable in the Human Task Editor during design time.</p>
<p>In addition, if notifications are sent, but are not actionable, the administrator may have configured the notification to be nonactionable through <span id="GUID-3F80E475-6C41-4F81-8C5E-667E7AD07493__BPEL_WORKLIST">Oracle BPM Worklist</span>. To make notifications actionable, select the <span class="bold">Make notification actionable</span> checkbox under the <span class="bold">Event Driven</span> subtab of the <span class="bold">Task Configuration</span> tab.</p>
</div>
</div>
<a id="OASAD3081"></a>
<div class="props_rev_3"><a id="GUID-C36D3A14-D0E3-4929-AB0E-3FF1CA6436E2"></a>
<h3 id="OASAD-GUID-C36D3A14-D0E3-4929-AB0E-3FF1CA6436E2" class="sect3"><span class="enumeration_section">13.5.15</span> Actionable Notifications Are Sent But No Action is Taken After Responding</h3>
<div>
<p>For troubleshooting information about this issue, see section Notification Issues in the <span class="italic"><span id="GUID-C36D3A14-D0E3-4929-AB0E-3FF1CA6436E2__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3084"></a>
<div class="props_rev_3"><a id="GUID-D05191F5-7938-4710-948F-BFD612674CEC"></a>
<h3 id="OASAD-GUID-D05191F5-7938-4710-948F-BFD612674CEC" class="sect3"><span class="enumeration_section">13.5.16</span> After LDAP Configuration with <span id="WLS">Oracle WebLogic Server</span>, Users Appear in the Console, But a "No Role found matching the criteria" Error Appears</h3>
<div>
<p>For troubleshooting information about this issue, see section Identity Service Issues in the <span class="italic"><span id="GUID-D05191F5-7938-4710-948F-BFD612674CEC__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3087"></a>
<div class="props_rev_3"><a id="GUID-57607033-5D5C-4697-A761-3F369C37C92D"></a>
<h3 id="OASAD-GUID-57607033-5D5C-4697-A761-3F369C37C92D" class="sect3"><span class="enumeration_section">13.5.17</span> Only a Subset of Users in LDAP Can Log In to <span id="BPEL_WORKLIST">Oracle BPM Worklist</span></h3>
<div>
<p>For troubleshooting information about this issue, see section Identity Service Issues in the <span class="italic"><span id="GUID-57607033-5D5C-4697-A761-3F369C37C92D__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3090"></a>
<div class="props_rev_3"><a id="GUID-0D79CEA5-1DFC-4F7F-B6CB-28E6EB012717"></a>
<h3 id="OASAD-GUID-0D79CEA5-1DFC-4F7F-B6CB-28E6EB012717" class="sect3"><span class="enumeration_section">13.5.18</span> "Unknown Macro" Exception Appears when Myrealm Is Passed as a Parameter to the Identity Context To Identity Service APIs</h3>
<div>
<p>For troubleshooting information about this issue, see section Identity Service Issues in the <span class="italic"><span id="GUID-0D79CEA5-1DFC-4F7F-B6CB-28E6EB012717__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3093"></a>
<div class="props_rev_3"><a id="GUID-1B016B6C-83DB-47D0-AA38-9E144750F910"></a>
<h3 id="OASAD-GUID-1B016B6C-83DB-47D0-AA38-9E144750F910" class="sect3"><span class="enumeration_section">13.5.19</span> Add Participant Button in <span>Oracle BPM Worklist</span> Is Disabled</h3>
<div>
<p>For troubleshooting information about this issue, see section Task History Issues in the <span class="italic"><span id="GUID-1B016B6C-83DB-47D0-AA38-9E144750F910__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3108"></a>
<div class="props_rev_3"><a id="GUID-15DCB09B-D538-4978-9FE4-933531D22720"></a>
<h3 id="OASAD-GUID-15DCB09B-D538-4978-9FE4-933531D22720" class="sect3"><span class="enumeration_section">13.5.20</span> Task Modifications Made in a Runtime Tool Are Not Appearing for the Task</h3>
<div>
<p>For troubleshooting information about this issue, see section Design Time at Runtime Issues in the <span class="italic"><span id="GUID-15DCB09B-D538-4978-9FE4-933531D22720__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3111"></a>
<div class="props_rev_3"><a id="GUID-C58EA8D2-2367-4529-B2D4-20D11D18D659"></a>
<h3 id="OASAD-GUID-C58EA8D2-2367-4529-B2D4-20D11D18D659" class="sect3"><span class="enumeration_section">13.5.21</span> How Can I Set Commonly Used Human Workflow Configuration Parameters?</h3>
<div>
<p>For troubleshooting information about this issue, see section Human Workflow Service/System MBean Browser Issues in the <span class="italic"><span id="GUID-C58EA8D2-2367-4529-B2D4-20D11D18D659__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3114"></a>
<div class="props_rev_3"><a id="GUID-98ABF07E-A60A-4A4A-A32D-3E9E4E5986E9"></a>
<h3 id="OASAD-GUID-98ABF07E-A60A-4A4A-A32D-3E9E4E5986E9" class="sect3"><span class="enumeration_section">13.5.22</span> Set Human Workflow Configuration Parameters Not Available in the <span>Fusion Applications Control</span> Properties Pages</h3>
<div>
<p>For troubleshooting information about this issue, see section Human Workflow Service/System MBean Browser Issues in the <span class="italic"><span id="GUID-98ABF07E-A60A-4A4A-A32D-3E9E4E5986E9__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3117"></a>
<div class="props_rev_3"><a id="GUID-D75E897C-C749-42A3-89BA-5290BF307CDB"></a>
<h3 id="OASAD-GUID-D75E897C-C749-42A3-89BA-5290BF307CDB" class="sect3"><span class="enumeration_section">13.5.23</span> System MBean Browser Does Not Reflect My Changes After Editing the Human Workflow Config MBeans</h3>
<div>
<p>For troubleshooting information about this issue, see section Human Workflow Service/System MBean Browser Issues in the <span class="italic"><span id="GUID-D75E897C-C749-42A3-89BA-5290BF307CDB__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3120"></a>
<div class="props_rev_3"><a id="GUID-B8F7F427-0230-47B8-AD4E-CF221318E5F0"></a>
<h3 id="OASAD-GUID-B8F7F427-0230-47B8-AD4E-CF221318E5F0" class="sect3"><span class="enumeration_section">13.5.24</span> Human Workflow Services Are Not Locating Resource Bundles or Classes Located at the Workflow Customizations Class Path URL</h3>
<div>
<p>For troubleshooting information about this issue, see section Human Workflow Service/System MBean Browser Issues in the <span class="italic"><span id="GUID-B8F7F427-0230-47B8-AD4E-CF221318E5F0__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3123"></a>
<div class="props_rev_3"><a id="GUID-8C2732FF-0673-4AC0-A477-C34DC3786E9C"></a>
<h3 id="OASAD-GUID-8C2732FF-0673-4AC0-A477-C34DC3786E9C" class="sect3"><span class="enumeration_section">13.5.25</span> Manually Set the URL for Displaying Task Details for a Particular Human Workflow Task Component</h3>
<div>
<p>For troubleshooting information about this issue, see section Human Workflow Service/System MBean Browser Issues in the <span class="italic"><span id="GUID-8C2732FF-0673-4AC0-A477-C34DC3786E9C__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3126"></a>
<div class="props_rev_3"><a id="GUID-347F1E14-882E-4FAA-B718-932FD07D5AAA"></a>
<h3 id="OASAD-GUID-347F1E14-882E-4FAA-B718-932FD07D5AAA" class="sect3"><span class="enumeration_section">13.5.26</span> Test the Health of the Installed Server</h3>
<div>
<p>For troubleshooting information about this issue, see section Test-to-Production Issues in the <span class="italic"><span id="GUID-347F1E14-882E-4FAA-B718-932FD07D5AAA__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3129"></a>
<div class="props_rev_3"><a id="GUID-5787EAB9-87BE-499F-A31B-176297542BDF"></a>
<h3 id="OASAD-GUID-5787EAB9-87BE-499F-A31B-176297542BDF" class="sect3"><span class="enumeration_section">13.5.27</span> User Authentication Error (in this example, the user is FMW_USERID and identityContext is jazn.com)</h3>
<div>
<p>For troubleshooting information about this issue, see section Test-to-Production Issues in the <span class="italic"><span id="GUID-5787EAB9-87BE-499F-A31B-176297542BDF__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3132"></a>
<div class="props_rev_3"><a id="GUID-ADC6DCF8-1CED-4F5D-BF33-C221A8DAD552"></a>
<h3 id="OASAD-GUID-ADC6DCF8-1CED-4F5D-BF33-C221A8DAD552" class="sect3"><span class="enumeration_section">13.5.28</span> Error During Import of Task Payload Mapped Attribute Mappings</h3>
<div>
<p>For troubleshooting information about this issue, see section Test-to-Production Issues in the <span class="italic"><span id="GUID-ADC6DCF8-1CED-4F5D-BF33-C221A8DAD552__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3135"></a>
<div class="props_rev_3"><a id="GUID-18A46016-058D-4512-9FEE-ADFD802AF261"></a>
<h3 id="OASAD-GUID-18A46016-058D-4512-9FEE-ADFD802AF261" class="sect3"><span class="enumeration_section">13.5.29</span> Error During Rule Migration</h3>
<div>
<p>For troubleshooting information about this issue, see section Test-to-Production Issues in the <span class="italic"><span id="GUID-18A46016-058D-4512-9FEE-ADFD802AF261__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3138"></a>
<div class="props_rev_3"><a id="GUID-8CB23312-E89A-4ED5-8B5E-E48CF12287C3"></a>
<h3 id="OASAD-GUID-8CB23312-E89A-4ED5-8B5E-E48CF12287C3" class="sect3"><span class="enumeration_section">13.5.30</span> When Defining a Rule Based on the Approval Group List Builder During Runtime, a Message Says the Group Does Not Exist</h3>
<div>
<p>For troubleshooting information about this issue, see section AMX Extension Issues in the <span class="italic"><span id="GUID-8CB23312-E89A-4ED5-8B5E-E48CF12287C3__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
</div>
<a id="OASAD3141"></a>
<div class="props_rev_3"><a id="GUID-64145224-294D-49B8-B6A1-7732DA06616E"></a>
<h2 id="OASAD-GUID-64145224-294D-49B8-B6A1-7732DA06616E" class="sect2"><span class="enumeration_section">13.6</span> Patching and Deployment</h2>
<div>
<p>For troubleshooting information about patching and deployment issues, see the <a class="olink OAPAT763" target="_blank" href="../OAPAT/GUID-C9E7FC50-20BE-4F33-9760-E5B8C3F978DE.htm#OAPAT763">Troubleshooting Patching Sessions for SOA Composites</a> section in the <span class="italic"><span id="GUID-64145224-294D-49B8-B6A1-7732DA06616E__OAPAT"><cite>Oracle Fusion Applications Patching Guide</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3154"></a>
<div class="props_rev_3"><a id="GUID-8327C504-39B0-47A4-846E-AD7037EC1F02"></a>
<h2 id="OASAD-GUID-8327C504-39B0-47A4-846E-AD7037EC1F02" class="sect2"><span class="enumeration_section">13.7</span> Performance</h2>
<div>
<p>This section contains the following topics that describe common problems and solutions for <span id="GUID-8327C504-39B0-47A4-846E-AD7037EC1F02__SOA">Oracle SOA Suite</span> performance:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-7B64FDE4-D1FE-4BF1-812B-1393F33A526F">SOA Transactions are Failing and Logs Indicate the SOA Database is Running Out of Space</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-CB971EFB-D5A9-4EC0-8726-30519C24BD29">Slow Application Performance Such as Longer Time to Serve Pages or Finish Transactions</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-5F57285E-397A-4ED6-A166-DE6CDFB8BC5E">Slow Fusion Applications Control Performance</a></p>
</li>
</ul>
</div>
<a id="OASAD3155"></a>
<div class="props_rev_3"><a id="GUID-7B64FDE4-D1FE-4BF1-812B-1393F33A526F"></a>
<h3 id="OASAD-GUID-7B64FDE4-D1FE-4BF1-812B-1393F33A526F" class="sect3"><span class="enumeration_section">13.7.1</span> SOA Transactions are Failing and Logs Indicate the SOA Database is Running Out of Space</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>SOA transactions are failing and logs indicate that the database is running out of space. The problem may occur with the SOA dehydration store or MDS store running out of space due to a high volume of transactions. In the latter example, the following errors are seen:</p>
<pre dir="ltr">
java.sql.SQLException: ORA-01653: unable to extend table SH_MDS.CUBE_INSTANCE by
16 in tablespace FUSION_TS_TOOLS 
</pre>
<p>This indicates that the tablespace is full and the database cannot extend it.</p>
<p><span class="bold">Solution</span></p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Purge the SOA dehydration store tables periodically, taking into account the appropriate record retention policies and ensuring that the applications have no dependencies on runtime data.</span>
<div>
<p>The purge should be followed by commands to coalesce the space. For the purging strategy to work, it is important to understand how long to retain the data in the database. Factors that drive the retention policy include the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Legal requirements</p>
</li>
<li>
<p>Line of business requirements</p>
</li>
<li>
<p>Overall company policy on retention of data</p>
</li>
</ul>
<p>The longer the retention policy, the greater the volume of data that must be stored and, correspondingly, the higher the disk capacity requirements.</p>
</div>
</li>
<li class="stepexpand"><span>Ensure that the database hardware has sufficient resources to handle the demands of Oracle Database partitioning before configuring the tables for partitioning.</span>
<div>
<p>For the SOA dehydration store, database partitioning using range partitioning and hash partitioning is an optimal solution. Partitioning by definition means storing data in multiple tables to reduce bigger data sets into smaller, more manageable data sets. Partitioning strategies play a large role in easing maintenance overheads (dropping and pruning the partition) and improving performance. Partitioning should at least be done for tables having high activity. This plays a large role in balancing disk I/O and preventing hot disks. One important requirement that must be met before configuring the tables for partitioning is to ensure that the database hardware has sufficient resources to handle the demands of Oracle Database partitioning. If preproduction testing has indicated that the installation is large, Oracle expects that the environment (CPU, memory, and disk space) has been sized correctly to take advantage of the partitioning features.</p>
</div>
</li>
<li class="stepexpand"><span>Tune database parameters for memory, tablespace, and partitions to get maximum performance.</span></li>
<li class="stepexpand"><span>For other tablespaces running out of space, use the following query to check for free tablespace:</span>
<div>
<pre dir="ltr">
SELECT Total.tablespace_name "Tablespace Name", Free_space, (total_space-Free_
space) Used_space, total_space, round((Free_space*100/total_space),2) "Free %"
FROM (select tablespace_name, sum(bytes/1024/1024) Free_Space from sys.dba_
free_space group by tablespace_name) Free,
(select tablespace_name, sum(bytes/1024/1024) TOTAL_SPACE from sys.dba_data_
files group by tablespace_name) Total
WHERE Free.Tablespace_name = Total.tablespace_name AND Total.tablespace_name =
 '&lt;tablespacename&gt;'
ORDER BY 5;
</pre></div>
</li>
<li class="stepexpand"><span>To increase tablespace settings, use the administrator account. For example:</span>
<div>
<pre dir="ltr">
alter tablespace <span class="italic">tablespace_name</span> add datafile '<span class="italic">datafile_name</span>' size 500m
autoextend on;
</pre></div>
</li>
</ol>
<div class="section">
<p>The following documentation provides additional information about the topics discussed in this section:</p>
<ul style="list-style-type: disc;">
<li>
<p>For information tablespace settings, see the Resolving Message Failure Caused by Too Many Open Files section in the <span class="italic"><span id="GUID-7B64FDE4-D1FE-4BF1-812B-1393F33A526F__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</li>
<li>
<p>For information about creating a purging strategy, see the Managing Database Growth section in the <span class="italic"><span><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</li>
<li>
<p>For information about tuning parameters, see the Tuning Database Parameters section in the <span class="italic"><span id="GUID-7B64FDE4-D1FE-4BF1-812B-1393F33A526F__ASPER"><cite>Tuning Performance</cite></span></span>.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD3158"></a>
<div class="props_rev_3"><a id="GUID-CB971EFB-D5A9-4EC0-8726-30519C24BD29"></a>
<h3 id="OASAD-GUID-CB971EFB-D5A9-4EC0-8726-30519C24BD29" class="sect3"><span class="enumeration_section">13.7.2</span> Slow Application Performance Such as Longer Time to Serve Pages or Finish Transactions</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>Slow application performance and/or memory trashing. For example, it may take longer to load and serve pages or to complete composite transactions. Response time may seem slower compared to normal behavior.</p>
<p>There are various reasons for slow performance. It may be due to a large number of servers running on the same host, or there may be a large number of records/sessions/locking at the database. Thread contention can also be a reason for poor performance.</p>
<p>All configuration changes in <span id="GUID-CB971EFB-D5A9-4EC0-8726-30519C24BD29__FAOEMFRAMESHORT">Fusion Applications Control</span> may be unavailable due to this problem.</p>
<p><span class="bold">Solution</span></p>
<ol>
<li>
<p>Check the CPU utilization to see if it is saturated due to a heavy load or an excessive number of processes in relation to CPU capacity.</p>
<p>If CPU utilization is at 100% during normal load hours (the target should be 70-80%), there is no capacity to handle a peak load and the hardware resources are insufficient. Add scale-out servers to handle the additional load.</p>
</li>
<li>
<p>Check applications using <span>Fusion Applications Control</span> to report on performance. Check the performance of ADF services and the invoke/response times in the BPEL process audit trail to identify if the issue is in <span id="GUID-CB971EFB-D5A9-4EC0-8726-30519C24BD29__FA">Oracle Fusion Applications</span>.</p>
</li>
<li>
<p>To maximize performance, it is recommended not to set the logging level higher than the default <span class="bold">INFO</span> level.</p>
<p>For debugging purposes, the logging level must be set to the <span class="bold">FINEST</span> level. However, after issues are resolved, reset the logging level to the default level for best performance. It is also recommended to set <span class="bold">Audit Level</span> to <span class="bold">Production</span> in the SOA Infrastructure Common Properties page. This can be set in <span>Fusion Applications Control</span> as follows:</p>
<ol>
<li>
<p>Right-click <span class="bold">soa-infra (</span><span class="italic"><span class="bold">SOA_cluster_name</span></span><span class="bold">)</span>.</p>
</li>
<li>
<p>Choose <span class="bold">SOA Administration</span> then, <span class="bold">Common Properties</span>.</p>
</li>
<li>
<p>Set <span class="bold">Audit Level</span> to <span class="bold">Production</span>.</p>
</li>
</ol>
</li>
<li>
<p>Purge periodically based on retention requirements to maintain the service level agreements (SLAs).</p>
</li>
<li>
<p>Check the memory/IO/paging/swapping/CPU usage load statistics using Top or Glance or another monitoring tool.</p>
</li>
<li>
<p>Optimize the JVM to avoid full garbage collection or out-of-memory errors.</p>
<p>Frequent garbage collection can be either due to higher memory usage or memory leaks.</p>
<ol>
<li>
<p>Ensure that the sum of the maximum heap size of all the JVMs running on the system does not exceed the amount of available physical RAM to avoid operating system level paging activity.</p>
</li>
<li>
<p>Use the JRockit mission control memory profiling tools to get thread dumps and memory snapshots, which helps Oracle Support Services debug any code issues.</p>
</li>
</ol>
</li>
<li>
<p>Optimize threads to avoid contention. Get a thread dump to investigate and submit it to Oracle Support Services.</p>
</li>
<li>
<p>Check the JVM and thread dumps for methods invoking the database to identify if database performance is a bottleneck.</p>
</li>
<li>
<p>Run database Automatic Workload Repository (AWR) snapshots to identify causes of database performance issues.</p>
</li>
<li>
<p>Ensure that database statistics are updated at regular intervals and other tunable parameters for memory, tablespace, and partitions are used effectively to obtain maximum performance.</p>
<p>Here are some common tuning recommendations:</p>
<ul style="list-style-type: disc;">
<li>
<p>Put indexes and tables in as physically separate disk areas if possible.</p>
</li>
<li>
<p>Never put rollback segments with data or index segments.</p>
</li>
<li>
<p>Separate highly active tables and indexes into their own tablespaces.</p>
</li>
<li>
<p>Partition high activity tables and indexes to help balance disk I/O and prevent hot disks.</p>
</li>
<li>
<p>Have processes in place to generate database table statistics at regular intervals.</p>
</li>
</ul>
</li>
<li>
<p>Tune database tables to control the high watermark (HWM) contention of large objects. Tune database advanced queues (AQ) to control high watermark (HWM) contention and ensure consistent performance of producing and consuming messages from AQ.</p>
<p>Specifically, the AQs to be aware of are as follows:</p>
<div class="tblformal" id="GUID-CB971EFB-D5A9-4EC0-8726-30519C24BD29__GUID-3B2648B2-D473-434B-83E8-73605D5A50CA">
<table class="cellalignment27" summary="Family queues">
<thead>
<tr class="cellalignment11">
<th class="cellalignment56" id="d129285e6288">Family AQ</th>
<th class="cellalignment96" id="d129285e6291">Queue Name</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e6296" headers="d129285e6288">
<p>EDN</p>
</td>
<td class="cellalignment97" headers="d129285e6296 d129285e6291">
<p><code class="codeph">EDN_EVENT_QUEUE_TABLE</code> and <code class="codeph">EDN_OAOO_DELIVERY_TABLE</code></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e6307" headers="d129285e6288">
<p>CRM</p>
</td>
<td class="cellalignment97" headers="d129285e6307 d129285e6291">
<p><code class="codeph">CRM_AsyncWS_Request</code> and <code class="codeph">CRM_AsyncWS_Response</code></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e6318" headers="d129285e6288">
<p>HCM</p>
</td>
<td class="cellalignment97" headers="d129285e6318 d129285e6291">
<p><code class="codeph">HCM_AsyncWS_Request</code> and <code class="codeph">HCM_AsyncWS_Response</code></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e6329" headers="d129285e6288">
<p>FIN</p>
</td>
<td class="cellalignment97" headers="d129285e6329 d129285e6291">
<p><code class="codeph">FIN_AsyncWS_Request</code> and <code class="codeph">Fin_AsyncWS_Response</code></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e6340" headers="d129285e6288">
<p>PRC</p>
</td>
<td class="cellalignment97" headers="d129285e6340 d129285e6291">
<p><code class="codeph">PRC_AsyncWS_Request</code> and <code class="codeph">PRC_AsyncWS_Response</code></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e6351" headers="d129285e6288">
<p>PRJ</p>
</td>
<td class="cellalignment97" headers="d129285e6351 d129285e6291">
<p><code class="codeph">PRJ_AsyncWS_Request</code> and <code class="codeph">PRJ_AsyncWS_Response</code></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e6362" headers="d129285e6288">
<p>SCM</p>
</td>
<td class="cellalignment97" headers="d129285e6362 d129285e6291">
<p><code class="codeph">SCM_AsyncWS_Request</code> and <code class="codeph">SCM_AsyncWS_Response</code></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e6373" headers="d129285e6288">
<p>COMMON</p>
</td>
<td class="cellalignment97" headers="d129285e6373 d129285e6291">
<p><code class="codeph">COMMON_AsyncWS_Request</code> and <code class="codeph">COMMON_AsyncWS_Response</code></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e6384" headers="d129285e6288">
<p>IC</p>
</td>
<td class="cellalignment97" headers="d129285e6384 d129285e6291">
<p><code class="codeph">IC_AsyncWS_Request</code> and <code class="codeph">IC_AsyncWS_Response</code></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e6395" headers="d129285e6288">
<p>Cross Family Business Event Subscriptions</p>
</td>
<td class="cellalignment97" headers="d129285e6395 d129285e6291">
<p><code class="codeph">ACR_XFAMILY_EVENT_Q</code> and <code class="codeph">ACR_XFAMILY_EVENT_QT</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></li>
<li>
<p>Tune the BPEL and EDN thread counts to ensure optimal settings (for example, the <span class="bold">Dispatcher Invoke Threads</span> and <span class="bold">Dispatcher Engine Threads</span> properties on the BPEL Service Engine Properties page in <span>Fusion Applications Control</span>). If the thread configuration is too high, the servers run out of memory. If they are too low, the messages start backing up.</p>
</li>
<li>
<p>Tune the BPEL properties to reduce overhead (for example, disable the <span class="bold">ValidateXML</span> and <span class="bold">StatsLastN</span> (statistics gathering batch size) properties on the BPEL Service Engine Properties page in <span>Fusion Applications Control</span>) if they are not needed.</p>
</li>
<li>
<p>In case of integration with packaged applications (for example, Siebel), check if the issue lies with the legacy applications.</p>
</li>
</ol>
<p>The following documentation provides additional information about the topics discussed in this section:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>For information about performance tuning the various components, see the Top Performance Areas and the SOA Suite Components section in the <span class="italic"><span id="GUID-CB971EFB-D5A9-4EC0-8726-30519C24BD29__ASPER"><cite>Tuning Performance</cite></span></span>.</p>
</li>
<li>
<p>For information about setting properties on the BPEL Service Engine Properties page, see the Configuring BPEL Process Service Engine Properties section in the <span class="italic"><span id="GUID-CB971EFB-D5A9-4EC0-8726-30519C24BD29__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</li>
<li>
<p>For information about identifying the tables where data growth may lead to performance issues, see the Identifying Tables Impacted By Instance Data Growth section in the <span class="italic"><span><cite>Tuning Performance</cite></span></span>.</p>
</li>
<li>
<p>For information about tuning, see the Tuning Database Parameters section in the <span class="italic"><span><cite>Tuning Performance</cite></span></span>.</p>
</li>
<li>
<p>For information about the use of the purge scripts, see the Managing Database Growth section in the <span class="italic"><span><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD3161"></a>
<div class="props_rev_3"><a id="GUID-5F57285E-397A-4ED6-A166-DE6CDFB8BC5E"></a>
<h3 id="OASAD-GUID-5F57285E-397A-4ED6-A166-DE6CDFB8BC5E" class="sect3"><span class="enumeration_section">13.7.3</span> Slow <span>Fusion Applications Control</span> Performance</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p><span id="GUID-5F57285E-397A-4ED6-A166-DE6CDFB8BC5E__FAOEMFRAMESHORT">Fusion Applications Control</span> pages are loading very slowly.</p>
<p><span class="bold">Solution</span></p>
<p>To improve <span>Fusion Applications Control</span> page load times on pages with instance and fault metrics, set the SOA Infrastructure <span class="bold">Display Data Counts</span> properties.</p>
</div>
<!-- class="section" -->
<ol>
<li><span>Right-click <span class="bold">soa-infra (</span><span class="italic"><span class="bold">SOA_cluster_name</span></span><span class="bold">)</span>.</span></li>
<li><span>Choose <span class="bold">SOA Administration</span> then, <span class="bold">Common Properties</span>.</span></li>
<li><span>In the <span class="bold">Display Data Counts</span> section, deselect the <span class="bold">Disable fetching of instance and fault count metrics</span> checkbox.</span></li>
<li><span>Reduce the <span class="bold">Duration Details</span> value.</span></li>
<li><span>Click <span class="bold">Apply</span>.</span></li>
</ol>
<div class="section">
<p>In addition to setting this property, it is also useful to scope queries by time where available (for example, only show items occurring in the last hour).</p>
<p>For more information, see the Optimizing the Loading of Pages with Instance and Fault Metrics section in the <span class="italic"><span id="GUID-5F57285E-397A-4ED6-A166-DE6CDFB8BC5E__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="OASAD3164"></a>
<div class="props_rev_3"><a id="GUID-0A1076D7-946D-4662-8F71-34CCFA0FD7C9"></a>
<h2 id="OASAD-GUID-0A1076D7-946D-4662-8F71-34CCFA0FD7C9" class="sect2"><span class="enumeration_section">13.8</span> Maintenance</h2>
<div>
<p>This section contains the following topics that describe common problems and solutions for <span id="GUID-0A1076D7-946D-4662-8F71-34CCFA0FD7C9__SOA">Oracle SOA Suite</span> maintenance:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-DA540504-B434-4A42-A59F-EBFA9CAF1A51">JVM is Suspended If Any In-use Log Directories are Deleted</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-739336C4-B10A-433F-BB88-0E05F1B5B1F5">Server Start Script Does Not Work for Scale-Out (Postprovisioning) Servers</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-20A7B91F-9D85-4A5B-AFDA-79FF92935A88">SOA Server Does Not Start</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-19903AD8-7893-4309-B5C8-B4833C3C5B30">SOA Server Is Not Responding To Administrative Commands</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-2BD848AC-A10B-42E2-8B64-CC0554EE3892">Delete a Composite Left in an Inconsistent State Due to a Failed Patch</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-E4283CE5-1005-487E-9A63-C48EDF8C7EA2">Increased Load Observed on RAC Instances when Using Multiple Oracle RAC Servers</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-64B1EEE1-B505-4410-995F-5D98E9361515">List of SOA Composite State Values</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-2AAC1D69-BF9B-4DCF-9417-A06648CA0D4B">Log Files Have Been Deleted or Are Missing</a></p>
</li>
</ul>
</div>
<a id="OASAD3165"></a>
<div class="props_rev_3"><a id="GUID-DA540504-B434-4A42-A59F-EBFA9CAF1A51"></a>
<h3 id="OASAD-GUID-DA540504-B434-4A42-A59F-EBFA9CAF1A51" class="sect3"><span class="enumeration_section">13.8.1</span> JVM is Suspended If Any In-use Log Directories are Deleted</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>JRockit writes log information (called flight recorder files) under <code class="codeph">/tmp</code> when using JRockit Mission Control. When it rotates to a new flight recorder file, the JVM is suspended until it completes. If the old directories in use under <code class="codeph">/tmp</code> are deleted (for example, a cleanup or custom maintenance script to run to clear <code class="codeph">/tmp</code> when it is close to full to avoid server downtime), the domain may go into a suspended state because the JVM may wait for a directory that no longer exists.</p>
<p><span class="bold">Solution</span></p>
</div>
<!-- class="section" -->
<ol>
<li><span>Change any cleanup scripts/procedures to first shut down the domain cleanly.</span></li>
<li><span>Perform a cleanup of <code class="codeph">/tmp</code>.</span></li>
<li><span>Restart the domain.</span></li>
</ol>
<div class="section">
<p>To recover existing, suspended JVMs without restarting them, the directories that the JVM was trying to use must be recreated.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD3168"></a>
<div class="props_rev_3"><a id="GUID-739336C4-B10A-433F-BB88-0E05F1B5B1F5"></a>
<h3 id="OASAD-GUID-739336C4-B10A-433F-BB88-0E05F1B5B1F5" class="sect3"><span class="enumeration_section">13.8.2</span> Server Start Script Does Not Work for Scale-Out (Postprovisioning) Servers</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>Scale-out servers, created after provisioning, cannot be started using back-end commands. The script <code class="codeph">start_fusion_Allservers.sh</code> only starts servers that are created during provisioning time.</p>
<p><span class="bold">Solution</span></p>
<p>To start scale-out servers, use <span id="GUID-739336C4-B10A-433F-BB88-0E05F1B5B1F5__FAOEMFRAMESHORT">Fusion Applications Control</span>. See the <a href="GUID-F6FF7583-44EE-498C-90F4-86DB7AF53B39.htm#GUID-F6FAB35E-9F50-4E72-B48A-B1B2EB847F69">Start and Stop an Oracle WebLogic Server Cluster in a Product Family for a Configuration Change</a> section.</p>
</div>
</div>
<a id="OASAD3171"></a>
<div class="props_rev_3"><a id="GUID-20A7B91F-9D85-4A5B-AFDA-79FF92935A88"></a>
<h3 id="OASAD-GUID-20A7B91F-9D85-4A5B-AFDA-79FF92935A88" class="sect3"><span class="enumeration_section">13.8.3</span> SOA Server Does Not Start</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>The SOA server (<code class="codeph">soa_infra</code>) does not start.</p>
<p><span class="bold">Solution</span></p>
<p>There can be various reasons for server startup issues. A discovery-based approach to find the root cause is required. Check the server and diagnostic logs as a first attempt to diagnose the issue. In addition, check the following:</p>
<ol>
<li>
<p>Check if the database is not available or there are not enough connections available. Some failures with SOA runtime can result from database outage/connectivity issues. Perform the following steps:</p>
<ol>
<li>
<p>Log in to <span id="GUID-20A7B91F-9D85-4A5B-AFDA-79FF92935A88__WLS">Oracle WebLogic Server</span> Administration Console.</p>
</li>
<li>
<p>In the <span class="bold">Domain Structure</span>, view the status by selecting <span class="bold">Services</span> then, <span class="bold">Data Sources</span> then, <span class="bold">SOADatasource</span> then, <span class="bold">Monitoring</span> and then, <span class="bold">Testing</span> to test the data source. This can also be checked from a SQL prompt.</p>
</li>
</ol>
</li>
<li>
<p>Check the list of ports used for port conflicts.</p>
</li>
<li>
<p>Check if the MDS repository is unable to load shared documents (incorrect MDS configuration or the database that holds the MDS schema is not reachable).</p>
</li>
<li>
<p>Check the Coherence configuration if using a SOA cluster (use of unicast versus multicast).</p>
<p>This issue only applies after provisioning is complete. Clustering of SOA servers may fail if there are port conflicts (used by Coherence). For example, one SOA server may be picking up the deployment, but the other server is not. In some cases, this may only present the following error:</p>
<pre dir="ltr">
[soa_server1] [ERROR] [] [Coherence] [tid: Logger@352821903 3.6.0.4] 
[ecid: 46f620208907e045:63f295ec:12dd091ec2e:-8000-0000000000000003,1:27187] 
[APP: soa-infra] 2011-01-28 23:06:19.463/414.816 Oracle Coherence GE 3.6.0.4 
&lt;Error&gt; (thread=[ACTIVE] ExecuteThread: '0' for queue: 'weblogic.kernel.Default
 (self-tuning)', member=n/a): 
Error while starting cluster: com.tangosol.net.RequestTimeoutException: Timeout
 during service start: ServiceInfo(Id=0, Name=Cluster, Type=Cluster[[...
</pre>
<p>In this example, Coherence timeouts are prominently available. However, sometimes it presents itself with an unrelated error, such as the following:</p>
<pre dir="ltr">
Error creating bean with name 'SensorManager' defined in ServletContext
resource
</pre>
<p>The root cause of this is still primarily related to Coherence configuration.</p>
</li>
<li>
<p>Check if both the Administration Server and Managed Server ports are open and accessible.</p>
</li>
<li>
<p>Check if Managed Server startup failed because the Administration Server is not reachable.</p>
</li>
<li>
<p>Check network issues (for example, IP routing filtering/rules that may be causing issues).</p>
</li>
<li>
<p>Check <span>Oracle WebLogic Server</span> LDAP security corruption.</p>
<p>The Managed Server may report that policies for the application System MBeans Browser already exist or do not exist.</p>
</li>
</ol>
<p>For more information, see sections Setting the Frontend URL for the Administration Console and Setting Redirection Preferences and Setting the Frontend HTTP Host and Port in <span class="italic"><span id="GUID-20A7B91F-9D85-4A5B-AFDA-79FF92935A88__SOEDG"><cite>Enterprise Deployment Guide for Oracle SOA Suite</cite></span></span>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD3375"></a>
<div class="props_rev_3"><a id="GUID-19903AD8-7893-4309-B5C8-B4833C3C5B30"></a>
<h3 id="OASAD-GUID-19903AD8-7893-4309-B5C8-B4833C3C5B30" class="sect3"><span class="enumeration_section">13.8.4</span> SOA Server Is Not Responding To Administrative Commands</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>The SOA server (<code class="codeph">soa_infra</code>) is not responding to administrative commands. This problem can be due to the environment using a load balancer, and the default listener address or channel is local-only. Therefore, the connection cannot be made from the external client or server.</p>
<p><span class="bold">Solution</span></p>
<p>To resolve this problem, perform the following steps from the <span id="GUID-19903AD8-7893-4309-B5C8-B4833C3C5B30__WLS">Oracle WebLogic Server</span> Administration Console:</p>
<ol>
<li>
<p>Ensure that the listener address is correctly defined and accessible.</p>
<ol>
<li>
<p>From the <span class="bold">Domain Structure</span>, expand <span class="bold">Environment</span> and select <span class="bold">Servers</span>.</p>
</li>
<li>
<p>From the <span class="bold">Servers</span> table, click <span class="bold">AdminServer(admin)</span>.</p>
</li>
<li>
<p>From the Settings for AdminServer page, click the <span class="bold">Protocols</span> tab.</p>
</li>
<li>
<p>Click the <span class="bold">HTTP</span> subtab.</p>
</li>
<li>
<p>Set the <span class="bold">Frontend Host</span> property to the load balancer address.</p>
</li>
</ol>
</li>
<li>
<p>Similarly, set the <span class="bold">Frontend HTTP Host</span> and <span class="bold">Frontend HTTP Port</span> properties for the SOA cluster:</p>
<ol>
<li>
<p>From the <span class="bold">Domain Structure</span>, expand <span class="bold">Environment</span> and select <span class="bold">Clusters</span>.</p>
</li>
<li>
<p>From the <span class="bold">Clusters</span> table, click <span class="italic"><span class="bold">domain</span></span><span class="bold">_SOACluster</span></p>
</li>
<li>
<p>From the Settings for the <span class="italic">domain</span>_SOACluster page, click the <span class="bold">HTTP</span> subtab.</p>
</li>
<li>
<p>Set the <span class="bold">Frontend Host</span> property to the load balancer address.</p>
</li>
<li>
<p>Change the <span class="bold">Frontend HTTP Host</span> and <span class="bold">Frontend HTTP Port</span> properties.</p>
</li>
</ol>
</li>
</ol>
<p>For more information, see sections Setting the Frontend URL for the Administration Console and Setting Redirection Preferences and Setting the Frontend HTTP Host and Port section in the <span class="italic"><span id="GUID-19903AD8-7893-4309-B5C8-B4833C3C5B30__SOEDG"><cite>Enterprise Deployment Guide for Oracle SOA Suite</cite></span></span>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD3380"></a>
<div class="props_rev_3"><a id="GUID-2BD848AC-A10B-42E2-8B64-CC0554EE3892"></a>
<h3 id="OASAD-GUID-2BD848AC-A10B-42E2-8B64-CC0554EE3892" class="sect3"><span class="enumeration_section">13.8.5</span> Delete a Composite Left in an Inconsistent State Due to a Failed Patch</h3>
<div>
<p>For troubleshooting information about this issue, see <a class="olink OAPAT814" target="_blank" href="../OAPAT/GUID-C9E7FC50-20BE-4F33-9760-E5B8C3F978DE.htm#OAPAT814">Troubleshoot SOA Composite Deployment Failures</a> in the <span class="italic"><span id="GUID-2BD848AC-A10B-42E2-8B64-CC0554EE3892__OAPAT"><cite>Oracle Fusion Applications Patching Guide</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3177"></a>
<div class="props_rev_3"><a id="GUID-E4283CE5-1005-487E-9A63-C48EDF8C7EA2"></a>
<h3 id="OASAD-GUID-E4283CE5-1005-487E-9A63-C48EDF8C7EA2" class="sect3"><span class="enumeration_section">13.8.6</span> Increased Load Observed on RAC Instances when Using Multiple Oracle RAC Servers</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>An increased load is seen on Oracle Real Application Clusters (Oracle RAC) instances when using multiple Oracle RAC servers.</p>
<p><span class="bold">Solution</span></p>
<p>Use a multidata source against Oracle RAC instances using load balancing rather than failover. This ensures that the load is evenly distributed rather than all load staying on one node until it fails over, at which point all the connections are failed over to the other node.</p>
<p>Ensure thatthe <span class="bold">Connection Test Frequency Seconds</span> property at the multidata source level are set to a nonzero value. A value that is too low means more load on the listeners/RAC instances when multiple servers attempt to reconnect at the same time.</p>
<p>The <span id="GUID-E4283CE5-1005-487E-9A63-C48EDF8C7EA2__FA">Oracle Fusion Applications</span> default configuration for the these settings has been tuned for best performance. Only change these settings when the configuration has <span class="italic">not</span> been set out-of-the-box by <span>Oracle Fusion Applications</span>.</p>
<p>For more information about configuring JDBC multidata sources, see <span class="italic"><span><cite>Administering JDBC Data Sources for Oracle WebLogic Server</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3385"></a><a id="OASAD3183"></a>
<div class="props_rev_3"><a id="GUID-64B1EEE1-B505-4410-995F-5D98E9361515"></a>
<h3 id="OASAD-GUID-64B1EEE1-B505-4410-995F-5D98E9361515" class="sect3"><span class="enumeration_section">13.8.7</span> List of SOA Composite State Values</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>Get a list of all composite state values from the <code class="codeph">*_SOAINFRA.COMPOSITE_INSTANCE</code> state table (for diagnosis).</p>
<p><span class="bold">Solution</span></p>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-64B1EEE1-B505-4410-995F-5D98E9361515__BABGFAAC" title="Composite states">Table 13-2</a> shows the composite state values.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-64B1EEE1-B505-4410-995F-5D98E9361515__BABGFAAC">
<p class="titleintable">Table 13-2 Composite State Values</p>
<table class="cellalignment32" title="Composite State Values" summary="Composite states">
<thead>
<tr class="cellalignment11">
<th class="cellalignment56" id="d129285e7099">State</th>
<th class="cellalignment96" id="d129285e7102">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7107" headers="d129285e7099">
<p><code class="codeph">0</code></p>
</td>
<td class="cellalignment97" headers="d129285e7107 d129285e7102">
<p>Running</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7115" headers="d129285e7099">
<p><code class="codeph">1</code></p>
</td>
<td class="cellalignment97" headers="d129285e7115 d129285e7102">
<p>Completed</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7123" headers="d129285e7099">
<p><code class="codeph">2</code></p>
</td>
<td class="cellalignment97" headers="d129285e7123 d129285e7102">
<p>Running with faults</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7131" headers="d129285e7099">
<p><code class="codeph">3</code></p>
</td>
<td class="cellalignment97" headers="d129285e7131 d129285e7102">
<p>Completed with faults</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7139" headers="d129285e7099">
<p><code class="codeph">4</code></p>
</td>
<td class="cellalignment97" headers="d129285e7139 d129285e7102">
<p>Running with recovery required</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7147" headers="d129285e7099">
<p><code class="codeph">5</code></p>
</td>
<td class="cellalignment97" headers="d129285e7147 d129285e7102">
<p>Completed with recovery required</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7155" headers="d129285e7099">
<p><code class="codeph">6</code></p>
</td>
<td class="cellalignment97" headers="d129285e7155 d129285e7102">
<p>Running with faults and recovery required</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7163" headers="d129285e7099">
<p><code class="codeph">7</code></p>
</td>
<td class="cellalignment97" headers="d129285e7163 d129285e7102">
<p>Completed with faults and recovery required</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7171" headers="d129285e7099">
<p><code class="codeph">8</code></p>
</td>
<td class="cellalignment97" headers="d129285e7171 d129285e7102">
<p>Running with suspended</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7179" headers="d129285e7099">
<p><code class="codeph">9</code></p>
</td>
<td class="cellalignment97" headers="d129285e7179 d129285e7102">
<p>Completed with suspended</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7187" headers="d129285e7099">
<p><code class="codeph">10</code></p>
</td>
<td class="cellalignment97" headers="d129285e7187 d129285e7102">
<p>Running with faults and suspended</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7196" headers="d129285e7099">
<p><code class="codeph">11</code></p>
</td>
<td class="cellalignment97" headers="d129285e7196 d129285e7102">
<p>Completed with faults and suspended</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7204" headers="d129285e7099">
<p><code class="codeph">12</code></p>
</td>
<td class="cellalignment97" headers="d129285e7204 d129285e7102">
<p>Running with recovery required and suspended</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7212" headers="d129285e7099">
<p><code class="codeph">13</code></p>
</td>
<td class="cellalignment97" headers="d129285e7212 d129285e7102">
<p>Completed with recovery required and suspended</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7220" headers="d129285e7099">
<p><code class="codeph">14</code></p>
</td>
<td class="cellalignment97" headers="d129285e7220 d129285e7102">
<p>Running with faults, recovery required, and suspended</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7228" headers="d129285e7099">
<p><code class="codeph">15</code></p>
</td>
<td class="cellalignment97" headers="d129285e7228 d129285e7102">
<p>Completed with faults, recovery required, and suspended</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7236" headers="d129285e7099">
<p><code class="codeph">16</code></p>
</td>
<td class="cellalignment97" headers="d129285e7236 d129285e7102">
<p>Running with terminated</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7244" headers="d129285e7099">
<p><code class="codeph">17</code></p>
</td>
<td class="cellalignment97" headers="d129285e7244 d129285e7102">
<p>Completed with terminated</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7252" headers="d129285e7099">
<p><code class="codeph">18</code></p>
</td>
<td class="cellalignment97" headers="d129285e7252 d129285e7102">
<p>Running with faults and terminated</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7260" headers="d129285e7099">
<p><code class="codeph">19</code></p>
</td>
<td class="cellalignment97" headers="d129285e7260 d129285e7102">
<p>Completed with faults and terminated</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7268" headers="d129285e7099">
<p><code class="codeph">20</code></p>
</td>
<td class="cellalignment97" headers="d129285e7268 d129285e7102">
<p>Running with recovery required and terminated</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7276" headers="d129285e7099">
<p><code class="codeph">21</code></p>
</td>
<td class="cellalignment97" headers="d129285e7276 d129285e7102">
<p>Completed with recovery required and terminated</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7285" headers="d129285e7099">
<p><code class="codeph">22</code></p>
</td>
<td class="cellalignment97" headers="d129285e7285 d129285e7102">
<p>Running with faults, recovery required, and terminated</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7293" headers="d129285e7099">
<p><code class="codeph">23</code></p>
</td>
<td class="cellalignment97" headers="d129285e7293 d129285e7102">
<p>Completed with faults, recovery required, and terminated</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7301" headers="d129285e7099">
<p><code class="codeph">24</code></p>
</td>
<td class="cellalignment97" headers="d129285e7301 d129285e7102">
<p>Running with suspended and terminated</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7309" headers="d129285e7099">
<p><code class="codeph">25</code></p>
</td>
<td class="cellalignment97" headers="d129285e7309 d129285e7102">
<p>Completed with suspended and terminated</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7317" headers="d129285e7099">
<p><code class="codeph">26</code></p>
</td>
<td class="cellalignment97" headers="d129285e7317 d129285e7102">
<p>Running with faulted, suspended, and terminated</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7325" headers="d129285e7099">
<p><code class="codeph">27</code></p>
</td>
<td class="cellalignment97" headers="d129285e7325 d129285e7102">
<p>Completed with faulted, suspended, and terminated</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7333" headers="d129285e7099">
<p><code class="codeph">28</code></p>
</td>
<td class="cellalignment97" headers="d129285e7333 d129285e7102">
<p>Running with recovery required, suspended, and terminated</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7341" headers="d129285e7099">
<p><code class="codeph">29</code></p>
</td>
<td class="cellalignment97" headers="d129285e7341 d129285e7102">
<p>Completed with recovery required, suspended, and terminated</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7349" headers="d129285e7099">
<p><code class="codeph">30</code></p>
</td>
<td class="cellalignment97" headers="d129285e7349 d129285e7102">
<p>Running with faulted, recovery required, suspended, and terminated</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7357" headers="d129285e7099">
<p><code class="codeph">31</code></p>
</td>
<td class="cellalignment97" headers="d129285e7357 d129285e7102">
<p>Completed with faulted, recovery required, suspended, and terminated</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7365" headers="d129285e7099">
<p><code class="codeph">32</code></p>
</td>
<td class="cellalignment97" headers="d129285e7365 d129285e7102">
<p>Unknown</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment59" id="d129285e7374" headers="d129285e7099">
<p><code class="codeph">64</code></p>
</td>
<td class="cellalignment97" headers="d129285e7374 d129285e7102">
<p>State</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="OASAD3186"></a>
<div class="props_rev_3"><a id="GUID-2AAC1D69-BF9B-4DCF-9417-A06648CA0D4B"></a>
<h3 id="OASAD-GUID-2AAC1D69-BF9B-4DCF-9417-A06648CA0D4B" class="sect3"><span class="enumeration_section">13.8.8</span> Log Files Have Been Deleted or Are Missing</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>The SOA log files are getting deleted. This is typically due to the retention policy set in <span id="GUID-2AAC1D69-BF9B-4DCF-9417-A06648CA0D4B__FAOEMFRAMESHORT">Fusion Applications Control</span>.</p>
<p><span class="bold">Solution</span></p>
<p>Change the retention policy for the <code class="codeph">odl-handler</code> to the appropriate value in <span>Fusion Applications Control</span>:</p>
</div>
<!-- class="section" -->
<ol>
<li><span>Right-click <span class="bold">soa-infra</span>.</span></li>
<li><span>Choose <span class="bold">Logs</span> then, <span class="bold">Log Configuration</span>.</span></li>
</ol>
</div>
</div>
</div>
<a id="OASAD3189"></a>
<div class="props_rev_3"><a id="GUID-3EDDDBC6-1AC1-4E3F-BFDF-81BD50984008"></a>
<h2 id="OASAD-GUID-3EDDDBC6-1AC1-4E3F-BFDF-81BD50984008" class="sect2"><span class="enumeration_section">13.9</span> Custom Development (Extensibility)</h2>
<div>
<p>This section contains the following topics that describe common problems and solutions for <span id="GUID-3EDDDBC6-1AC1-4E3F-BFDF-81BD50984008__SOA">Oracle SOA Suite</span> runtime:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-AC45DBBA-9C59-463B-92E1-F648CACF3F70">Unable to Use Layered Customization on Specific Artifacts</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-59CBF4F2-437A-4BE4-AD19-35DDE44726CD">New or Deleted Artifacts Do Not Appear as a Layered Customization</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-3E0A3CD4-E11E-4D2B-BC9C-61A912D940C5">Warnings Regarding xml:id when Building or Deploying a Customized Composite</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-5162B67D-EC31-4154-99ED-A2708D95024A">Distributed Queue Topic Messages Are Retrieved Multiple Times by Subscribers</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-71544A33-F158-4D1D-A1B2-46E39B5449C1">Internal Key is Displayed Instead of a Translated String</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-09D5E286-5E2E-42FD-90D4-8D7FAB52849D">BPEL Activity Errors and the Log Shows Error "com.oracle.bpel.entity.dataprovider.EntityVarMgrException:zero Item"</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-E756E00B-B278-42BC-BB72-D183F1062FD8">BPEL Activity Errors and Log Shows Error "XPath variable or expression &lt;expression&gt; is empty"</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-60081E4A-E157-4FA5-9FA1-4BBD712EB44D">Unavailable Composite Errors Occurring Even Though the Target Service Is Up and Running</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-12EEEF4D-4BC4-44C5-8612-1D46C67B394F">High-Volume Cross Reference (XREF_DATA) Table Impacts Performance and Maintenance</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-DB5A628D-1150-4A7E-8708-32BEC273BEA5">Access Denied Error While Invoking an Oracle ADF BC Service from BPEL</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-1AFBF419-B2E3-48E6-851F-79F0C41ED322">Click Manage Approvals Page Gives a "SOA server may be down" or "No data to display" Error</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-8726BFA3-C386-4FCC-9A7C-24990619B7CE">Synchronous Service Invocation Errors Due to WS-Addressing</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-11382DB3-C7B8-485C-9B43-CC2D6AEEA0B1">Deploy Human Workflow Application Throws "Unable to resolve 'TaskQueryService'" Error</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-9BB6BE71-294D-458C-A347-44595BA0C7D7">"Invalid Subject" Error Thrown with Human Workflow API or Notification</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-2684828D-34CD-465B-8346-BFBCFB62A8BE">Task is Assigned to the Group/Role When It Is Expected to Go to Every User in the Group/Role Individually</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-CF5B9BC8-A182-4A3B-8C19-46953E640AF4">Task Completes Without Any Assignment Occurring</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-17D5AF4D-7686-43CB-BA4E-5262BDE0C607">Parallel Assignees Must Approve or Reject the Task Even Though the Parallel Completion Criteria is Met</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-A858E739-DC97-4434-8FA3-A8095CD71A82">All Added Adhoc Participants Disappear After a Page Refresh</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-BB1FE8F5-6E6A-4F78-BD90-8C58C3A6A698">Future Approvers Are Not Visible in the History Table</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-C6070D1F-B873-4900-9C78-970B866642AA">Message Appears in the History Table About a Correlation ID Not Being Passed or Any Exception Related to the Correlation ID</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-2AC481BB-6161-45A4-867B-7771339DBF37">Edit Toolbar Is Disabled or Not Shown</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-57D389C0-0ECA-47C4-8D18-0BD27F651948">oracle.jrf.UnknownPlatformException Error When Customizing an Oracle Mediator</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-D4B4CBDB-6C84-4A69-B2CF-92FCF702DB8E">java.lang.NullPointerException When Customizing an Oracle Mediator</a></p>
</li>
<li>
<p><a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-43B85055-8185-4276-8F80-B56B6742997D">JDeveloper Compilation Error in a SOA Project with SOA MDS Service Location</a></p>
</li>
</ul>
</div>
<a id="OASAD3388"></a>
<div class="props_rev_3"><a id="GUID-AC45DBBA-9C59-463B-92E1-F648CACF3F70"></a>
<h3 id="OASAD-GUID-AC45DBBA-9C59-463B-92E1-F648CACF3F70" class="sect3"><span class="enumeration_section">13.9.1</span> Unable to Use Layered Customization on Specific Artifacts</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>Only certain artifacts allow layered customization in <span id="GUID-AC45DBBA-9C59-463B-92E1-F648CACF3F70__JDEV">Oracle JDeveloper</span> because it requires editors that use XMLEF to make delta changes to the underlying Document Object Model (DOM). XMLEF is the XML Editing Framework. XMLEF is an <span>Oracle JDeveloper</span> framework that supports flexible editing of XML documents and is used extensively in layered customizations.</p>
<p><span class="bold">Solution</span></p>
<p>The following SOA artifact types are customizable:</p>
<ul style="list-style-type: disc;">
<li>
<p>Composite (<code class="codeph">composite.xml</code>)</p>
</li>
<li>
<p>BPEL process (<code class="codeph">.bpel</code>)</p>
</li>
<li>
<p><span id="GUID-AC45DBBA-9C59-463B-92E1-F648CACF3F70__MEDIATOR">Oracle Mediator</span> (<code class="codeph">.mplan</code>)</p>
</li>
</ul>
<p>The following SOA artifact types are not customizable:</p>
<ul style="list-style-type: disc;">
<li>
<p>XSL map (<code class="codeph">.xsl</code>)</p>
</li>
<li>
<p>Human task (<code class="codeph">.task</code>)</p>
</li>
<li>
<p>Decision service (<code class="codeph">.decs</code>)</p>
</li>
<li>
<p>Rules (<code class="codeph">.rules</code>)</p>
</li>
<li>
<p>Event definition (<code class="codeph">.edl</code>)</p>
</li>
<li>
<p>Domain value map (<code class="codeph">.dvm</code>)</p>
</li>
</ul>
<p>The following common artifact types are not customizable because Oracle XDK/WSDL APIs do not support customization (although their editors do use XMLEF to make delta changes to the underlying DOM):</p>
<ul style="list-style-type: disc;">
<li>
<p>XSD schema (<code class="codeph">.xsd</code>)</p>
</li>
<li>
<p>WSDL document (<code class="codeph">.wsdl</code>)</p>
</li>
</ul>
<p>Noncustomizable artifacts are not sensitive to a customization context. Any changes to those artifacts from any customization context are visible to other customization contexts.</p>
<p>For more information about customizations in <span>Oracle JDeveloper</span> and runtime tools (such as Oracle SOA Composer and <span id="GUID-AC45DBBA-9C59-463B-92E1-F648CACF3F70__BPEL_WORKLIST">Oracle BPM Worklist</span>), see the Customizing and Extending SOA Components section in the <span class="italic"><span id="GUID-AC45DBBA-9C59-463B-92E1-F648CACF3F70__OAEXT"><cite>Oracle Applications Cloud Customizing the Applications for Functional Administrators</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3391"></a>
<div class="props_rev_3"><a id="GUID-59CBF4F2-437A-4BE4-AD19-35DDE44726CD"></a>
<h3 id="OASAD-GUID-59CBF4F2-437A-4BE4-AD19-35DDE44726CD" class="sect3"><span class="enumeration_section">13.9.2</span> New or Deleted Artifacts Do Not Appear as a Layered Customization</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>Because MDS customization does not capture artifact creations or deletions as deltas in the customization role, artifact creations and deletions in one customization context are visible to other customization contexts.</p>
<p><span class="bold">Solution</span></p>
<p>Artifact creations and deletions are not customization context sensitive. Therefore, only existing artifact customizations are supported in layers. Because new artifacts cannot be added as part of a layer, the artifacts are added to the project like any other base artifact. Any component artifacts that are added to the project are not incorporated into the runtime composite model unless the <code class="codeph">composite.xml</code> file has explicitly referred to it. Therefore, if a customization did not alter <code class="codeph">composite.xml</code> to include the newly added component, the new artifacts have no impact. Of course, the new artifacts are saved along with the base artifacts.</p>
<p>Additions of any new artifact introduced in the composite definition as a customization (for example, XSLT artifacts) must be named appropriately to prevent collisions with base XSLT artifacts. References to the new XSLT files must be made within the <span id="GUID-59CBF4F2-437A-4BE4-AD19-35DDE44726CD__BPEL">Oracle BPEL Process Manager</span>/<span id="GUID-59CBF4F2-437A-4BE4-AD19-35DDE44726CD__MEDIATOR">Oracle Mediator</span> artifacts (through a layer).</p>
</div>
</div>
<a id="OASAD3394"></a>
<div class="props_rev_3"><a id="GUID-3E0A3CD4-E11E-4D2B-BC9C-61A912D940C5"></a>
<h3 id="OASAD-GUID-3E0A3CD4-E11E-4D2B-BC9C-61A912D940C5" class="sect3"><span class="enumeration_section">13.9.3</span> Warnings Regarding xml:id when Building or Deploying a Customized Composite</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>When building or deploying the customized composite, warnings similar to this may appear because the <code class="codeph">xml:id</code> element is not supported:</p>
<pre dir="ltr">
[scac] [WARNING] Line [13] Column [29] Schema validation failed for
 C:\customizationdemo\project1\composite.xml
&lt;Line 13, Column 29&gt;: XML-24535: (Error) Attribute
 'http://www.w3.org/XML/1998/namespace:id' not expected.
</pre>
<p><span class="bold">Solution</span></p>
<p>This warning can be ignored and should not prevent the composite successfully from deploying.</p>
</div>
</div>
<a id="OASAD3397"></a>
<div class="props_rev_3"><a id="GUID-5162B67D-EC31-4154-99ED-A2708D95024A"></a>
<h3 id="OASAD-GUID-5162B67D-EC31-4154-99ED-A2708D95024A" class="sect3"><span class="enumeration_section">13.9.4</span> Distributed Queue Topic Messages Are Retrieved Multiple Times by Subscribers</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>In a clustered environment, a queue topic is being retrieved multiple times by the subscribers. SOA clusters are typically homogenous (that is, each node has the same services running). Therefore, if a queue topic has multiple subscribers (for example, an error queue is subscribed to by a fallout notification service and a trouble ticketing service), then in a clustered environment, each service is running on every node. If it is a four-node cluster, then there are four instances of the fallout notification service and four instances of the trouble ticketing service, each of which retrieve the topic message. This is not desirable.</p>
<p><span class="bold">Solution</span></p>
<p>Set the consuming service singleton property to ensure that in a multi-node environment, only one of the subscriber instances can consume the topic message. In the example above, the fallout notification service and the trouble ticketing service each should set their singleton property so that each of them consumes the message only once by any one of the four instances.</p>
<pre dir="ltr">
&lt;service name="ConsumeFaultMessage" ui:wsdlLocation="ConsumeFaultMessage.wsdl"&gt;
&lt;interface.wsdl
interface="http://xmlns.oracle.com/pcbpel/adapter/jms/EH/AIAReadJMSNotificationPro
cess/ConsumeFaultMessage/#wsdl.interface(Consume_Message_ptt)"/&gt;
&lt;binding.jca config="ConsumeFaultMessage_jms.jca"&gt;
  &lt;property name="singleton"&gt;true&lt;/property&gt;
&lt;/binding.jca&gt;
&lt;/service&gt;
</pre></div>
</div>
<a id="OASAD3400"></a>
<div class="props_rev_3"><a id="GUID-71544A33-F158-4D1D-A1B2-46E39B5449C1"></a>
<h3 id="OASAD-GUID-71544A33-F158-4D1D-A1B2-46E39B5449C1" class="sect3"><span class="enumeration_section">13.9.5</span> Internal Key is Displayed Instead of a Translated String</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>An internal key is displayed instead of a translated string in the human task title, human task outcome, email subject and body, and human task mapped attributes displayed in <span id="GUID-71544A33-F158-4D1D-A1B2-46E39B5449C1__BPEL_WORKLIST">Oracle BPM Worklist</span>.</p>
<p><span class="bold">Solution</span></p>
<p>To resolve this problem:</p>
<ol>
<li>
<p>Check the SOA <span class="italic"><code class="codeph">server</code></span><code class="codeph">-diagnostic.log</code> for errors for each server in the cluster. If a resource bundle or the key is not found, a similar error stack that contains the composite name and resource bundle name is seen.</p>
<pre dir="ltr">
2010-09-29T23:45:46.702-07:00 soa_server1 ERROR \[\]
 oracle.soa.services.workflow.soa tid: orabpel.invoke.pool-4.thread-7 userId:
 weblogic
ecid:59ab739a26595dc1:-38d33932:12b614ddb44,0:1:100000026
APP: soa-infra composite_name: RC3HumanTaskComposite component_name: Humantask1
 component_instance_id: composite_instance_id: 310003
&lt;WorkflowServiceEngine.request&gt; Operation 'initiateTask' failed with exception
   'EJB Exception: : java.util.MissingResourceException:
Can't find bundleforbase name
   oracle.apps.hcm.people.soa.resource.HcmPeopleTopSoaBundleDummy, locale
 en\[\[
at
java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1427
)
at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1250)
at java.util.ResourceBundle.getBundle(ResourceBundle.java:952)
</pre></li>
<li>
<p>Confirm that the resource bundle has been deployed to the correct location in SOA MDS by first exporting the contents of SOA MDS and confirming that the resource bundle class is defined under <code class="codeph">/apps/resource</code>. Follow these steps to export the metadata contents from <span id="GUID-71544A33-F158-4D1D-A1B2-46E39B5449C1__FAOEMFRAMESHORT">Fusion Applications Control</span>:</p>
<ol>
<li>
<p>From the navigation pane, expand <span class="bold">SOA</span> and select <span class="bold">soa-infra</span>.</p>
</li>
<li>
<p>From the <span class="bold">SOA Infrastructure</span> menu, choose <span class="bold">Administration</span> then, <span class="bold">MDS Configuration</span>.</p>
</li>
<li>
<p>Select <span class="bold">Export metadata documents to an archive on the machine where the web browser is running</span>.</p>
</li>
<li>
<p>Click <span class="bold">Export</span>.</p>
</li>
</ol>
</li>
<li>
<p>If the resource bundle is not defined in SOA MDS or is in the wrong location in SOA MDS, then an error during patching may have been encountered or there is a problem with the resource bundle definition.</p>
<p>If the resource bundle is properly defined in SOA MDS and the string that is not translated is a mapped attribute that appears in the column heading of the worklist, then perform the followings steps to:</p>
<ul style="list-style-type: disc;">
<li>
<p>Set the System MBean Browser <span class="bold">WorkflowCustomClasspathURL</span> property to a value of <span class="bold">""</span>.</p>
</li>
<li>
<p>Apply the changes.</p>
</li>
<li>
<p>Set <span class="bold">WorkflowCustomClasspathURL</span> to <code class="codeph">"oramds:///apps/resource/"</code>.</p>
</li>
<li>
<p>Apply the changes in <span>Fusion Applications Control</span>.</p>
</li>
</ul>
<ol>
<li>
<p>Log in to <span>Fusion Applications Control</span> in the domain where the JAR file was deployed.</p>
</li>
<li>
<p>From the navigation pane, expand <span class="bold">SOA</span> and select <span class="bold">soa-infra</span>.</p>
</li>
<li>
<p>From the <span class="bold">SOA Infrastructure</span> menu, choose <span class="bold">SOA Administration</span> then, <span class="bold">System MBean Browser</span>.</p>
</li>
<li>
<p>Go to <span class="bold">Application Defined MBeans</span> then, <span class="bold">oracle.as.soainfra.config</span> then, <span class="bold">Server:</span> <span class="italic"><span class="bold">SOA_cluster_name</span></span> then, <span class="bold">WorkflowConfig</span> and then, <span class="bold">human-workflow</span>.</p>
</li>
<li>
<p>Remove the value in the <span class="bold">Value</span> column for the <span class="bold">WorkflowCustomClasspathURL</span> attribute.</p>
</li>
<li>
<p>Click <span class="bold">Apply</span>.</p>
</li>
<li>
<p>Enter <code class="codeph">oramds:///apps/resource/</code> in the <span class="bold">Value</span> column of the <span class="bold">WorkflowCustomClasspathURL</span> attribute.</p>
</li>
<li>
<p>Click <span class="bold">Apply</span>.</p>
</li>
</ol>
<p>If the resource bundle is properly defined in SOA MDS and the string that is not translated is not a mapped attribute that appears in the column heading of the worklist, then stop and restart the composite that references the resource bundle by following these steps:</p>
<ol>
<li>
<p>Log in to <span>Fusion Applications Control</span> in the domain where the JAR file was deployed.</p>
</li>
<li>
<p>From the navigation pane, expand <span class="bold">SOA</span> and select <span class="bold">soa-infra</span>.</p>
</li>
<li>
<p>Click <span class="bold">Shut Down</span>.</p>
</li>
<li>
<p>Click <span class="bold">Yes</span> in the confirmation window.</p>
</li>
<li>
<p>Click <span class="bold">Start Up</span>.</p>
</li>
<li>
<p>Click <span class="bold">Yes</span> in the confirmation window.</p>
</li>
</ol>
</li>
<li>
<p>Retest the transaction flow.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD3403"></a>
<div class="props_rev_3"><a id="GUID-09D5E286-5E2E-42FD-90D4-8D7FAB52849D"></a>
<h3 id="OASAD-GUID-09D5E286-5E2E-42FD-90D4-8D7FAB52849D" class="sect3"><span class="enumeration_section">13.9.6</span> BPEL Activity Errors and the Log Shows Error "com.oracle.bpel.entity.dataprovider.EntityVarMgrException:zero Item"</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>If entity variables are used in <span id="GUID-09D5E286-5E2E-42FD-90D4-8D7FAB52849D__BPEL">Oracle BPEL Process Manager</span>, this error may be thrown at runtime:</p>
<pre dir="ltr">
com.oracle.bpel.entity.dataprovider.EntityVarMgrException:zero item
</pre>
<p>When the entity variable tries to bind the key provided to it at runtime in <span>Oracle BPEL Process Manager</span> and if it cannot find the key in the database, it throws this error. This may be due to human error. Either the developer has passed an incorrect primary key value to bind to the entity variable or the composite has been deployed to the wrong business component (BC) URL in the deployment plan. To resolve, ensure that the primary key value that gets bound to the entity variable at runtime exists in the database used by the BC service.</p>
</div>
</div>
<a id="OASAD3406"></a>
<div class="props_rev_3"><a id="GUID-E756E00B-B278-42BC-BB72-D183F1062FD8"></a>
<h3 id="OASAD-GUID-E756E00B-B278-42BC-BB72-D183F1062FD8" class="sect3"><span class="enumeration_section">13.9.7</span> BPEL Activity Errors and Log Shows Error "XPath variable or expression &lt;expression&gt; is empty"</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>If the payload node used in an activity such as an assign activity in BPEL is empty/null, then it throws this error.</p>
<pre dir="ltr">
The XPath variable or expression
/ns4:findDtsPurchasingDeliverable1FindByDelStatusResponse/ns4:resultns2:Deliverabl
eId=$DeliverableIdVar/ns2:BatchId is empty at line 344. selectionFailure:
 com.oracle.bpel.client.BPELFault: faultName:
 {{http://schemas.xmlsoap.org/ws/2003/03/business-process/}selectionFailure}
</pre>
<p><span class="bold">Solution</span></p>
<p>This error is thrown when a selection operation performed either in a function or in an assignment encounters an error. If there is a possibility of getting a null/empty value for a payload element at runtime, then it is possible to get around this error by enclosing this element in a switch case with a condition check of (<code class="codeph">string-length(</code><span class="italic"><code class="codeph">payload_element</code></span><code class="codeph">) &gt; 0</code>) or a <code class="codeph">bpelx:assert</code> element to test for null conditions in their code. If these errors are encountered at runtime, there is information in the log and the BPEL audit trail flow.</p>
</div>
</div>
<a id="OASAD3409"></a>
<div class="props_rev_3"><a id="GUID-60081E4A-E157-4FA5-9FA1-4BBD712EB44D"></a>
<h3 id="OASAD-GUID-60081E4A-E157-4FA5-9FA1-4BBD712EB44D" class="sect3"><span class="enumeration_section">13.9.8</span> Unavailable Composite Errors Occurring Even Though the Target Service Is Up and Running</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>When a BPEL process has partner links targeted to external servers, during start up of the SOA server or activation of the BPEL composite, the BPEL service engine recognizes that the target server is down and marks the BPEL composite as unavailable. Even after the target server becomes available, there is no way to make the BPEL process available without restarting the complete SOA server or redeploying the BPEL process. Until then, the BPEL composite is not listed in the navigation pane of <span id="GUID-60081E4A-E157-4FA5-9FA1-4BBD712EB44D__FAOEMFRAMESHORT">Fusion Applications Control</span> and is only visible through the <span class="bold">Deployed Composites</span> tab. Even though the composite is displayed here (sometimes as active), if the process is clicked on, this error is received:</p>
<pre dir="ltr">
The composite &lt;Process Name&gt;[ &lt;Version&gt; ] is not available. This could happen
because either the composite has been undeployed or EM has not yet discovered
this composite.
</pre>
<p><span class="bold">Solution</span></p>
<p>The issue is caused by using a concrete WSDL file in the BPEL definition. Using an abstract WSDL prevents the BPEL composite/process from becoming inactive or its state from becoming retired when the target server or service is down.</p>
<p><span id="GUID-60081E4A-E157-4FA5-9FA1-4BBD712EB44D__FA">Oracle Fusion Applications</span> develop composites with <code class="codeph">oramds://</code> references to WSDL files at design time for both the binding and the WSDL location. At deployment, the binding's concrete location (which is only used at runtime) is fixed.</p>
<p>Follow these steps to use an abstract WSDL by making a local copy of the target WSDL file in the BPEL project.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>When creating a web service partner link in a composite in the Create Web Service dialog, select the <span class="bold">copy WSDL and its dependent artifacts into the project</span> checkbox.</span></li>
<li class="stepexpand"><span>After the web service has been created and the partner link is wired (connected) with the BPEL process service component, two WSDL files are seen in the Application Navigator of <span id="GUID-60081E4A-E157-4FA5-9FA1-4BBD712EB44D__JDEV">Oracle JDeveloper</span>:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><span class="bold">Webservice</span></span><span class="bold">.WSDL</span> (the local copy of the target WSDL)</p>
</li>
<li>
<p><span class="italic"><span class="bold">Webservice</span></span>Ref<span class="bold">.WSDL</span></p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Redeploy the SOA composite.</span></li>
<li class="stepexpand"><span>Retest the scenario.</span></li>
</ol>
</div>
</div>
<a id="OASAD3412"></a>
<div class="props_rev_3"><a id="GUID-12EEEF4D-4BC4-44C5-8612-1D46C67B394F"></a>
<h3 id="OASAD-GUID-12EEEF4D-4BC4-44C5-8612-1D46C67B394F" class="sect3"><span class="enumeration_section">13.9.9</span> High-Volume Cross Reference (XREF_DATA) Table Impacts Performance and Maintenance</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>When the volume of data in the XREF Oracle SOA schemas grows very large, maintaining the database can become difficult. It may have an impact on performance and may be identified in AWR snapshots.</p>
<p><span class="bold">Solution</span></p>
<p>To address this maintenance challenge, Oracle SOA 11<span class="italic">g</span> has been instrumented with partition keys that enable database administrators (DBAs) to take advantage of the Oracle RDBMS partitioning features and capabilities. Even thought multiple types of partitioning are possible, the list partitioning strategy is the preferred one for partitioning the cross reference data table.</p>
<p>List partitioning allows greater flexibility in the mapping of rows to partitions than range or hash partitioning. Because the cross reference data (<code class="codeph">XREF_DATA</code>) is distributed based on discrete column values, unordered and unrelated sets of data can be grouped with no relationship between the partitions. For this table, the list partitioning is based on the column <code class="codeph">XREF_TABLE_NAME</code>. Because the list of entities that have cross reference data is known, this strategy is ideal. The only caveat is that this activity must be repeated if a new entity gets added to the system.</p>
<p>Better understanding of data distribution can lead to further refinement and space management by employment of composite partitioning strategies such as list - list and list - range schemes. For information about partitioning, see the <span class="italic"><span><cite>Oracle Database Performance Tuning Guide</cite></span></span>.</p>
<p>In addition to this partitioning strategy, the <span id="GUID-12EEEF4D-4BC4-44C5-8612-1D46C67B394F__MEDIATOR">Oracle Mediator</span>'s feature by which custom database tables can be created to store cross reference data for certain high volume entities can also be used. For more information, see <span class="italic"><span><cite>Developing SOA Applications with Oracle SOA Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3415"></a>
<div class="props_rev_3"><a id="GUID-DB5A628D-1150-4A7E-8708-32BEC273BEA5"></a>
<h3 id="OASAD-GUID-DB5A628D-1150-4A7E-8708-32BEC273BEA5" class="sect3"><span class="enumeration_section">13.9.10</span> Access Denied Error While Invoking an Oracle ADF BC Service from BPEL</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>A common case in <span id="GUID-DB5A628D-1150-4A7E-8708-32BEC273BEA5__FA">Oracle Fusion Applications</span> is Oracle ADF BC service invocations from various SOA components. If the user context attached with the SOA composite instance or identity switching used in a SOA reference does not have proper permission to access the Oracle ADF BC service, then an <code class="codeph">access</code> <code class="codeph">denied</code> error is displayed.</p>
<p><span class="bold">Solution</span></p>
<p>Common causes for this error are as follows. These must be resolved.</p>
<ul style="list-style-type: disc;">
<li>
<p>The Oracle ADF BC service does not have required permissions in <code class="codeph">jazn-data.xml</code>.</p>
</li>
<li>
<p>The permissions provided in <code class="codeph">jazn-data.xml</code> are not properly reflected in <code class="codeph">system-jazn-data.xml</code>.</p>
</li>
<li>
<p>The <code class="codeph">ejb-jar.xml</code> file does not have the <code class="codeph">&lt;interceptors&gt;</code> tag added or it has an incorrect application name. An example of <code class="codeph">ejb-jar.xml</code> with the correct tags is as follows:</p>
<pre dir="ltr">
&lt;ejb-jar xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
 [http://java.sun.com/xml/ns/j2ee/ejb-jar_3_0.xsd]"version="3.0"&gt;
&lt;enterprise-beans&gt;
&lt;session&gt;
&lt;ejb-name&gt;oracle.apps.financials.payables.invoices.transactions.invoiceApproval
Service.InvoiceApprovalBCServiceBean&lt;/ejb-name&gt;
&lt;resource-ref&gt;&lt;res-ref-name&gt;jdbc/ApplicationDBDS&lt;/res-ref-name&gt;&lt;res-type&gt;javax.
sql.DataSource&lt;/res-type&gt;&lt;res-auth&gt;Container&lt;/res-auth&gt;&lt;/resource-ref&gt;
&lt;resource-ref&gt;&lt;res-ref-name&gt;jdbc/ApplicationServiceDBDS&lt;/res-ref-name&gt;&lt;res-type
&gt;javax.sql.DataSource&lt;/res-type&gt;&lt;res-auth&gt;Container&lt;/res-auth&gt;&lt;/resource-ref&gt;
&lt;/session&gt;
&lt;/enterprise-beans&gt;
&amp;nbsp;
&lt;interceptors&gt; &lt;interceptor&gt;
&lt;interceptor-class&gt;oracle.security.jps.ee.ejb.JpsInterceptor&lt;/interceptor-class
&gt;
&lt;env-entry&gt; &lt;env-entry-name&gt;application.name&lt;/env-entry-name&gt;
 &lt;env-entry-type&gt;java.lang.String&lt;/env-entry-type&gt;
 &lt;env-entry-value&gt;fscm&lt;/env-entry-value&gt;
&lt;injection-target&gt;
&lt;injection-target-class&gt;oracle.security.jps.ee.ejb.JpsInterceptor&lt;/injection-ta
rget-class&gt;
&lt;injection-target-name&gt;application_name&lt;/injection-target-name&gt;
&lt;/injection-target&gt;
&lt;/env-entry&gt;
&lt;/interceptor&gt; &lt;/interceptors&gt;
&amp;nbsp;
&lt;assembly-descriptor&gt;
&lt;interceptor-binding&gt;
&lt;ejb-name&gt;*&lt;/ejb-name&gt;&lt;interceptor-class&gt;oracle.security.jps.ee.ejb.JpsIntercep
tor&lt;/interceptor-class&gt; &lt;/interceptor-binding&gt;
&lt;/assembly-descriptor&gt;
&amp;nbsp;
&lt;/ejb-jar&gt;
</pre></li>
</ul>
</div>
</div>
<a id="OASAD3418"></a>
<div class="props_rev_3"><a id="GUID-1AFBF419-B2E3-48E6-851F-79F0C41ED322"></a>
<h3 id="OASAD-GUID-1AFBF419-B2E3-48E6-851F-79F0C41ED322" class="sect3"><span class="enumeration_section">13.9.11</span> Click Manage Approvals Page Gives a "SOA server may be down" or "No data to display" Error</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>At runtime, when clicking the Manage Approvals page (for both a requisition and purchase order), a <code class="codeph">SOA</code> <code class="codeph">server</code> <code class="codeph">may</code> <code class="codeph">be</code> <code class="codeph">down</code> error may be received among other errors. The page may also show a <code class="codeph">No</code> <code class="codeph">data</code> <code class="codeph">to</code> <code class="codeph">display</code> error.</p>
<p><span class="bold">Solution</span></p>
<p>Verify if <code class="codeph">wf_client_config.xml</code> is pointing to the correct SOA server. <span id="GUID-1AFBF419-B2E3-48E6-851F-79F0C41ED322__FA">Oracle Fusion Applications</span> environments are all multidomain and applications that must query their local SOA runtime must do so through the <code class="codeph">wf_client_config.xml</code> file configuration.</p>
<p>For more information about the <code class="codeph">wf_client_config.xml</code> file, see <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-5D8311B1-6E07-46AC-881E-3AA32E7F23CA">Task Detail Page is Not Available</a>.</p>
</div>
</div>
<a id="OASAD3421"></a>
<div class="props_rev_3"><a id="GUID-8726BFA3-C386-4FCC-9A7C-24990619B7CE"></a>
<h3 id="OASAD-GUID-8726BFA3-C386-4FCC-9A7C-24990619B7CE" class="sect3"><span class="enumeration_section">13.9.12</span> Synchronous Service Invocation Errors Due to WS-Addressing</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>When integrating with external web services, there may be issues related to the WS-Addressing headers in the request and response XML documents used in synchronous request-response scenarios. This may even occur if there is a dynamic endpoint that resolves to an external web service that does not support WS-Addressing.</p>
<ul style="list-style-type: disc;">
<li>
<p>A SOA composite acting as a client fails to invoke a service provider that does not support WS-Addressing headers in the request message for synchronous interactions.</p>
</li>
<li>
<p>An external service consumer that does not support WS-Addressing headers in the response message fails to invoke a synchronous operation of a SOA composite.</p>
</li>
<li>
<p>A service provider throws a <code class="codeph">wsa:InvalidAddressingHeader</code> error when <code class="codeph">SOAPAction</code> is defined in the WSDL <code class="codeph">&lt;binding&gt;</code> element of the service provider interface.</p>
</li>
</ul>
<p><span class="bold">Solution</span></p>
<p>The WS binding component of <span id="GUID-8726BFA3-C386-4FCC-9A7C-24990619B7CE__FMW">Oracle Fusion Middleware</span> 11<span class="italic">g</span> generates WS-Addressing headers by default, which is as per the specification, but may be incompatible with some web services. This behavior can be overwritten using properties that make possible to control the generation of WS-Addressing header information for interoperability purposes.</p>
<ul style="list-style-type: disc;">
<li>
<p>A SOA composite acting as a client fails to invoke a service provider that does not support WS-Addressing headers in the request message for synchronous interactions.</p>
<p>When the Oracle SOA Suite components act as service clients (consumers) and invoke synchronous operations of external web services, the invocation fails. The invocation failure is due to the WS-Addressing headers included in the request message when invoking the service provider.</p>
<p>The stack trace displays the following information:</p>
<pre dir="ltr">
NSGetCustomer (faulted)
Nov 10, 2009 4:26:40 PM Faulted while invoking operation "get" on provider
"NetSuite2009_PL".
&lt;payload&gt;
Nov 10, 2009 4:26:40 PM
"{urn:platform_2009_1.webservices.netsuite.com}UnexpectedErrorFault" has been
thrown.
&lt;payload&gt;
Nov 10, 2009 4:26:40 PM There is a system exception while performing the BPEL
instance, the reason is "Invalid SOAP Header: '&lt;ns1:To
xmlns:ns1="http://www.w3.org/2005/08/addressing"&gt;https://webservices.netsuite.c
om/services/NetSuitePort_2009_1&lt;/ns1:To&gt;'. Value is
'https://webservices.netsuite.com/services/NetSuitePort_2009_1'."
&lt;payload&gt;
</pre>
<p>In Oracle SOA Suite 11<span class="italic">g</span>, the WS-Binding component includes the following WS-Addressing headers:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">wsa:to</code></p>
</li>
<li>
<p><code class="codeph">wsa:replyTo</code></p>
</li>
<li>
<p><code class="codeph">wsa:action</code></p>
</li>
</ul>
<p>These headers are included by default regardless of interacting with synchronous or asynchronous web service operations. Although the SOAP message generated by 11<span class="italic">g</span> is fully specification compliant, there are service provider implementations that do not understand these WS-Addressing headers when included in the request message for synchronous operations. This is why the invocation fails.</p>
<p>Oracle Fusion Middleware 11<span class="italic">g</span> uses new standards, WS-Addressing (<code class="codeph">wsa</code>) and WS-I Basic profile, which demand that WS-Addressing headers be added by default to the request message.</p>
<p>to increase interoperability, the property <code class="codeph">oracle.soa.ws.outbound.omitWSA</code> has been introduced for the <code class="codeph">&lt;binding.ws&gt;</code> element in the <code class="codeph">composite.xml</code> file. This property makes possible to optionally suppress generation of WS-Addressing headers in the request message when set to <code class="codeph">true</code>. The default value is <code class="codeph">false</code>.</p>
<ol>
<li>
<p>Manually add the following property to the <code class="codeph">&lt;binding.ws&gt;</code> element in the <code class="codeph">composite.xml</code> file.</p>
<pre dir="ltr">
[snippet]
&lt;binding.ws
......
    &lt;property name="oracle.soa.ws.outbound.omitWSA" type="xs:boolean"
many="false" override="may"&gt;true&lt;/property&gt;
&lt;/binding.ws&gt;
[/snippet]
</pre></li>
<li>
<p>Redeploy the composite.</p>
</li>
</ol>
</li>
<li>
<p>An external service consumer that does not support WS-Addressing headers in the response message fails to invoke a synchronous operation of a SOA composite.</p>
<p>When external services invoke the endpoints of Oracle SOA Suite composites, which expose synchronous operation(s) acting as a server (service provider), the external web service fails with invocation errors. This is commonly due to the WS-Addressing headers included in the response message, which are not supported by some web service implementations.</p>
<p>In SOA Suite 11<span class="italic">g</span>, the WS-Binding component includes the WS-Addressing headers by default in the response messages. Although the SOAP message generated by 11<span class="italic">g</span> is fully specification compliant, there are service consumer implementations that do not understand the WS-Addressing headers when included in the response message in synchronous request-response scenarios. This is why the invocation fails.</p>
<p>To increase interoperability with clients (consumers) that do not support WS-Addressing headers, a property named <code class="codeph">oracle.soa.addressing.response.enabled</code> has been introduced. This property can be used within the <code class="codeph">&lt;binding.ws&gt;</code> element in the <code class="codeph">composite.xml</code> file. This property makes possible to optionally suppress generation of WS-Addressing headers in the response message when set to <code class="codeph">true</code>. The default value is <code class="codeph">false</code>.This means that in a synchronous request-response scenario, in which the Oracle SOA Suite composite acts as a service provider, WS-Addressing headers are included in the response message by default. If the property is set to <code class="codeph">false</code>, no WS-Addressing-related headers are returned in the response message.</p>
<ol>
<li>
<p>Set the property in the <code class="codeph">composite.xml</code> file as follows:</p>
<pre dir="ltr">
[snippet]
&lt;binding.ws&gt;
......
&lt;property name="<span class="bold">oracle.soa.addressing.response.enabled</span>" type="xs:boolean"
many="false" override="may"&gt;false&lt;/property&gt;
&lt;/binding.ws&gt;
[/snippet]
</pre></li>
</ol>
</li>
<li>
<p>A service provider throws a <code class="codeph">wsa:InvalidAddressingHeader</code> error when <code class="codeph">SOAPAction</code> is defined in the WSDL <code class="codeph">&lt;binding&gt;</code> element of the service provider interface.</p>
<p>When invoking a web service provider with a synchronous interface from a composite deployed on 11.1.1.1, a <code class="codeph">wsa:InvalidAddressingHeader</code> message is returned. This happens when both of the following conditions are met:</p>
<ul style="list-style-type: disc;">
<li>
<p>The service interface (WSDL) of the service provider does not include the <code class="codeph">wsa:Action</code> element in the WSDL input message for the port operations</p>
<p>and</p>
</li>
<li>
<p>The <code class="codeph">soapAction</code> attribute in the WSDL binding section of the service provider interface is specified.</p>
</li>
</ul>
<p>The difference with the first scenario is that the service provider interface may accept WS-Addressing headers for synchronous endpoint operations by using the WS-Addressing extensibility attribute <code class="codeph">wsa:UsingAddressing</code> in the WSDL binding section. A WSDL binding section sample is shown as follows:</p>
<pre dir="ltr">
&lt;wsdl:binding name="mySoapBinding"
type="impl:myService"&gt;
  &lt;wsaw:UsingAddressing wsdl:required="false"
 xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl"/&gt;
  &lt;wsdlsoap:binding style="document"
 transport="http://schemas.xmlsoap.org/soap/http"/&gt;
  &lt;wsdl:operation name="myOperation"&gt;
    <span class="bold">&lt;wsdlsoap:operation soapAction="myAction"/&gt;</span>
    &lt;wsdl:input name="myRequestMsg"&gt;
      &lt;wsdlsoap:body use="literal"/&gt;
    &lt;/wsdl:input&gt;
    &lt;wsdl:output name="myResponseMsg"&gt;
      &lt;wsdlsoap:body use="literal"/&gt;
    &lt;/wsdl:output&gt;
  &lt;/wsdl:operation&gt;
&lt;/wsdl:binding&gt;
</pre>
<p>As the following code sample shows, neither the input message nor the output message (as defined in the service provider WSDL) contain a <code class="codeph">&lt;wsa:Action&gt;</code> element:</p>
<pre dir="ltr">
....
&lt;wsdl:message name="myRequestMsg"&gt;
  &lt;wsdl:part name="parameters" 
element="impl:myRequestElement"/&gt;
&lt;/wsdl:message&gt;
.....
&lt;wsdl:message name="myresponseMsg"&gt;
  &lt;wsdl:part name="parameters" 
element="impl:myResponseElement"/&gt;
&lt;/wsdl:message&gt;
</pre>
<p>The problem has been observed when integrating with synchronous web services deployed on the IBM WebSphere 6.1 Application Server.</p>
<p>The stack trace looks similar to the following code example:</p>
<pre dir="ltr">
......
oracle.fabric.common.FabricInvocationException:
javax.xml.ws.soap.SOAPFaultException: A header representing a Message
Addressing Property is not valid and the message cannot be processed
at
oracle.integration.platform.blocks.soap.WebServiceExternalBindingComponent.thro
wFabricInvocationException(WebServiceExternalBindingComponent.java:415)
at
oracle.integration.platform.blocks.soap.WebServiceExternalBindingComponent.thro
wFabricInvocationExceptionForSoapFault(WebServiceExternalBindingComponent.java:
411)
at
oracle.integration.platform.blocks.soap.WebServiceExternalBindingComponent.proc
essSOAPFault(WebServiceExternalBindingComponent.java:394)
at
oracle.integration.platform.blocks.soap.WebServiceExternalBindingComponent.proc
essOutboundMessage(WebServiceExternalBindingComponent.java:253)
at
oracle.integration.platform.blocks.soap.WebServiceExternalBindingComponent.send
SOAPMessage(WebServiceExternalBindingComponent.java:644)
at
oracle.integration.platform.blocks.soap.WebServiceExternalBindingComponent.requ
est(WebServiceExternalBindingComponent.java:526)
at
oracle.integration.platform.blocks.mesh.SynchronousMessageHandler.doRequest(Syn
chronousMessageHandler.java:139)
at
oracle.integration.platform.blocks.mesh.MessageRouter.request(MessageRouter.jav
a:179)
at
oracle.integration.platform.blocks.mesh.MeshImpl.request(MeshImpl.java:144)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at
......
</pre>
<p>If HTTP Analyzer or Apache TCP Monitor are used to trace the message exchange, it is observed that the issue is related to the <code class="codeph">&lt;wsa:action&gt;</code> element in the request SOAP header, which is not the same as <code class="codeph">SOAPAction</code> in the HTTP header. The response message looks like the following code sample:</p>
<pre dir="ltr">
&lt;soapenv:Envelope&gt;
.......
  &lt;soapenv:Header&gt;
     &lt;wsa:FaultDetail xmlns:wsa="http://www.w3.org/2005/08/addressing"&gt;
        &lt;wsa:ProblemHeaderQName&gt;wsa:Action&lt;/wsa:ProblemHeaderQName&gt;
     &lt;/wsa:FaultDetail&gt;
  &lt;/soapenv:Header&gt;
  &lt;soapenv:Body&gt;
    &lt;soapenv:Fault&gt;
      &lt;faultcode&gt;wsa:InvalidAddressingHeader&lt;/faultcode&gt;
      &lt;faultstring&gt;
        &lt;![CDATA[A header representing a Message Addressing Property is not
        valid and the message cannot be processed]]&gt;&lt;/faultstring&gt;
    &lt;/soapenv:Fault&gt;
   &lt;/soapenv:Body&gt;
&lt;/soapenv:Envelope&gt;
</pre>
<p>As mentioned in the previous sections, the WS Binding component of Oracle Fusion Middleware 11<span class="italic">g</span> generates WS-Addressing headers by default. According to the W3C specification (Web Services Addressing 1.0 - WSDL Binding W3C Candidate Recommendation 29 May 2006), Section 4.4.1 Explicit Association:</p>
<p>"In the absence of a <code class="codeph">wsa:Action</code> attribute on a WSDL input element where a <code class="codeph">SOAPAction</code> value is specified, the value of the [action] property for the input message is the value of the <code class="codeph">SOAPAction</code> specified."</p>
<p>The generated value for the <code class="codeph">&lt;wsa:Action&gt;</code> element of the input message matches the value of the <code class="codeph">SOAPAction</code> element, if that is specified in the WSDL binding section. Otherwise, it generates a default value for the <code class="codeph">&lt;wsa:Action&gt;</code> element.</p>
<p>A sample of the generated request is as follows (provided WSDL <code class="codeph">&lt;binding&gt;</code> and <code class="codeph">&lt;messages&gt;</code> section, as shown previously).</p>
<pre dir="ltr">
POST /currencyratesapi/services/myAction HTTP/1.1
Host: &lt;host&gt;:&lt;port&gt;
Connection: TE
TE: trailers, deflate, gzip, compress
User-Agent: Oracle HTTPClient Version 10h
SOAPAction: "myAction"
Accept-Encoding: gzip, x-gzip, compress, x-compress
ECID-Context: 1.0000IUhXOGw3R9BpNWK6ye1BPi6A0002Wk;kYhgp8TLo0hgv0
Content-type: text/xml; charset=UTF-8
Content-Length: 1473
 
&lt;env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:wsa="http://www.w3.org/2005/08/addressing"&gt;
&lt;env:Header&gt;
 
&lt;wsa:To&gt;http://&lt;host&gt;:&lt;port&gt;/currencyratesapi/services/myAction&lt;/wsa:To&gt;
&lt;wsa:Action&gt;myAction&lt;/wsa:Action&gt;
&lt;wsa:MessageID&gt;...&lt;/wsa:MessageID&gt;
&lt;wsa:RelatesTo&gt;...&lt;/wsa:RelatesTo&gt;
&lt;wsa:ReplyTo&gt;
&lt;wsa:Address&gt;http://www.w3.org/2005/08/addressing/anonymous&lt;/wsa:Address&gt;
&lt;wsa:ReferenceParameters&gt;
......
&lt;/wsa:ReferenceParameters&gt;
&lt;/wsa:ReplyTo&gt;
&lt;/env:Header&gt;
&lt;env:Body&gt;
......
&lt;/env:Body&gt;
&lt;/env:Envelope&gt; 
</pre></li>
</ul>
</div>
</div>
<a id="OASAD3424"></a>
<div class="props_rev_3"><a id="GUID-11382DB3-C7B8-485C-9B43-CC2D6AEEA0B1"></a>
<h3 id="OASAD-GUID-11382DB3-C7B8-485C-9B43-CC2D6AEEA0B1" class="sect3"><span class="enumeration_section">13.9.13</span> Deploy Human Workflow Application Throws "Unable to resolve 'TaskQueryService'" Error</h3>
<div>
<p><span class="bold">Problem</span></p>
<p>Almost all <span id="GUID-11382DB3-C7B8-485C-9B43-CC2D6AEEA0B1__FA">Oracle Fusion Applications</span> have the <code class="codeph">hwtaskflow.xml</code> file with the <code class="codeph">IntegrateTaskFlowWithTask</code> entry in the <code class="codeph">web.xml</code> file to register the notification projects. When deploying the J2EE EAR file, it throws the following error if the foreign JNDI connection or <code class="codeph">wf_client_config.xml</code> were not configured with a valid SOA environment.</p>
<pre dir="ltr">
javax.naming.NameNotFoundException:Unable to resolve 'TaskQueryService'. Resolved
''; remaining name 'TaskQueryService'
</pre>
<p><span class="bold">Solution</span></p>
<p>If the SOA server is not up and running, then start the SOA server using <span id="GUID-11382DB3-C7B8-485C-9B43-CC2D6AEEA0B1__FAOEMFRAMESHORT">Fusion Applications Control</span>. If it is up and the problem exists, then check that the <code class="codeph">wf_client_config.xml</code> file has a valid SOA environment. If possible, avoid foreign JNDI references because the JNDI resources get bound into all servers in the domain that causes <code class="codeph">BindException</code> errors for servers in which the actual service exists when source and target JNDI names are the same. <span>Oracle Fusion Applications</span> do not use foreign JNDI references, instead bundling a correctly configured <code class="codeph">wf_client_config.xml</code> file in the EAR file or using APIs at runtime to generate the Java Architecture for XML Binding (JAXB) for the human workflow APIs.</p>
<p>Use <code class="codeph">wf_client_config.xml</code> (bundled at the application level) for all ADF worklist client applications communicating with Oracle SOA Suite. Ensure that the correct URL is specified in the file configuration.</p>
<pre dir="ltr">
&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
 
&lt;workflowServicesClientConfiguration
 xmlns="http://xmlns.oracle.com/bpel/services/client"&gt;
 &lt;server name="default" default="true" clientType="REMOTE"&gt;
 &lt;localClient&gt;
  &lt;participateInClientTransaction&gt;false&lt;/participateInClientTransaction&gt;
  &lt;/localClient&gt;
  &lt;remoteClient&gt;
  &lt;serverURL&gt;t3:cluster://CRMSoaCluster&lt;/serverURL&gt;
&lt;initialContextFactory&gt;weblogic.jndi.WLInitialContextFactory&lt;/initialContextFa
ctory&gt;
  &lt;participateInClientTransaction&gt;false&lt;/participateInClientTransaction&gt;
  &lt;/remoteClient&gt;
 &lt;soapClient&gt;
&lt;rootEndPointURL&gt;http://adc60048fems.us.example.com:6361/soa-infra&lt;/rootEndPointURL
&gt;
  &lt;/soapClient&gt;
  &lt;/server&gt;
&lt;/workflowServicesClientConfiguration&gt;
</pre></div>
</div>
<a id="OASAD3030"></a>
<div class="props_rev_3"><a id="GUID-9BB6BE71-294D-458C-A347-44595BA0C7D7"></a>
<h3 id="OASAD-GUID-9BB6BE71-294D-458C-A347-44595BA0C7D7" class="sect3"><span class="enumeration_section">13.9.14</span> "Invalid Subject" Error Thrown with Human Workflow API or Notification</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>When Oracle SOA Suite is installed on <code class="codeph">Domain1</code> and ADF on <code class="codeph">Domain2</code> and if any remote calls are performed between them for any human workflow API use or for notifications, errors similar to the following are thrown if the domain trust is not set.</p>
<pre dir="ltr">
javax.servlet.ServletException:
javax.servlet.ServletException:java.lang.SecurityException: Security:090398Invalid
Subject:principals=CVBUYER01, AR_MANAGER_VISION_OPERATIONS_DATA, AR_ACCOUNTS_
RECEIVABLE_MANAGER_JOB, FBI_TRANSACTIONAL_BI_WORKER

</pre>
<p><span class="bold">Solution</span></p>
<p>Set the domain trust password on both domains (global trust).</p>
</div>
<!-- class="section" -->
<ol>
<li><span>Log in to <span id="GUID-9BB6BE71-294D-458C-A347-44595BA0C7D7__WLS">Oracle WebLogic Server</span> Administration Console.</span></li>
<li><span>In the <span class="bold">Domain Structure</span>, click the domain name.</span></li>
<li><span>Click the <span class="bold">Security</span> tab, and then click <span class="bold">Advanced</span>.</span></li>
<li><span>Set the password in the <span class="bold">Credential</span> and <span class="bold">Confirm Credential</span> fields.</span></li>
</ol>
<div class="section">
<p><span id="GUID-9BB6BE71-294D-458C-A347-44595BA0C7D7__FA">Oracle Fusion Applications</span> do not support RMI across domains. That is, all remote calls between ADF and SOA are always within the same domain. When cross domain communication is required, SOAP is used. The scenario described in this section may be encountered in the development environment. For example, the ADF task flow for human tasks may be running in the <span id="GUID-9BB6BE71-294D-458C-A347-44595BA0C7D7__JDEVSHORT">JDeveloper</span>-integrated <span>Oracle WebLogic Server</span> and running the composite in an independent standalone SOA server. Both are in different domains.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD3429"></a>
<div class="props_rev_3"><a id="GUID-2684828D-34CD-465B-8346-BFBCFB62A8BE"></a>
<h3 id="OASAD-GUID-2684828D-34CD-465B-8346-BFBCFB62A8BE" class="sect3"><span class="enumeration_section">13.9.15</span> Task is Assigned to the Group/Role When It Is Expected to Go to Every User in the Group/Role Individually</h3>
<div>
<p>For troubleshooting information about this issue, see section Task Assignment/Routing/Escalation Issues in <span class="italic"><span id="GUID-2684828D-34CD-465B-8346-BFBCFB62A8BE__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3430"></a>
<div class="props_rev_3"><a id="GUID-CF5B9BC8-A182-4A3B-8C19-46953E640AF4"></a>
<h3 id="OASAD-GUID-CF5B9BC8-A182-4A3B-8C19-46953E640AF4" class="sect3"><span class="enumeration_section">13.9.16</span> Task Completes Without Any Assignment Occurring</h3>
<div>
<p>For troubleshooting information about this issue, see section Task Assignment/Routing/Escalation Issues in <span class="italic"><span id="GUID-CF5B9BC8-A182-4A3B-8C19-46953E640AF4__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3431"></a>
<div class="props_rev_3"><a id="GUID-17D5AF4D-7686-43CB-BA4E-5262BDE0C607"></a>
<h3 id="OASAD-GUID-17D5AF4D-7686-43CB-BA4E-5262BDE0C607" class="sect3"><span class="enumeration_section">13.9.17</span> Parallel Assignees Must Approve or Reject the Task Even Though the Parallel Completion Criteria is Met</h3>
<div>
<p>For troubleshooting information about this issue, see section Task Assignment/Routing/Escalation Issues in <span class="italic"><span id="GUID-17D5AF4D-7686-43CB-BA4E-5262BDE0C607__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3096"></a>
<div class="props_rev_3"><a id="GUID-A858E739-DC97-4434-8FA3-A8095CD71A82"></a>
<h3 id="OASAD-GUID-A858E739-DC97-4434-8FA3-A8095CD71A82" class="sect3"><span class="enumeration_section">13.9.18</span> All Added Adhoc Participants Disappear After a Page Refresh</h3>
<div>
<p>For troubleshooting information about this issue, see section Task History Issues in <span class="italic"><span id="GUID-A858E739-DC97-4434-8FA3-A8095CD71A82__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3099"></a>
<div class="props_rev_3"><a id="GUID-BB1FE8F5-6E6A-4F78-BD90-8C58C3A6A698"></a>
<h3 id="OASAD-GUID-BB1FE8F5-6E6A-4F78-BD90-8C58C3A6A698" class="sect3"><span class="enumeration_section">13.9.19</span> Future Approvers Are Not Visible in the History Table</h3>
<div>
<p>For troubleshooting information about this issue, see section Task History Issues in <span class="italic"><span id="GUID-BB1FE8F5-6E6A-4F78-BD90-8C58C3A6A698__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3102"></a>
<div class="props_rev_3"><a id="GUID-C6070D1F-B873-4900-9C78-970B866642AA"></a>
<h3 id="OASAD-GUID-C6070D1F-B873-4900-9C78-970B866642AA" class="sect3"><span class="enumeration_section">13.9.20</span> Message Appears in the History Table About a Correlation ID Not Being Passed or Any Exception Related to the Correlation ID</h3>
<div>
<p>For troubleshooting information about this issue, see section Task History Issues in <span class="italic"><span id="GUID-C6070D1F-B873-4900-9C78-970B866642AA__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD3105"></a>
<div class="props_rev_3"><a id="GUID-2AC481BB-6161-45A4-867B-7771339DBF37"></a>
<h3 id="OASAD-GUID-2AC481BB-6161-45A4-867B-7771339DBF37" class="sect3"><span class="enumeration_section">13.9.21</span> Edit Toolbar Is Disabled or Not Shown</h3>
<div>
<p>For troubleshooting information about this issue, see section Task History Issues in <span class="italic"><span id="GUID-2AC481BB-6161-45A4-867B-7771339DBF37__SOAAG"><cite>Administering Oracle SOA Suite and Oracle Business Process Management Suite</cite></span></span>.</p>
</div>
</div>
<a id="OASAD4132"></a>
<div class="props_rev_3"><a id="GUID-57D389C0-0ECA-47C4-8D18-0BD27F651948"></a>
<h3 id="OASAD-GUID-57D389C0-0ECA-47C4-8D18-0BD27F651948" class="sect3"><span class="enumeration_section">13.9.22</span> oracle.jrf.UnknownPlatformException Error When Customizing an <span id="MEDIATOR">Oracle Mediator</span></h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>The following error can be received when making customization modifications to an <span id="GUID-57D389C0-0ECA-47C4-8D18-0BD27F651948__MEDIATOR">Oracle Mediator</span> service component in a SOA application.</p>
<p>For example, assume the following steps are performed:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Log in to <span id="GUID-57D389C0-0ECA-47C4-8D18-0BD27F651948__JDEVSHORT">JDeveloper</span> with the <span class="bold">Fusion Application Developer</span> role.</span></li>
<li class="stepexpand"><span>Create a SOA application and project with the <span class="bold">Customizable</span> option selected.</span></li>
<li class="stepexpand"><span>Add appropriate JAR files under the <span class="bold">Libraries and Classpath</span> section of the Project Properties dialog for the project.</span></li>
<li class="stepexpand"><span>Under <span class="bold">Application Resources</span> then, <span class="bold">Descriptors</span> then, <span class="bold">ADF</span> <span class="bold">META-INF</span> and then, <span class="bold">adf-config.xml,</span> add appropriate customization classes.</span></li>
<li class="stepexpand"><span>Add an <span>Oracle Mediator</span> service component to the application.</span></li>
<li class="stepexpand"><span>Save the application and restart <span>JDeveloper</span>.</span></li>
<li class="stepexpand"><span>Add appropriate routing rule and XSL transformations to the <span>Oracle Mediator</span> service component.</span>
<div>
<p>The following error is displayed in the command prompt window:</p>
<pre dir="ltr">
oracle.jrf.UnknownPlatformException: JRF is unable to determine the current
application server platform.

</pre></div>
</li>
</ol>
<div class="section">
<p><span class="bold">Solution</span></p>
<p>This error can be ignored. After this error occurs, everything still works correctly.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD4135"></a>
<div class="props_rev_3"><a id="GUID-D4B4CBDB-6C84-4A69-B2CF-92FCF702DB8E"></a>
<h3 id="OASAD-GUID-D4B4CBDB-6C84-4A69-B2CF-92FCF702DB8E" class="sect3"><span class="enumeration_section">13.9.23</span> java.lang.NullPointerException When Customizing an <span>Oracle Mediator</span></h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
<p>The following error can be received when making a customization modification to an <span id="GUID-D4B4CBDB-6C84-4A69-B2CF-92FCF702DB8E__MEDIATOR">Oracle Mediator</span> service component in a SOA application.</p>
<p>For example, assume the following steps are performed:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Log in to <span id="GUID-D4B4CBDB-6C84-4A69-B2CF-92FCF702DB8E__JDEVSHORT">JDeveloper</span> with the <span class="bold">Fusion Application Developer</span> role.</span></li>
<li class="stepexpand"><span>Create a SOA application and project with the <span class="bold">Customizable</span> option selected.</span></li>
<li class="stepexpand"><span>Add appropriate JAR files under the <span class="bold">Libraries and Classpath</span> section of the Project Properties dialog for the project.</span></li>
<li class="stepexpand"><span>Under <span class="bold">Application Resources</span> then, <span class="bold">Descriptors</span> then, <span class="bold">ADF</span> <span class="bold">META-INF</span> and then, <span class="bold">adf-config.xml,</span> add customization classes.</span></li>
<li class="stepexpand"><span>Add an <span>Oracle Mediator</span> service component to the application.</span></li>
<li class="stepexpand"><span>Add a routing rule to the <span>Oracle Mediator</span> service component.</span>
<div>
<p>The following error is displayed in the command prompt window:</p>
<pre dir="ltr">
java.lang.NullPointerException

</pre></div>
</li>
</ol>
<div class="section">
<p><span class="bold">Solution</span></p>
<p>If no alerts indicating that a WSDL file cannot be found or parsed are seen, then this exception in the log/console can be ignored.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="OASAD4138"></a>
<div class="props_rev_3"><a id="GUID-43B85055-8185-4276-8F80-B56B6742997D"></a>
<h3 id="OASAD-GUID-43B85055-8185-4276-8F80-B56B6742997D" class="sect3"><span class="enumeration_section">13.9.24</span> <span id="JDEVSHORT">JDeveloper</span> Compilation Error in a SOA Project with SOA MDS Service Location</h3>
<div>
<div class="section">
<p><span class="bold">Problem</span></p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Start <span id="GUID-43B85055-8185-4276-8F80-B56B6742997D__JDEVSHORT">JDeveloper</span> with the <span class="bold">Fusion Application Developer</span> role.</span></li>
<li class="stepexpand" id="GUID-43B85055-8185-4276-8F80-B56B6742997D__BABIJBBH"><span>Create a SOA application.</span></li>
<li class="stepexpand"><span>Create and deploy a SOA bundle to the server.</span></li>
<li class="stepexpand"><span>Create another SOA application.</span></li>
<li class="stepexpand"><span>Create an <span id="GUID-43B85055-8185-4276-8F80-B56B6742997D__MEDIATOR">Oracle Mediator</span> service component.</span></li>
<li class="stepexpand"><span>Create a reference web service and access the SOA MDS connection and browser for the service of the SOA application that was created in Step <a href="GUID-78C0349D-173F-4A80-903F-58E980358727.htm#GUID-43B85055-8185-4276-8F80-B56B6742997D__BABIJBBH">2</a>.</span></li>
<li class="stepexpand"><span>Wire the components.</span></li>
<li class="stepexpand"><span>Update the empty <code class="codeph">port</code> and <code class="codeph">location</code> values in the <code class="codeph">composite.xml</code> file. For the <code class="codeph">location</code> value, enter the <code class="codeph">oramds</code> path. For example:</span>
<div>
<pre dir="ltr">
&lt;reference name="Service1"
            
ui:wsdlLocation="oramds:/apps/CalleeProject/CalleeBPELProcess.wsdl"&gt;
    &lt;interface.wsdl
interface="http://xmlns.oracle.com/Comp2Comp_
EDGApp/CalleeProject/CalleeBPELProcess#wsdl.interface(CalleeBPELProcess)"/&gt;
    &lt;binding.ws
port="http://xmlns.oracle.com/Comp2Comp_
EDGApp/CalleeProject/CalleeBPELProcess#wsdl.endpoint(calleebpelprocess_client_
ep/CalleeBPELProcess_pt)"
    location="oramds:/apps/CalleeProject/CalleeBPELProcess.WSDL"/&gt;
  &lt;/reference&gt;
</pre></div>
</li>
<li class="stepexpand"><span>Compile the application.</span>
<div>
<p>The following error message is received.</p>
<pre dir="ltr">
Warning(26,76): Failed to Find Binding

    
</pre></div>
</li>
</ol>
<div class="section">
<p><span class="bold">Solution</span></p>
<p>This is only a warning message thrown by the compiler. Runtime works fine. Having a reference from SOA MDS in a composite makes the <code class="codeph">port</code> and <code class="codeph">location</code> values empty in the bindings. To resolve this warning message:</p>
<ul style="list-style-type: disc;">
<li>
<p>Explicitly enter the corresponding details. For example, replace the <code class="codeph">binding.ws</code> <code class="codeph">location</code> value with the concrete WSDL file.</p>
</li>
<li>
<p>Deploy the composite using the configuration plan, which replaces the port and <code class="codeph">oramds</code> location with the concrete WSDL file.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment10">
<tr>
<td class="cellalignment17">
<table class="cellalignment15">
<tr>
<td class="cellalignment14"><a href="GUID-FE333592-7A78-438C-8743-FA5C36221622.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment14"><a href="GUID-61BE9E1A-B754-4BB0-9A8B-D7084275FEBE.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2011, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment19">
<table class="cellalignment13">
<tr>
<td class="cellalignment14"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment14"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
