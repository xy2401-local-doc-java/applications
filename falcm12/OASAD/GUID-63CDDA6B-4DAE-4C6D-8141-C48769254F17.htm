<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Manage Oracle Database for Oracle Fusion Applications</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="Oracle Enterprise Manager Cloud Control 13 provides integrated functionality with Oracle Database to monitor performance, diagnose and tune problems, and test database changes on a test system before implementing them to a production system, as described in the following sections:" />
<meta name="dcterms.created" content="2018-02-21T10:06:12Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Applications Administrator's Guide" />
<meta name="dcterms.identifier" content="E66226-03" />
<meta name="dcterms.isVersionOf" content="OASAD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2011, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="GUID-CDC7FEB0-D101-420E-A8B4-7F07DCDEAA80.htm" title="Previous" type="text/html" />
<link rel="Next" href="GUID-E16F47C0-6415-4D24-B68F-2DDA4C462C1B.htm" title="Next" type="text/html" />
<link rel="alternate" href="OASAD.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17"></a> <span id="PAGE" style="display:none;">10/27</span> <!-- End Header -->
<a id="OASAD4254"></a><a id="OASAD353"></a>
<h1 id="OASAD-GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17" class="sect1"><span class="enumeration_chapter">6</span> Manage Oracle Database for Oracle Fusion Applications</h1>
<div>
<div><span>Oracle Enterprise Manager Cloud Control 13 provides integrated functionality with Oracle Database to monitor performance, diagnose and tune problems, and test database changes on a test system before implementing them to a production system, as described in the following sections:</span></div>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-D31875C0-421D-472E-89CB-B972EFBF3668">Access Oracle Database Information in Cloud Control</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-930120E0-EAE0-471A-86B5-D28B3C870003">Set up Diagnostic and Tune Tools for Oracle Fusion Applications Databases</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-3C0E321F-02D8-4266-A397-046F4B6D480B">Tune Tips Specific to Oracle Fusion Applications Environments</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-89F47D71-AACF-41D5-8EF4-F184958EF328">Test Oracle Database Changes</a></p>
</li>
</ul>
<p>For more information about Oracle Database 12<span class="italic">c</span>, see <a href="http://docs.oracle.com/cd/E24628_01/index.htm" target="_blank">Oracle Enterprise Manager Cloud Control Documentation 12c&nbsp;Release 5</a>.</p>
<p>For more information about Oracle Enterprise Manager Cloud Control 13, see <a href="http://docs.oracle.com/cd/E73210_01/index.htm" target="_blank">Oracle Enterprise Manager Cloud Control Online Documentation Library Release 13.2</a>.</p>
<pre dir="ltr">
</pre></div>
<a id="OASAD740"></a>
<div class="props_rev_3"><a id="GUID-D31875C0-421D-472E-89CB-B972EFBF3668"></a>
<h2 id="OASAD-GUID-D31875C0-421D-472E-89CB-B972EFBF3668" class="sect2"><span class="enumeration_section">6.1</span> Access Oracle Database Information in Cloud Control</h2>
<div>
<p>This section describes how to access and monitor database statistics from the Performance pages of Enterprise Manager Cloud Control 13<span class="italic">c</span>. Using Cloud Control, the following statistics can be monitored from the Performance page:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-850C5D0F-E4F1-46A4-B400-CD1684F57731">Database Statistics</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-7767BF85-F88C-4540-8009-12A922539D62">Database Alerts</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-6BD513D2-B457-4507-8B23-53816FA4D67B">Database Instance</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-0D57A9F9-D1D7-4703-A06E-B00E25E835DC">User and Session Activity</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-8F887CF9-7524-4D61-963F-EB05E9AC14FF">Host System</a></p>
</li>
</ul>
<p>To access the Performance page for Oracle Database:</p>
<ol>
<li>
<p>From the Targets menu, select <span class="bold">Databases</span>.</p>
</li>
<li>
<p>On the Database page, the Status pane shows all databases monitored by Cloud Control. Select a database from the list.</p>
</li>
<li>
<p>Once a database is selected, a summary page for the database displays. Click the <span class="bold">Performance</span> menu and select <span class="bold">Performance Home</span> for a complete summary of all performance and tuning metrics.</p>
</li>
</ol>
</div>
<a id="OASAD744"></a>
<div class="sect3"><a id="GUID-850C5D0F-E4F1-46A4-B400-CD1684F57731"></a>
<h3 id="OASAD-GUID-850C5D0F-E4F1-46A4-B400-CD1684F57731" class="sect3"><span class="enumeration_section">6.1.1</span> Database Statistics</h3>
<div>
<p>Database statistics provide information about the type of load on the database and the internal and external resources used by the database. To accurately diagnose performance problems with the database using ADDM, statistics must be available.</p>
<p>A cumulative statistic is a count such as the number of block reads. Oracle Database generates many types of cumulative statistics for the system, sessions, and individual SQL statements. Oracle Database also tracks cumulative statistics about segments and services. Automatic Workload Repository (AWR) automates database statistics gathering by collecting, processing, and maintaining performance statistics for database problem detection and self-tuning purposes.</p>
<p>By default, the database gathers statistics every hour and creates an AWR snapshot, which is a set of data for a specific time that is used for performance comparisons. The delta values captured by the snapshot represent the changes for each statistic over the time period. Statistics gathered by AWR are queried from memory. The gathered data can be displayed in both reports and views.</p>
<p>See section Gathering Database Statistics Using the Automatic Workload Repository in the <span id="GUID-850C5D0F-E4F1-46A4-B400-CD1684F57731__TDPPT"><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span> for details about the database statistics collected and processed by AWR.</p>
</div>
</div>
<a id="OASAD745"></a>
<div class="sect3"><a id="GUID-7767BF85-F88C-4540-8009-12A922539D62"></a>
<h3 id="OASAD-GUID-7767BF85-F88C-4540-8009-12A922539D62" class="sect3"><span class="enumeration_section">6.1.2</span> Database Alerts</h3>
<div>
<p>A built-in alerts infrastructure is provided to notify about impending problems with the database. By default, Oracle Database enables the following alerts:<a id="d46302e168" class="indexterm-anchor"></a></p>
<ul style="list-style-type: disc;">
<li>
<p>Tablespace Usage</p>
</li>
<li>
<p>Snapshot Too Old</p>
</li>
<li>
<p>Recovery Area Low on Free Space</p>
</li>
<li>
<p>Resumable Session Suspended</p>
</li>
</ul>
<p>In addition to these default alerts, performance alerts can be used to detect any unusual changes in database performance.</p>
<p>See the Monitoring Performance Alerts section in the <span id="GUID-7767BF85-F88C-4540-8009-12A922539D62__TDPPT"><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span> for details on setting metric thresholds for performance alerts, responding to alerts, and clearing alerts.</p>
</div>
</div>
<a id="OASAD750"></a>
<div class="sect3"><a id="GUID-6BD513D2-B457-4507-8B23-53816FA4D67B"></a>
<h3 id="OASAD-GUID-6BD513D2-B457-4507-8B23-53816FA4D67B" class="sect3"><span class="enumeration_section">6.1.3</span> Database Instance</h3>
<div>
<p>On the Performance page, there are several charts that can be used to monitor database instance activity. The Performance page can also be customized so that the most useful instance activity charts are displayed by default.</p>
<p>See the Monitoring Instance Activity section in the<span id="GUID-6BD513D2-B457-4507-8B23-53816FA4D67B__TDPPT"><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span> for details on monitoring:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Throughput:</span> measures the amount of work the database performs in a unit of time. The Throughput charts show any contention that appears in the Average Active Sessions chart.</p>
</li>
<li>
<p><span class="bold">I/O:</span> shows I/O statistics collected from all database clients. The I/O wait time for a database process represents the amount of time that the process could have been doing useful work if a pending I/O had completed. Oracle Database captures the I/O wait times for all important I/O components in a uniform fashion so that every I/O wait by any Oracle process can be derived from the I/O statistics.</p>
</li>
<li>
<p><span class="bold">Parallel executions:</span> shows system metrics related to parallel queries. Metrics are statistical counts per unit. The unit could be a time measure, such as seconds, or per transaction, or session.</p>
</li>
<li>
<p><span class="bold">Services:</span> shows services waiting for the corresponding wait event during the time period shown. Services represent groups of applications with common attributes, service-level thresholds, and priorities. Only active services are shown.</p>
</li>
</ul>
</div>
</div>
<a id="OASAD749"></a>
<div class="sect3"><a id="GUID-0D57A9F9-D1D7-4703-A06E-B00E25E835DC"></a>
<h3 id="OASAD-GUID-0D57A9F9-D1D7-4703-A06E-B00E25E835DC" class="sect3"><span class="enumeration_section">6.1.4</span> User and Session Activity</h3>
<div>
<p>Database time (DB time) is an indicator of the total database instance workload. The average active sessions for a time period equals the total database time of all user sessions during the period divided by the elapsed time (wall-clock time) for the period.<a id="d46302e261" class="indexterm-anchor"></a><a id="d46302e265" class="indexterm-anchor"></a><a id="d46302e269" class="indexterm-anchor"></a></p>
<p>The Average Active Sessions chart on the Performance page shows the average active sessions for CPU usage and wait classes in the time period. Drill down from the chart to identify the causes of instance-related performance issues and resolve them.</p>
<p>See the Monitoring User Activity section in the<span id="GUID-0D57A9F9-D1D7-4703-A06E-B00E25E835DC__TDPPT"><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span> for details on monitoring:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Top SQL:</span> On the Active Sessions Working page, the Top Working SQL table shows the database activity for actively running SQL statements that are consuming CPU resources. If one or several SQL statements are consuming most of the activity, then it should be investigated.</p>
</li>
<li>
<p><span class="bold">Top sessions:</span> On the Active Sessions Working page, the Top Working Sessions table displays the top sessions waiting for the corresponding wait class during the selected time period. A session is a logical entity in the database instance memory that represents the state of a current user login to the database. A session lasts from the time a user logs in to the database until the user disconnects. If a single session is consuming the majority of database activity, then it should be investigated.</p>
</li>
<li>
<p><span class="bold">Top services:</span> This table displays the top services waiting for the corresponding wait event during the selected time period. A service is a group of applications with common attributes, service-level thresholds, and priorities. If a service is using the majority of the wait time, then it should be investigated.</p>
</li>
<li>
<p><span class="bold">Top modules:</span> This table displays the top modules waiting for the corresponding wait event during the selected time period. Modules represent the applications that set the service name as part of the workload definition. If a single module is using the majority of the wait time, then it should be investigated.</p>
</li>
<li>
<p><span class="bold">Top actions:</span> This table displays the top actions waiting for the corresponding wait event during the selected time period. Actions represent the jobs that are performed by a module. If a single action is using the majority of the wait time, then it should be investigated.</p>
</li>
<li>
<p><span class="bold">Top clients:</span> This table displays the top clients waiting for the corresponding wait event during the selected time period. A client can be a Web browser or any client process that initiates requests for an operation to be performed by the database. If a single client is using the majority of the wait time, then it should be investigated.</p>
</li>
<li>
<p><span class="bold">Top PL/SQL:</span> This table displays the top PL/SQL subprograms waiting for the corresponding wait event during the selected time period. If a single PL/SQL subprogram is using the majority of the wait time, then it should be investigated.</p>
</li>
<li>
<p><span class="bold">Top files:</span> This table displays the average wait time for specific files during the selected time period. This data is available from the Active Sessions Waiting: User I/O page.</p>
</li>
<li>
<p><span class="bold">Top objects:</span> This table displays the top database objects waiting for the corresponding wait event during the selected time period. This data is available from the Active Sessions Waiting: User I/O page.</p>
</li>
</ul>
</div>
</div>
<a id="OASAD751"></a>
<div class="sect3"><a id="GUID-8F887CF9-7524-4D61-963F-EB05E9AC14FF"></a>
<h3 id="OASAD-GUID-8F887CF9-7524-4D61-963F-EB05E9AC14FF" class="sect3"><span class="enumeration_section">6.1.5</span> Host System</h3>
<div>
<p>The Host chart on the Performance page displays utilization information about the system hosting the database<a id="d46302e347" class="indexterm-anchor"></a>.</p>
<p>See the Monitoring Host Activity section in the<span id="GUID-8F887CF9-7524-4D61-963F-EB05E9AC14FF__TDPPT"><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span> for details to determine if the host system has enough resources available to run the database. Appropriate expectations can be established for the amount of CPU, memory, and disk resources that the system should be using, and then verify that the database is not consuming too many of these resources.</p>
</div>
</div>
</div>
<a id="OASAD752"></a>
<div class="props_rev_3"><a id="GUID-930120E0-EAE0-471A-86B5-D28B3C870003"></a>
<h2 id="OASAD-GUID-930120E0-EAE0-471A-86B5-D28B3C870003" class="sect2"><span class="enumeration_section">6.2</span> Set up Diagnostic and Tune Tools for Oracle Fusion Applications Databases</h2>
<div>
<p>Performance tuning is an iterative process. Removing the first bottleneck (a point where resource contention is highest) may not lead to performance improvement immediately because another bottleneck might be revealed that has an even greater performance impact on the system.</p>
<p>Oracle Database provides several tools that make possible to diagnose and tune performance problems. Automatic Database Diagnostic Monitor (ADDM) analyzes statistics to provide automatic diagnosis of major performance problems. Particular analysis can be also performed, using statistics from AWR and ASH reports, wait events, and SQL trace files to identify other bottlenecks in the database.</p>
<p>Tasks for diagnosing and tuning Oracle Database include:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-7C73028E-E27B-4324-883C-35ADC1B692B7">Create a Baseline of the Database</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-B52ABB0F-687F-4724-87A2-805F4A209CEB">Tune the Database Proactively</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-C80F3D46-8F14-42FE-98F6-68A572050B94">Tune the Database Reactively</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-02E0DB95-DEC5-421A-8D9A-8EEA53C4C805">Tune SQL Statements</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-6AB3F7FE-51A0-4BDF-8BF2-3E751B5DCCBB">Review Automatic Database Diagnostic Monitor (ADDM) Reports Regularly</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-5F1BE714-6F91-4FA8-B4E3-BDED87E1D65A">Compare Database Performance Over Time Using AWR Reports</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-040055D6-E85B-4B61-ADC1-1FD434373348">Identify Transient Performance Problems Using ASH Reports</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-07A3C805-3FAE-4D09-89F5-513D1792FCCB">Identify Wait Time Using Wait Events</a></p>
</li>
</ul>
</div>
<a id="OASAD743"></a>
<div class="props_rev_3"><a id="GUID-7C73028E-E27B-4324-883C-35ADC1B692B7"></a>
<h3 id="OASAD-GUID-7C73028E-E27B-4324-883C-35ADC1B692B7" class="sect3"><span class="enumeration_section">6.2.1</span> Create a Baseline of the Database</h3>
<div>
<p>Before the database can be tuned, a performance baseline that can be used for comparison if a performance problem arises must be established. Oracle Database automatically maintains a system-defined moving window baseline that contains all AWR data within the AWR retention period, which by default is 8 days. You can also create your own baseline by specifying and preserving a pair or a range of snapshots as a baseline. The snapshots contained in a baseline are excluded from the automatic AWR purging process and are retained indefinitely.</p>
<p>See the Managing Baselines section in the <span class="italic"><span id="GUID-7C73028E-E27B-4324-883C-35ADC1B692B7__TDPPT"><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></span> for details on creating a baseline, deleting a baseline, computing threshold statistics for baselines, and setting metric thresholds for baselines.</p>
</div>
</div>
<a id="OASAD753"></a>
<div class="props_rev_3"><a id="GUID-B52ABB0F-687F-4724-87A2-805F4A209CEB"></a>
<h3 id="OASAD-GUID-B52ABB0F-687F-4724-87A2-805F4A209CEB" class="sect3"><span class="enumeration_section">6.2.2</span> Tune the Database Proactively</h3>
<div>
<p>Automatic Database Diagnostic Monitor (ADDM), a self-diagnostic software built into Oracle Database, automatically detects and reports performance problems with the database. The results are displayed as ADDM findings on the Database Home page in Oracle Enterprise Manager Cloud Control. Reviewing the ADDM findings makes possible to quickly identify the performance problems that require attention. Before using another performance tuning method described in this guide, first review the results of the ADDM analysis.</p>
<p>See the Automatic Database Performance Monitoring section in the<span id="GUID-B52ABB0F-687F-4724-87A2-805F4A209CEB__TDPPT"><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span> for details on:</p>
<ul style="list-style-type: disc;">
<li>
<p>Configuring Automatic Database Diagnostic Monitor</p>
</li>
<li>
<p>Reviewing the Automatic Database Diagnostic Monitor Analysis</p>
</li>
<li>
<p>Interpretation of Automatic Database Diagnostic Monitor Findings</p>
</li>
<li>
<p>Implementing Automatic Database Diagnostic Monitor Recommendations</p>
</li>
<li>
<p>Viewing Snapshot Statistics</p>
</li>
</ul>
</div>
</div>
<a id="OASAD2154"></a>
<div class="props_rev_3"><a id="GUID-C80F3D46-8F14-42FE-98F6-68A572050B94"></a>
<h3 id="OASAD-GUID-C80F3D46-8F14-42FE-98F6-68A572050B94" class="sect3"><span class="enumeration_section">6.2.3</span> Tune the Database Reactively</h3>
<div>
<p>While ADDM proactively allows users to diagnose database performance problems when they happen, there may be times when database performance problems need to be identified reactively. For example, comparing database performance over time, or analyzing a very short duration for short-lived performance problems may be needed. Wait events may also be examined, to determine if user response time can be improved by reducing the time that is spent waiting by server processes.</p>
<p>See the Reactive Database Tuning section in the<span id="GUID-C80F3D46-8F14-42FE-98F6-68A572050B94__TDPPT"><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span> for details on:</p>
<ul style="list-style-type: disc;">
<li>
<p>Manual Database Performance Monitoring</p>
</li>
<li>
<p>Resolving Transient Performance Problems</p>
</li>
<li>
<p>Resolving Performance Degradation Over Time</p>
</li>
</ul>
</div>
</div>
<a id="OASAD65759"></a>
<div class="props_rev_3"><a id="GUID-02E0DB95-DEC5-421A-8D9A-8EEA53C4C805"></a>
<h3 id="OASAD-GUID-02E0DB95-DEC5-421A-8D9A-8EEA53C4C805" class="sect3"><span class="enumeration_section">6.2.4</span> Tune SQL Statements</h3>
<div>
<p>When Oracle Database executes a SQL statement, the query optimizer (also called the optimizer) first determines the best and most efficient way to retrieve the results. It compares the cost of all possible approaches and chooses the approach with the least cost. The access method for physically executing a SQL statement is called an execution plan, which the optimizer is responsible for generating. The determination of an execution plan is an important step in the processing of any SQL statement, and can greatly affect execution time.</p>
<p>The following topics are discussed:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-BFAFEB52-164B-4B5C-980E-2C416B858AFB">Create SQL Tuning Sets</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-A175E3E2-EACB-445F-A167-25150298CF23">Manage SQL Profiles</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-955E360A-D946-49F9-8B60-BCEC09BC0D59">Use SQL Tuning Advisor</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-D7BC52AE-8314-4855-AC06-F9CEFF1AFE24">Use SQL Access Advisor</a></p>
</li>
</ul>
<p>See the Tuning SQL Statements section in the <span id="GUID-02E0DB95-DEC5-421A-8D9A-8EEA53C4C805__TDPPT"><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span> for details on:</p>
<ul style="list-style-type: disc;">
<li>
<p>Identifying High-Load SQL Statements</p>
</li>
<li>
<p>Tuning SQL Statements</p>
</li>
<li>
<p>Optimizing Data Access Paths</p>
</li>
</ul>
<p>For specific SQL tuning tips, see <a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-E8EAD028-8E96-4EE6-94F2-236F29D6B5B0">Optimize SQL Statements</a>.</p>
</div>
<a id="OASAD65760"></a>
<div class="props_rev_3"><a id="GUID-BFAFEB52-164B-4B5C-980E-2C416B858AFB"></a>
<h4 id="OASAD-GUID-BFAFEB52-164B-4B5C-980E-2C416B858AFB" class="sect4"><span class="enumeration_section">6.2.4.1</span> Create SQL Tuning Sets</h4>
<div>
<p>A SQL tuning set is a database object that includes one or more SQL statements and their execution statistics and context. The set can be used as an input for advisors such as SQL Tuning Advisor, SQL Access Advisor, and SQL Performance Analyzer. SQL statements can be loaded into a SQL tuning set from different SQL sources, such as AWR, the cursor cache, or high-load SQL statements identified. SQL tuning sets are transportable, enabling SQL workloads to be transferred between databases for remote performance diagnostics and tuning. When high-load SQL statements are identified on a production system, it may not be desirable to perform investigation and tuning activities directly on this system. This feature makes possible to transport the high-load SQL statements to a test system, where they can be safely analyzed and tuned.</p>
<p>To create a SQL tuning set, use the SQL Tuning Sets page, accessible from Additional Monitoring Links on the Database Performance page.</p>
<p>For more information about SQL tuning sets, see section Managing SQL Tuning Sets.</p>
</div>
</div>
<a id="OASAD65761"></a>
<div class="props_rev_3"><a id="GUID-A175E3E2-EACB-445F-A167-25150298CF23"></a>
<h4 id="OASAD-GUID-A175E3E2-EACB-445F-A167-25150298CF23" class="sect4"><span class="enumeration_section">6.2.4.2</span> Manage SQL Profiles</h4>
<div>
<p>A <a id="d46302e624" class="indexterm-anchor"></a>SQL profile is a set of auxiliary information that is built during automatic tuning of a SQL statement. A SQL profile is to a SQL statement what statistics are to a table.</p>
<p>During SQL profiling, the optimizer uses the execution history of the SQL statement to create appropriate settings for optimizer parameters. After SQL profiling completes, the optimizer uses the information in the SQL profile and regular database statistics to generate execution plans. The additional information enables the database to produce well-tuned plans for corresponding SQL statements.</p>
<p>After running a SQL Tuning Advisor task with a comprehensive scope, a SQL profile may be recommended. If the recommendation is accepted, then the database creates the SQL profile and enables it for the SQL statement.</p>
<p>To manage SQL profiles, use the Plan Control tab, accessible from the SQL Details page of the SQL statement that is using a SQL profile.</p>
<p>For more information about SQL profiles, see section Managing SQL Profiles.</p>
</div>
</div>
<a id="OASAD65762"></a>
<div class="props_rev_3"><a id="GUID-955E360A-D946-49F9-8B60-BCEC09BC0D59"></a>
<h4 id="OASAD-GUID-955E360A-D946-49F9-8B60-BCEC09BC0D59" class="sect4"><span class="enumeration_section">6.2.4.3</span> Use SQL Tuning Advisor</h4>
<div>
<p>Oracle Database can generate SQL tuning reports automatically. Automatic SQL Tuning runs during system maintenance windows as an automated maintenance task, searching for ways to improve the execution plans of high-load SQL statements.</p>
<p>ADDM also automatically identifies high-load SQL statements. If ADDM identifies such statements, then click <span class="bold">Schedule/Run SQL Tuning Advisor</span> on the Recommendation Detail page to run SQL Tuning Advisor on these statements.</p>
<p>For more information about SQL Tuning Advisor, see the Tuning SQL Statements Using SQL Tuning Advisor section in the <span id="GUID-955E360A-D946-49F9-8B60-BCEC09BC0D59__TDPPT"><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span>.</p>
</div>
</div>
<a id="OASAD65763"></a>
<div class="props_rev_3"><a id="GUID-D7BC52AE-8314-4855-AC06-F9CEFF1AFE24"></a>
<h4 id="OASAD-GUID-D7BC52AE-8314-4855-AC06-F9CEFF1AFE24" class="sect4"><span class="enumeration_section">6.2.4.4</span> Use SQL Access Advisor</h4>
<div>
<p>To achieve optimal performance for data-intensive queries, materialized views and indexes are essential for SQL statements. However, implementing these objects does not come without cost. Creation and maintenance of these objects can be time-consuming. Space requirements can be significant. SQL Access Advisor<a id="d46302e689" class="indexterm-anchor"></a><a id="d46302e693" class="indexterm-anchor"></a> optimizes query access paths by recommending materialized views and view logs, indexes, SQL profiles, and partitions for a specific workload.</p>
<p>To run SQL Access Advisor, use the <span class="bold">SQL Access Advisor</span> link on the SQL Advisors page, accessible from the Advisor Central page under Related Links on the Database Home page.</p>
<p>For more information about SQL Access Advisor, see the Optimizing Data Access Paths section in the <span id="GUID-D7BC52AE-8314-4855-AC06-F9CEFF1AFE24__TDPPT"><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span>.</p>
</div>
</div>
<a id="OASAD65765"></a><a id="OASAD65764"></a>
<div class="sect4"><a id="GUID-6ABFB1E8-225F-4BBC-B871-7F6E3003C9F8"></a>
<h4 id="OASAD-GUID-6ABFB1E8-225F-4BBC-B871-7F6E3003C9F8" class="sect4"><span class="enumeration_section">6.2.4.5</span> Use SQL Tracing</h4>
<div>
<p>The <a id="d46302e728" class="indexterm-anchor"></a>SQL Trace facility can be used to monitor Oracle Fusion Applications running against Oracle Database by assessing the efficiency of the SQL statements that Oracle Fusion applications are running. The SQL Trace facility provides performance information for individual SQL statements and generates detailed statistics for each statement.</p>
<p>Then, the <code class="codeph">TKPROF</code> program<a id="d46302e736" class="indexterm-anchor"></a> can be run to format the contents of the SQL trace file and place the output into a readable output file. The <code class="codeph">TKPROF</code> program reports each statement executed with the resources it has consumed, the number of times it was called, and the number of rows which it processed. This information makes possible to easily locate SQL statements that are using the greatest resource.</p>
<p>For more information about using SQL tracing, see the Using the SQL Trace Facility and TKPROF section in the <span class="italic">Oracle&reg; Database 2 Day + Performance Tuning Guide</span>.</p>
<p>If a performance problem is reported for a particular business transaction for a given session in Oracle Fusion Applications, the user of the session can be instructed to enable a SQL trace for that transaction by using the Record Issue feature as documented in MyOracle Support Note 2122074.1.</p>
<div class="p">
<ol>
<li>
<p>Select <span class="bold">Performance Statistics</span> radio button.</p>
</li>
<li>
<p>Check the <span class="bold">Database Tracing</span> box under the <span class="bold">Advanced Option</span> section.</p>
</li>
<li>
<p>Check <span class="bold">Include bind variables</span> and/or <span class="bold">Include wait events</span> as appropriate.</p>
</li>
</ol>
</div>
<p>This enables SQL trace for the selected transaction and does not affect transactions that belong to other sessions.</p>
</div>
</div>
</div>
<a id="OASAD65718"></a>
<div class="props_rev_3"><a id="GUID-6AB3F7FE-51A0-4BDF-8BF2-3E751B5DCCBB"></a>
<h3 id="OASAD-GUID-6AB3F7FE-51A0-4BDF-8BF2-3E751B5DCCBB" class="sect3"><span class="enumeration_section">6.2.5</span> Review Automatic Database Diagnostic Monitor (ADDM) Reports Regularly</h3>
<div>
<p>ADDM automatically detects and reports performance problems with the database. The results are displayed as ADDM findings on the Database Home page in Oracle Enterprise Manager Cloud Control (Cloud Control). Reviewing the ADDM findings makes possible to quickly identify the performance problems that require attention. Always review the results of the ADDM analysis.</p>
<p>Each ADDM finding provides a list of recommendations for reducing the effect of the performance problem. ADDM findings should be reviewed and implement the recommendations every day as part of regular database maintenance. Even when the database is operating at an optimal performance level, continue using ADDM to monitor database performance on an ongoing basis.</p>
<p>For instance, ADDM will report if database cache sizes need to be increased.</p>
</div>
</div>
<a id="OASAD65766"></a>
<div class="sect3"><a id="GUID-5F1BE714-6F91-4FA8-B4E3-BDED87E1D65A"></a>
<h3 id="OASAD-GUID-5F1BE714-6F91-4FA8-B4E3-BDED87E1D65A" class="sect3"><span class="enumeration_section">6.2.6</span> Compare Database Performance Over Time Using AWR Reports</h3>
<div>
<p>Performance degradation of the database occurs when the database was performing optimally in the past, such as 6 months ago, but has gradually degraded to a point where it becomes noticeable to the users. The <a id="d46302e822" class="indexterm-anchor"></a><a id="d46302e828" class="indexterm-anchor"></a><a id="d46302e832" class="indexterm-anchor"></a><a id="d46302e836" class="indexterm-anchor"></a>Automatic Workload Repository (AWR) Compare Periods report makes possible to compare database performance between two periods of time to identify any performance degradation that may have occurred over time.</p>
<p>The AWR Compare Periods report compares a new baseline or a pair of snapshots to an existing baseline. Before generating this report, an existing baseline that represents the system operating at an optimal level should be available, as described in <a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-7C73028E-E27B-4324-883C-35ADC1B692B7">Create a Baseline of the Database</a>. If an existing baseline is unavailable, this report can be used to compare two periods of time using two pairs of snapshots. To generate the AWR Compare Periods report, use the Automatic Workload Repository page in Database Control, accessible from the Database Server page.</p>
<p>For more information about generating AWR Compare Periods reports, see the Running the AWR Compare Periods Reports section in the <span><span id="GUID-5F1BE714-6F91-4FA8-B4E3-BDED87E1D65A__TDPPT"><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></span>.</p>
</div>
</div>
<a id="OASAD65767"></a>
<div class="sect3"><a id="GUID-040055D6-E85B-4B61-ADC1-1FD434373348"></a>
<h3 id="OASAD-GUID-040055D6-E85B-4B61-ADC1-1FD434373348" class="sect3"><span class="enumeration_section">6.2.7</span> Identify Transient Performance Problems Using ASH Reports</h3>
<div>
<p>ADDM tries to report the most significant performance problems during an analysis period in terms of their impact on DB time. If a particular problem lasts for a very short duration, then its severity might be averaged out or minimized by other performance problems in the analysis period. Therefore, the problem may not appear in the ADDM findings. Whether a performance problem is captured by ADDM depends on its duration compared to the interval between the AWR snapshots.</p>
<p>To capture a detailed history of database activity, Oracle Database samples active sessions each second with the Active Session History<a id="d46302e875" class="indexterm-anchor"></a> (ASH) sampler. ASH gathers sampled data at the session level rather than at the instance level. By capturing statistics for only active sessions, the size of the sampled data is directly related to the work being performed.</p>
<p>To generate the ASH report, under Average Active Sessions on the Database Performance page, click <span class="bold">Run ASH Report</span>.</p>
<p>For more information about generating ASH reports, see the Running Active Session History Reports section in the <span><span id="GUID-040055D6-E85B-4B61-ADC1-1FD434373348__TDPPT"><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></span>.</p>
</div>
</div>
<a id="OASAD65768"></a>
<div class="sect3"><a id="GUID-07A3C805-3FAE-4D09-89F5-513D1792FCCB"></a>
<h3 id="OASAD-GUID-07A3C805-3FAE-4D09-89F5-513D1792FCCB" class="sect3"><span class="enumeration_section">6.2.8</span> Identify Wait Time Using Wait Events</h3>
<div>
<p>Wait events are statistics that are incremented by a server process or thread to indicate that it had to wait for an event to complete before being able to continue processing. Whenever an Oracle Database process waits for something, it records the wait using one of a set of predefined wait events. Wait event data reveals various symptoms of problems that might be affecting performance, such as latch contention, buffer contention, and I/O contention.</p>
<p>Wait event statistics include the number of times an event was waited for and the time waited for the event to complete. To minimize user response time, reduce the time spent by server processes waiting for event completion. Not all wait events have the same wait time. Therefore, it is more important to examine events with high wait time rather than wait events with a high number of occurrences.</p>
<p>It is possible to query wait event statistics from various <code class="codeph">V$</code> dynamic performance views. For more information about using wait events, see the Using Wait Event Statistics to Drill Down to Bottlenecks section in the <span><span id="GUID-07A3C805-3FAE-4D09-89F5-513D1792FCCB__TDPPT"><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></span>.</p>
</div>
</div>
</div>
<a id="OASAD65769"></a>
<div class="props_rev_3"><a id="GUID-3C0E321F-02D8-4266-A397-046F4B6D480B"></a>
<h2 id="OASAD-GUID-3C0E321F-02D8-4266-A397-046F4B6D480B" class="sect2"><span class="enumeration_section">6.3</span> Tune Tips Specific to Oracle Fusion Applications Environments</h2>
<div>
<p>This section provides configuration, tuning, and other tips so that the analysis to identify other performance issues in the database can be performed.</p>
<p>Refer to the following sections for additional details to tune the Oracle Fusion Application environment:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-DFA71948-9688-4C97-BC19-C5D3914525BF">Discover How a Connection is Being Used</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-55DE041B-4554-4CFE-81AB-22FAC7BA296D">Tune Database Initialization Parameters</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-1DA9912D-E1CB-4713-BCAF-1CC7EA1D696F">Use Fusion Applications Tools to Optimize UNDO, TEMP, and LOGS Handling</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-46A5D275-862C-4E62-A030-6FAC65600215">Configure Kernel Parameters</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-B331B1CA-9AA6-4CD9-A1AB-79F2A852C480">Configure the Database Listener</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-38BF8A7F-7A17-4062-B6B2-74ECB81BA559">Tune Tips for the Real Application Cluster (RAC) Databases in Oracle Fusion Applications</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-E8EAD028-8E96-4EE6-94F2-236F29D6B5B0">Optimize SQL Statements</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-C40882F7-F4DA-4FC9-B817-9E655CF40FAE">Configure the Database Resource Manager</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-FFE0B40D-B8DD-4060-A2A3-DFDE781C3413">Tune the PS_TXN Table in the FUSION Schema</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-93F37EA2-8075-42DE-9CA5-ACEA2F37A8A2">Optimize Maintenance Windows</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-98ABBA63-99F5-4979-B261-DA4093827D48">Reduce Connection Creation Originating from SOA Server</a></p>
</li>
</ul>
</div>
<a id="OASAD65691"></a><a id="OASAD65690"></a>
<div class="props_rev_3"><a id="GUID-DFA71948-9688-4C97-BC19-C5D3914525BF"></a>
<h3 id="OASAD-GUID-DFA71948-9688-4C97-BC19-C5D3914525BF" class="sect3"><span class="enumeration_section">6.3.1</span> Discover How a Connection is Being Used</h3>
<div>
<p><span id="GUID-DFA71948-9688-4C97-BC19-C5D3914525BF__FA">Oracle Fusion Applications</span> set values on a number of v$session attributes to indicate how the connection is being used. For example, when looking at a connection consuming high CPU on the database, or when trying to understand what connections are used for what processes, these attribute values (<a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-DFA71948-9688-4C97-BC19-C5D3914525BF__BGBCAEEI" title="Attribute Values">Table 6-1</a>) may help provide the answer.</p>
<div class="tblformalwide" id="GUID-DFA71948-9688-4C97-BC19-C5D3914525BF__BGBCAEEI">
<p class="titleintable">Table 6-1 v$session Attribute Values</p>
<table class="cellalignment20" title="v$session Attribute Values" summary="Attribute Values">
<thead>
<tr class="cellalignment11">
<th class="cellalignment72" id="d46302e1029">Attribute in v$session</th>
<th class="cellalignment133" id="d46302e1032">Value Being Set</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1037" headers="d46302e1029">
<p>Process</p>
</td>
<td class="cellalignment134" headers="d46302e1037 d46302e1032">
<p>Data Source Name (such as ApplicationDB)</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1044" headers="d46302e1029">
<p>Program</p>
</td>
<td class="cellalignment134" headers="d46302e1044 d46302e1032">
<p>WebLogic Server Domain plus Managed Server name, prefixed by DS (such as DS/FinancialDomain/AccountsReceivableServer_1)</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1051" headers="d46302e1029">
<p>Module</p>
</td>
<td class="cellalignment134" headers="d46302e1051 d46302e1032">
<ul style="list-style-type: disc;">
<li>
<p>For ADF: ADF BC application module name</p>
</li>
<li>
<p>For ESS:</p>
<ul style="list-style-type: disc;">
<li>
<p>For Java job type, the class name (minus oracle.apps)</p>
</li>
<li>
<p>For PL/SQL, the package and procedure name (such as mypkg.myproc)</p>
</li>
<li>
<p>For other job types, the executable name should be passed</p>
</li>
</ul>
</li>
<li>
<p>For BI Publisher: the name of the report</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1076" headers="d46302e1029">
<p>Action</p>
</td>
<td class="cellalignment134" headers="d46302e1076 d46302e1032">
<ul style="list-style-type: disc;">
<li>
<p>For ADF: jspx name</p>
</li>
<li>
<p>For ESS: jobDefinitionName</p>
</li>
<li>
<p>For BI Publisher, if request is submitted:</p>
<ul style="list-style-type: disc;">
<li>
<p>Using ESS scheduler: ESS Job Definition Name</p>
</li>
<li>
<p>Using BIP Scheduler Job: BIP Job Name submitted by the user</p>
</li>
<li>
<p>Using BIP online: static string "BIP:Online"</p>
</li>
<li>
<p>Using BIP Webservices: the name of the webservices</p>
</li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1104" headers="d46302e1029">
<p>Client_Identifier</p>
</td>
<td class="cellalignment134" headers="d46302e1104 d46302e1032">
<p>Application User Name</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="OASAD65771"></a><a id="OASAD65770"></a>
<div class="sect3"><a id="GUID-55DE041B-4554-4CFE-81AB-22FAC7BA296D"></a>
<h3 id="OASAD-GUID-55DE041B-4554-4CFE-81AB-22FAC7BA296D" class="sect3"><span class="enumeration_section">6.3.2</span> Tune Database Initialization Parameters</h3>
<div>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-55DE041B-4554-4CFE-81AB-22FAC7BA296D__BGBDCEJD" title="Common init.ora Parameters">Table 6-2</a> provides the database initialization parameter guidelines for Oracle Fusion Applications. Within the Oracle Fusion Applications ecosystem, there exist four types of databases:</p>
<ul style="list-style-type: disc;">
<li>
<p>Online Transaction Processing Starter or Production configuration (OLTP)</p>
</li>
<li>
<p>Oracle Fusion IDM databases: one for OID and one for OIM</p>
</li>
<li>
<p>Oracle Fusion Applications Data Warehouse (DW)</p>
</li>
</ul>
<p>These parameter values are intended to provide a baseline. The database that is installed during Oracle Fusion Applications provisioning is configured with the suggested values. As the deployment and workloads characteristics change, these values may need to be adjusted.</p>
<p>Tuning the database involves adjusting the sizing parameters based on the available resource and load on the database. The <code class="codeph">sga_target</code>, <code class="codeph">pga_aggregate_target</code> and <code class="codeph">processes</code> parameters from <a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-55DE041B-4554-4CFE-81AB-22FAC7BA296D__BGBDCEJD" title="Common init.ora Parameters">Table 6-2</a> are examples of such parameters that need to be tuned based on SGA and PGA advisories and looking into the number of open processes during peak load.</p>
<p>In addition, setting a minimum value for <code class="codeph">SHARED_POOL_SIZE</code> and <code class="codeph">DB_CACHE_SIZE</code> to minimize frequent resizing may be considered.</p>
<div class="tblformal" id="GUID-55DE041B-4554-4CFE-81AB-22FAC7BA296D__BGBDCEJD">
<p class="titleintable">Table 6-2 Common init.ora Parameters</p>
<table class="cellalignment32" title="Common init.ora Parameters " summary="Common init.ora Parameters">
<thead>
<tr class="cellalignment11">
<th class="cellalignment72" id="d46302e1181">Parameter Name</th>
<th class="cellalignment133" id="d46302e1184">Description, Default value and suggested start value</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1189" headers="d46302e1181">
<p><code class="codeph">audit_trail</code></p>
</td>
<td class="cellalignment134" headers="d46302e1189 d46302e1184">
<p>Enables or disables database auditing.</p>
<p>Oracle Release 2 (11.2.0.2) default value: <code class="codeph">DB</code></p>
<p>The suggested value for all Oracle Fusion Applications databases is <code class="codeph">NONE</code>.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1207" headers="d46302e1181">
<p><code class="codeph">_fix_control</code></p>
</td>
<td class="cellalignment134" headers="d46302e1207 d46302e1184">
<p>This parameter addresses the dynamic sampling of global temporary tables.</p>
<p>Oracle Release 2 (11.2.0.2) default value: N/A</p>
<p>The suggested value for an Oracle Fusion Applications Starter or Production database is <code class="codeph">5483301:OFF, 6708183:ON</code></p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1221" headers="d46302e1181">
<p><code class="codeph">plsql_code_type</code></p>
</td>
<td class="cellalignment134" headers="d46302e1221 d46302e1184">
<p>PLSQL_CODE_TYPE specifies the compilation mode for PL/SQL library units.</p>
<p>INTERPRETED: PL/SQL library units are compiled to PL/SQL bytecode format. Such modules are executed by the PL/SQL interpreter engine.</p>
<p>NATIVE: PL/SQL library units are compiled to native (machine) code. Such modules are executed natively without incurring any interpreter impacts.</p>
<p>Oracle Release 2 (11.2.0.2) default value is <code class="codeph">INTERPRETED</code>.</p>
<p>The suggested value for all Oracle Fusion Applications databases is <code class="codeph">NATIVE</code>.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1243" headers="d46302e1181">
<p><code class="codeph">nls_sort</code></p>
</td>
<td class="cellalignment134" headers="d46302e1243 d46302e1184">
<p>NLS_SORT specifies the collating sequence for ORDER BY queries.</p>
<ul style="list-style-type: disc;">
<li>
<p>If the value is set to BINARY, the collating sequence for ORDER BY queries is based on the numeric value of characters (a binary sort that requires fewer system resources).</p>
</li>
<li>
<p>If the value is a named linguistic sort, sorting is based on the order of the defined linguistic sort. Most (but not all) languages supported by the NLS_LANGUAGE parameter also support a linguistic sort with the same name.</p>
</li>
</ul>
<p>Oracle Release 2 (11.2.0.2) default value: Derived from NLS_LANGUAGE.</p>
<p>The suggested value for all Oracle Fusion Applications databases is <code class="codeph">BINARY</code>.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1265" headers="d46302e1181">
<p><code class="codeph">open_cursors</code></p>
</td>
<td class="cellalignment134" headers="d46302e1265 d46302e1184">
<p>Specifies the maximum number of open cursors (handles to private SQL areas) a session can have at once. It is important to set the value of OPEN_CURSORS high enough to prevent the application from running out of open cursors.</p>
<p>Oracle Release 2 (11.2.0.2) default value is <code class="codeph">50</code>.</p>
<p>The suggested value for all Oracle Fusion Applications databases is <code class="codeph">500</code>.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1283" headers="d46302e1181">
<p><code class="codeph">session_cached_cursors</code></p>
</td>
<td class="cellalignment134" headers="d46302e1283 d46302e1184">
<p>Specifies the number of session cursors to cache. Repeated parse calls of the same SQL statement cause the session cursor for that statement to be moved into the session cursor cache. Subsequent parse calls find the cursor in the cache and do not reopen the cursor. Oracle uses a least recently used algorithm to remove entries in the session cursor cache to make room for new entries when needed.</p>
<p>This parameter also constrains the size of the PL/SQL cursor cache that PL/SQL uses to avoid having to re-parse as statements are re-executed by a user.</p>
<p>Oracle Release 2 (11.2.0.2) default value is <code class="codeph">50</code>.</p>
<p>The suggested value for all Oracle Fusion Applications databases is <code class="codeph">500</code>.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1303" headers="d46302e1181">
<p><code class="codeph">_b_tree_bitmap_plans</code></p>
</td>
<td class="cellalignment134" headers="d46302e1303 d46302e1184">
<p>This enables use of bitmap access paths for b-tree indexes.</p>
<p>Oracle Release 2 (11.2.0.2) default value: <code class="codeph">TRUE</code></p>
<p>The suggested value for all Oracle Fusion Applications databases is <code class="codeph">FALSE</code>.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1321" headers="d46302e1181">
<p><code class="codeph">processes</code></p>
</td>
<td class="cellalignment134" headers="d46302e1321 d46302e1184">
<p>Sets the maximum number of operating system processes that can be connected to Oracle concurrently. The value of this parameter must account for Oracle background processes. SESSIONS parameter is deduced from this value.</p>
<p>Oracle Release 2 (11.2.0.2) default value: <code class="codeph">100</code></p>
<p>The suggested value for an Oracle Fusion Applications DW or IDM database (OID, OIM) is <code class="codeph">2500</code>.</p>
<p>The suggested value for an Oracle Fusion Applications Starter or Production database is <code class="codeph">5000</code>.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1344" headers="d46302e1181">
<p><code class="codeph">sga_target</code></p>
</td>
<td class="cellalignment134" headers="d46302e1344 d46302e1184">
<p>Setting this parameter to a nonzero value enables Automatic Shared Memory Management. Consider using automatic memory management, both to simplify configuration and to improve performance.</p>
<p>Oracle Release 2 (11.2.0.2) default value: <code class="codeph">0</code></p>
<p>The suggested value for Oracle Fusion Applications IDM databases (OID, OIM) is 4 GB.</p>
<p>The suggested value for an Oracle Fusion Applications Starter database is 9 GB.</p>
<p>The suggested value for an Oracle Fusion Applications DW database is 8 GB.</p>
<p>The suggested value for an Oracle Fusion Applications Production database is 18 GB (based on reference hardware having 32 GB of physical memory).</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1364" headers="d46302e1181">
<p><code class="codeph">pga_aggregate_target</code></p>
</td>
<td class="cellalignment134" headers="d46302e1364 d46302e1184">
<p>Specifies the target aggregate Program Global Area (PGA) memory available to all server processes attached to the instance.</p>
<p>Oracle Release 2 (11.2.0.2) default value is <code class="codeph">0</code>.</p>
<p>The suggested value for Oracle Fusion Applications IDM databases (OID, OIM) is 2 GB.</p>
<p>The suggested value for an Oracle Fusion Applications Starter database is 4 GB.</p>
<p>The suggested value for an Oracle Fusion Applications DW database is 4 GB.</p>
<p>The suggested value for an Oracle Fusion Applications Production database is 8 GB (based on reference hardware having 32 GB of physical memory).</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1385" headers="d46302e1181">
<p><code class="codeph">star_transformation_enabled</code></p>
</td>
<td class="cellalignment134" headers="d46302e1385 d46302e1184">
<p>Determines whether a cost-based query transformation will be applied to star queries.</p>
<p>Oracle Release 2 (11.2.0.2) default value is <code class="codeph">FALSE</code>.</p>
<p>The suggested value for an Oracle Fusion Applications DW database is <code class="codeph">TRUE</code>.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1404" headers="d46302e1181">
<p><code class="codeph">query_rewrite_integrity</code></p>
</td>
<td class="cellalignment134" headers="d46302e1404 d46302e1184">
<p>Determines the degree to which Oracle must enforce query rewriting</p>
<p>Oracle Release 2 (11.2.0.2) default value is <code class="codeph">ENFORCED</code>.</p>
<p>The suggested value for an Oracle Fusion Applications DW database is <code class="codeph">TRUSTED</code>.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1422" headers="d46302e1181">
<p><code class="codeph">PARALLEL_MAX_SERVERS</code></p>
</td>
<td class="cellalignment134" headers="d46302e1422 d46302e1184">
<p>Specifies the maximum number of parallel execution processes and parallel recovery processes for an instance.</p>
<p>Oracle Release 2 (11.2.0.2) default value is <code class="codeph">Derived</code>.</p>
<p>The suggested value for an Oracle Fusion Applications DW database is <code class="codeph">16</code>.</p>
<p>The suggested value for all Oracle Fusion Applications IDM databases is <code class="codeph">NUM_CPU_CORES</code> (number of CPU cores on the database server).</p>
<p>The suggested value for all Oracle Fusion Applications Production databases is <code class="codeph">NUM_CPU_CORES</code> (number of CPU cores on the database server).</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1450" headers="d46302e1181">
<p><code class="codeph">JOB_QUEUE_PROCESSES</code></p>
</td>
<td class="cellalignment134" headers="d46302e1450 d46302e1184">
<p>Specifies the maximum number of job slaves per instance that can be created for the execution of DBMS_JOB jobs and Oracle Scheduler (DBMS_SCHEDULER) jobs.</p>
<p>Oracle Release 2 (11.2.0.2) default value is <code class="codeph">1000</code>.</p>
<p>The suggested value for an Oracle Fusion Applications DW database is <code class="codeph">10</code>.</p>
<p>The suggested value for all Oracle Fusion Applications IDM databases is <code class="codeph">NUM_CPU_CORES</code> (number of CPU cores on the database server).</p>
<p>The suggested value for all Oracle Fusion Applications Production databases is <code class="codeph">NUM_CPU_CORES</code> (number of CPU cores on the database server).</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1478" headers="d46302e1181">
<p><code class="codeph">disk_asynch_io</code></p>
</td>
<td class="cellalignment134" headers="d46302e1478 d46302e1184">
<p>Controls whether I/O to datafiles, control files, and logfiles is asynchronous.</p>
<p>Oracle Release 2 (11.2.0.2) default value is <code class="codeph">TRUE</code>.</p>
<p>The suggested value for all Oracle Fusion Applications databases is <code class="codeph">TRUE</code>.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1496" headers="d46302e1181">
<p><code class="codeph">filesystemio_options</code></p>
</td>
<td class="cellalignment134" headers="d46302e1496 d46302e1184">
<p>Specifies I/O on file system files to be asynchronous I/O or direct I/O.</p>
<p>Oracle Release 2 (11.2.0.2) default value: This parameter is platform-specific and has a default value that is best for a particular platform.</p>
<p>The suggested value for all Oracle Fusion Applications databases is to use a value that is supported by the specific platform. <span class="italic">Do not</span> set it to <code class="codeph">NONE</code>.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1515" headers="d46302e1181">
<p><code class="codeph">DB_SECUREFILE</code></p>
</td>
<td class="cellalignment134" headers="d46302e1515 d46302e1184">
<p>Specifies whether or not to treat LOB files as SecureFiles.</p>
<p>Oracle Release 2 (11.2.0.2) default value is <code class="codeph">PERMITTED</code>.</p>
<p>The suggested value for all Oracle Fusion Applications databases is <code class="codeph">ALWAYS</code>.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1533" headers="d46302e1181">
<p><code class="codeph">_active_session_legacy_behavior</code></p>
</td>
<td class="cellalignment134" headers="d46302e1533 d46302e1184">
<p>Enables active session legacy behavior.</p>
<p>Oracle Release 2 (11.2.0.2) default value: <code class="codeph">FALSE</code></p>
<p>The suggested value for all Oracle Fusion Applications Production databases is <code class="codeph">TRUE</code>.</p>
</td>
</tr>
<tr class="cellalignment11">
<td class="cellalignment73" id="d46302e1550" headers="d46302e1181">
<p><code class="codeph">shared_servers</code></p>
</td>
<td class="cellalignment134" headers="d46302e1550 d46302e1184">
<p>Specifies the number of server processes that need to be created when an instance is started.</p>
<p>Oracle Release 2 (11.2.0.2) default value: <code class="codeph">0</code></p>
<p>The suggested value for all Oracle Fusion Applications IDM database is <code class="codeph">0</code>.</p>
<p>The suggested value for all Oracle Fusion Applications Production database is <code class="codeph">0</code> or <code class="codeph">1</code>. A value of <code class="codeph">1</code> is acceptable if the <code class="codeph">dispatchers</code> parameter has the <code class="codeph">SERVICE</code> clause defined as <code class="codeph">XDB</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="OASAD65773"></a><a id="OASAD65774"></a><a id="OASAD65775"></a><a id="OASAD65776"></a><a id="OASAD65772"></a>
<div class="sect3"><a id="GUID-1DA9912D-E1CB-4713-BCAF-1CC7EA1D696F"></a>
<h3 id="OASAD-GUID-1DA9912D-E1CB-4713-BCAF-1CC7EA1D696F" class="sect3"><span class="enumeration_section">6.3.3</span> Use Fusion Applications Tools to Optimize UNDO, TEMP, and LOGS Handling</h3>
<div>
<p>This section contains an overview for configuring a database for performance. Although it is expected that modifications will be made to the database on an ongoing basis to maintain or improve performance, significant benefits can be gained by proper initial configuration of the database.</p>
<p>In addition to tuning the database parameters, the database administrator should properly configure the REDO Logs, and the UNDO and TEMP tablespaces, to meet the demands of the expected or observed database workload. The recommendations in this section are intended to provide initial guidance in these areas.</p>
<div class="section">
<p class="subhead3">REDO Logs</p>
</div>
<!-- class="section" -->
<p>Under demanding workloads, the size of the redo log files can influence performance. Generally, larger redo log files provide better performance. Undersized log files increase checkpoint activity and reduce performance. It is possible to obtain sizing advice on the Redo Log Groups page of <span id="GUID-1DA9912D-E1CB-4713-BCAF-1CC7EA1D696F__FAOEMFRAMESHORT">Fusion Applications Control</span>. In addition, depending on the storage configuration and performance characteristics, it may be necessary to redistribute redo logs to optimize I/O performance. The suggested minimum setting for Redo Logs is to have 3 log files of 2 GB each.</p>
<div class="section">
<p class="subhead3">UNDO</p>
</div>
<!-- class="section" -->
<p>Oracle recommends that the default mode of automatic undo management be leveraged to maximize performance and efficiency. <span id="GUID-1DA9912D-E1CB-4713-BCAF-1CC7EA1D696F__FAOEMFRAME">Oracle Enterprise Manager Fusion Applications Control</span> Automatic Undo Management Advisor should be leveraged to set configuration details for undo tablespace and retention settings. This advisor also provides access to the Undo Advisor that assesses the effect and provides advice of a new undo retention setting. The suggested minimum size for the UNDO tablespace is 6 GB with <code class="codeph">auto-extend</code> enabled.</p>
<div class="section">
<p class="subhead3">Tablespaces</p>
</div>
<!-- class="section" -->
<p>The location of the datafiles should be optimized for I/O performance and growth. Also, <span>Fusion Applications Control</span> Segment Advisor should be leveraged to optimize the use of segment space and assure performance degradation does not occur. The advisor can provide historical growth trends of segments, which can be used to proactively plan for growth.</p>
<div class="section">
<p class="subhead3">TEMP</p>
</div>
<!-- class="section" -->
<p>Oracle recommends the use of locally-managed temporary tablespaces with UNIFORM extents and the default size of 1 MB. Some workflows in Oracle Fusion applications can generate a large amount of disk sorts that require high temporary space requirements. Therefore, the use of multiple temporary tablespaces and tablespace groups is recommended to meet these requirements and assure optimal performance. A suggested minimum size for the TEMP tablespace (or tablespace group) assigned to the Oracle Fusion Applications schema owners is 6 GB with <code class="codeph">auto-extend</code> enabled.</p>
</div>
</div>
<a id="OASAD65692"></a>
<div class="sect3"><a id="GUID-46A5D275-862C-4E62-A030-6FAC65600215"></a>
<h3 id="OASAD-GUID-46A5D275-862C-4E62-A030-6FAC65600215" class="sect3"><span class="enumeration_section">6.3.4</span> Configure Kernel Parameters</h3>
<div>
<p>The parameters listed here are only a subset of the parameters needed to properly configure the database environment. Consult the <span class="italic">Oracle Database Installation Guide</span> for the specific operating system to determine the overall requirements for the kernel parameter settings. Installation guides are available in the <a href="http://docs.oracle.com/en/database/" target="_blank">Oracle Database Documentation Library</a>. For additional details, go to My Oracle Support and search for DocID 169706.1.</p>
<p>If the current values of these parameters are larger than what is recommended, no change is necessary.</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">SHMMAX</code> - Set to the larger of either the largest System Global Area (SGA) on the system or half of the physical memory available.</p>
</li>
<li>
<p><code class="codeph">SEMMNS</code> - Set to the larger of either 32000 or twice the sum of the PROCESSES initialization parameter for each Oracle database.</p>
</li>
<li>
<p><code class="codeph">SHMALL</code> - Set to the sum of all SGAs divided by the page size (<code class="codeph">getconf PAGE_SIZE</code>).</p>
</li>
<li>
<p><code class="codeph">SHMMNI</code> - Recommended value is 4096.</p>
</li>
<li>
<p><code class="codeph">vm.nr_hugepages</code> - Should be set for SGA larger than 8 GB. The value should be set to the sum of all SGAs.</p>
</li>
</ul>
</div>
</div>
<a id="OASAD65694"></a><a id="OASAD65695"></a><a id="OASAD65693"></a>
<div class="sect3"><a id="GUID-B331B1CA-9AA6-4CD9-A1AB-79F2A852C480"></a>
<h3 id="OASAD-GUID-B331B1CA-9AA6-4CD9-A1AB-79F2A852C480" class="sect3"><span class="enumeration_section">6.3.5</span> Configure the Database Listener</h3>
<div>
<p>The database listener is responsible for accepting and routing connection requests to the database. The parameters described in this section can change the behavior of the listener and, therefore, need to be examined and changed accordingly to address the needs of the particular database connection load.</p>
<div class="section">
<p class="subhead3">SQLNET.EXPIRE_TIME Parameter</p>
</div>
<!-- class="section" -->
<p>For Fusion Application environments that leverage a firewall between the middle and database tiers, it is recommended to set the database listener setting <code class="codeph">SQLNET.EXPIRE_TIME</code>. This parameter is defined in the <code class="codeph">sqlnet.ora</code> file that is located in the <code class="codeph">TNS_ADMIN</code> location. This parameter is used to set a time interval, in minutes, to determine how often to probe connections to verify their status.</p>
<p>Typically, a firewall is configured to terminate connections after it has been idle for a specified amount of time. Setting <code class="codeph">SQLNET.EXPIRE_TIME</code> to an interval smaller than the firewall's will generate enough traffic within an appropriate interval to prevent the firewall from determining the connections are in an idle state and terminating these connections. A setting of <code class="codeph">SQLNET.EXPIRE_TIME = 10</code> is commonly used.</p>
<div class="section">
<p class="subhead3">INBOUND_CONNECT_TIMEOUT Parameter</p>
</div>
<!-- class="section" -->
<p>On occasion, due to network latency, connections can exceed the default timeout of 60 seconds. Typical symptoms of this include observing "TNS-12537: TNS:connection closed" errors in the database alert logs. One of the things that can resolve these issues is to increase the timeout parameters. A suggested value of <code class="codeph">INBOUND_CONNECT_TIMEOUT_&lt;listenerName&gt; = 120 (listener.ora)</code> and <code class="codeph">SQLNET.INBOUND_CONNECT_TIMEOUT=130 (sqlnet.ora)</code> is recommended.</p>
</div>
</div>
<a id="OASAD65697"></a><a id="OASAD65698"></a><a id="OASAD65696"></a>
<div class="sect3"><a id="GUID-38BF8A7F-7A17-4062-B6B2-74ECB81BA559"></a>
<h3 id="OASAD-GUID-38BF8A7F-7A17-4062-B6B2-74ECB81BA559" class="sect3"><span class="enumeration_section">6.3.6</span> Tune Tips for the Real Application Cluster (RAC) Databases in Oracle Fusion Applications</h3>
<div>
<p>If the Oracle Fusion Applications environment was installed using Real Application Clusters (RAC), refer to the <span><span id="GUID-38BF8A7F-7A17-4062-B6B2-74ECB81BA559__TDPRC"><cite>Oracle Database 2 Day + Real Application Clusters Guide</cite></span></span>:</p>
<pre dir="ltr">
</pre>
<p>The sections below provide a few initial parameters and tips on using the Automatic Workload Repository (AWR) during any troubleshooting sessions.</p>
<p>RAC supports the transparent deployment of a single database across a cluster of servers, providing fault tolerance from hardware failures or planned outages in terms of availability, scalability, and low-cost computing.</p>
<div class="section">
<p class="subhead3">Initial Setting</p>
</div>
<!-- class="section" -->
<ul style="list-style-type: disc;">
<li>
<p>The network between the nodes of a RAC cluster must be private.</p>
</li>
<li>
<p>Supported links: Gigabit Ethernet and InfiniBand</p>
</li>
<li>
<p>Supported transport protocols: UDP or RDS</p>
</li>
<li>
<p>Use multiple or dual-ported Network Interface Cards (NICs) for redundancy and increase bandwidth with NIC bonding.</p>
</li>
<li>
<p>Set these parameters with respect to the ORACLE/OS release for Interconnect performance.</p>
</li>
</ul>
<pre dir="ltr">
net.core.rmem_default = 262144
net.core.rmem_max = 262144
net.core.wmem_default = 262144
net.core.wmem_max = 262144
</pre>
<div class="section">
<p class="subhead3">Troubleshooting</p>
</div>
<!-- class="section" -->
<p>Use this information to identify if proper interconnect is used and picked up by ClusterWare.</p>
<ul style="list-style-type: disc;">
<li>
<p>To identify the interconnect:</p>
<pre dir="ltr">
show parameter cluster_interconnects
or
select name,ip_address,is_public from v$cluster_interconnects
</pre>
<p>The Alert log will have an entry similar to this:</p>
<pre dir="ltr">
Cluster communication is configured to use the following interface(s) for this instance
 123.45.67.89
cluster interconnect IPC version:Oracle UDP/IP (generic)
</pre></li>
<li>
<p>Identify network and contention issues.</p>
<p>Check for "gc cr lost blocks" wait event in Automatic Workload Repository (AWR)/sysstats.</p>
<p>If found, check for these errors on the NIC:</p>
<ul style="list-style-type: disc;">
<li>
<p>Dropped packets/fragments</p>
</li>
<li>
<p>Buffer overflows</p>
</li>
<li>
<p>Packet reassembly failures or timeouts</p>
</li>
<li>
<p>TX/RX errors</p>
</li>
</ul>
<p>Use these commands to find any errors:</p>
<pre dir="ltr">
netstat -s 
Ifconfig -a
ORADEBUG
</pre></li>
<li>
<p>Identify Interconnect performance from AWR.</p>
<ul style="list-style-type: disc;">
<li>
<p>Under <span class="bold">Global Cache and Enqueue Services - Workload Characteristics</span></p>
<p>Avg global cache cr block receive time (ms): should be &lt;=15 ms</p>
</li>
<li>
<p><span class="bold">Global Cache and Enqueue Services - Messaging Statistics</span></p>
<p>Avg message sent queue time on ksxp (ms): should be &lt;1 ms</p>
</li>
<li>
<p>Under <span class="bold">Interconnect Ping Latency Stats</span></p>
<p>Avg Latency 8K msg should be close to Avg Latency 500B msg.</p>
</li>
</ul>
</li>
<li>
<p>These wait events from AWR and sysstat can indicate contention related to RAC.</p>
<pre dir="ltr">
GC current block busy
GV cr block busy
GC current buffer busy
GC buffer busy acquire/release
</pre>
<p>See the <span class="italic"><span id="GUID-38BF8A7F-7A17-4062-B6B2-74ECB81BA559__RACAD"><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></span> for a complete list.</p>
<p>These wait events in the AWR indicate that there might be a Hot Block that is causing these wait events. From the AWR Segment Statistics, the objects can be found.</p>
<pre dir="ltr">
Enq:TX Index Contention
Gc buffer busy
Gc current block busy
Gc current split
</pre>
<p>This issue will be noticed if multiple sessions are inserting into a single object or are using a sequence, and the indexed column is sequentially increasing. To address the specific issues:</p>
<ul style="list-style-type: disc;">
<li>
<p>Identify the indexes and Global Hash Partition them.</p>
</li>
<li>
<p>Increase the Sequence Cache if ordering is not a problem.</p>
</li>
</ul>
</li>
</ul>
</div>
</div>
<a id="OASAD2155"></a>
<div class="props_rev_3"><a id="GUID-E8EAD028-8E96-4EE6-94F2-236F29D6B5B0"></a>
<h3 id="OASAD-GUID-E8EAD028-8E96-4EE6-94F2-236F29D6B5B0" class="sect3"><span class="enumeration_section">6.3.7</span> Optimize SQL Statements</h3>
<div>
<p>When Oracle Database executes a SQL statement, the query optimizer (also called the optimizer) first determines the best and most efficient way to retrieve the results. It compares the cost of all possible approaches and chooses the approach with the least cost. The access method for physically executing a SQL statement is called an execution plan, which the optimizer is responsible for generating. The determination of an execution plan is an important step in the processing of any SQL statement, and can greatly affect execution time.</p>
<p>See the Tuning SQL Statements section in the <span class="italic"><span id="GUID-E8EAD028-8E96-4EE6-94F2-236F29D6B5B0__TDPPT"><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></span> for details on:</p>
<ul style="list-style-type: disc;">
<li>
<p>Identifying High-Load SQL Statements</p>
</li>
<li>
<p>Tuning SQL Statements</p>
</li>
<li>
<p>Optimizing Data Access Paths</p>
</li>
</ul>
<p>Oracle Fusion Applications use Cost Based Optimization (CBO) to choose the most efficient execution plan for SQL statements. Using this approach, the optimizer determines the most optimal execution plan by costing available access paths and factoring information based on statistics for the schema objects accessed by the SQL statement:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-86EB11C8-F174-431E-915F-31A57FF58179">Collect Optimizer Statistics</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-1A0C781F-401B-48B5-AAC7-6DAD23889191">Pin Packages and Cursors</a></p>
</li>
</ul>
</div>
<a id="OASAD65700"></a><a id="OASAD65701"></a><a id="OASAD65702"></a><a id="OASAD65777"></a><a id="OASAD65703"></a><a id="OASAD65778"></a><a id="OASAD65704"></a><a id="OASAD65699"></a>
<div class="sect4"><a id="GUID-86EB11C8-F174-431E-915F-31A57FF58179"></a>
<h4 id="OASAD-GUID-86EB11C8-F174-431E-915F-31A57FF58179" class="sect4"><span class="enumeration_section">6.3.7.1</span> Collect Optimizer Statistics</h4>
<div>
<p>For the query optimizer to produce an optimal execution plan, the statistics in the data dictionary should accurately reflect the volume and data distribution of the tables and indexes. To this end, database statistics should be refreshed periodically. However, that does not necessarily imply that statistics should be gathered frequently. Systems that are close to going live typically experience inserts of a large amount of data, as data from legacy systems is migrated. In that scenario, the statistics would probably need to be refreshed quite frequently (for instance, after each major load), as large loads could change the data distribution significantly. Once the system reaches steady state, the frequency of statistics collection at the schema and database level should be reduced to approximately once a month. However, statistics on some volatile tables can be gathered as frequently as required.</p>
<p>Oracle Fusion Applications has an automated way of gathering the statistics. It uses <code class="codeph">DBMS_STATS</code> with the <code class="codeph">AutoTask</code> feature. For more information about <code class="codeph">AutoTask</code>, see the Enabling and Disabling Automatic Optimizer Statistics Collection section in the <span><span id="GUID-86EB11C8-F174-431E-915F-31A57FF58179__TDPPT"><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></span>.</p>
<div class="section">
<p class="subhead3">Gather Statistics for Cost Based Optimizer</p>
</div>
<!-- class="section" -->
<p>Oracle Fusion Applications use automatic optimizer statistics collection. That is, the database automatically gathers the optimizer statistics. Automatic statistics eliminates any manual intervention, thereby significantly reducing the onus on a system administrator. For a Data Warehouse (DW) database, optimizer statistics are collected as part of ETL and BI apps, so it is recommended not to use automatic statistics gathering.</p>
<div class="section">
<p class="subhead3">Table Statistics and Number of Distinct Values (NDV)</p>
</div>
<!-- class="section" -->
<p>For versions prior to Oracle 12g, a database performance problem can occur by missing a non-popular value in the sample created from the table, leading to a frequency histogram where the number of buckets is less than the number of values.</p>
<p>To work around this problem, set this entry in <code class="codeph">init.ora</code>:</p>
<pre dir="ltr">
_fix_control='5483301:off','6708183:ON';
</pre>
<div class="section">
<p class="subhead3">Manual Statistics Gathering</p>
</div>
<!-- class="section" -->
<p>Automatic optimizer statistics collection is sufficient for most of the database objects, but in a database that is close to going live or for tables that are modified significantly, manual statistic gathering is needed. In these cases, use the <code class="codeph">DBMS_STATS.GATHER_TABLE_STATS</code> procedure. Do not explicitly set any parameters apart from owner and table_name. All the parameters, such as <code class="codeph">estimate_percent</code>, <code class="codeph">parallel degree</code> and <code class="codeph">method_opt</code>, are globally seeded for Oracle Fusion database tables. Therefore, there is no need to use them when manually gathering the statistics. See <a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-86EB11C8-F174-431E-915F-31A57FF58179__GUID-6EC6867E-D5B4-47BB-B319-6025196DCE6A">Figure 6-1</a>.</p>
<div class="figure" id="GUID-86EB11C8-F174-431E-915F-31A57FF58179__GUID-6EC6867E-D5B4-47BB-B319-6025196DCE6A">
<p class="titleinfigure">Figure 6-1 Gather Optimizer Statistics Page</p>
<br />
<div class="imagecenter"><img class="imagecenter" width="1580" height="640" src="img/GUID-9BDF3C4B-C0E1-4F83-B344-F94DC5B46253-default.jpg" alt="Description of Figure 6-1 follows" title="Description of Figure 6-1 follows" /><br />
<a href="img_text/GUID-9BDF3C4B-C0E1-4F83-B344-F94DC5B46253-default.htm">Description of "Figure 6-1 Gather Optimizer Statistics Page"</a></div>
<br /></div>
<!-- class="figure" -->
<div class="section">
<p class="subhead3">Histograms</p>
</div>
<!-- class="section" -->
<p>All the columns that need a histogram are seeded using <code class="codeph">DBMS_STATS.SET_TABLE_PREFS</code> and the automatic optimizer statistic collection will create histograms for all the pre-identified columns apart from the columns identified by <code class="codeph">DBMS_STATS</code> under size auto. It is possible to use <code class="codeph">DBMS_STATS.SET_TABLE_PREFS</code> to manually seed histograms. See <a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-86EB11C8-F174-431E-915F-31A57FF58179__GUID-8F300809-340B-4132-AD51-7837535CBB93">Figure 6-2</a>:</p>
<div class="figure" id="GUID-86EB11C8-F174-431E-915F-31A57FF58179__GUID-8F300809-340B-4132-AD51-7837535CBB93">
<p class="titleinfigure">Figure 6-2 Add Table Preferences Page</p>
<br />
<div class="imagecenter"><img class="imagecenter" width="1581" height="558" src="img/GUID-2CB5C5E6-48AF-4B98-A3FB-D8866A6F25C0-default.jpg" alt="Description of Figure 6-2 follows" title="Description of Figure 6-2 follows" /><br />
<a href="img_text/GUID-2CB5C5E6-48AF-4B98-A3FB-D8866A6F25C0-default.htm">Description of "Figure 6-2 Add Table Preferences Page"</a></div>
<br /></div>
<!-- class="figure" -->
<div class="section">
<p class="subhead3">MDS DB: Collect database statistics for optimizing the MDS database repository performance</p>
</div>
<!-- class="section" -->
<p>Ensure <code class="codeph">auto-stats</code> collection is enabled.</p>
<p>In most cases, the first 32 characters of <code class="codeph">PATH_FULLNAME</code> in the <code class="codeph">MDS_PATHS</code> table are the same. It is possible to prevent the database putting them in the same section of the histogram by doing the following:</p>
<ol>
<li>
<p>Drop the histogram for <code class="codeph">PATH_FULLNAME</code> column by executing the following as <code class="codeph">system</code>.</p>
<pre dir="ltr">
execute dbms_stats.delete_column_stats(ownname=&gt;'mdsSchemaOwner', tabname=&gt;'MDS_PATHS', colname=&gt;'PATH_FULLNAME', col_stat_type=&gt; 'HISTOGRAM');
</pre></li>
<li>
<p>Set table preferences to exclude collecting histogram for the <code class="codeph">PATH_FULLNAME</code> column.</p>
</li>
</ol>
<pre dir="ltr">
execute dbms_stats.set_table_prefs(mdsSchemaOwner, 'MDS_PATHS', 'METHOD_OPT', 'FOR COLUMNS SIZE 1 PATH_FULLNAME');
</pre></div>
</div>
<a id="OASAD65705"></a>
<div class="props_rev_3"><a id="GUID-1A0C781F-401B-48B5-AAC7-6DAD23889191"></a>
<h4 id="OASAD-GUID-1A0C781F-401B-48B5-AAC7-6DAD23889191" class="sect4"><span class="enumeration_section">6.3.7.2</span> Pin Packages and Cursors</h4>
<div>
<p>Pinning the objects in the shared pool reduces the possibility of ora-4031 error messages, and increases the performance of the OLTP applications.</p>
<p>Objects are cached in a library cache that uses a Least Recently Used (LRU) algorithm to flush the objects. The problem worsens if these large library cache objects are executed only infrequently. That is, if they are loaded into the library cache whenever required if they have aged out of the cache. This causes most of the problems leading to ora-4031 errors and poor performance for UI-specific flows.</p>
<p>Consider a large package, or any object, that has to be loaded into the shared pool. Large PL/SQL objects present particular challenges. The database has to search for free space for the object. If it cannot get enough contiguous space, it will free many small objects to satisfy the request. If several large objects need to be loaded, the database has to throw out many small objects in the shared pool. Finding candidate objects and freeing memory is very costly. These tasks will affect CPU resources.</p>
<p>The same situation applies to SQL statements that are executed occasionally but are very important from a response time perspective. For example, a statement that is part of a CEO's dashboard is executed once every 3 to 4 hours, but it takes a long time for parsing.</p>
<p>A common question asked is how to keep the LRU algorithm from forcing objects out of the shared pool. This is mainly useful in cases where a SQL statement that is very expensive to parse may just be executed once every 12 hours, such as a dashboard SQL statement. But due to the LRU algorithm, the results are flushed before the next execution. In these cases, it may be preferable to pin the cursor so that subsequent parse times are reduced.</p>
<p>The <code class="codeph">DBMS_SHARED_POOL</code> package provides procedures to facilitate this. With this, it is possible to ensure in an easy way, that the specified cursors always remain in the Most Recently Used (MRU) end of the cache. This prevents the cursor from being paged out and then re-parsed upon re-load. The <code class="codeph">DBMS_SHARED_POOL.KEEP</code> procedure is used to pin the cursor and <code class="codeph">DBMS_SHARED_POOL.UNKEEP</code> is used to unpin the cursor.</p>
</div>
</div>
</div>
<a id="OASAD65706"></a>
<div class="props_rev_3"><a id="GUID-C40882F7-F4DA-4FC9-B817-9E655CF40FAE"></a>
<h3 id="OASAD-GUID-C40882F7-F4DA-4FC9-B817-9E655CF40FAE" class="sect3"><span class="enumeration_section">6.3.8</span> Configure the Database Resource Manager</h3>
<div>
<p>To better ensure system stability during periods of high system load and prevent runaway queries, Oracle Database Resource Manager can be enabled on the Oracle Fusion Applications database instance.</p>
<p>For more details about the feature, including an explanation on when enabling this feature is desired, see section Managing Resources with Oracle Database Resource Manager in the <span><span id="GUID-C40882F7-F4DA-4FC9-B817-9E655CF40FAE__TDPPT"><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></span>.</p>
<p>Use the resource manager to:</p>
<ul style="list-style-type: disc;">
<li>
<p>Assign connections to different resource consumer groups.</p>
</li>
<li>
<p>Create directives to manage resource allocations for connections in different resource consumer groups.</p>
</li>
</ul>
<p>The following topics are described:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-155FCBF6-73FE-4BE9-AD4F-8F1B0AE5DF15">Assign Connections to Resource Consumer Groups</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-2EA853DE-0A23-42CE-8F32-664EA15B3C27">Use the Oracle Database Resource Manager</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-884F5B0B-5B9C-4CD5-91EB-0DED2347B89E">Monitor the Resource Manager</a></p>
</li>
</ul>
</div>
<a id="OASAD65707"></a>
<div class="props_rev_3"><a id="GUID-155FCBF6-73FE-4BE9-AD4F-8F1B0AE5DF15"></a>
<h4 id="OASAD-GUID-155FCBF6-73FE-4BE9-AD4F-8F1B0AE5DF15" class="sect4"><span class="enumeration_section">6.3.8.1</span> Assign Connections to Resource Consumer Groups</h4>
<div>
<p>There are multiple ways a connection can be assigned to a resource consumer group. See the for complete details.</p>
<p>See <a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-DFA71948-9688-4C97-BC19-C5D3914525BF__BGBCAEEI" title="Attribute Values">Table 6-1</a> for connection attributes settings for Oracle Fusion Applications.</p>
</div>
</div>
<a id="OASAD65709"></a><a id="OASAD65710"></a><a id="OASAD65711"></a><a id="OASAD65708"></a>
<div class="props_rev_3"><a id="GUID-2EA853DE-0A23-42CE-8F32-664EA15B3C27"></a>
<h4 id="OASAD-GUID-2EA853DE-0A23-42CE-8F32-664EA15B3C27" class="sect4"><span class="enumeration_section">6.3.8.2</span> Use the Oracle Database Resource Manager</h4>
<div>
<p>This section shows how to use the Oracle Database Resource Manager for Oracle Fusion Applications. Connection attribute mappings, and explicit assignment using a database login trigger are used to assign connections to different resource consumer groups. The plan is enabled by default for a newly-provisioned instance. If the upgrade is being done from earlier releases, the scripts listed in topic <a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-2EA853DE-0A23-42CE-8F32-664EA15B3C27__BGBBFJFI">Enable the Resource Plan</a> can be run, to create the same resource plan that is enabled by default in a freshly-provisioned database. The resource plan is called <code class="codeph">FUSIONAPPS_PLAN</code>.</p>
<p>The plan has two resource consumer groups:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">FUSIONAPPS_ONLINE_GROUP</span> - Connections used for servicing ADF UI pages are assigned to this resource group via a login trigger.</p>
</li>
<li>
<p><span class="bold">FUSIONAPPS_BATCH_GROUP</span> - All other connections used by Fusion Applications are assigned to this group.</p>
</li>
</ul>
<div class="section">
<p class="subhead3">Resource Directives</p>
</div>
<!-- class="section" -->
<p>These resource directives are defined:</p>
<ul style="list-style-type: disc;">
<li>
<p>Connections in <code class="codeph">FUSIONAPPS_ONLINE_GROUP</code> get priority for 45% of the CPU. Parallel query is disabled, and any queries consuming more than 120s of CPU or resulting in more than 10GB of I/O will be canceled.</p>
</li>
<li>
<p>Connections in <code class="codeph">FUSIONAPPS_BATCH_GROUP</code> get priority for 35% of the CPU. There are no other resource restrictions.</p>
</li>
<li>
<p>Connections used for <code class="codeph">sysdba</code> activities get priority for 15% of the CPU. There are no other resource restrictions.</p>
</li>
<li>
<p>All non-Oracle Fusion applications connections get priority for 5% of the CPU.</p>
<p>Note that if a particular resource group does not consume all its allocated CPU, the unused CPU can be used by other resource consumer groups.</p>
</li>
</ul>
<div class="section">
<p class="subhead3">Map Connections</p>
</div>
<!-- class="section" -->
<p>To map connections to resource consumer groups, this approach is used:</p>
<ul style="list-style-type: disc;">
<li>
<p>All schemas containing the string <code class="codeph">FUSION</code> are mapped to <code class="codeph">FUSIONAPPS_BATCH_GROUP</code>.</p>
</li>
<li>
<p>A login trigger is used to check connections to schema <code class="codeph">FUSION_RUNTIME</code>. If the connection is coming from an ADF server, assign the connection to <code class="codeph">FUSIONAPPS_ONLINE_GROUP</code>.</p>
</li>
</ul>
<div class="section" id="GUID-2EA853DE-0A23-42CE-8F32-664EA15B3C27__BGBBFJFI">
<p class="subhead3">Enable the Resource Plan</p>
</div>
<!-- class="section" -->
<p>To enable this resource plan, follow these steps:</p>
<ol>
<li>
<p>Run this script using sqlplus as <code class="codeph">sysdba</code> to create the resource plan, the resource consumer groups and the resource directives.</p>
<pre dir="ltr">
begin
  DBMS_RESOURCE_MANAGER.CLEAR_PENDING_AREA();
  DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
 
  begin
    DBMS_RESOURCE_MANAGER.DELETE_PLAN('FUSIONAPPS_PLAN');
  exception
    when others then
      null;
  end;
 
  begin
    dbms_resource_manager.delete_consumer_group(CONSUMER_GROUP =&gt; 'FUSIONAPPS_ONLINE_GROUP');
  exception
    when others then
      null;
  end;
 
  begin
    dbms_resource_manager.delete_consumer_group(CONSUMER_GROUP =&gt; 'FUSIONAPPS_BATCH_GROUP');
  exception
    when others then
      null;
  end;
 
  dbms_resource_manager.create_consumer_group(CONSUMER_GROUP =&gt; 'FUSIONAPPS_ONLINE_GROUP', COMMENT =&gt; 'Consumer Group for online users');
  dbms_resource_manager.create_consumer_group(CONSUMER_GROUP =&gt;'FUSIONAPPS_BATCH_GROUP', COMMENT =&gt; 'Consumer Group for batch');
 
  dbms_resource_manager.create_plan(PLAN =&gt; 'FUSIONAPPS_PLAN',
  COMMENT =&gt; 'Fusion Applications Resource Plan');
 
  dbms_resource_manager.create_plan_directive(
    plan =&gt; 'FUSIONAPPS_PLAN',
    group_or_subplan =&gt; 'FUSIONAPPS_ONLINE_GROUP',
    comment =&gt; 'Online users at level 1',
    mgmt_p1 =&gt; 45,
    parallel_degree_limit_p1 =&gt; 0,
    switch_time =&gt; 120,
    switch_io_megabytes =&gt; 10000,
    switch_group =&gt; 'CANCEL_SQL');
 
  dbms_resource_manager.create_plan_directive(
    plan =&gt; 'FUSIONAPPS_PLAN',
    group_or_subplan =&gt; 'FUSIONAPPS_BATCH_GROUP',
    comment =&gt; 'Batch users at level 1',
    mgmt_p1 =&gt; 35);
 
  dbms_resource_manager.create_plan_directive(
    plan =&gt; 'FUSIONAPPS_PLAN',
    group_or_subplan =&gt; 'SYS_GROUP',
    comment =&gt; 'System administrator group at level 1',
    mgmt_p1 =&gt; 15);
 
  dbms_resource_manager.create_plan_directive(
    plan =&gt; 'FUSIONAPPS_PLAN',
    group_or_subplan =&gt; 'OTHER_GROUPS',
    comment =&gt; 'Other users at level 1',
    mgmt_p1 =&gt; 5);
 
  for rec in (select username from dba_users where username like '%FUSION%') loop
    if (rec.username &lt;&gt; 'FUSION_READ_ONLY') then
      dbms_resource_manager.set_consumer_group_mapping('ORACLE_USER',rec.username,'FUSIONAPPS_BATCH_GROUP');
    end if;
  end loop;
 
  begin
    dbms_resource_manager.set_consumer_group_mapping('ORACLE_USER','SEARCHSYS','FUSIONAPPS_BATCH_GROUP');
  exception
    when others then
      null;
  end;
 
  DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
  DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
  DBMS_RESOURCE_MANAGER.CLEAR_PENDING_AREA();
  dbms_resource_manager_privs.grant_switch_consumer_group('PUBLIC','FUSIONAPPS_ONLINE_GROUP',FALSE);
  dbms_resource_manager_privs.grant_switch_consumer_group('PUBLIC','FUSIONAPPS_BATCH_GROUP',FALSE);
end;
/
</pre></li>
<li>
<p>As <code class="codeph">sysdba</code>, issue the following command to enable the resource plan:</p>
<pre dir="ltr">
(if using spfile)
 ALTER SYSTEM SET RESOURCE_MANAGER_PLAN = FUSIONAPPS_PLAN SCOPE = BOTH;
 
(if not using spfile)
 ALTER SYSTEM SET RESOURCE_MANAGER_PLAN = FUSIONAPPS_PLAN;
</pre></li>
<li>
<p>Run this script using sqlplus as <code class="codeph">sysdba</code> to create the login trigger:</p>
<pre dir="ltr">
CREATE OR REPLACE TRIGGER fusion_resource_trigger
   AFTER logon ON fusion_runtime.schema
declare
login_sid pls_integer;
login_program varchar2(40);
old_plan21    varchar2(44);
  begin
 
select 'Y' into login_program from dual where exists
(select program from v$session where audsid=userenv('sessionid') and
  process like 'ApplicationDB%' and
  ( program is not null and
    program not like 'JDBC Thin Client' and
    program not like '%ess_server%' and
    program not like '%soa_server%' and
    program not like '%SearchServer%' and
    program not like '%search_server%' and
    program not like '%odi_server%' and
    program not like '%bi_server%'
    ) );
 
if login_program = 'Y'
then
dbms_session.switch_current_consumer_group('FUSIONAPPS_ONLINE_GROUP',old_plan21,false);
else
null;
end if;
EXCEPTION
when NO_DATA_FOUND
then
null;
  end;
  /
</pre></li>
<li>
<p>If applicable, change the <code class="codeph">init.ora</code> parameter to enable the resource plan:</p>
<pre dir="ltr">
RESOURCE_MANAGER_PLAN = FUSIONAPPS_PLAN
</pre></li>
<li>
<p>Bounce all middle tiers.</p>
</li>
</ol>
</div>
</div>
<a id="OASAD65712"></a>
<div class="props_rev_3"><a id="GUID-884F5B0B-5B9C-4CD5-91EB-0DED2347B89E"></a>
<h4 id="OASAD-GUID-884F5B0B-5B9C-4CD5-91EB-0DED2347B89E" class="sect4"><span class="enumeration_section">6.3.8.3</span> Monitor the Resource Manager</h4>
<div>
<p>For details, see the <span class="italic"><span><cite>Oracle Database Administrator's Guide</cite></span></span>. In particular, <span class="bold">v$rsrc_consumer_groups</span> provides information on CPU wait time and the number of SQL statements canceled.</p>
<p><a href="http://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;doctype=REFERENCE&amp;id=1338988.1" target="_blank">Scripts and Tips for Monitoring CPU Resource Manager</a>, which is note ID 1338988.1 in My Oracle Support, also has information about monitoring CPU usage for different resource consumer groups. If a resource consumer group is spending significant time waiting for CPU, review the resource directives and see if the waits are expected and if any adjustments are needed.</p>
</div>
</div>
</div>
<a id="OASAD65713"></a>
<div class="props_rev_3"><a id="GUID-FFE0B40D-B8DD-4060-A2A3-DFDE781C3413"></a>
<h3 id="OASAD-GUID-FFE0B40D-B8DD-4060-A2A3-DFDE781C3413" class="sect3"><span class="enumeration_section">6.3.9</span> Tune the PS_TXN Table in the FUSION Schema</h3>
<div>
<p>Oracle Fusion Applications use the <code class="codeph">PS_TXN</code> table to store the intermediate processing state. When there are many concurrent users, this table receives a high number of inserts and could suffer from concurrency issues. To detect this contention issue, check the wait event "enq: HW contention" in the AWR report of the database.</p>
<p>To alleviate the contention, follow the steps outlined in the DocID 1444959.1 on <a href="https://support.oracle.com" target="_blank">My Oracle Support</a> .</p>
</div>
</div>
<a id="OASAD65714"></a>
<div class="props_rev_3"><a id="GUID-93F37EA2-8075-42DE-9CA5-ACEA2F37A8A2"></a>
<h3 id="OASAD-GUID-93F37EA2-8075-42DE-9CA5-ACEA2F37A8A2" class="sect3"><span class="enumeration_section">6.3.10</span> Optimize Maintenance Windows</h3>
<div>
<p>By default, Oracle enables various AUTOTASK clients and preconfigures maintenance windows that can be optimized to reduce unnecessary overhead. The following topics are discussed:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-FB8D129D-38AF-4340-A55F-6856748966A0">Disable AUTOTASK</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-0E9E13D6-BD1C-4EB1-8DE3-C9A0C4CE70CD">Adjust Default Maintenance Windows</a></p>
</li>
</ul>
</div>
<a id="OASAD65715"></a>
<div class="props_rev_3"><a id="GUID-FB8D129D-38AF-4340-A55F-6856748966A0"></a>
<h4 id="OASAD-GUID-FB8D129D-38AF-4340-A55F-6856748966A0" class="sect4"><span class="enumeration_section">6.3.10.1</span> Disable AUTOTASK</h4>
<div>
<p>Starting with Oracle Release 11.2.0.2, these AUTOTASKs should be evaluated. It is recommended that they be disabled if the respective features are not being used.</p>
<ul style="list-style-type: disc;">
<li>
<p>AUTO SPACE ADVISOR</p>
</li>
<li>
<p>SQL TUNING ADVISOR</p>
</li>
</ul>
<p>The syntax for disabling these advisors is:</p>
<ul style="list-style-type: disc;">
<li>
<p>execute <code class="codeph">dbms_auto_task_admin.disable(client_name =&gt; 'auto space advisor',operation =&gt; NULL, window_name =&gt; NULL);</code></p>
</li>
<li>
<p>execute <code class="codeph">dbms_auto_task_admin.disable(client_name =&gt; 'sql tuning advisor',operation =&gt; NULL, window_name =&gt; NULL);</code></p>
</li>
</ul>
</div>
</div>
<a id="OASAD65716"></a>
<div class="props_rev_3"><a id="GUID-0E9E13D6-BD1C-4EB1-8DE3-C9A0C4CE70CD"></a>
<h4 id="OASAD-GUID-0E9E13D6-BD1C-4EB1-8DE3-C9A0C4CE70CD" class="sect4"><span class="enumeration_section">6.3.10.2</span> Adjust Default Maintenance Windows</h4>
<div>
<p>Starting with Oracle Release 11.2.0.2, various weekday and weekend windows are preconfigured with durations of 4 and 20 hours respectively. These windows should be adjusted to run during time frames with minimal application workloads. In addition, the weekend windows should be reduced from the default configuration to a duration lower than the "byhour" value defined in the maintenance window's "repeat interval" settings. These values can be reviewed by querying the <code class="codeph">DBA_SCHEDULER_WINDOWS</code> view. A suggested maintenance window configuration is to enable both the <code class="codeph">WEEKNIGHT_WINDOW</code> and <code class="codeph">WEEKEND_WINDOW</code> with a duration of 4 hours each.</p>
<p>Example syntax for how to reduce the duration for maintenance windows is:</p>
<ul style="list-style-type: disc;">
<li>
<p>execute <code class="codeph">dbms_scheduler.set_attribute(name =&gt; WEEKEND_WINDOW', attribute =&gt; 'duration', value =&gt; '0 04:0:0.0');</code></p>
</li>
<li>
<p>execute <code class="codeph">dbms_scheduler.set_attribute(name =&gt; WEEKNIGHT_WINDOW', attribute =&gt; 'duration', value =&gt; '0 04:0:0.0');</code></p>
</li>
</ul>
</div>
</div>
</div>
<a id="OASAD65717"></a>
<div class="props_rev_3"><a id="GUID-98ABBA63-99F5-4979-B261-DA4093827D48"></a>
<h3 id="OASAD-GUID-98ABBA63-99F5-4979-B261-DA4093827D48" class="sect3"><span class="enumeration_section">6.3.11</span> Reduce Connection Creation Originating from SOA Server</h3>
<div>
<p>With the default settings, connection creations originated from the different SOA servers may be seen in each domain, even if the environment is idle. These connections are opened, used and then closed. Under high load, these connection requests could cause performance issues.</p>
<p>To reduce the number of connection creations:</p>
<ol>
<li>
<p>Open the WebLogic console for each domain.</p>
</li>
<li>
<p>Uncheck the "Remove Infected Connections Enabled" checkbox under the "Connection Pool" tab for the following data sources:</p>
</li>
</ol>
<ul style="list-style-type: disc;">
<li>
<p>EDNDataSource</p>
</li>
<li>
<p>EDNLocalTxDataSource</p>
</li>
<li>
<p>EDNLocalTxSource</p>
</li>
<li>
<p>EDNSource</p>
</li>
<li>
<p>SOADataSource</p>
</li>
<li>
<p>SOALocalTxDataSource</p>
</li>
<li>
<p>mds-soa</p>
</li>
</ul>
</div>
</div>
</div>
<a id="OASAD762"></a>
<div class="props_rev_3"><a id="GUID-89F47D71-AACF-41D5-8EF4-F184958EF328"></a>
<h2 id="OASAD-GUID-89F47D71-AACF-41D5-8EF4-F184958EF328" class="sect2"><span class="enumeration_section">6.4</span> Test Oracle Database Changes</h2>
<div>
<p>Oracle Real Application Testing makes possible to perform real-world testing of Oracle Database. By capturing production workloads and assessing the impact of system changes on a test system before production deployment, Oracle Real Application Testing minimizes the risk of instabilities associated with changes.</p>
<p>Tasks for testing database changes include:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-70607A31-A8DB-445E-8C72-DC7BB6CCF346">Use the SQL Performance Analyzer</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-BE435E63-B537-4152-876A-BB286881CA45">Use Database Replay</a></p>
</li>
<li>
<p><a href="GUID-63CDDA6B-4DAE-4C6D-8141-C48769254F17.htm#GUID-D90F64B6-B627-4E72-97BD-7EA943D0D2FE">Manage Test Data Management</a></p>
</li>
</ul>
</div>
<a id="OASAD764"></a>
<div class="props_rev_3"><a id="GUID-70607A31-A8DB-445E-8C72-DC7BB6CCF346"></a>
<h3 id="OASAD-GUID-70607A31-A8DB-445E-8C72-DC7BB6CCF346" class="sect3"><span class="enumeration_section">6.4.1</span> Use the SQL Performance Analyzer</h3>
<div>
<p>System changes (such as a upgrading a database or adding an index) may cause changes to execution plans of SQL statements, resulting in a significant impact on SQL performance. SQL Performance Analyzer automates the process of assessing the overall effect of a change on the full SQL workload by identifying performance divergence for each SQL statement.</p>
<p>See section SQL Performance Analyzer in the for details on:</p>
<ul style="list-style-type: disc;">
<li>
<p>Creating an Analysis Task</p>
</li>
<li>
<p>Creating a Pre-Change SQL Trial</p>
</li>
<li>
<p>Creating a Post-Change SQL Trial</p>
</li>
<li>
<p>Comparing SQL Trials</p>
</li>
<li>
<p>Testing a Database Upgrade</p>
</li>
</ul>
</div>
</div>
<a id="OASAD763"></a>
<div class="props_rev_3"><a id="GUID-BE435E63-B537-4152-876A-BB286881CA45"></a>
<h3 id="OASAD-GUID-BE435E63-B537-4152-876A-BB286881CA45" class="sect3"><span class="enumeration_section">6.4.2</span> Use Database Replay</h3>
<div>
<p>Database Replay can be used to capture a workload on the production system and replay it on a test system with the exact timing, concurrency, and transaction characteristics of the original workload. This makes possible to test the effects of a system change without affecting the production system.</p>
<p>See section Database Replay in the for details on:</p>
<ul style="list-style-type: disc;">
<li>
<p>Capturing a Database Workload</p>
</li>
<li>
<p>Preprocessing a Database Workload</p>
</li>
<li>
<p>Replaying a Database Workload</p>
</li>
<li>
<p>Analyzing Captured and Replayed Workloads</p>
</li>
<li>
<p>Using Workload Intelligence</p>
</li>
<li>
<p>Using Consolidated Database Replay</p>
</li>
<li>
<p>Using Workload Scale-Up</p>
</li>
</ul>
</div>
</div>
<a id="OASAD6413"></a>
<div class="props_rev_3"><a id="GUID-D90F64B6-B627-4E72-97BD-7EA943D0D2FE"></a>
<h3 id="OASAD-GUID-D90F64B6-B627-4E72-97BD-7EA943D0D2FE" class="sect3"><span class="enumeration_section">6.4.3</span> Manage Test Data Management</h3>
<div>
<p>Oracle Database offers test data management features that make possible to:</p>
<ul style="list-style-type: disc;">
<li>
<p>Store the list of applications, tables, and relationships between table columns using Application Data Modeling.</p>
</li>
<li>
<p>Replicate information that pertains only to a particular site using data subsetting.</p>
</li>
<li>
<p>Replace sensitive data from the production system with fictitious data that can be used during testing using Oracle Data Masking.</p>
</li>
</ul>
<p>See section Test Data Management in the for details on:</p>
<ul style="list-style-type: disc;">
<li>
<p>Application Data Models</p>
</li>
<li>
<p>Data Subsetting</p>
</li>
<li>
<p>Masking Sensitive Data</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment10">
<tr>
<td class="cellalignment17">
<table class="cellalignment15">
<tr>
<td class="cellalignment14"><a href="GUID-CDC7FEB0-D101-420E-A8B4-7F07DCDEAA80.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment14"><a href="GUID-E16F47C0-6415-4D24-B68F-2DDA4C462C1B.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2011, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment19">
<table class="cellalignment13">
<tr>
<td class="cellalignment14"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment14"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
